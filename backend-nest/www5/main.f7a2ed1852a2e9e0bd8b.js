(self.webpackChunkSPA=self.webpackChunkSPA||[]).push([[179],{8255:t=>{function e(t){return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}e.keys=()=>[],e.resolve=e,e.id=8255,t.exports=e},9691:(t,e,n)=>{"use strict";n.d(e,{c:()=>h});var i=n(1843);let r;const s=t=>{if(void 0===r){const e=void 0!==t.style.webkitAnimationName;r=void 0===t.style.animationName&&e?"-webkit-":""}return r},o=(t,e,n)=>{const i=e.startsWith("animation")?s(t):"";t.style.setProperty(i+e,n)},a=(t,e)=>{const n=e.startsWith("animation")?s(t):"";t.style.removeProperty(n+e)},l=[],c=(t=[],e)=>{if(void 0!==e){const n=Array.isArray(e)?e:[e];return[...t,...n]}return t},h=t=>{let e,n,r,h,u,d,f,p,g,m,v,y,_,b=[],w=[],C=[],x=!1,S={},k=[],T=[],E={},O=0,P=!1,A=!1,M=!0,I=!1,D=!0;const R=t,L=[],F=[],j=[],N=[],B=[],$=[],z=[],V=[],G=[],U=[],H="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,W="function"==typeof Element&&"function"==typeof Element.prototype.animate&&H,X=(t,e)=>((e&&e.oneTimeCallback?F:L).push({c:t,o:e}),_),q=()=>{if(W)U.forEach(t=>{t.cancel()}),U.length=0;else{const t=j.slice();(0,i.r)(()=>{t.forEach(t=>{a(t,"animation-name"),a(t,"animation-duration"),a(t,"animation-timing-function"),a(t,"animation-iteration-count"),a(t,"animation-delay"),a(t,"animation-play-state"),a(t,"animation-fill-mode"),a(t,"animation-direction")})})}},Y=()=>{B.forEach(t=>{t&&t.parentNode&&t.parentNode.removeChild(t)}),B.length=0},K=()=>void 0!==u?u:f?f.getFill():"both",Z=()=>void 0!==g?g:void 0!==d?d:f?f.getDirection():"normal",Q=()=>P?"linear":void 0!==r?r:f?f.getEasing():"linear",J=()=>A?0:void 0!==m?m:void 0!==n?n:f?f.getDuration():0,tt=()=>void 0!==h?h:f?f.getIterations():1,et=()=>void 0!==v?v:void 0!==e?e:f?f.getDelay():0,nt=()=>{0!==O&&(O--,0===O&&((()=>{ht(),V.forEach(t=>t()),G.forEach(t=>t());const t=M?1:0,e=k,n=T,i=E;j.forEach(t=>{const r=t.classList;e.forEach(t=>r.add(t)),n.forEach(t=>r.remove(t));for(const e in i)i.hasOwnProperty(e)&&o(t,e,i[e])}),L.forEach(e=>e.c(t,_)),F.forEach(e=>e.c(t,_)),F.length=0,D=!0,M&&(I=!0),M=!0})(),f&&f.animationFinish()))},it=(e=!0)=>{(()=>{$.forEach(t=>t()),z.forEach(t=>t());const t=w,e=C,n=S;j.forEach(i=>{const r=i.classList;t.forEach(t=>r.add(t)),e.forEach(t=>r.remove(t));for(const t in n)n.hasOwnProperty(t)&&o(i,t,n[t])})})(),b.length>0&&(W?(j.forEach(t=>{const e=t.animate(b,{id:R,delay:et(),duration:J(),easing:Q(),iterations:tt(),fill:K(),direction:Z()});e.pause(),U.push(e)}),U.length>0&&(U[0].onfinish=()=>{nt()})):((e=!0)=>{Y();const n=((r=b).forEach(t=>{for(const e in t)if(t.hasOwnProperty(e)){const n=t[e];if("easing"===e)t["animation-timing-function"]=n,delete t[e];else{const i=e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();i!==e&&(t[i]=n,delete t[e])}}}),r);var r;j.forEach(r=>{if(n.length>0){const a=((t=[])=>t.map(t=>{const e=t.offset,n=[];for(const i in t)t.hasOwnProperty(i)&&"offset"!==i&&n.push(`${i}: ${t[i]};`);return`${100*e}% { ${n.join(" ")} }`}).join(" "))(n);y=void 0!==t?t:(t=>{let e=l.indexOf(t);return e<0&&(e=l.push(t)-1),`ion-animation-${e}`})(a);const c=((t,e,n)=>{const i=(t=>{const e=t.getRootNode();return e.head||e})(n),r=s(n),o=i.querySelector("#"+t);if(o)return o;const a=(n.ownerDocument||document).createElement("style");return a.id=t,a.textContent=`@${r}keyframes ${t} { ${e} } @${r}keyframes ${t}-alt { ${e} }`,i.appendChild(a),a})(y,a,r);B.push(c),o(r,"animation-duration",`${J()}ms`),o(r,"animation-timing-function",Q()),o(r,"animation-delay",`${et()}ms`),o(r,"animation-fill-mode",K()),o(r,"animation-direction",Z());const h=tt()===1/0?"infinite":tt().toString();o(r,"animation-iteration-count",h),o(r,"animation-play-state","paused"),e&&o(r,"animation-name",`${c.id}-alt`),(0,i.r)(()=>{o(r,"animation-name",c.id||null)})}})})(e)),x=!0},rt=t=>{if(t=Math.min(Math.max(t,0),.9999),W)U.forEach(e=>{e.currentTime=e.effect.getComputedTiming().delay+J()*t,e.pause()});else{const e=`-${J()*t}ms`;j.forEach(t=>{b.length>0&&(o(t,"animation-delay",e),o(t,"animation-play-state","paused"))})}},st=t=>{U.forEach(t=>{t.effect.updateTiming({delay:et(),duration:J(),easing:Q(),iterations:tt(),fill:K(),direction:Z()})}),void 0!==t&&rt(t)},ot=(t=!0,e)=>{(0,i.r)(()=>{j.forEach(n=>{o(n,"animation-name",y||null),o(n,"animation-duration",`${J()}ms`),o(n,"animation-timing-function",Q()),o(n,"animation-delay",void 0!==e?`-${e*J()}ms`:`${et()}ms`),o(n,"animation-fill-mode",K()||null),o(n,"animation-direction",Z()||null);const r=tt()===1/0?"infinite":tt().toString();o(n,"animation-iteration-count",r),t&&o(n,"animation-name",`${y}-alt`),(0,i.r)(()=>{o(n,"animation-name",y||null)})})})},at=(t=!1,e=!0,n)=>(t&&N.forEach(i=>{i.update(t,e,n)}),W?st(n):ot(e,n),_),lt=()=>{x&&(W?U.forEach(t=>{t.pause()}):j.forEach(t=>{o(t,"animation-play-state","paused")}))},ct=()=>{p=void 0,nt()},ht=()=>{p&&clearTimeout(p)},ut=t=>new Promise(e=>{t&&t.sync&&(A=!0,X(()=>A=!1,{oneTimeCallback:!0})),x||it(),I&&(W?(rt(0),st()):ot(),I=!1),D&&(O=N.length+1,D=!1),X(()=>e(),{oneTimeCallback:!0}),N.forEach(t=>{t.play()}),W?(U.forEach(t=>{t.play()}),0!==b.length&&0!==j.length||nt()):(()=>{if(ht(),(0,i.r)(()=>{j.forEach(t=>{b.length>0&&o(t,"animation-play-state","running")})}),0===b.length||0===j.length)nt();else{const t=et()||0,e=J()||0,n=tt()||1;isFinite(n)&&(p=setTimeout(ct,t+e*n+100)),((t,e)=>{let n;const r={passive:!0},s=e=>{t===e.target&&(n&&n(),ht(),(0,i.r)(()=>{j.forEach(t=>{a(t,"animation-duration"),a(t,"animation-delay"),a(t,"animation-play-state")}),(0,i.r)(nt)}))};t&&(t.addEventListener("webkitAnimationEnd",s,r),t.addEventListener("animationend",s,r),n=()=>{t.removeEventListener("webkitAnimationEnd",s,r),t.removeEventListener("animationend",s,r)})})(j[0])}})()}),dt=(t,e)=>{const n=b[0];return void 0===n||void 0!==n.offset&&0!==n.offset?b=[{offset:0,[t]:e},...b]:n[t]=e,_};return _={parentAnimation:f,elements:j,childAnimations:N,id:R,animationFinish:nt,from:dt,to:(t,e)=>{const n=b[b.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?b=[...b,{offset:1,[t]:e}]:n[t]=e,_},fromTo:(t,e,n)=>dt(t,e).to(t,n),parent:t=>(f=t,_),play:ut,pause:()=>(N.forEach(t=>{t.pause()}),lt(),_),stop:()=>{N.forEach(t=>{t.stop()}),x&&(q(),x=!1),P=!1,A=!1,D=!0,g=void 0,m=void 0,v=void 0,O=0,I=!1,M=!0},destroy:t=>(N.forEach(e=>{e.destroy(t)}),(t=>{q(),t&&Y()})(t),j.length=0,N.length=0,b.length=0,L.length=0,F.length=0,x=!1,D=!0,_),keyframes:t=>(b=t,_),addAnimation:t=>{if(null!=t)if(Array.isArray(t))for(const e of t)e.parent(_),N.push(e);else t.parent(_),N.push(t);return _},addElement:t=>{if(null!=t)if(1===t.nodeType)j.push(t);else if(t.length>=0)for(let e=0;e<t.length;e++)j.push(t[e]);else console.error("Invalid addElement value");return _},update:at,fill:t=>(u=t,at(!0),_),direction:t=>(d=t,at(!0),_),iterations:t=>(h=t,at(!0),_),duration:t=>(W||0!==t||(t=1),n=t,at(!0),_),easing:t=>(r=t,at(!0),_),delay:t=>(e=t,at(!0),_),getWebAnimations:()=>U,getKeyframes:()=>b,getFill:K,getDirection:Z,getDelay:et,getIterations:tt,getEasing:Q,getDuration:J,afterAddRead:t=>(V.push(t),_),afterAddWrite:t=>(G.push(t),_),afterClearStyles:(t=[])=>{for(const e of t)E[e]="";return _},afterStyles:(t={})=>(E=t,_),afterRemoveClass:t=>(T=c(T,t),_),afterAddClass:t=>(k=c(k,t),_),beforeAddRead:t=>($.push(t),_),beforeAddWrite:t=>(z.push(t),_),beforeClearStyles:(t=[])=>{for(const e of t)S[e]="";return _},beforeStyles:(t={})=>(S=t,_),beforeRemoveClass:t=>(C=c(C,t),_),beforeAddClass:t=>(w=c(w,t),_),onFinish:X,progressStart:(t=!1,e)=>(N.forEach(n=>{n.progressStart(t,e)}),lt(),P=t,x?at(!1,!0,e):it(),_),progressStep:t=>(N.forEach(e=>{e.progressStep(t)}),rt(t),_),progressEnd:(t,e,n)=>(P=!1,N.forEach(i=>{i.progressEnd(t,e,n)}),void 0!==n&&(m=n),I=!1,M=!0,0===t?(g="reverse"===Z()?"normal":"reverse","reverse"===g&&(M=!1),W?(at(),rt(1-e)):(v=(1-e)*J()*-1,at(!1,!1))):1===t&&(W?(at(),rt(e)):(v=e*J()*-1,at(!1,!1))),void 0!==t&&(X(()=>{m=void 0,g=void 0,v=void 0},{oneTimeCallback:!0}),f||ut()),_)}}},6953:(t,e,n)=>{"use strict";n.d(e,{G:()=>o});class i{constructor(t,e,n,i,r){this.id=e,this.name=n,this.disableScroll=r,this.priority=1e6*i+e,this.ctrl=t}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const t=this.ctrl.capture(this.name,this.id,this.priority);return t&&this.disableScroll&&this.ctrl.disableScroll(this.id),t}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class r{constructor(t,e,n,i){this.id=e,this.disable=n,this.disableScroll=i,this.ctrl=t}block(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.disableGesture(t,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const t of this.disable)this.ctrl.enableGesture(t,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const s="backdrop-no-scroll",o=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(t){return new i(this,this.newID(),t.name,t.priority||0,!!t.disableScroll)}createBlocker(t={}){return new r(this,this.newID(),t.disable,!!t.disableScroll)}start(t,e,n){return this.canStart(t)?(this.requestedStart.set(e,n),!0):(this.requestedStart.delete(e),!1)}capture(t,e,n){if(!this.start(t,e,n))return!1;const i=this.requestedStart;let r=-1e4;if(i.forEach(t=>{r=Math.max(r,t)}),r===n){this.capturedId=e,i.clear();const n=new CustomEvent("ionGestureCaptured",{detail:{gestureName:t}});return document.dispatchEvent(n),!0}return i.delete(e),!1}release(t){this.requestedStart.delete(t),this.capturedId===t&&(this.capturedId=void 0)}disableGesture(t,e){let n=this.disabledGestures.get(t);void 0===n&&(n=new Set,this.disabledGestures.set(t,n)),n.add(e)}enableGesture(t,e){const n=this.disabledGestures.get(t);void 0!==n&&n.delete(e)}disableScroll(t){this.disabledScroll.add(t),1===this.disabledScroll.size&&document.body.classList.add(s)}enableScroll(t){this.disabledScroll.delete(t),0===this.disabledScroll.size&&document.body.classList.remove(s)}canStart(t){return void 0===this.capturedId&&!this.isDisabled(t)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(t){const e=this.disabledGestures.get(t);return!!(e&&e.size>0)}newID(){return this.gestureId++,this.gestureId}}},4641:(t,e,n)=>{"use strict";n.r(e),n.d(e,{MENU_BACK_BUTTON_PRIORITY:()=>o,OVERLAY_BACK_BUTTON_PRIORITY:()=>s,blockHardwareBackButton:()=>i,startHardwareBackButton:()=>r});const i=()=>{document.addEventListener("backbutton",()=>{})},r=()=>{const t=document;let e=!1;t.addEventListener("backbutton",()=>{if(e)return;let n=0,i=[];const r=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(t,e){i.push({priority:t,handler:e,id:n++})}}});t.dispatchEvent(r);const s=()=>{if(i.length>0){let t={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};i.forEach(e=>{e.priority>=t.priority&&(t=e)}),e=!0,i=i.filter(e=>e.id!==t.id),(async t=>{try{if(t&&t.handler){const e=t.handler(s);null!=e&&await e}}catch(e){console.error(e)}})(t).then(()=>e=!1)}};s()})},s=100,o=99},1843:(t,e,n)=>{"use strict";n.d(e,{a:()=>s,b:()=>o,c:()=>i,d:()=>u,e:()=>d,f:()=>y,g:()=>a,h:()=>h,i:()=>r,j:()=>f,k:()=>c,l:()=>p,m:()=>v,n:()=>_,o:()=>g,p:()=>m,r:()=>l});const i=(t,e)=>{t.componentOnReady?t.componentOnReady().then(t=>e(t)):l(()=>e(t))},r=(t,e=[])=>{const n={};return e.forEach(e=>{t.hasAttribute(e)&&(null!==t.getAttribute(e)&&(n[e]=t.getAttribute(e)),t.removeAttribute(e))}),n},s=(t,e,n,i)=>{if("undefined"!=typeof window){const r=window,s=r&&r.Ionic&&r.Ionic.config;if(s){const r=s.get("_ael");if(r)return r(t,e,n,i);if(s._ael)return s._ael(t,e,n,i)}}return t.addEventListener(e,n,i)},o=(t,e,n,i)=>{if("undefined"!=typeof window){const r=window,s=r&&r.Ionic&&r.Ionic.config;if(s){const r=s.get("_rel");if(r)return r(t,e,n,i);if(s._rel)return s._rel(t,e,n,i)}}return t.removeEventListener(e,n,i)},a=(t,e=t)=>t.shadowRoot||e,l=t=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(t):"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t),c=t=>!!t.shadowRoot&&!!t.attachShadow,h=t=>{const e=t.closest("ion-item");return e?e.querySelector("ion-label"):null},u=(t,e)=>{let n;const i=t.getAttribute("aria-labelledby"),r=t.id;let s=null!==i&&""!==i.trim()?i:e+"-lbl",o=null!==i&&""!==i.trim()?document.getElementById(i):h(t);return o?(null===i&&(o.id=s),n=o.textContent,o.setAttribute("aria-hidden","true")):""!==r.trim()&&(o=document.querySelector(`label[for="${r}"]`),o&&(""!==o.id?s=o.id:o.id=s=`${r}-lbl`,n=o.textContent)),{label:o,labelId:s,labelText:n}},d=(t,e,n,i,r)=>{if(t||c(e)){let t=e.querySelector("input.aux-input");t||(t=e.ownerDocument.createElement("input"),t.type="hidden",t.classList.add("aux-input"),e.appendChild(t)),t.disabled=r,t.name=n,t.value=i||""}},f=(t,e,n)=>Math.max(t,Math.min(e,n)),p=(t,e)=>{if(!t){const t="ASSERT: "+e;throw console.error(t),new Error(t)}},g=t=>t.timeStamp||Date.now(),m=t=>{if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];return{x:t.clientX,y:t.clientY}}if(void 0!==t.pageX)return{x:t.pageX,y:t.pageY}}return{x:0,y:0}},v=t=>{const e="rtl"===document.dir;switch(t){case"start":return e;case"end":return!e;default:throw new Error(`"${t}" is not a valid value for [side]. Use "start" or "end" instead.`)}},y=(t,e)=>{const n=t._original||t;return{_original:t,emit:_(n.emit.bind(n),e)}},_=(t,e=0)=>{let n;return(...i)=>{clearTimeout(n),n=setTimeout(t,e,...i)}}},4378:(t,e,n)=>{"use strict";n.d(e,{m:()=>u});var i=n(4641),r=n(1843),s=n(7505),o=n(9691);const a=t=>(0,o.c)().duration(t?400:300),l=t=>{let e,n;const i=t.width+8,r=(0,o.c)(),l=(0,o.c)();t.isEndSide?(e=i+"px",n="0px"):(e=-i+"px",n="0px"),r.addElement(t.menuInnerEl).fromTo("transform",`translateX(${e})`,`translateX(${n})`);const c="ios"===(0,s.b)(t),h=c?.2:.25;return l.addElement(t.backdropEl).fromTo("opacity",.01,h),a(c).addAnimation([r,l])},c=t=>{let e,n;const i=(0,s.b)(t),r=t.width;t.isEndSide?(e=-r+"px",n=r+"px"):(e=r+"px",n=-r+"px");const l=(0,o.c)().addElement(t.menuInnerEl).fromTo("transform",`translateX(${n})`,"translateX(0px)"),c=(0,o.c)().addElement(t.contentEl).fromTo("transform","translateX(0px)",`translateX(${e})`),h=(0,o.c)().addElement(t.backdropEl).fromTo("opacity",.01,.32);return a("ios"===i).addAnimation([l,c,h])},h=t=>{const e=(0,s.b)(t),n=t.width*(t.isEndSide?-1:1)+"px",i=(0,o.c)().addElement(t.contentEl).fromTo("transform","translateX(0px)",`translateX(${n})`);return a("ios"===e).addAnimation(i)},u=(()=>{const t=new Map,e=[],n=async t=>(await p(),"start"===t||"end"===t?f(e=>e.side===t&&!e.disabled)||f(e=>e.side===t):null!=t?f(e=>e.menuId===t):f(t=>!t.disabled)||(e.length>0?e[0].el:void 0)),s=async()=>(await p(),u()),o=(e,n)=>{t.set(e,n)},a=t=>{const n=t.side;e.filter(e=>e.side===n&&e!==t).forEach(t=>t.disabled=!0)},u=()=>f(t=>t._isOpen),d=()=>e.some(t=>t.isAnimating),f=t=>{const n=e.find(t);if(void 0!==n)return n.el},p=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(t=>new Promise(e=>(0,r.c)(t,e))));return o("reveal",h),o("push",c),o("overlay",l),"undefined"!=typeof document&&document.addEventListener("ionBackButton",t=>{const e=u();e&&t.detail.register(i.MENU_BACK_BUTTON_PRIORITY,()=>e.close())}),{registerAnimation:o,get:n,getMenus:async()=>(await p(),e.map(t=>t.el)),getOpen:s,isEnabled:async t=>{const e=await n(t);return!!e&&!e.disabled},swipeGesture:async(t,e)=>{const i=await n(e);return i&&(i.swipeGesture=t),i},isAnimating:async()=>(await p(),d()),isOpen:async t=>{if(null!=t){const e=await n(t);return void 0!==e&&e.isOpen()}return void 0!==await s()},enable:async(t,e)=>{const i=await n(e);return i&&(i.disabled=!t),i},toggle:async t=>{const e=await n(t);return!!e&&e.toggle()},close:async t=>{const e=await(void 0!==t?n(t):s());return void 0!==e&&e.close()},open:async t=>{const e=await n(t);return!!e&&e.open()},_getOpenSync:u,_createAnimation:(e,n)=>{const i=t.get(e);if(!i)throw new Error("animation not registered");return i(n)},_register:t=>{e.indexOf(t)<0&&(t.disabled||a(t),e.push(t))},_unregister:t=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},_setOpen:async(t,e,n)=>{if(d())return!1;if(e){const e=await s();e&&t.el!==e&&await e.setOpen(!1,!1)}return t._setOpen(e,n)},_setActiveMenu:a}})()},2322:(t,e,n)=>{"use strict";n.d(e,{B:()=>Vt,C:()=>d,H:()=>L,a:()=>m,b:()=>Ct,c:()=>zt,e:()=>it,f:()=>$t,g:()=>A,h:()=>D,i:()=>nt,j:()=>ut,k:()=>xt,p:()=>p,r:()=>Tt,s:()=>P,w:()=>u});let i,r,s,o=!1,a=!1,l=!1,c=!1,h=!1;const u="undefined"!=typeof window?window:{},d=u.CSS,f=u.document||{head:{}},p={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,i)=>t.addEventListener(e,n,i),rel:(t,e,n,i)=>t.removeEventListener(e,n,i),ce:(t,e)=>new CustomEvent(t,e)},g=(()=>(f.head.attachShadow+"").indexOf("[native")>-1)(),m=t=>Promise.resolve(t),v=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(t){}return!1})(),y=(t,e,n,i)=>{n&&n.map(([n,i,r])=>{const s=b(t,n),o=_(e,r),a=w(n);p.ael(s,i,o,a),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>p.rel(s,i,o,a))})},_=(t,e)=>n=>{try{256&t.$flags$?t.$lazyInstance$[e](n):(t.$queuedListeners$=t.$queuedListeners$||[]).push([e,n])}catch(i){Pt(i)}},b=(t,e)=>4&e?f:8&e?u:16&e?f.body:t,w=t=>0!=(2&t),C="s-id",x="c-id",S="http://www.w3.org/1999/xlink",k=new WeakMap,T=(t,e,n)=>{let i=It.get(t);v&&n?(i=i||new CSSStyleSheet,i.replace(e)):i=e,It.set(t,i)},E=(t,e,n,i)=>{let r=O(e,n),s=It.get(r);if(t=11===t.nodeType?t:f,s)if("string"==typeof s){let n,o=k.get(t=t.head||t);if(o||k.set(t,o=new Set),!o.has(r)){if(t.host&&(n=t.querySelector(`[sty-id="${r}"]`)))n.innerHTML=s;else{if(p.$cssShim$){n=p.$cssShim$.createHostStyle(i,r,s,!!(10&e.$flags$));const t=n["s-sc"];t&&(r=t,o=null)}else n=f.createElement("style"),n.innerHTML=s;t.insertBefore(n,t.querySelector("link"))}o&&o.add(r)}}else t.adoptedStyleSheets.includes(s)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,s]);return r},O=(t,e)=>"sc-"+(e&&32&t.$flags$?t.$tagName$+"-"+e:t.$tagName$),P=t=>Dt.push(t),A=t=>kt(t).$modeName$,M={},I=t=>"object"==(t=typeof t)||"function"===t,D=(t,e,...n)=>{let i=null,r=null,s=null,o=!1,a=!1,l=[];const c=e=>{for(let n=0;n<e.length;n++)i=e[n],Array.isArray(i)?c(i):null!=i&&"boolean"!=typeof i&&((o="function"!=typeof t&&!I(i))&&(i=String(i)),o&&a?l[l.length-1].$text$+=i:l.push(o?R(null,i):i),a=o)};if(c(n),e){e.key&&(r=e.key),e.name&&(s=e.name);{const t=e.className||e.class;t&&(e.class="object"!=typeof t?t:Object.keys(t).filter(e=>t[e]).join(" "))}}if("function"==typeof t)return t(null===e?{}:e,l,F);const h=R(t,null);return h.$attrs$=e,l.length>0&&(h.$children$=l),h.$key$=r,h.$name$=s,h},R=(t,e)=>({$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),L={},F={forEach:(t,e)=>t.map(j).forEach(e),map:(t,e)=>t.map(j).map(e).map(N)},j=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),N=t=>{if("function"==typeof t.vtag){const e=Object.assign({},t.vattrs);return t.vkey&&(e.key=t.vkey),t.vname&&(e.name=t.vname),D(t.vtag,e,...t.vchildren||[])}const e=R(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},B=(t,e,n,i,r,s)=>{if(n!==i){let a=Ot(t,e),l=e.toLowerCase();if("class"===e){const e=t.classList,r=z(n),s=z(i);e.remove(...r.filter(t=>t&&!s.includes(t))),e.add(...s.filter(t=>t&&!r.includes(t)))}else if("style"===e){for(const e in n)i&&null!=i[e]||(e.includes("-")?t.style.removeProperty(e):t.style[e]="");for(const e in i)n&&i[e]===n[e]||(e.includes("-")?t.style.setProperty(e,i[e]):t.style[e]=i[e])}else if("key"===e);else if("ref"===e)i&&i(t);else if(a||"o"!==e[0]||"n"!==e[1]){const c=I(i);if((a||c&&null!==i)&&!r)try{if(t.tagName.includes("-"))t[e]=i;else{let r=null==i?"":i;"list"===e?a=!1:null!=n&&t[e]==r||(t[e]=r)}}catch(o){}let h=!1;l!==(l=l.replace(/^xlink\:?/,""))&&(e=l,h=!0),null==i||!1===i?!1===i&&""!==t.getAttribute(e)||(h?t.removeAttributeNS(S,e):t.removeAttribute(e)):(!a||4&s||r)&&!c&&(i=!0===i?"":i,h?t.setAttributeNS(S,e,i):t.setAttribute(e,i))}else e="-"===e[2]?e.slice(3):Ot(u,l)?l.slice(2):l[2]+e.slice(3),n&&p.rel(t,e,n,!1),i&&p.ael(t,e,i,!1)}},$=/\s/,z=t=>t?t.split($):[],V=(t,e,n,i)=>{const r=11===e.$elm$.nodeType&&e.$elm$.host?e.$elm$.host:e.$elm$,s=t&&t.$attrs$||M,o=e.$attrs$||M;for(i in s)i in o||B(r,i,s[i],void 0,n,e.$flags$);for(i in o)B(r,i,s[i],o[i],n,e.$flags$)},G=(t,e,n,a)=>{let h,u,d,p=e.$children$[n],g=0;if(o||(l=!0,"slot"===p.$tag$&&(i&&a.classList.add(i+"-s"),p.$flags$|=p.$children$?2:1)),null!==p.$text$)h=p.$elm$=f.createTextNode(p.$text$);else if(1&p.$flags$)h=p.$elm$=f.createTextNode("");else{if(c||(c="svg"===p.$tag$),h=p.$elm$=f.createElementNS(c?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&p.$flags$?"slot-fb":p.$tag$),c&&"foreignObject"===p.$tag$&&(c=!1),V(null,p,c),null!=i&&h["s-si"]!==i&&h.classList.add(h["s-si"]=i),p.$children$)for(g=0;g<p.$children$.length;++g)u=G(t,p,g,h),u&&h.appendChild(u);"svg"===p.$tag$?c=!1:"foreignObject"===h.tagName&&(c=!0)}return h["s-hn"]=s,3&p.$flags$&&(h["s-sr"]=!0,h["s-cr"]=r,h["s-sn"]=p.$name$||"",d=t&&t.$children$&&t.$children$[n],d&&d.$tag$===p.$tag$&&t.$elm$&&U(t.$elm$,!1)),h},U=(t,e)=>{p.$flags$|=1;const n=t.childNodes;for(let i=n.length-1;i>=0;i--){const t=n[i];t["s-hn"]!==s&&t["s-ol"]&&(Y(t).insertBefore(t,q(t)),t["s-ol"].remove(),t["s-ol"]=void 0,l=!0),e&&U(t,e)}p.$flags$&=-2},H=(t,e,n,i,r,o)=>{let a,l=t["s-cr"]&&t["s-cr"].parentNode||t;for(l.shadowRoot&&l.tagName===s&&(l=l.shadowRoot);r<=o;++r)i[r]&&(a=G(null,n,r,t),a&&(i[r].$elm$=a,l.insertBefore(a,q(e))))},W=(t,e,n,i,r)=>{for(;e<=n;++e)(i=t[e])&&(r=i.$elm$,et(i),a=!0,r["s-ol"]?r["s-ol"].remove():U(r,!0),r.remove())},X=(t,e)=>t.$tag$===e.$tag$&&("slot"===t.$tag$?t.$name$===e.$name$:t.$key$===e.$key$),q=t=>t&&t["s-ol"]||t,Y=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,K=(t,e)=>{const n=e.$elm$=t.$elm$,i=t.$children$,r=e.$children$,s=e.$tag$,o=e.$text$;let a;null===o?(c="svg"===s||"foreignObject"!==s&&c,"slot"===s||V(t,e,c),null!==i&&null!==r?((t,e,n,i)=>{let r,s,o=0,a=0,l=0,c=0,h=e.length-1,u=e[0],d=e[h],f=i.length-1,p=i[0],g=i[f];for(;o<=h&&a<=f;)if(null==u)u=e[++o];else if(null==d)d=e[--h];else if(null==p)p=i[++a];else if(null==g)g=i[--f];else if(X(u,p))K(u,p),u=e[++o],p=i[++a];else if(X(d,g))K(d,g),d=e[--h],g=i[--f];else if(X(u,g))"slot"!==u.$tag$&&"slot"!==g.$tag$||U(u.$elm$.parentNode,!1),K(u,g),t.insertBefore(u.$elm$,d.$elm$.nextSibling),u=e[++o],g=i[--f];else if(X(d,p))"slot"!==u.$tag$&&"slot"!==g.$tag$||U(d.$elm$.parentNode,!1),K(d,p),t.insertBefore(d.$elm$,u.$elm$),d=e[--h],p=i[++a];else{for(l=-1,c=o;c<=h;++c)if(e[c]&&null!==e[c].$key$&&e[c].$key$===p.$key$){l=c;break}l>=0?(s=e[l],s.$tag$!==p.$tag$?r=G(e&&e[a],n,l,t):(K(s,p),e[l]=void 0,r=s.$elm$),p=i[++a]):(r=G(e&&e[a],n,a,t),p=i[++a]),r&&Y(u.$elm$).insertBefore(r,q(u.$elm$))}o>h?H(t,null==i[f+1]?null:i[f+1].$elm$,n,i,a,f):a>f&&W(e,o,h)})(n,i,e,r):null!==r?(null!==t.$text$&&(n.textContent=""),H(n,null,e,r,0,r.length-1)):null!==i&&W(i,0,i.length-1),c&&"svg"===s&&(c=!1)):(a=n["s-cr"])?a.parentNode.textContent=o:t.$text$!==o&&(n.data=o)},Z=t=>{let e,n,i,r,s,o,a=t.childNodes;for(n=0,i=a.length;n<i;n++)if(e=a[n],1===e.nodeType){if(e["s-sr"])for(s=e["s-sn"],e.hidden=!1,r=0;r<i;r++)if(o=a[r].nodeType,a[r]["s-hn"]!==e["s-hn"]||""!==s){if(1===o&&s===a[r].getAttribute("slot")){e.hidden=!0;break}}else if(1===o||3===o&&""!==a[r].textContent.trim()){e.hidden=!0;break}Z(e)}},Q=[],J=t=>{let e,n,i,r,s,o,l=0,c=t.childNodes,h=c.length;for(;l<h;l++){if(e=c[l],e["s-sr"]&&(n=e["s-cr"])&&n.parentNode)for(i=n.parentNode.childNodes,r=e["s-sn"],o=i.length-1;o>=0;o--)n=i[o],n["s-cn"]||n["s-nr"]||n["s-hn"]===e["s-hn"]||(tt(n,r)?(s=Q.find(t=>t.$nodeToRelocate$===n),a=!0,n["s-sn"]=n["s-sn"]||r,s?s.$slotRefNode$=e:Q.push({$slotRefNode$:e,$nodeToRelocate$:n}),n["s-sr"]&&Q.map(t=>{tt(t.$nodeToRelocate$,n["s-sn"])&&(s=Q.find(t=>t.$nodeToRelocate$===n),s&&!t.$slotRefNode$&&(t.$slotRefNode$=s.$slotRefNode$))})):Q.some(t=>t.$nodeToRelocate$===n)||Q.push({$nodeToRelocate$:n}));1===e.nodeType&&J(e)}},tt=(t,e)=>1===t.nodeType?null===t.getAttribute("slot")&&""===e||t.getAttribute("slot")===e:t["s-sn"]===e||""===e,et=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(et)},nt=t=>kt(t).$hostElement$,it=(t,e,n)=>{const i=nt(t);return{emit:t=>rt(i,e,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:t})}},rt=(t,e,n)=>{const i=p.ce(e,n);return t.dispatchEvent(i),i},st=(t,e)=>{e&&!t.$onRenderResolve$&&e["s-p"]&&e["s-p"].push(new Promise(e=>t.$onRenderResolve$=e))},ot=(t,e)=>{if(t.$flags$|=16,!(4&t.$flags$))return st(t,t.$ancestorComponent$),zt(()=>at(t,e));t.$flags$|=512},at=(t,e)=>{const n=t.$lazyInstance$;let i;return e&&(t.$flags$|=256,t.$queuedListeners$&&(t.$queuedListeners$.map(([t,e])=>ft(n,t,e)),t.$queuedListeners$=null),i=ft(n,"componentWillLoad")),i=pt(i,()=>ft(n,"componentWillRender")),pt(i,()=>lt(t,n,e))},lt=async(t,e,n)=>{const i=t.$hostElement$,r=i["s-rc"];n&&(t=>{const e=t.$cmpMeta$,n=t.$hostElement$,i=e.$flags$,r=E(g&&n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$,n);10&i&&(n["s-sc"]=r,n.classList.add(r+"-h"),2&i&&n.classList.add(r+"-s"))})(t),ct(t,e),p.$cssShim$&&p.$cssShim$.updateHost(i),r&&(r.map(t=>t()),i["s-rc"]=void 0);{const e=i["s-p"],n=()=>ht(t);0===e.length?n():(Promise.all(e).then(n),t.$flags$|=4,e.length=0)}},ct=(t,e,n)=>{try{e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,((t,e)=>{const n=t.$hostElement$,c=t.$cmpMeta$,h=t.$vnode$||R(null,null),u=(d=e)&&d.$tag$===L?e:D(null,null,e);var d;if(s=n.tagName,c.$attrsToReflect$&&(u.$attrs$=u.$attrs$||{},c.$attrsToReflect$.map(([t,e])=>u.$attrs$[e]=n[t])),u.$tag$=null,u.$flags$|=4,t.$vnode$=u,u.$elm$=h.$elm$=n.shadowRoot||n,i=n["s-sc"],r=n["s-cr"],o=g&&0!=(1&c.$flags$),a=!1,K(h,u),p.$flags$|=1,l){let t,e,n,i,r,s;J(u.$elm$);let o=0;for(;o<Q.length;o++)t=Q[o],e=t.$nodeToRelocate$,e["s-ol"]||(n=f.createTextNode(""),n["s-nr"]=e,e.parentNode.insertBefore(e["s-ol"]=n,e));for(o=0;o<Q.length;o++)if(t=Q[o],e=t.$nodeToRelocate$,t.$slotRefNode$){for(i=t.$slotRefNode$.parentNode,r=t.$slotRefNode$.nextSibling,n=e["s-ol"];n=n.previousSibling;)if(s=n["s-nr"],s&&s["s-sn"]===e["s-sn"]&&i===s.parentNode&&(s=s.nextSibling,!s||!s["s-nr"])){r=s;break}(!r&&i!==e.parentNode||e.nextSibling!==r)&&e!==r&&(!e["s-hn"]&&e["s-ol"]&&(e["s-hn"]=e["s-ol"].parentNode.nodeName),i.insertBefore(e,r))}else 1===e.nodeType&&(e.hidden=!0)}a&&Z(u.$elm$),p.$flags$&=-2,Q.length=0})(t,e)}catch(c){Pt(c,t.$hostElement$)}return null},ht=t=>{const e=t.$hostElement$,n=t.$lazyInstance$,i=t.$ancestorComponent$;64&t.$flags$?ft(n,"componentDidUpdate"):(t.$flags$|=64,gt(e),ft(n,"componentDidLoad"),t.$onReadyResolve$(e),i||dt()),t.$onInstanceResolve$(e),t.$onRenderResolve$&&(t.$onRenderResolve$(),t.$onRenderResolve$=void 0),512&t.$flags$&&Bt(()=>ot(t,!1)),t.$flags$&=-517},ut=t=>{{const e=kt(t),n=e.$hostElement$.isConnected;return n&&2==(18&e.$flags$)&&ot(e,!1),n}},dt=t=>{gt(f.documentElement),Bt(()=>rt(u,"appload",{detail:{namespace:"ionic"}}))},ft=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(i){Pt(i)}},pt=(t,e)=>t&&t.then?t.then(e):e(),gt=t=>t.classList.add("hydrated"),mt=(t,e,n,i,r,s,o)=>{let a,l,c,h;if(1===s.nodeType){for(a=s.getAttribute(x),a&&(l=a.split("."),l[0]!==o&&"0"!==l[0]||(c={$flags$:0,$hostId$:l[0],$nodeId$:l[1],$depth$:l[2],$index$:l[3],$tag$:s.tagName.toLowerCase(),$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},e.push(c),s.removeAttribute(x),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c,t=c,i&&"0"===c.$depth$&&(i[c.$index$]=c.$elm$))),h=s.childNodes.length-1;h>=0;h--)mt(t,e,n,i,r,s.childNodes[h],o);if(s.shadowRoot)for(h=s.shadowRoot.childNodes.length-1;h>=0;h--)mt(t,e,n,i,r,s.shadowRoot.childNodes[h],o)}else if(8===s.nodeType)l=s.nodeValue.split("."),l[1]!==o&&"0"!==l[1]||(a=l[0],c={$flags$:0,$hostId$:l[1],$nodeId$:l[2],$depth$:l[3],$index$:l[4],$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===a?(c.$elm$=s.nextSibling,c.$elm$&&3===c.$elm$.nodeType&&(c.$text$=c.$elm$.textContent,e.push(c),s.remove(),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c,i&&"0"===c.$depth$&&(i[c.$index$]=c.$elm$))):c.$hostId$===o&&("s"===a?(c.$tag$="slot",s["s-sn"]=l[5]?c.$name$=l[5]:"",s["s-sr"]=!0,i&&(c.$elm$=f.createElement(c.$tag$),c.$name$&&c.$elm$.setAttribute("name",c.$name$),s.parentNode.insertBefore(c.$elm$,s),s.remove(),"0"===c.$depth$&&(i[c.$index$]=c.$elm$)),n.push(c),t.$children$||(t.$children$=[]),t.$children$[c.$index$]=c):"r"===a&&(i?s.remove():(r["s-cr"]=s,s["s-cn"]=!0))));else if(t&&"style"===t.$tag$){const e=R(null,s.textContent);e.$elm$=s,e.$index$="0",t.$children$=[e]}},vt=(t,e)=>{if(1===t.nodeType){let n=0;for(;n<t.childNodes.length;n++)vt(t.childNodes[n],e);if(t.shadowRoot)for(n=0;n<t.shadowRoot.childNodes.length;n++)vt(t.shadowRoot.childNodes[n],e)}else if(8===t.nodeType){const n=t.nodeValue.split(".");"o"===n[0]&&(e.set(n[1]+"."+n[2],t),t.nodeValue="",t["s-en"]=n[3])}},yt=(t,e,n)=>{if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const i=Object.entries(e.$members$),r=t.prototype;if(i.map(([t,[i]])=>{31&i||2&n&&32&i?Object.defineProperty(r,t,{get(){return e=t,kt(this).$instanceValues$.get(e);var e},set(n){((t,e,n,i)=>{const r=kt(this),s=r.$hostElement$,o=r.$instanceValues$.get(e),a=r.$flags$,l=r.$lazyInstance$;var c,h;if(h=i.$members$[e][0],n=null==(c=n)||I(c)?c:4&h?"false"!==c&&(""===c||!!c):2&h?parseFloat(c):1&h?String(c):c,!(8&a&&void 0!==o||n===o)&&(r.$instanceValues$.set(e,n),l)){if(i.$watchers$&&128&a){const t=i.$watchers$[e];t&&t.map(t=>{try{l[t](n,o,e)}catch(i){Pt(i,s)}})}2==(18&a)&&ot(r,!1)}})(0,t,n,e)},configurable:!0,enumerable:!0}):1&n&&64&i&&Object.defineProperty(r,t,{value(...e){const n=kt(this);return n.$onInstancePromise$.then(()=>n.$lazyInstance$[t](...e))}})}),1&n){const n=new Map;r.attributeChangedCallback=function(t,e,i){p.jmp(()=>{const e=n.get(t);this[e]=(null!==i||"boolean"!=typeof this[e])&&i})},t.observedAttributes=i.filter(([t,e])=>15&e[0]).map(([t,i])=>{const r=i[1]||t;return n.set(r,t),512&i[0]&&e.$attrsToReflect$.push([t,r]),r})}}return t},_t=t=>{ft(t,"connectedCallback")},bt=t=>{if(0==(1&p.$flags$)){const e=kt(t),i=e.$cmpMeta$,r=()=>{};if(1&e.$flags$)y(t,e,i.$listeners$),_t(e.$lazyInstance$);else{let r;if(e.$flags$|=1,r=t.getAttribute(C),r){if(g&&1&i.$flags$){const e=E(t.shadowRoot,i,t.getAttribute("s-mode"));t.classList.remove(e+"-h",e+"-s")}((t,e,n,i)=>{const r=t.shadowRoot,s=[],o=r?[]:null,a=i.$vnode$=R(e,null);p.$orgLocNodes$||vt(f.body,p.$orgLocNodes$=new Map),t["s-id"]=n,t.removeAttribute(C),mt(a,s,[],o,t,t,n),s.map(t=>{const n=t.$hostId$+"."+t.$nodeId$,i=p.$orgLocNodes$.get(n),s=t.$elm$;i&&g&&""===i["s-en"]&&i.parentNode.insertBefore(s,i.nextSibling),r||(s["s-hn"]=e,i&&(s["s-ol"]=i,s["s-ol"]["s-nr"]=s)),p.$orgLocNodes$.delete(n)}),r&&o.map(t=>{t&&r.appendChild(t)})})(t,i.$tagName$,r,e)}r||12&i.$flags$&&wt(t);{let n=t;for(;n=n.parentNode||n.host;)if(1===n.nodeType&&n.hasAttribute("s-id")&&n["s-p"]||n["s-p"]){st(e,e.$ancestorComponent$=n);break}}i.$members$&&Object.entries(i.$members$).map(([e,[n]])=>{if(31&n&&t.hasOwnProperty(e)){const n=t[e];delete t[e],t[e]=n}}),Bt(()=>(async(t,e,i,r,s)=>{if(0==(32&e.$flags$)){{if(e.$flags$|=32,(s=Mt(i)).then){const t=()=>{};s=await s,t()}s.isProxied||(i.$watchers$=s.watchers,yt(s,i,2),s.isProxied=!0);const t=()=>{};e.$flags$|=8;try{new s(e)}catch(l){Pt(l)}e.$flags$&=-9,e.$flags$|=128,t(),_t(e.$lazyInstance$)}if(s.style){let r=s.style;"string"!=typeof r&&(r=r[e.$modeName$=(t=>Dt.map(e=>e(t)).find(t=>!!t))(t)]);const o=O(i,e.$modeName$);if(!It.has(o)){const t=()=>{};8&i.$flags$&&(r=await n.e(2369).then(n.bind(n,2369)).then(t=>t.scopeCss(r,o,!1))),T(o,r,!!(1&i.$flags$)),t()}}}const o=e.$ancestorComponent$,a=()=>ot(e,!0);o&&o["s-rc"]?o["s-rc"].push(a):a()})(t,e,i))}r()}},wt=t=>{const e=t["s-cr"]=f.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},Ct=(t,e={})=>{const n=[],i=e.exclude||[],r=u.customElements,s=f.head,o=s.querySelector("meta[charset]"),a=f.createElement("style"),l=[],c=f.querySelectorAll("[sty-id]");let h,d=!0,m=0;for(Object.assign(p,e),p.$resourcesUrl$=new URL(e.resourcesUrl||"./",f.baseURI).href,p.$flags$|=2;m<c.length;m++)T(c[m].getAttribute("sty-id"),c[m].innerHTML.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),!0);t.map(t=>t[1].map(e=>{const s={$flags$:e[0],$tagName$:e[1],$members$:e[2],$listeners$:e[3]};s.$members$=e[2],s.$listeners$=e[3],s.$attrsToReflect$=[],s.$watchers$={},!g&&1&s.$flags$&&(s.$flags$|=8);const o=s.$tagName$,a=class extends HTMLElement{constructor(t){super(t),Et(t=this,s),1&s.$flags$&&(g?t.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)}):"shadowRoot"in t||(t.shadowRoot=t))}connectedCallback(){h&&(clearTimeout(h),h=null),d?l.push(this):p.jmp(()=>bt(this))}disconnectedCallback(){p.jmp(()=>(t=>{if(0==(1&p.$flags$)){const e=kt(t),n=e.$lazyInstance$;e.$rmListeners$&&(e.$rmListeners$.map(t=>t()),e.$rmListeners$=void 0),p.$cssShim$&&p.$cssShim$.removeHost(t),ft(n,"disconnectedCallback")}})(this))}componentOnReady(){return kt(this).$onReadyPromise$}};s.$lazyBundleId$=t[0],i.includes(o)||r.get(o)||(n.push(o),r.define(o,yt(a,s,1)))})),a.innerHTML=n+"{visibility:hidden}.hydrated{visibility:inherit}",a.setAttribute("data-styles",""),s.insertBefore(a,o?o.nextSibling:s.firstChild),d=!1,l.length?l.map(t=>t.connectedCallback()):p.jmp(()=>h=setTimeout(dt,30))},xt=t=>{const e=new URL(t,p.$resourcesUrl$);return e.origin!==u.location.origin?e.href:e.pathname},St=new WeakMap,kt=t=>St.get(t),Tt=(t,e)=>St.set(e.$lazyInstance$=t,e),Et=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise(t=>n.$onInstanceResolve$=t),n.$onReadyPromise$=new Promise(t=>n.$onReadyResolve$=t),t["s-p"]=[],t["s-rc"]=[],y(t,n,e.$listeners$),St.set(t,n)},Ot=(t,e)=>e in t,Pt=(t,e)=>(0,console.error)(t,e),At=new Map,Mt=(t,e,i)=>{const r=t.$tagName$.replace(/-/g,"_"),s=t.$lazyBundleId$,o=At.get(s);return o?o[r]:n(863)(`./${s}.entry.js`).then(t=>(At.set(s,t),t[r]),Pt)},It=new Map,Dt=[],Rt=[],Lt=[],Ft=(t,e)=>n=>{t.push(n),h||(h=!0,e&&4&p.$flags$?Bt(Nt):p.raf(Nt))},jt=t=>{for(let n=0;n<t.length;n++)try{t[n](performance.now())}catch(e){Pt(e)}t.length=0},Nt=()=>{jt(Rt),jt(Lt),(h=Rt.length>0)&&p.raf(Nt)},Bt=t=>m().then(t),$t=Ft(Rt,!1),zt=Ft(Lt,!0),Vt={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},3730:(t,e,n)=>{"use strict";n.d(e,{L:()=>s,a:()=>o,b:()=>a,c:()=>l,d:()=>c,e:()=>S,g:()=>E,l:()=>C,s:()=>k,t:()=>h});var i=n(2322),r=n(1843);const s="ionViewWillEnter",o="ionViewDidEnter",a="ionViewWillLeave",l="ionViewDidLeave",c="ionViewWillUnload",h=t=>new Promise((e,n)=>{(0,i.c)(()=>{u(t),d(t).then(n=>{n.animation&&n.animation.destroy(),f(t),e(n)},e=>{f(t),n(e)})})}),u=t=>{const e=t.enteringEl,n=t.leavingEl;T(e,n,t.direction),t.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),k(e,!1),n&&k(n,!1)},d=async t=>{const e=await p(t);return e&&i.B.isBrowser?g(e,t):m(t)},f=t=>{const e=t.leavingEl;t.enteringEl.classList.remove("ion-page-invisible"),void 0!==e&&e.classList.remove("ion-page-invisible")},p=async t=>{if(t.leavingEl&&t.animated&&0!==t.duration)return t.animationBuilder?t.animationBuilder:"ios"===t.mode?(await Promise.resolve().then(n.bind(n,114))).iosTransitionAnimation:(await Promise.resolve().then(n.bind(n,3897))).mdTransitionAnimation},g=async(t,e)=>{await v(e,!0);const n=t(e.baseEl,e);b(e.enteringEl,e.leavingEl);const i=await _(n,e);return e.progressCallback&&e.progressCallback(void 0),i&&w(e.enteringEl,e.leavingEl),{hasCompleted:i,animation:n}},m=async t=>{const e=t.enteringEl,n=t.leavingEl;return await v(t,!1),b(e,n),w(e,n),{hasCompleted:!0}},v=async(t,e)=>{const n=(void 0!==t.deepWait?t.deepWait:e)?[S(t.enteringEl),S(t.leavingEl)]:[x(t.enteringEl),x(t.leavingEl)];await Promise.all(n),await y(t.viewIsReady,t.enteringEl)},y=async(t,e)=>{t&&await t(e)},_=(t,e)=>{const n=e.progressCallback,i=new Promise(e=>{t.onFinish(t=>e(1===t))});return n?(t.progressStart(!0),n(t)):t.play(),i},b=(t,e)=>{C(e,a),C(t,s)},w=(t,e)=>{C(t,o),C(e,l)},C=(t,e)=>{if(t){const n=new CustomEvent(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(n)}},x=t=>t?new Promise(e=>(0,r.c)(t,e)):Promise.resolve(),S=async t=>{const e=t;if(e){if(null!=e.componentOnReady&&null!=await e.componentOnReady())return;await Promise.all(Array.from(e.children).map(S))}},k=(t,e)=>{e?(t.setAttribute("aria-hidden","true"),t.classList.add("ion-page-hidden")):(t.hidden=!1,t.removeAttribute("aria-hidden"),t.classList.remove("ion-page-hidden"))},T=(t,e,n)=>{void 0!==t&&(t.style.zIndex="back"===n?"99":"101"),void 0!==e&&(e.style.zIndex="100")},E=t=>t.classList.contains("ion-page")?t:t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||t},8520:(t,e,n)=>{"use strict";n.r(e),n.d(e,{GESTURE_CONTROLLER:()=>i.G,createGesture:()=>l});var i=n(6953);const r=(t,e,n,i)=>{const r=s(t)?{capture:!!i.capture,passive:!!i.passive}:!!i.capture;let o,a;return t.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(o="addEventListener",a="removeEventListener"),t[o](e,n,r),()=>{t[a](e,n,r)}},s=t=>{if(void 0===o)try{const e=Object.defineProperty({},"passive",{get:()=>{o=!0}});t.addEventListener("optsTest",()=>{},e)}catch(e){o=!1}return!!o};let o;const a=t=>t instanceof Document?t:t.ownerDocument,l=t=>{let e=!1,n=!1,s=!0,o=!1;const l=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t),d=l.canStart,f=l.onWillStart,p=l.onStart,g=l.onEnd,m=l.notCaptured,v=l.onMove,y=l.threshold,_=l.passive,b=l.blurOnStart,w={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},C=((t,e,n)=>{const i=n*(Math.PI/180),r="x"===t,s=Math.cos(i),o=e*e;let a=0,l=0,c=!1,h=0;return{start(t,e){a=t,l=e,h=0,c=!0},detect(t,e){if(!c)return!1;const n=t-a,i=e-l,u=n*n+i*i;if(u<o)return!1;const d=Math.sqrt(u),f=(r?n:i)/d;return h=f>s?1:f<-s?-1:0,c=!1,!0},isGesture:()=>0!==h,getDirection:()=>h}})(l.direction,l.threshold,l.maxAngle),x=i.G.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll}),S=()=>{e&&(o=!1,v&&v(w))},k=()=>!(x&&!x.capture()||(e=!0,s=!1,w.startX=w.currentX,w.startY=w.currentY,w.startTime=w.currentTime,f?f(w).then(T):T(),0)),T=()=>{b&&(()=>{if("undefined"!=typeof document){const t=document.activeElement;null!==t&&t.blur&&t.blur()}})(),p&&p(w),s=!0},E=()=>{e=!1,n=!1,o=!1,s=!0,x.release()},O=t=>{const n=e,i=s;E(),i&&(c(w,t),n?g&&g(w):m&&m(w))},P=((t,e,n,i,s)=>{let o,l,c,h,u,d,f,p=0;const g=i=>{p=Date.now()+2e3,e(i)&&(!l&&n&&(l=r(t,"touchmove",n,s)),c||(c=r(t,"touchend",v,s)),h||(h=r(t,"touchcancel",v,s)))},m=i=>{p>Date.now()||e(i)&&(!d&&n&&(d=r(a(t),"mousemove",n,s)),f||(f=r(a(t),"mouseup",y,s)))},v=t=>{_(),i&&i(t)},y=t=>{b(),i&&i(t)},_=()=>{l&&l(),c&&c(),h&&h(),l=c=h=void 0},b=()=>{d&&d(),f&&f(),d=f=void 0},w=()=>{_(),b()},C=(e=!0)=>{e?(o||(o=r(t,"touchstart",g,s)),u||(u=r(t,"mousedown",m,s))):(o&&o(),u&&u(),o=u=void 0,w())};return{enable:C,stop:w,destroy:()=>{C(!1),i=n=e=void 0}}})(l.el,t=>{const e=u(t);return!(n||!s)&&(h(t,w),w.startX=w.currentX,w.startY=w.currentY,w.startTime=w.currentTime=e,w.velocityX=w.velocityY=w.deltaX=w.deltaY=0,w.event=t,(!d||!1!==d(w))&&(x.release(),!!x.start()&&(n=!0,0===y?k():(C.start(w.startX,w.startY),!0))))},t=>{e?!o&&s&&(o=!0,c(w,t),requestAnimationFrame(S)):(c(w,t),C.detect(w.currentX,w.currentY)&&(C.isGesture()&&k()||A()))},O,{capture:!1,passive:_}),A=()=>{E(),P.stop(),m&&m(w)};return{enable(t=!0){t||(e&&O(void 0),E()),P.enable(t)},destroy(){x.destroy(),P.destroy()}}},c=(t,e)=>{if(!e)return;const n=t.currentX,i=t.currentY,r=t.currentTime;h(e,t);const s=t.currentX,o=t.currentY,a=(t.currentTime=u(e))-r;if(a>0&&a<100){const e=(o-i)/a;t.velocityX=(s-n)/a*.7+.3*t.velocityX,t.velocityY=.7*e+.3*t.velocityY}t.deltaX=s-t.startX,t.deltaY=o-t.startY,t.event=e},h=(t,e)=>{let n=0,i=0;if(t){const e=t.changedTouches;if(e&&e.length>0){const t=e[0];n=t.clientX,i=t.clientY}else void 0!==t.pageX&&(n=t.pageX,i=t.pageY)}e.currentX=n,e.currentY=i},u=t=>t.timeStamp||Date.now()},7505:(t,e,n)=>{"use strict";n.d(e,{a:()=>s,b:()=>C,c:()=>y,g:()=>r,i:()=>x});var i=n(2322);const r=t=>o(t),s=(t,e)=>("string"==typeof t&&(e=t,t=void 0),r(t).includes(e)),o=(t=window)=>{if(void 0===t)return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return null==e&&(e=t.Ionic.platforms=a(t),e.forEach(e=>t.document.documentElement.classList.add(`plt-${e}`))),e},a=t=>Object.keys(m).filter(e=>m[e](t)),l=t=>!!p(t,/iPad/i)||!(!p(t,/Macintosh/i)||!h(t)),c=t=>p(t,/android|sink/i),h=t=>g(t,"(any-pointer:coarse)"),u=t=>d(t)||f(t),d=t=>!!(t.cordova||t.phonegap||t.PhoneGap),f=t=>{const e=t.Capacitor;return!(!e||!e.isNative)},p=(t,e)=>e.test(t.navigator.userAgent),g=(t,e)=>t.matchMedia(e).matches,m={ipad:l,iphone:t=>p(t,/iPhone/i),ios:t=>p(t,/iPhone|iPod/i)||l(t),android:c,phablet:t=>{const e=t.innerWidth,n=t.innerHeight,i=Math.min(e,n),r=Math.max(e,n);return i>390&&i<520&&r>620&&r<800},tablet:t=>{const e=t.innerWidth,n=t.innerHeight,i=Math.min(e,n),r=Math.max(e,n);return l(t)||(t=>c(t)&&!p(t,/mobile/i))(t)||i>460&&i<820&&r>780&&r<1400},cordova:d,capacitor:f,electron:t=>p(t,/electron/i),pwa:t=>!(!t.matchMedia("(display-mode: standalone)").matches&&!t.navigator.standalone),mobile:h,mobileweb:t=>h(t)&&!u(t),desktop:t=>!h(t),hybrid:u};class v{constructor(){this.m=new Map}reset(t){this.m=new Map(Object.entries(t))}get(t,e){const n=this.m.get(t);return void 0!==n?n:e}getBoolean(t,e=!1){const n=this.m.get(t);return void 0===n?e:"string"==typeof n?"true"===n:!!n}getNumber(t,e){const n=parseFloat(this.m.get(t));return isNaN(n)?void 0!==e?e:NaN:n}set(t,e){this.m.set(t,e)}}const y=new v,_="ionic:",b="ionic-persist-config";let w;const C=t=>t&&(0,i.g)(t)||w,x=(t={})=>{if("undefined"==typeof window)return;const e=window.document,n=window,r=n.Ionic=n.Ionic||{};o(n);const a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(t=>{try{const e=t.sessionStorage.getItem(b);return null!==e?JSON.parse(e):{}}catch(e){return{}}})(n)),{persistConfig:!1}),r.config),(t=>{const e={};return t.location.search.slice(1).split("&").map(t=>t.split("=")).map(([t,e])=>[decodeURIComponent(t),decodeURIComponent(e)]).filter(([t])=>"ionic:"===t.substr(0,_.length)).map(([t,e])=>[t.slice(_.length),e]).forEach(([t,n])=>{e[t]=n}),e})(n)),t);y.reset(a),y.getBoolean("persistConfig")&&((t,e)=>{try{t.sessionStorage.setItem(b,JSON.stringify(e))}catch(n){return}})(n,a),r.config=y,r.mode=w=y.get("mode",e.documentElement.getAttribute("mode")||(s(n,"ios")?"ios":"md")),y.set("mode",w),e.documentElement.setAttribute("mode",w),e.documentElement.classList.add(w),y.getBoolean("_testing")&&y.set("animated",!1);const l=t=>t.tagName&&t.tagName.startsWith("ION-"),c=t=>["ios","md"].includes(t);(0,i.s)(t=>{for(;t;){const e=t.mode||t.getAttribute("mode");if(e){if(c(e))return e;l(t)&&console.warn('Invalid ionic mode: "'+e+'", expected: "ios" or "md"')}t=t.parentElement}return w})}},114:(t,e,n)=>{"use strict";n.r(e),n.d(e,{iosTransitionAnimation:()=>u,shadow:()=>o});var i=n(9691),r=n(3730);n(2322);const s=t=>document.querySelector(`${t}.ion-cloned-element`),o=t=>t.shadowRoot||t,a=t=>{const e="ION-TABS"===t.tagName?t:t.querySelector("ion-tabs"),n="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=e){const t=e.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=t?t.querySelector(n):null}return t.querySelector(n)},l=(t,e)=>{const n="ION-TABS"===t.tagName?t:t.querySelector("ion-tabs");let i=[];if(null!=n){const t=n.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=t&&(i=t.querySelectorAll("ion-buttons"))}else i=t.querySelectorAll("ion-buttons");for(const r of i){const t=r.closest("ion-header"),n=t&&!t.classList.contains("header-collapse-condense-inactive"),i=r.querySelector("ion-back-button"),s=r.classList.contains("buttons-collapse"),o="start"===r.slot||""===r.slot;if(null!==i&&o&&(s&&n&&e||!s))return i}return null},c=(t,e,n,r,a,l)=>{const c=e?`calc(100% - ${l.right+4}px)`:l.left-4+"px",h=e?"7px":"-7px",u=e?"-4px":"4px",d=e?"-4px":"4px",f=e?"right":"left",p=e?"left":"right",g=n?[{offset:0,opacity:1,transform:`translate3d(${u}, ${l.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${h}, ${a.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${h}, ${a.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${u}, ${l.top-46}px, 0) scale(1)`}],m=n?[{offset:0,opacity:1,transform:`translate3d(${d}, ${l.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${d}, ${l.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${d}, ${l.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${d}, ${l.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${d}, ${l.top-46}px, 0) scale(1)`}],v=(0,i.c)(),y=(0,i.c)(),_=s("ion-back-button"),b=o(_).querySelector(".button-text"),w=o(_).querySelector("ion-icon");_.text=r.text,_.mode=r.mode,_.icon=r.icon,_.color=r.color,_.disabled=r.disabled,_.style.setProperty("display","block"),_.style.setProperty("position","fixed"),y.addElement(w),v.addElement(b),v.beforeStyles({"transform-origin":`${f} center`}).beforeAddWrite(()=>{r.style.setProperty("display","none"),_.style.setProperty(f,c)}).afterAddWrite(()=>{r.style.setProperty("display",""),_.style.setProperty("display","none"),_.style.removeProperty(f)}).keyframes(g),y.beforeStyles({"transform-origin":`${p} center`}).keyframes(m),t.addAnimation([v,y])},h=(t,e,n,r,o,a)=>{const l=e?`calc(100% - ${o.right}px)`:`${o.left}px`,c=e?"-18px":"18px",h=e?"right":"left",u=n?[{offset:0,opacity:0,transform:`translate3d(${c}, ${a.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${o.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${o.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${c}, ${a.top-4}px, 0) scale(0.5)`}],d=s("ion-title"),f=(0,i.c)();d.innerText=r.innerText,d.size=r.size,d.color=r.color,f.addElement(d),f.beforeStyles({"transform-origin":`${h} center`,height:"46px",display:"",position:"relative",[h]:l}).beforeAddWrite(()=>{r.style.setProperty("display","none")}).afterAddWrite(()=>{r.style.setProperty("display",""),d.style.setProperty("display","none")}).keyframes(u),t.addAnimation(f)},u=(t,e)=>{try{const n="cubic-bezier(0.32,0.72,0,1)",s="opacity",u="transform",d="0%",f=.8,p="rtl"===t.ownerDocument.dir,g=p?"-99.5%":"99.5%",m=p?"33%":"-33%",v=e.enteringEl,y=e.leavingEl,_="back"===e.direction,b=v.querySelector(":scope > ion-content"),w=v.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),C=v.querySelectorAll(":scope > ion-header > ion-toolbar"),x=(0,i.c)(),S=(0,i.c)();if(x.addElement(v).duration(e.duration||540).easing(e.easing||n).fill("both").beforeRemoveClass("ion-page-invisible"),y&&t){const e=(0,i.c)();e.addElement(t),x.addAnimation(e)}if(b||0!==C.length||0!==w.length?(S.addElement(b),S.addElement(w)):S.addElement(v.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),x.addAnimation(S),_?S.beforeClearStyles([s]).fromTo("transform",`translateX(${m})`,`translateX(${d})`).fromTo(s,f,1):S.beforeClearStyles([s]).fromTo("transform",`translateX(${g})`,`translateX(${d})`),b){const t=o(b).querySelector(".transition-effect");if(t){const e=t.querySelector(".transition-cover"),n=t.querySelector(".transition-shadow"),r=(0,i.c)(),o=(0,i.c)(),a=(0,i.c)();r.addElement(t).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),o.addElement(e).beforeClearStyles([s]).fromTo(s,0,.1),a.addElement(n).beforeClearStyles([s]).fromTo(s,.03,.7),r.addAnimation([o,a]),S.addAnimation([r])}}const k=v.querySelector("ion-header.header-collapse-condense"),{forward:T,backward:E}=((t,e,n,i,r)=>{const s=l(i,n),o=a(r),u=a(i),d=l(r,n),f=null!==s&&null!==o&&!n,p=null!==u&&null!==d&&n;if(f){const i=o.getBoundingClientRect(),r=s.getBoundingClientRect();h(t,e,n,o,i,r),c(t,e,n,s,i,r)}else if(p){const i=u.getBoundingClientRect(),r=d.getBoundingClientRect();h(t,e,n,u,i,r),c(t,e,n,d,i,r)}return{forward:f,backward:p}})(x,p,_,v,y);if(C.forEach(t=>{const e=(0,i.c)();e.addElement(t),x.addAnimation(e);const n=(0,i.c)();n.addElement(t.querySelector("ion-title"));const r=(0,i.c)(),a=Array.from(t.querySelectorAll("ion-buttons,[menuToggle]")),l=t.closest("ion-header"),c=l&&l.classList.contains("header-collapse-condense-inactive");let h;h=a.filter(_?t=>{const e=t.classList.contains("buttons-collapse");return e&&!c||!e}:t=>!t.classList.contains("buttons-collapse")),r.addElement(h);const u=(0,i.c)();u.addElement(t.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const f=(0,i.c)();f.addElement(o(t).querySelector(".toolbar-background"));const v=(0,i.c)(),y=t.querySelector("ion-back-button");if(y&&v.addElement(y),e.addAnimation([n,r,u,f,v]),r.fromTo(s,.01,1),u.fromTo(s,.01,1),_)c||n.fromTo("transform",`translateX(${m})`,`translateX(${d})`).fromTo(s,.01,1),u.fromTo("transform",`translateX(${m})`,`translateX(${d})`),v.fromTo(s,.01,1);else if(k||n.fromTo("transform",`translateX(${g})`,`translateX(${d})`).fromTo(s,.01,1),u.fromTo("transform",`translateX(${g})`,`translateX(${d})`),f.beforeClearStyles([s,"transform"]),(null==l?void 0:l.translucent)?f.fromTo("transform",p?"translateX(-100%)":"translateX(100%)","translateX(0px)"):f.fromTo(s,.01,"var(--opacity)"),T||v.fromTo(s,.01,1),y&&!T){const t=(0,i.c)();t.addElement(o(y).querySelector(".button-text")).fromTo("transform",p?"translateX(-100px)":"translateX(100px)","translateX(0px)"),e.addAnimation(t)}}),y){const t=(0,i.c)(),e=y.querySelector(":scope > ion-content"),n=y.querySelectorAll(":scope > ion-header > ion-toolbar"),a=y.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(e||0!==n.length||0!==a.length?(t.addElement(e),t.addElement(a)):t.addElement(y.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),x.addAnimation(t),_){t.beforeClearStyles([s]).fromTo("transform",`translateX(${d})`,p?"translateX(-100%)":"translateX(100%)");const e=(0,r.g)(y);x.afterAddWrite(()=>{"normal"===x.getDirection()&&e.style.setProperty("display","none")})}else t.fromTo("transform",`translateX(${d})`,`translateX(${m})`).fromTo(s,1,f);if(e){const n=o(e).querySelector(".transition-effect");if(n){const e=n.querySelector(".transition-cover"),r=n.querySelector(".transition-shadow"),o=(0,i.c)(),a=(0,i.c)(),l=(0,i.c)();o.addElement(n).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),a.addElement(e).beforeClearStyles([s]).fromTo(s,.1,0),l.addElement(r).beforeClearStyles([s]).fromTo(s,.7,.03),o.addAnimation([a,l]),t.addAnimation([o])}}n.forEach(t=>{const e=(0,i.c)();e.addElement(t);const n=(0,i.c)();n.addElement(t.querySelector("ion-title"));const r=(0,i.c)(),a=t.querySelectorAll("ion-buttons,[menuToggle]"),l=t.closest("ion-header"),c=l&&l.classList.contains("header-collapse-condense-inactive"),h=Array.from(a).filter(t=>{const e=t.classList.contains("buttons-collapse");return e&&!c||!e});r.addElement(h);const f=(0,i.c)(),g=t.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");g.length>0&&f.addElement(g);const v=(0,i.c)();v.addElement(o(t).querySelector(".toolbar-background"));const y=(0,i.c)(),b=t.querySelector("ion-back-button");if(b&&y.addElement(b),e.addAnimation([n,r,f,y,v]),x.addAnimation(e),y.fromTo(s,.99,0),r.fromTo(s,.99,0),f.fromTo(s,.99,0),_){if(c||n.fromTo("transform",`translateX(${d})`,p?"translateX(-100%)":"translateX(100%)").fromTo(s,.99,0),f.fromTo("transform",`translateX(${d})`,p?"translateX(-100%)":"translateX(100%)"),v.beforeClearStyles([s,"transform"]),(null==l?void 0:l.translucent)?v.fromTo("transform","translateX(0px)",p?"translateX(-100%)":"translateX(100%)"):v.fromTo(s,"var(--opacity)",0),b&&!E){const t=(0,i.c)();t.addElement(o(b).querySelector(".button-text")).fromTo("transform",`translateX(${d})`,`translateX(${(p?-124:124)+"px"})`),e.addAnimation(t)}}else c||n.fromTo("transform",`translateX(${d})`,`translateX(${m})`).fromTo(s,.99,0).afterClearStyles([u,s]),f.fromTo("transform",`translateX(${d})`,`translateX(${m})`).afterClearStyles([u,s]),y.afterClearStyles([s]),n.afterClearStyles([s]),r.afterClearStyles([s])})}return x}catch(n){throw n}}},3897:(t,e,n)=>{"use strict";n.r(e),n.d(e,{mdTransitionAnimation:()=>s});var i=n(9691),r=n(3730);n(2322);const s=(t,e)=>{const n="back"===e.direction,s=e.leavingEl,o=(0,r.g)(e.enteringEl),a=o.querySelector("ion-toolbar"),l=(0,i.c)();if(l.addElement(o).fill("both").beforeRemoveClass("ion-page-invisible"),n?l.duration(e.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):l.duration(e.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),a){const t=(0,i.c)();t.addElement(a),l.addAnimation(t)}if(s&&n){l.duration(e.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const t=(0,i.c)();t.addElement((0,r.g)(s)).onFinish(e=>{1===e&&t.elements.length>0&&t.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),l.addAnimation(t)}return l}},1558:(t,e,n)=>{"use strict";n.d(e,{B:()=>D,a:()=>c,b:()=>h,c:()=>p,d:()=>x,e:()=>g,f:()=>k,g:()=>O,h:()=>a,i:()=>A,l:()=>u,m:()=>d,p:()=>f,s:()=>I});var i=n(7505),r=n(4641),s=n(1843);let o=0;const a=new WeakMap,l=t=>({create:e=>m(t,e),dismiss:(e,n,i)=>b(document,e,n,t,i),getTop:async()=>w(document,t)}),c=l("ion-alert"),h=l("ion-action-sheet"),u=l("ion-loading"),d=l("ion-modal"),f=l("ion-picker"),p=l("ion-popover"),g=t=>{"undefined"!=typeof document&&_(document);const e=o++;t.overlayIndex=e,t.hasAttribute("id")||(t.id=`ion-overlay-${e}`)},m=(t,e)=>"undefined"!=typeof customElements?customElements.whenDefined(t).then(()=>{const n=document.createElement(t);return n.classList.add("overlay-hidden"),Object.assign(n,e),T(document).appendChild(n),new Promise(t=>(0,s.c)(n,t))}):Promise.resolve(),v='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',y="input:not([type=hidden]), textarea, button, select",_=t=>{0===o&&(o=1,t.addEventListener("focus",e=>((t,e)=>{const n=w(e),i=t.target;if(n&&i)if(n===i)n.lastFocus=void 0;else{const t=(0,s.g)(n);if(!t.contains(i))return;const r=t.querySelector(".ion-overlay-wrapper");if(!r)return;if(r.contains(i))n.lastFocus=i;else{const t=n.lastFocus;((t,e)=>{let n=t.querySelector(v);const i=n&&n.shadowRoot;i&&(n=i.querySelector(y)||n),n?n.focus():e.focus()})(r,n),t===e.activeElement&&((t,e)=>{const n=Array.from(t.querySelectorAll(v));let i=n.length>0?n[n.length-1]:null;const r=i&&i.shadowRoot;r&&(i=r.querySelector(y)||i),i?i.focus():e.focus()})(r,n),n.lastFocus=e.activeElement}}})(e,t),!0),t.addEventListener("ionBackButton",e=>{const n=w(t);n&&n.backdropDismiss&&e.detail.register(r.OVERLAY_BACK_BUTTON_PRIORITY,()=>n.dismiss(void 0,D))}),t.addEventListener("keyup",e=>{if("Escape"===e.key){const e=w(t);e&&e.backdropDismiss&&e.dismiss(void 0,D)}}))},b=(t,e,n,i,r)=>{const s=w(t,i,r);return s?s.dismiss(e,n):Promise.reject("overlay does not exist")},w=(t,e,n)=>{const i=((t,e)=>(void 0===e&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(t.querySelectorAll(e)).filter(t=>t.overlayIndex>0)))(t,e);return void 0===n?i[i.length-1]:i.find(t=>t.id===n)},C=(t=!1)=>{const e=T(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");e&&(t?e.setAttribute("aria-hidden","true"):e.removeAttribute("aria-hidden"))},x=async(t,e,n,r,s)=>{if(t.presented)return;C(!0),t.presented=!0,t.willPresent.emit();const o=(0,i.b)(t),a=t.enterAnimation?t.enterAnimation:i.c.get(e,"ios"===o?n:r);await E(t,a,t.el,s)&&t.didPresent.emit(),"ION-TOAST"!==t.el.tagName&&S(t.el),t.keyboardClose&&t.el.focus()},S=async t=>{let e=document.activeElement;if(!e)return;const n=e&&e.shadowRoot;n&&(e=n.querySelector(y)||e),await t.onDidDismiss(),e.focus()},k=async(t,e,n,r,s,o,l)=>{if(!t.presented)return!1;C(!1),t.presented=!1;try{t.el.style.setProperty("pointer-events","none"),t.willDismiss.emit({data:e,role:n});const c=(0,i.b)(t),h=t.leaveAnimation?t.leaveAnimation:i.c.get(r,"ios"===c?s:o);"gesture"!==n&&await E(t,h,t.el,l),t.didDismiss.emit({data:e,role:n}),a.delete(t)}catch(c){console.error(c)}return t.el.remove(),!0},T=t=>t.querySelector("ion-app")||t.body,E=async(t,e,n,r)=>{n.classList.remove("overlay-hidden");const s=e(n.shadowRoot||t.el,r);t.animated&&i.c.getBoolean("animated",!0)||s.duration(0),t.keyboardClose&&s.beforeAddWrite(()=>{const t=n.ownerDocument.activeElement;t&&t.matches("input, ion-input, ion-textarea")&&t.blur()});const o=a.get(t)||[];return a.set(t,[...o,s]),await s.play(),!0},O=(t,e)=>{let n;const i=new Promise(t=>n=t);return P(t,e,t=>{n(t.detail)}),i},P=(t,e,n)=>{const i=r=>{(0,s.b)(t,e,i),n(r)};(0,s.a)(t,e,i)},A=t=>"cancel"===t||t===D,M=t=>t(),I=(t,e)=>{if("function"==typeof t)return i.c.get("_zoneGate",M)(()=>{try{return t(e)}catch(n){console.error(n)}})},D="backdrop"},3249:(t,e,n)=>{var i,r,s,o,a,l,c,h,u,d,f,p,g,m,v=v||{version:"4.5.1"};if(e.fabric=v,"undefined"!=typeof document&&"undefined"!=typeof window)v.document=document instanceof("undefined"!=typeof HTMLDocument?HTMLDocument:Document)?document:document.implementation.createHTMLDocument(""),v.window=window;else{var y=new(n(4960).JSDOM)(decodeURIComponent("%3C!DOCTYPE%20html%3E%3Chtml%3E%3Chead%3E%3C%2Fhead%3E%3Cbody%3E%3C%2Fbody%3E%3C%2Fhtml%3E"),{features:{FetchExternalResources:["img"]},resources:"usable"}).window;v.document=y.document,v.jsdomImplForWrapper=n(6759).implForWrapper,v.nodeCanvas=n(6272).Canvas,v.window=y,DOMParser=v.window.DOMParser}function _(t,e){var n=t.canvas,i=e.targetCanvas,r=i.getContext("2d");r.translate(0,i.height),r.scale(1,-1),r.drawImage(n,0,n.height-i.height,i.width,i.height,0,0,i.width,i.height)}function b(t,e){var n=e.targetCanvas.getContext("2d"),i=e.destinationWidth,r=e.destinationHeight,s=i*r*4,o=new Uint8Array(this.imageBuffer,0,s),a=new Uint8ClampedArray(this.imageBuffer,0,s);t.readPixels(0,0,i,r,t.RGBA,t.UNSIGNED_BYTE,o);var l=new ImageData(a,i,r);n.putImageData(l,0,0)}v.isTouchSupported="ontouchstart"in v.window||"ontouchstart"in v.document||v.window&&v.window.navigator&&v.window.navigator.maxTouchPoints>0,v.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,v.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"],v.DPI=96,v.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:[eE][-+]?\\d+)?)",v.commaWsp="(?:\\s+,?\\s*|,\\s*)",v.rePathCommand=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:[eE][-+]?\d+)?)/gi,v.reNonWord=/[ \n\.,;!\?\-]/,v.fontPaths={},v.iMatrix=[1,0,0,1,0,0],v.svgNS="http://www.w3.org/2000/svg",v.perfLimitSizeTotal=2097152,v.maxCacheSideLimit=4096,v.minCacheSideLimit=256,v.charWidthsCache={},v.textureSize=2048,v.disableStyleCopyPaste=!1,v.enableGLFiltering=!0,v.devicePixelRatio=v.window.devicePixelRatio||v.window.webkitDevicePixelRatio||v.window.mozDevicePixelRatio||1,v.browserShadowBlurConstant=1,v.arcToSegmentsCache={},v.boundsOfCurveCache={},v.cachesBoundsOfCurve=!0,v.forceGLPutImageData=!1,v.initFilterBackend=function(){return v.enableGLFiltering&&v.isWebglSupported&&v.isWebglSupported(v.textureSize)?(console.log("max texture size: "+v.maxTextureSize),new v.WebglFilterBackend({tileSize:v.textureSize})):v.Canvas2dFilterBackend?new v.Canvas2dFilterBackend:void 0},"undefined"!=typeof document&&"undefined"!=typeof window&&(window.fabric=v),function(){function t(t,e){if(this.__eventListeners[t]){var n=this.__eventListeners[t];e?n[n.indexOf(e)]=!1:v.util.array.fill(n,!1)}}v.Observable={fire:function(t,e){if(!this.__eventListeners)return this;var n=this.__eventListeners[t];if(!n)return this;for(var i=0,r=n.length;i<r;i++)n[i]&&n[i].call(this,e||{});return this.__eventListeners[t]=n.filter(function(t){return!1!==t}),this},on:function(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this},off:function(e,n){if(!this.__eventListeners)return this;if(0===arguments.length)for(e in this.__eventListeners)t.call(this,e);else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}}}(),v.Collection={_objects:[],add:function(){if(this._objects.push.apply(this._objects,arguments),this._onObjectAdded)for(var t=0,e=arguments.length;t<e;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.requestRenderAll(),this},insertAt:function(t,e,n){var i=this._objects;return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this},remove:function(){for(var t,e=this._objects,n=!1,i=0,r=arguments.length;i<r;i++)-1!==(t=e.indexOf(arguments[i]))&&(n=!0,e.splice(t,1),this._onObjectRemoved&&this._onObjectRemoved(arguments[i]));return this.renderOnAddRemove&&n&&this.requestRenderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=0,r=n.length;i<r;i++)t.call(e,n[i],i,n);return this},getObjects:function(t){return void 0===t?this._objects.concat():this._objects.filter(function(e){return e.type===t})},item:function(t){return this._objects[t]},isEmpty:function(){return 0===this._objects.length},size:function(){return this._objects.length},contains:function(t){return this._objects.indexOf(t)>-1},complexity:function(){return this._objects.reduce(function(t,e){return t+(e.complexity?e.complexity():0)},0)}},v.CommonMethods={_setOptions:function(t){for(var e in t)this.set(e,t[e])},_initGradient:function(t,e){!t||!t.colorStops||t instanceof v.Gradient||this.set(e,new v.Gradient(t))},_initPattern:function(t,e,n){!t||!t.source||t instanceof v.Pattern?n&&n():this.set(e,new v.Pattern(t,n))},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):this._set(t,e),this},_set:function(t,e){this[t]=e},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},get:function(t){return this[t]}},function(t){var e=Math.sqrt,n=Math.atan2,i=Math.pow,r=Math.PI/180,s=Math.PI/2;v.util={cos:function(t){if(0===t)return 1;switch(t<0&&(t=-t),t/s){case 1:case 3:return 0;case 2:return-1}return Math.cos(t)},sin:function(t){if(0===t)return 0;var e=1;switch(t<0&&(e=-1),t/s){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(t)},removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*r},radiansToDegrees:function(t){return t/r},rotatePoint:function(t,e,n){var i=new v.Point(t.x-e.x,t.y-e.y),r=v.util.rotateVector(i,n);return new v.Point(r.x,r.y).addEquals(e)},rotateVector:function(t,e){var n=v.util.sin(e),i=v.util.cos(e);return{x:t.x*i-t.y*n,y:t.x*n+t.y*i}},transformPoint:function(t,e,n){return n?new v.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new v.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},makeBoundingBoxFromPoints:function(t,e){if(e)for(var n=0;n<t.length;n++)t[n]=v.util.transformPoint(t[n],e);var i=[t[0].x,t[1].x,t[2].x,t[3].x],r=v.util.array.min(i),s=v.util.array.max(i)-r,o=[t[0].y,t[1].y,t[2].y,t[3].y],a=v.util.array.min(o);return{left:r,top:a,width:s,height:v.util.array.max(o)-a}},invertTransform:function(t){var e=1/(t[0]*t[3]-t[1]*t[2]),n=[e*t[3],-e*t[1],-e*t[2],e*t[0]],i=v.util.transformPoint({x:t[4],y:t[5]},n,!0);return n[4]=-i.x,n[5]=-i.y,n},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=v.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*v.DPI/25.4;case"cm":return i*v.DPI/2.54;case"in":return i*v.DPI;case"pt":return i*v.DPI/72;case"pc":return i*v.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=v.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),v.util.resolveNamespace(e)[t]},getSvgAttributes:function(t){var e=["instantiated_by_use","style","id","class"];switch(t){case"linearGradient":e=e.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);break;case"radialGradient":e=e.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);break;case"stop":e=e.concat(["offset","stop-color","stop-opacity"])}return e},resolveNamespace:function(e){if(!e)return v;var n,i=e.split("."),r=i.length,s=t||v.window;for(n=0;n<r;++n)s=s[i[n]];return s},loadImage:function(t,e,n,i){if(t){var r=v.util.createImage(),s=function(){e&&e.call(n,r,!1),r=r.onload=r.onerror=null};r.onload=s,r.onerror=function(){v.log("Error loading "+r.src),e&&e.call(n,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&null!=i&&(r.crossOrigin=i),"data:image/svg"===t.substring(0,14)&&(r.onload=null,v.util.loadImageInDom(r,s)),r.src=t}else e&&e.call(n,t)},loadImageInDom:function(t,e){var n=v.document.createElement("div");n.style.width=n.style.height="1px",n.style.left=n.style.top="-100%",n.style.position="absolute",n.appendChild(t),v.document.querySelector("body").appendChild(n),t.onload=function(){e(),n.parentNode.removeChild(n),n=null}},enlivenObjects:function(t,e,n,i){var r=[],s=0,o=(t=t||[]).length;function a(){++s===o&&e&&e(r.filter(function(t){return t}))}o?t.forEach(function(t,e){t&&t.type?v.util.getKlass(t.type,n).fromObject(t,function(n,s){s||(r[e]=n),i&&i(t,n,s),a()}):a()}):e&&e(r)},enlivenPatterns:function(t,e){function n(){++r===s&&e&&e(i)}var i=[],r=0,s=(t=t||[]).length;s?t.forEach(function(t,e){t&&t.source?new v.Pattern(t,function(t){i[e]=t,n()}):(i[e]=t,n())}):e&&e(i)},groupSVGElements:function(t,e,n){var i;return t&&1===t.length?t[0]:(e&&(e.width&&e.height?e.centerPoint={x:e.width/2,y:e.height/2}:(delete e.width,delete e.height)),i=new v.Group(t,e),void 0!==n&&(i.sourcePath=n),i)},populateWithProperties:function(t,e,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var i=0,r=n.length;i<r;i++)n[i]in t&&(e[n[i]]=t[n[i]])},drawDashedLine:function(t,i,r,s,o,a){var l=s-i,c=o-r,h=e(l*l+c*c),u=n(c,l),d=a.length,f=0,p=!0;for(t.save(),t.translate(i,r),t.moveTo(0,0),t.rotate(u),i=0;h>i;)(i+=a[f++%d])>h&&(i=h),t[p?"lineTo":"moveTo"](i,0),p=!p;t.restore()},createCanvasElement:function(){return v.document.createElement("canvas")},copyCanvasElement:function(t){var e=v.util.createCanvasElement();return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(t,0,0),e},toDataURL:function(t,e,n){return t.toDataURL("image/"+e,n)},createImage:function(){return v.document.createElement("img")},multiplyTransformMatrices:function(t,e,n){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],n?0:t[0]*e[4]+t[2]*e[5]+t[4],n?0:t[1]*e[4]+t[3]*e[5]+t[5]]},qrDecompose:function(t){var s=n(t[1],t[0]),o=i(t[0],2)+i(t[1],2),a=e(o),l=(t[0]*t[3]-t[2]*t[1])/a,c=n(t[0]*t[2]+t[1]*t[3],o);return{angle:s/r,scaleX:a,scaleY:l,skewX:c/r,skewY:0,translateX:t[4],translateY:t[5]}},calcRotateMatrix:function(t){if(!t.angle)return v.iMatrix.concat();var e=v.util.degreesToRadians(t.angle),n=v.util.cos(e),i=v.util.sin(e);return[n,i,-i,n,0,0]},calcDimensionsMatrix:function(t){var e=void 0===t.scaleX?1:t.scaleX,n=void 0===t.scaleY?1:t.scaleY,i=[t.flipX?-e:e,0,0,t.flipY?-n:n,0,0],r=v.util.multiplyTransformMatrices,s=v.util.degreesToRadians;return t.skewX&&(i=r(i,[1,0,Math.tan(s(t.skewX)),1],!0)),t.skewY&&(i=r(i,[1,Math.tan(s(t.skewY)),0,1],!0)),i},composeMatrix:function(t){var e=[1,0,0,1,t.translateX||0,t.translateY||0],n=v.util.multiplyTransformMatrices;return t.angle&&(e=n(e,v.util.calcRotateMatrix(t))),(1!==t.scaleX||1!==t.scaleY||t.skewX||t.skewY||t.flipX||t.flipY)&&(e=n(e,v.util.calcDimensionsMatrix(t))),e},resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.skewX=0,t.skewY=0,t.flipX=!1,t.flipY=!1,t.rotate(0)},saveObjectTransform:function(t){return{scaleX:t.scaleX,scaleY:t.scaleY,skewX:t.skewX,skewY:t.skewY,angle:t.angle,left:t.left,flipX:t.flipX,flipY:t.flipY,top:t.top}},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);var r,s=!0,o=t.getImageData(e,n,2*i||1,2*i||1),a=o.data.length;for(r=3;r<a&&0!=(s=o.data[r]<=0);r+=4);return o=null,s},parsePreserveAspectRatioAttribute:function(t){var e,n="meet",i=t.split(" ");return i&&i.length&&("meet"!==(n=i.pop())&&"slice"!==n?(e=n,n="meet"):i.length&&(e=i.pop())),{meetOrSlice:n,alignX:"none"!==e?e.slice(1,4):"none",alignY:"none"!==e?e.slice(5,8):"none"}},clearFabricFontCache:function(t){(t=(t||"").toLowerCase())?v.charWidthsCache[t]&&delete v.charWidthsCache[t]:v.charWidthsCache={}},limitDimsByArea:function(t,e){var n=Math.sqrt(e*t),i=Math.floor(e/n);return{x:Math.floor(n),y:i}},capValue:function(t,e,n){return Math.max(t,Math.min(e,n))},findScaleToFit:function(t,e){return Math.min(e.width/t.width,e.height/t.height)},findScaleToCover:function(t,e){return Math.max(e.width/t.width,e.height/t.height)},matrixToSVG:function(t){return"matrix("+t.map(function(t){return v.util.toFixed(t,v.Object.NUM_FRACTION_DIGITS)}).join(" ")+")"},removeTransformFromObject:function(t,e){var n=v.util.invertTransform(e),i=v.util.multiplyTransformMatrices(n,t.calcOwnMatrix());v.util.applyTransformToObject(t,i)},addTransformToObject:function(t,e){v.util.applyTransformToObject(t,v.util.multiplyTransformMatrices(e,t.calcOwnMatrix()))},applyTransformToObject:function(t,e){var n=v.util.qrDecompose(e),i=new v.Point(n.translateX,n.translateY);t.flipX=!1,t.flipY=!1,t.set("scaleX",n.scaleX),t.set("scaleY",n.scaleY),t.skewX=n.skewX,t.skewY=n.skewY,t.angle=n.angle,t.setPositionByOrigin(i,"center","center")},sizeAfterTransform:function(t,e,n){var i=t/2,r=e/2,s=[{x:-i,y:-r},{x:i,y:-r},{x:-i,y:r},{x:i,y:r}],o=v.util.calcDimensionsMatrix(n),a=v.util.makeBoundingBoxFromPoints(s,o);return{x:a.width,y:a.height}}}}(e),function(){var t=Array.prototype.join,e={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},n={m:"l",M:"L"};function i(t,e,n,i,r,s,o,a,l,c,h){var u=v.util.cos(t),d=v.util.sin(t),f=v.util.cos(e),p=v.util.sin(e),g=n*r*f-i*s*p+o,m=i*r*f+n*s*p+a;return["C",c+l*(-n*r*d-i*s*u),h+l*(-i*r*d+n*s*u),g+l*(n*r*p+i*s*f),m+l*(i*r*p-n*s*f),g,m]}function r(t,e,n,r,o,a,l){var c=Math.PI,h=l*c/180,u=v.util.sin(h),d=v.util.cos(h),f=0,p=0,g=-d*t*.5-u*e*.5,m=-d*e*.5+u*t*.5,y=(n=Math.abs(n))*n,_=(r=Math.abs(r))*r,b=m*m,w=g*g,C=y*_-y*b-_*w,x=0;if(C<0){var S=Math.sqrt(1-C/(y*_));n*=S,r*=S}else x=(o===a?-1:1)*Math.sqrt(C/(y*b+_*w));var k=x*n*m/r,T=-x*r*g/n,E=d*k-u*T+.5*t,O=u*k+d*T+.5*e,P=s(1,0,(g-k)/n,(m-T)/r),A=s((g-k)/n,(m-T)/r,(-g-k)/n,(-m-T)/r);0===a&&A>0?A-=2*c:1===a&&A<0&&(A+=2*c);for(var M=Math.ceil(Math.abs(A/c*2)),I=[],D=A/M,R=8/3*Math.sin(D/4)*Math.sin(D/4)/Math.sin(D/2),L=P+D,F=0;F<M;F++)I[F]=i(P,L,d,u,n,r,E,O,R,f,p),f=I[F][5],p=I[F][6],P=L,L+=D;return I}function s(t,e,n,i){var r=Math.atan2(e,t),s=Math.atan2(i,n);return s>=r?s-r:2*Math.PI-(r-s)}function o(e,n,i,r,s,o,a,l){var c;if(v.cachesBoundsOfCurve&&(c=t.call(arguments),v.boundsOfCurveCache[c]))return v.boundsOfCurveCache[c];var h,u,d,f,p,g,m,y,_=Math.sqrt,b=Math.min,w=Math.max,C=Math.abs,x=[],S=[[],[]];u=6*e-12*i+6*s,h=-3*e+9*i-9*s+3*a,d=3*i-3*e;for(var k=0;k<2;++k)if(k>0&&(u=6*n-12*r+6*o,h=-3*n+9*r-9*o+3*l,d=3*r-3*n),C(h)<1e-12){if(C(u)<1e-12)continue;0<(f=-d/u)&&f<1&&x.push(f)}else(m=u*u-4*d*h)<0||(0<(p=(-u+(y=_(m)))/(2*h))&&p<1&&x.push(p),0<(g=(-u-y)/(2*h))&&g<1&&x.push(g));for(var T,E=x.length,O=E;E--;)S[0][E]=(T=1-(f=x[E]))*T*T*e+3*T*T*f*i+3*T*f*f*s+f*f*f*a,S[1][E]=T*T*T*n+3*T*T*f*r+3*T*f*f*o+f*f*f*l;S[0][O]=e,S[1][O]=n,S[0][O+1]=a,S[1][O+1]=l;var P=[{x:b.apply(null,S[0]),y:b.apply(null,S[1])},{x:w.apply(null,S[0]),y:w.apply(null,S[1])}];return v.cachesBoundsOfCurve&&(v.boundsOfCurveCache[c]=P),P}function a(t,e,n){for(var i=r(n[6]-t,n[7]-e,n[1],n[2],n[4],n[5],n[3]),s=0,o=i.length;s<o;s++)i[s][1]+=t,i[s][2]+=e,i[s][3]+=t,i[s][4]+=e,i[s][5]+=t,i[s][6]+=e;return i}function l(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}function c(t,e,n,i,r,s,o,a){return function(l){var c,h=(c=l)*c*c,u=function(t){return 3*t*t*(1-t)}(l),d=function(t){return 3*t*(1-t)*(1-t)}(l),f=function(t){return(1-t)*(1-t)*(1-t)}(l);return{x:o*h+r*u+n*d+t*f,y:a*h+s*u+i*d+e*f}}}function h(t,e,n,i,r,s,o,a){return function(l){var c=1-l;return Math.atan2(3*c*c*(i-e)+6*c*l*(s-i)+3*l*l*(a-s),3*c*c*(n-t)+6*c*l*(r-n)+3*l*l*(o-r))}}function u(t,e,n,i,r,s){return function(o){var a,l=(a=o)*a,c=function(t){return 2*t*(1-t)}(o),h=function(t){return(1-t)*(1-t)}(o);return{x:r*l+n*c+t*h,y:s*l+i*c+e*h}}}function d(t,e,n,i,r,s){return function(o){var a=1-o;return Math.atan2(2*a*(i-e)+2*o*(s-i),2*a*(n-t)+2*o*(r-n))}}function f(t,e,n){var i,r,s={x:e,y:n},o=0;for(r=.01;r<=1;r+=.01)i=t(r),o+=l(s.x,s.y,i.x,i.y),s=i;return o}function p(t){for(var e,n,i,r,s=0,o=t.length,a=0,p=0,g=0,m=0,v=[],y=0;y<o;y++){switch(i={x:a,y:p,command:(e=t[y])[0]},e[0]){case"M":i.length=0,g=a=e[1],m=p=e[2];break;case"L":i.length=l(a,p,e[1],e[2]),a=e[1],p=e[2];break;case"C":n=c(a,p,e[1],e[2],e[3],e[4],e[5],e[6]),r=h(a,p,e[1],e[2],e[3],e[4],e[5],e[6]),i.iterator=n,i.angleFinder=r,i.length=f(n,a,p),a=e[5],p=e[6];break;case"Q":n=u(a,p,e[1],e[2],e[3],e[4]),r=d(a,p,e[1],e[2],e[3],e[4]),i.iterator=n,i.angleFinder=r,i.length=f(n,a,p),a=e[3],p=e[4];break;case"Z":case"z":i.destX=g,i.destY=m,i.length=l(a,p,g,m),a=g,p=m}s+=i.length,v.push(i)}return v.push({length:s,x:a,y:p}),v}v.util.parsePath=function(t){var i,r,s,o,a,l=[],c=[],h=v.rePathCommand,u="[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?\\s*",d="("+u+")"+v.commaWsp,f="([01])"+v.commaWsp+"?",p=new RegExp(d+"?"+d+"?"+d+f+f+d+"?("+u+")","g");if(!t||!t.match)return l;for(var g,m=0,y=(a=t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi)).length;m<y;m++){o=(i=a[m]).slice(1).trim(),c.length=0;var _=i.charAt(0);if(g=[_],"a"===_.toLowerCase())for(var b;b=p.exec(o);)for(var w=1;w<b.length;w++)c.push(b[w]);else for(;s=h.exec(o);)c.push(s[0]);w=0;for(var C=c.length;w<C;w++)r=parseFloat(c[w]),isNaN(r)||g.push(r);var x=e[_.toLowerCase()],S=n[_]||_;if(g.length-1>x)for(var k=1,T=g.length;k<T;k+=x)l.push([_].concat(g.slice(k,k+x))),_=S;else l.push(g)}return l},v.util.makePathSimpler=function(t){var e,n,i,r,s,o,l=0,c=0,h=t.length,u=0,d=0,f=[];for(n=0;n<h;++n){switch(i=!1,(e=t[n].slice(0))[0]){case"l":e[0]="L",e[1]+=l,e[2]+=c;case"L":l=e[1],c=e[2];break;case"h":e[1]+=l;case"H":e[0]="L",e[2]=c,l=e[1];break;case"v":e[1]+=c;case"V":e[0]="L",c=e[1],e[1]=l,e[2]=c;break;case"m":e[0]="M",e[1]+=l,e[2]+=c;case"M":l=e[1],c=e[2],u=e[1],d=e[2];break;case"c":e[0]="C",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c,e[5]+=l,e[6]+=c;case"C":s=e[3],o=e[4],l=e[5],c=e[6];break;case"s":e[0]="S",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c;case"S":"C"===r?(s=2*l-s,o=2*c-o):(s=l,o=c),l=e[3],c=e[4],e[0]="C",e[5]=e[3],e[6]=e[4],e[3]=e[1],e[4]=e[2],e[1]=s,e[2]=o,s=e[3],o=e[4];break;case"q":e[0]="Q",e[1]+=l,e[2]+=c,e[3]+=l,e[4]+=c;case"Q":s=e[1],o=e[2],l=e[3],c=e[4];break;case"t":e[0]="T",e[1]+=l,e[2]+=c;case"T":"Q"===r?(s=2*l-s,o=2*c-o):(s=l,o=c),e[0]="Q",l=e[1],c=e[2],e[1]=s,e[2]=o,e[3]=l,e[4]=c;break;case"a":e[0]="A",e[6]+=l,e[7]+=c;case"A":i=!0,f=f.concat(a(l,c,e)),l=e[6],c=e[7];break;case"z":case"Z":l=u,c=d}i||f.push(e),r=e[0]}return f},v.util.getPathSegmentsInfo=p,v.util.fromArcToBeziers=a,v.util.fromArcToBeizers=a,v.util.getBoundsOfCurve=o,v.util.getPointOnPath=function(t,e,n){n||(n=p(t));for(var i=0;e-n[i].length>0&&i<n.length-2;)e-=n[i].length,i++;var r,s=n[i],o=e/s.length,a=t[i];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":case"z":return(r=new v.Point(s.x,s.y).lerp(new v.Point(s.destX,s.destY),o)).angle=Math.atan2(s.destY-s.y,s.destX-s.x),r;case"L":return(r=new v.Point(s.x,s.y).lerp(new v.Point(a[1],a[2]),o)).angle=Math.atan2(a[2]-s.y,a[1]-s.x),r;case"C":case"Q":return function(t,e){for(var n,i,r,s=0,o=0,a=t.iterator,c={x:t.x,y:t.y},h=.01,u=t.angleFinder;o<e&&s<=1&&h>1e-4;)n=a(s),r=s,(i=l(c.x,c.y,n.x,n.y))+o>e?s-=h/=2:(c=n,s+=h,o+=i);return n.angle=u(r),n}(s,e)}},v.util.getBoundsOfArc=function(t,e,n,i,s,a,l,c,h){for(var u,d=0,f=0,p=[],g=r(c-t,h-e,n,i,a,l,s),m=0,v=g.length;m<v;m++)u=o(d,f,g[m][1],g[m][2],g[m][3],g[m][4],g[m][5],g[m][6]),p.push({x:u[0].x+t,y:u[0].y+e}),p.push({x:u[1].x+t,y:u[1].y+e}),d=g[m][5],f=g[m][6];return p},v.util.drawArc=function(t,e,n,i){a(e,n,i=i.slice(0).unshift("X")).forEach(function(e){t.bezierCurveTo.apply(t,e.slice(1))})}}(),function(){var t=Array.prototype.slice;function e(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}v.util.array={fill:function(t,e){for(var n=t.length;n--;)t[n]=e;return t},invoke:function(e,n){for(var i=t.call(arguments,2),r=[],s=0,o=e.length;s<o;s++)r[s]=i.length?e[s][n].apply(e[s],i):e[s][n].call(e[s]);return r},min:function(t,n){return e(t,n,function(t,e){return t<e})},max:function(t,n){return e(t,n,function(t,e){return t>=e})}}}(),function(){function t(e,n,i){if(i)if(!v.isLikelyNode&&n instanceof Element)e=n;else if(n instanceof Array){e=[];for(var r=0,s=n.length;r<s;r++)e[r]=t({},n[r],i)}else if(n&&"object"==typeof n)for(var o in n)"canvas"===o||"group"===o?e[o]=null:n.hasOwnProperty(o)&&(e[o]=t({},n[o],i));else e=n;else for(var o in n)e[o]=n[o];return e}v.util.object={extend:t,clone:function(e,n){return t({},e,n)}},v.util.object.extend(v.util,v.Observable)}(),function(){function t(t,e){var n=t.charCodeAt(e);if(isNaN(n))return"";if(n<55296||n>57343)return t.charAt(e);if(55296<=n&&n<=56319){if(t.length<=e+1)throw"High surrogate without following low surrogate";var i=t.charCodeAt(e+1);if(56320>i||i>57343)throw"High surrogate without following low surrogate";return t.charAt(e)+t.charAt(e+1)}if(0===e)throw"Low surrogate without preceding high surrogate";var r=t.charCodeAt(e-1);if(55296>r||r>56319)throw"Low surrogate without preceding high surrogate";return!1}v.util.string={camelize:function(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})},capitalize:function(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())},escapeXml:function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")},graphemeSplit:function(e){var n,i=0,r=[];for(i=0;i<e.length;i++)!1!==(n=t(e,i))&&r.push(n);return r}}}(),function(){var t=Array.prototype.slice,e=function(){},n=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),i=function(t,e,i){for(var r in e)t.prototype[r]=r in t.prototype&&"function"==typeof t.prototype[r]&&(e[r]+"").indexOf("callSuper")>-1?function(t){return function(){var n=this.constructor.superclass;this.constructor.superclass=i;var r=e[t].apply(this,arguments);if(this.constructor.superclass=n,"initialize"!==t)return r}}(r):e[r],n&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};function r(){}function s(e){for(var n=null,i=this;i.constructor.superclass;){var r=i.constructor.superclass.prototype[e];if(i[e]!==r){n=r;break}i=i.constructor.superclass.prototype}return n?arguments.length>1?n.apply(this,t.call(arguments,1)):n.call(this):console.log("tried to callSuper "+e+", method not found in prototype chain",this)}v.util.createClass=function(){var n=null,o=t.call(arguments,0);function a(){this.initialize.apply(this,arguments)}"function"==typeof o[0]&&(n=o.shift()),a.superclass=n,a.subclasses=[],n&&(r.prototype=n.prototype,a.prototype=new r,n.subclasses.push(a));for(var l=0,c=o.length;l<c;l++)i(a,o[l],n);return a.prototype.initialize||(a.prototype.initialize=e),a.prototype.constructor=a,a.prototype.callSuper=s,a}}(),i=!!v.document.createElement("div").attachEvent,r=["touchstart","touchmove","touchend"],v.util.addListener=function(t,e,n,r){t&&t.addEventListener(e,n,!i&&r)},v.util.removeListener=function(t,e,n,r){t&&t.removeEventListener(e,n,!i&&r)},v.util.getPointer=function(t){var e=v.util.getScrollLeftTop(t.target),n=function(t){var e=t.changedTouches;return e&&e[0]?e[0]:t}(t);return{x:n.clientX+e.left,y:n.clientY+e.top}},v.util.isTouchEvent=function(t){return r.indexOf(t.type)>-1||"touch"===t.pointerType},s=v.document.createElement("div"),o=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,a=function(t){return t},"string"==typeof s.style.opacity?a=function(t,e){return t.style.opacity=e,t}:"string"==typeof s.style.filter&&(a=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),o.test(n.filter)?n.filter=n.filter.replace(o,e=e>=.9999?"":"alpha(opacity="+100*e+")"):n.filter+=" alpha(opacity="+100*e+")",t}),v.util.setStyle=function(t,e){var n=t.style;if(!n)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?a(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)"opacity"===i?a(t,e[i]):n["float"===i||"cssFloat"===i?void 0===n.styleFloat?"cssFloat":"styleFloat":i]=e[i];return t},function(){var t,e,n,i,r=Array.prototype.slice,s=function(t){return r.call(t,0)};try{t=s(v.document.childNodes)instanceof Array}catch(l){}function o(t,e){var n=v.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function a(t){for(var e=0,n=0,i=v.document.documentElement,r=v.document.body||{scrollLeft:0,scrollTop:0};t&&(t.parentNode||t.host)&&((t=t.parentNode||t.host)===v.document?(e=r.scrollLeft||i.scrollLeft||0,n=r.scrollTop||i.scrollTop||0):(e+=t.scrollLeft||0,n+=t.scrollTop||0),1!==t.nodeType||"fixed"!==t.style.position););return{left:e,top:n}}t||(s=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e}),e=v.document.defaultView&&v.document.defaultView.getComputedStyle?function(t,e){var n=v.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},i="userSelect"in(n=v.document.documentElement.style)?"userSelect":"MozUserSelect"in n?"MozUserSelect":"WebkitUserSelect"in n?"WebkitUserSelect":"KhtmlUserSelect"in n?"KhtmlUserSelect":"",v.util.makeElementUnselectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=v.util.falseFunction),i?t.style[i]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t},v.util.makeElementSelectable=function(t){return void 0!==t.onselectstart&&(t.onselectstart=null),i?t.style[i]="":"string"==typeof t.unselectable&&(t.unselectable=""),t},v.util.setImageSmoothing=function(t,e){t.imageSmoothingEnabled=t.imageSmoothingEnabled||t.webkitImageSmoothingEnabled||t.mozImageSmoothingEnabled||t.msImageSmoothingEnabled||t.oImageSmoothingEnabled,t.imageSmoothingEnabled=e},v.util.getById=function(t){return"string"==typeof t?v.document.getElementById(t):t},v.util.toArray=s,v.util.addClass=function(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)},v.util.makeElement=o,v.util.wrapElement=function(t,e,n){return"string"==typeof e&&(e=o(e,n)),t.parentNode&&t.parentNode.replaceChild(e,t),e.appendChild(t),e},v.util.getScrollLeftTop=a,v.util.getElementOffset=function(t){var n,i,r=t&&t.ownerDocument,s={left:0,top:0},o={left:0,top:0},l={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!r)return o;for(var c in l)o[l[c]]+=parseInt(e(t,c),10)||0;return n=r.documentElement,void 0!==t.getBoundingClientRect&&(s=t.getBoundingClientRect()),i=a(t),{left:s.left+i.left-(n.clientLeft||0)+o.left,top:s.top+i.top-(n.clientTop||0)+o.top}},v.util.getNodeCanvas=function(t){var e=v.jsdomImplForWrapper(t);return e._canvas||e._image},v.util.cleanUpJsdomNode=function(t){if(v.isLikelyNode){var e=v.jsdomImplForWrapper(t);e&&(e._image=null,e._canvas=null,e._currentSrc=null,e._attributes=null,e._classList=null)}}}(),function(){function t(){}v.util.request=function(e,n){n||(n={});var i=n.method?n.method.toUpperCase():"GET",r=n.onComplete||function(){},s=new v.window.XMLHttpRequest,o=n.body||n.parameters;return s.onreadystatechange=function(){4===s.readyState&&(r(s),s.onreadystatechange=t)},"GET"===i&&(o=null,"string"==typeof n.parameters&&(e=function(t,e){return t+(/\?/.test(t)?"&":"?")+e}(e,n.parameters))),s.open(i,e,!0),"POST"!==i&&"PUT"!==i||s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(o),s}}(),v.log=console.log,v.warn=console.warn,function(){function t(){return!1}function e(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}var n=v.window.requestAnimationFrame||v.window.webkitRequestAnimationFrame||v.window.mozRequestAnimationFrame||v.window.oRequestAnimationFrame||v.window.msRequestAnimationFrame||function(t){return v.window.setTimeout(t,1e3/60)},i=v.window.cancelAnimationFrame||v.window.clearTimeout;function r(){return n.apply(v.window,arguments)}v.util.animate=function(n){r(function(i){n||(n={});var s,o=i||+new Date,a=n.duration||500,l=o+a,c=n.onChange||t,h=n.abort||t,u=n.onComplete||t,d=n.easing||e,f="startValue"in n?n.startValue:0,p="endValue"in n?n.endValue:100,g=n.byValue||p-f;n.onStart&&n.onStart(),function t(e){var n=(s=e||+new Date)>l?a:s-o,i=n/a,m=d(n,f,g,a),v=Math.abs((m-f)/g);if(!h())return s>l?(c(p,1,1),void u(p,1,1)):(c(m,v,i),void r(t));u(p,1,1)}(o)})},v.util.requestAnimFrame=r,v.util.cancelAnimFrame=function(){return i.apply(v.window,arguments)}}(),function(){function t(t,e,n){var i="rgba("+parseInt(t[0]+n*(e[0]-t[0]),10)+","+parseInt(t[1]+n*(e[1]-t[1]),10)+","+parseInt(t[2]+n*(e[2]-t[2]),10);return(i+=","+(t&&e?parseFloat(t[3]+n*(e[3]-t[3])):1))+")"}v.util.animateColor=function(e,n,i,r){var s=new v.Color(e).getSource(),o=new v.Color(n).getSource(),a=r.onComplete,l=r.onChange;v.util.animate(v.util.object.extend(r=r||{},{duration:i||500,startValue:s,endValue:o,byValue:o,easing:function(e,n,i,s){return t(n,i,r.colorEasing?r.colorEasing(e,s):1-Math.cos(e/s*(Math.PI/2)))},onComplete:function(e,n,i){if(a)return a(t(o,o,0),n,i)},onChange:function(e,n,i){if(l){if(Array.isArray(e))return l(t(e,e,0),n,i);l(e,n,i)}}}))}}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=0===e&&0===t?n/(2*Math.PI)*Math.asin(1):n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin((e*n-t.s)*(2*Math.PI)/t.p)}function n(t,e,n,r){return n-i(r-t,0,n,r)+e}function i(t,e,n,i){return(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}v.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:function(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e},easeInOutCubic:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,n,i){return n*(t/=i)*t*t*t+e},easeOutQuart:function(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,n,i){return n*(t/=i)*t*t*t*t+e},easeOutQuint:function(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,n,i){return(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},easeOutSine:function(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e},easeInOutSine:function(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e},easeInExpo:function(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e},easeOutExpo:function(t,e,n,i){return t===i?e+n:n*(1-Math.pow(2,-10*t/i))+e},easeInOutExpo:function(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2)<1?n/2*Math.pow(2,10*(t-1))+e:n/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e},easeOutCirc:function(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e},easeInOutCirc:function(t,e,n,i){return(t/=i/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(n,i,r,s){var o=0;return 0===n?i:1==(n/=s)?i+r:(o||(o=.3*s),-e(t(r,r,o,1.70158),n,s)+i)},easeOutElastic:function(e,n,i,r){var s=0;if(0===e)return n;if(1==(e/=r))return n+i;s||(s=.3*r);var o=t(i,i,s,1.70158);return o.a*Math.pow(2,-10*e)*Math.sin((e*r-o.s)*(2*Math.PI)/o.p)+o.c+n},easeInOutElastic:function(n,i,r,s){var o=0;if(0===n)return i;if(2==(n/=s/2))return i+r;o||(o=s*(.3*1.5));var a=t(r,r,o,1.70158);return n<1?-.5*e(a,n,s)+i:a.a*Math.pow(2,-10*(n-=1))*Math.sin((n*s-a.s)*(2*Math.PI)/a.p)*.5+a.c+i},easeInBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e},easeOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},easeInOutBack:function(t,e,n,i,r){return void 0===r&&(r=1.70158),(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},easeInBounce:n,easeOutBounce:i,easeInOutBounce:function(t,e,r,s){return t<s/2?.5*n(2*t,0,r,s)+e:.5*i(2*t-s,0,r,s)+.5*r+e}}}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,s=e.util.parseUnit,o=e.util.multiplyTransformMatrices,a={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},l={stroke:"strokeOpacity",fill:"fillOpacity"},c="font-size",h="clip-path";function u(t){return t in a?a[t]:t}function d(t,n,i,r){var a,l="[object Array]"===Object.prototype.toString.call(n);if("fill"!==t&&"stroke"!==t||"none"!==n){if("strokeUniform"===t)return"non-scaling-stroke"===n;if("strokeDashArray"===t)n="none"===n?null:n.replace(/,/g," ").split(/\s+/).map(parseFloat);else if("transformMatrix"===t)n=i&&i.transformMatrix?o(i.transformMatrix,e.parseTransformAttribute(n)):e.parseTransformAttribute(n);else if("visible"===t)n="none"!==n&&"hidden"!==n,i&&!1===i.visible&&(n=!1);else if("opacity"===t)n=parseFloat(n),i&&void 0!==i.opacity&&(n*=i.opacity);else if("textAnchor"===t)n="start"===n?"left":"end"===n?"right":"center";else if("charSpacing"===t)a=s(n,r)/r*1e3;else if("paintFirst"===t){var c=n.indexOf("fill"),h=n.indexOf("stroke");n="fill",(c>-1&&h>-1&&h<c||-1===c&&h>-1)&&(n="stroke")}else{if("href"===t||"xlink:href"===t||"font"===t)return n;if("imageSmoothing"===t)return"optimizeQuality"===n;a=l?n.map(s):s(n,r)}}else n="";return!l&&isNaN(a)?n:a}function f(t){return new RegExp("^("+t.join("|")+")\\b","i")}function p(t,e){var n,i,r,s=[];for(i=0,r=e.length;i<r;i++)n=t.getElementsByTagName(e[i]),s=s.concat(Array.prototype.slice.call(n));return s}function g(t,e){var n,i=!0;return(n=m(t,e.pop()))&&e.length&&(i=function(t,e){for(var n,i=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),i=m(t=t.parentNode,n);return 0===e.length}(t,e)),n&&i&&0===e.length}function m(t,e){var n,i,r=t.nodeName,s=t.getAttribute("class"),o=t.getAttribute("id");if(n=new RegExp("^"+r,"i"),e=e.replace(n,""),o&&e.length&&(n=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),s&&e.length)for(i=(s=s.split(" ")).length;i--;)n=new RegExp("\\."+s[i]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"");return 0===e.length}function v(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,s,o=t.getElementsByTagName("*");for(r=0,s=o.length;r<s;r++)if(e===(i=o[r]).getAttribute("id"))return i}e.svgValidTagNamesRegEx=f(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),e.svgViewBoxElementsRegEx=f(["symbol","image","marker","pattern","view","svg"]),e.svgInvalidAncestorsRegEx=f(["pattern","defs","symbol","metadata","clipPath","mask","desc"]),e.svgValidParentsRegEx=f(["symbol","g","a","svg","clipPath","defs"]),e.cssRules={},e.gradientDefs={},e.clipPaths={},e.parseTransformAttribute=function(){function t(t,n,i){t[i]=Math.tan(e.util.degreesToRadians(n[0]))}var n=e.iMatrix,i=e.reNum,r=e.commaWsp,s="(?:(?:(matrix)\\s*\\(\\s*("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")"+r+"("+i+")\\s*\\))|(?:(translate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))|(?:(scale)\\s*\\(\\s*("+i+")(?:"+r+"("+i+"))?\\s*\\))|(?:(rotate)\\s*\\(\\s*("+i+")(?:"+r+"("+i+")"+r+"("+i+"))?\\s*\\))|(?:(skewX)\\s*\\(\\s*("+i+")\\s*\\))|(?:(skewY)\\s*\\(\\s*("+i+")\\s*\\)))",o=new RegExp("^\\s*(?:(?:"+s+"(?:"+r+"*"+s+")*)?)\\s*$"),a=new RegExp(s,"g");return function(i){var r=n.concat(),l=[];if(!i||i&&!o.test(i))return r;i.replace(a,function(i){var o=new RegExp(s).exec(i).filter(function(t){return!!t}),a=o[1],c=o.slice(2).map(parseFloat);switch(a){case"translate":!function(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}(r,c);break;case"rotate":c[0]=e.util.degreesToRadians(c[0]),function(t,n){var i=e.util.cos(n[0]),r=e.util.sin(n[0]),s=0,o=0;3===n.length&&(s=n[1],o=n[2]),t[0]=i,t[1]=r,t[2]=-r,t[3]=i,t[4]=s-(i*s-r*o),t[5]=o-(r*s+i*o)}(r,c);break;case"scale":!function(t,e){var n=2===e.length?e[1]:e[0];t[0]=e[0],t[3]=n}(r,c);break;case"skewX":t(r,c,2);break;case"skewY":t(r,c,1);break;case"matrix":r=c}l.push(r.concat()),r=n.concat()});for(var c=l[0];l.length>1;)l.shift(),c=e.util.multiplyTransformMatrices(c,l[0]);return c}}();var y=new RegExp("^\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*,?\\s*("+e.reNum+"+)\\s*$");function _(t){if(!e.svgViewBoxElementsRegEx.test(t.nodeName))return{};var n,i,r,o,a,l,c=t.getAttribute("viewBox"),h=1,u=1,d=t.getAttribute("width"),f=t.getAttribute("height"),p=t.getAttribute("x")||0,g=t.getAttribute("y")||0,m=t.getAttribute("preserveAspectRatio")||"",v=!c||!(c=c.match(y)),_=!d||!f||"100%"===d||"100%"===f,b=v&&_,w={},C="",x=0,S=0;if(w.width=0,w.height=0,w.toBeParsed=b,v&&(p||g)&&t.parentNode&&"#document"!==t.parentNode.nodeName&&(C=" translate("+s(p)+" "+s(g)+") ",a=(t.getAttribute("transform")||"")+C,t.setAttribute("transform",a),t.removeAttribute("x"),t.removeAttribute("y")),b)return w;if(v)return w.width=s(d),w.height=s(f),w;if(n=-parseFloat(c[1]),i=-parseFloat(c[2]),r=parseFloat(c[3]),o=parseFloat(c[4]),w.minX=n,w.minY=i,w.viewBoxWidth=r,w.viewBoxHeight=o,_?(w.width=r,w.height=o):(w.width=s(d),w.height=s(f),h=w.width/r,u=w.height/o),"none"!==(m=e.util.parsePreserveAspectRatioAttribute(m)).alignX&&("meet"===m.meetOrSlice&&(u=h=h>u?u:h),"slice"===m.meetOrSlice&&(u=h=h>u?h:u),x=w.width-r*h,S=w.height-o*h,"Mid"===m.alignX&&(x/=2),"Mid"===m.alignY&&(S/=2),"Min"===m.alignX&&(x=0),"Min"===m.alignY&&(S=0)),1===h&&1===u&&0===n&&0===i&&0===p&&0===g)return w;if((p||g)&&"#document"!==t.parentNode.nodeName&&(C=" translate("+s(p)+" "+s(g)+") "),a=C+" matrix("+h+" 0 0 "+u+" "+(n*h+x)+" "+(i*u+S)+") ","svg"===t.nodeName){for(l=t.ownerDocument.createElementNS(e.svgNS,"g");t.firstChild;)l.appendChild(t.firstChild);t.appendChild(l)}else(l=t).removeAttribute("x"),l.removeAttribute("y"),a=l.getAttribute("transform")+a;return l.setAttribute("transform",a),w}function b(t,e){var n="xlink:href",i=v(t,e.getAttribute(n).substr(1));if(i&&i.getAttribute(n)&&b(t,i),["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"].forEach(function(t){i&&!e.hasAttribute(t)&&i.hasAttribute(t)&&e.setAttribute(t,i.getAttribute(t))}),!e.children.length)for(var r=i.cloneNode(!0);r.firstChild;)e.appendChild(r.firstChild);e.removeAttribute(n)}e.parseSVGDocument=function(t,n,r,s){if(t){!function(t){for(var n=p(t,["use","svg:use"]),i=0;n.length&&i<n.length;){var r=n[i],s=r.getAttribute("xlink:href")||r.getAttribute("href");if(null===s)return;var o,a,l,c,h=s.substr(1),u=r.getAttribute("x")||0,d=r.getAttribute("y")||0,f=v(t,h).cloneNode(!0),g=(f.getAttribute("transform")||"")+" translate("+u+", "+d+")",m=n.length,y=e.svgNS;if(_(f),/^svg$/i.test(f.nodeName)){var b=f.ownerDocument.createElementNS(y,"g");for(a=0,c=(l=f.attributes).length;a<c;a++)o=l.item(a),b.setAttributeNS(y,o.nodeName,o.nodeValue);for(;f.firstChild;)b.appendChild(f.firstChild);f=b}for(a=0,c=(l=r.attributes).length;a<c;a++)"x"!==(o=l.item(a)).nodeName&&"y"!==o.nodeName&&"xlink:href"!==o.nodeName&&"href"!==o.nodeName&&("transform"===o.nodeName?g=o.nodeValue+" "+g:f.setAttribute(o.nodeName,o.nodeValue));f.setAttribute("transform",g),f.setAttribute("instantiated_by_use","1"),f.removeAttribute("id"),r.parentNode.replaceChild(f,r),n.length===m&&i++}}(t);var o,a,l=e.Object.__uid++,c=_(t),h=e.util.toArray(t.getElementsByTagName("*"));if(c.crossOrigin=s&&s.crossOrigin,c.svgUid=l,0===h.length&&e.isLikelyNode){var u=[];for(o=0,a=(h=t.selectNodes('//*[name(.)!="svg"]')).length;o<a;o++)u[o]=h[o];h=u}var d=h.filter(function(t){return _(t),e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))&&!function(t,e){for(;t&&(t=t.parentNode);)if(t.nodeName&&e.test(t.nodeName.replace("svg:",""))&&!t.getAttribute("instantiated_by_use"))return!0;return!1}(t,e.svgInvalidAncestorsRegEx)});if(!d||d&&!d.length)n&&n([],{});else{var f={};h.filter(function(t){return"clipPath"===t.nodeName.replace("svg:","")}).forEach(function(t){var n=t.getAttribute("id");f[n]=e.util.toArray(t.getElementsByTagName("*")).filter(function(t){return e.svgValidTagNamesRegEx.test(t.nodeName.replace("svg:",""))})}),e.gradientDefs[l]=e.getGradientDefs(t),e.cssRules[l]=e.getCSSRules(t),e.clipPaths[l]=f,e.parseElements(d,function(t,i){n&&(n(t,c,i,h),delete e.gradientDefs[l],delete e.cssRules[l],delete e.clipPaths[l])},i(c),r,s)}}};var w=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+e.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+e.reNum+"))?\\s+(.*)");n(e,{parseFontDeclaration:function(t,e){var n=t.match(w);if(n){var i=n[1],r=n[3],o=n[4],a=n[5],l=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=s(o)),l&&(e.fontFamily=l),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,n=p(t,["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"]),i=0,r={};for(i=n.length;i--;)(e=n[i]).getAttribute("xlink:href")&&b(t,e),r[e.getAttribute("id")]=e;return r},parseAttributes:function(t,i,o){if(t){var a,f,p,m={};void 0===o&&(o=t.getAttribute("svgUid")),t.parentNode&&e.svgValidParentsRegEx.test(t.parentNode.nodeName)&&(m=e.parseAttributes(t.parentNode,i,o));var v=i.reduce(function(e,n){return(a=t.getAttribute(n))&&(e[n]=a),e},{}),y=n(function(t,n){var i={};for(var r in e.cssRules[n])if(g(t,r.split(" ")))for(var s in e.cssRules[n][r])i[s]=e.cssRules[n][r][s];return i}(t,o),e.parseStyleAttribute(t));v=n(v,y),y[h]&&t.setAttribute(h,y[h]),f=p=m.fontSize||e.Text.DEFAULT_SVG_FONT_SIZE,v[c]&&(v[c]=f=s(v[c],p));var _,b,w={};for(var C in v)b=d(_=u(C),v[C],m,f),w[_]=b;w&&w.font&&e.parseFontDeclaration(w.font,w);var x=n(m,w);return e.svgValidParentsRegEx.test(t.nodeName)?x:function(t){for(var n in l)if(void 0!==t[l[n]]&&""!==t[n]){if(void 0===t[n]){if(!e.Object.prototype[n])continue;t[n]=e.Object.prototype[n]}if(0!==t[n].indexOf("url(")){var i=new e.Color(t[n]);t[n]=i.setAlpha(r(i.getAlpha()*t[l[n]],2)).toRgba()}}return t}(x)}},parseElements:function(t,n,i,r,s){new e.ElementsParser(t,n,i,r,s).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"==typeof n?function(t,e){var n,i;t.replace(/;\s*$/,"").split(";").forEach(function(t){var r=t.split(":");n=r[0].trim().toLowerCase(),i=r[1].trim(),e[n]=i})}(n,e):function(t,e){for(var n in t)void 0!==t[n]&&(e[n.toLowerCase()]=t[n])}(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;var e,n,i=[];for(e=0,n=(t=(t=t.replace(/,/g," ").trim()).split(/\s+/)).length;e<n;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){var n,i,r=t.getElementsByTagName("style"),s={};for(n=0,i=r.length;n<i;n++){var o=r[n].textContent;""!==(o=o.replace(/\/\*[\s\S]*?\*\//g,"")).trim()&&o.match(/[^{]*\{[\s\S]*?\}/g).map(function(t){return t.trim()}).forEach(function(t){var r=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),o={},a=r[2].trim().replace(/;$/,"").split(/\s*;\s*/);for(n=0,i=a.length;n<i;n++){var l=a[n].split(/\s*:\s*/);o[l[0]]=l[1]}(t=r[1]).split(",").forEach(function(t){""!==(t=t.replace(/^svg/i,"").trim())&&(s[t]?e.util.object.extend(s[t],o):s[t]=e.util.object.clone(o))})})}return s},loadSVGFromURL:function(t,n,i,r){t=t.replace(/^\n\s*/,"").trim(),new e.util.request(t,{method:"get",onComplete:function(t){var s=t.responseXML;if(!s||!s.documentElement)return n&&n(null),!1;e.parseSVGDocument(s.documentElement,function(t,e,i,r){n&&n(t,e,i,r)},i,r)}})},loadSVGFromString:function(t,n,i,r){var s=(new e.window.DOMParser).parseFromString(t.trim(),"text/xml");e.parseSVGDocument(s.documentElement,function(t,e,i,r){n(t,e,i,r)},i,r)}})}(e),v.ElementsParser=function(t,e,n,i,r,s){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0,this.parsingOptions=r,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s},(l=v.ElementsParser.prototype).parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},l.createObjects=function(){var t=this;this.elements.forEach(function(e,n){e.setAttribute("svgUid",t.svgUid),t.createObject(e,n)})},l.findTag=function(t){return v[v.util.string.capitalize(t.tagName.replace("svg:",""))]},l.createObject=function(t,e){var n=this.findTag(t);if(n&&n.fromElement)try{n.fromElement(t,this.createCallback(e,t),this.options)}catch(i){v.log(i)}else this.checkIfDone()},l.createCallback=function(t,e){var n=this;return function(i){var r;n.resolveGradient(i,e,"fill"),n.resolveGradient(i,e,"stroke"),i instanceof v.Image&&i._originalElement&&(r=i.parsePreserveAspectRatioAttribute(e)),i._removeTransformMatrix(r),n.resolveClipPath(i,e),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},l.extractPropertyDefinition=function(t,e,n){var i=t[e],r=this.regexUrl;if(r.test(i)){r.lastIndex=0;var s=r.exec(i)[1];return r.lastIndex=0,v[n][this.svgUid][s]}},l.resolveGradient=function(t,e,n){var i=this.extractPropertyDefinition(t,n,"gradientDefs");if(i){var r=e.getAttribute(n+"-opacity"),s=v.Gradient.fromElement(i,t,r,this.options);t.set(n,s)}},l.createClipPathCallback=function(t,e){return function(t){t._removeTransformMatrix(),t.fillRule=t.clipRule,e.push(t)}},l.resolveClipPath=function(t,e){var n,i,r,s,o=this.extractPropertyDefinition(t,"clipPath","clipPaths");if(o){r=[],i=v.util.invertTransform(t.calcTransformMatrix());for(var a=o[0].parentNode,l=e;l.parentNode&&l.getAttribute("clip-path")!==t.clipPath;)l=l.parentNode;l.parentNode.appendChild(a);for(var c=0;c<o.length;c++)this.findTag(n=o[c]).fromElement(n,this.createClipPathCallback(t,r),this.options);o=1===r.length?r[0]:new v.Group(r),s=v.util.multiplyTransformMatrices(i,o.calcTransformMatrix()),o.clipPath&&this.resolveClipPath(o,l);var h=v.util.qrDecompose(s);o.flipX=!1,o.flipY=!1,o.set("scaleX",h.scaleX),o.set("scaleY",h.scaleY),o.angle=h.angle,o.skewX=h.skewX,o.skewY=0,o.setPositionByOrigin({x:h.translateX,y:h.translateY},"center","center"),t.clipPath=o}else delete t.clipPath},l.checkIfDone=function(){0==--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances,this.elements))},function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t,e){this.x=t,this.y=e}e.Point?e.warn("fabric.Point is already defined"):(e.Point=n,n.prototype={type:"point",constructor:n,add:function(t){return new n(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new n(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new n(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new n(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new n(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new n(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,e){return void 0===e&&(e=.5),e=Math.max(Math.min(1,e),0),new n(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return this.lerp(t)},min:function(t){return new n(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new n(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setFromPoint:function(t){return this.x=t.x,this.y=t.y,this},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n},clone:function(){return new n(this.x,this.y)}})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){this.status=t,this.points=[]}e.Intersection?e.warn("fabric.Intersection is already defined"):(e.Intersection=n,e.Intersection.prototype={constructor:n,appendPoint:function(t){return this.points.push(t),this},appendPoints:function(t){return this.points=this.points.concat(t),this}},e.Intersection.intersectLineLine=function(t,i,r,s){var o,a=(s.x-r.x)*(t.y-r.y)-(s.y-r.y)*(t.x-r.x),l=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),c=(s.y-r.y)*(i.x-t.x)-(s.x-r.x)*(i.y-t.y);if(0!==c){var h=a/c,u=l/c;0<=h&&h<=1&&0<=u&&u<=1?(o=new n("Intersection")).appendPoint(new e.Point(t.x+h*(i.x-t.x),t.y+h*(i.y-t.y))):o=new n}else o=new n(0===a||0===l?"Coincident":"Parallel");return o},e.Intersection.intersectLinePolygon=function(t,e,i){var r,s,o=new n,a=i.length;for(s=0;s<a;s++)r=n.intersectLineLine(t,e,i[s],i[(s+1)%a]),o.appendPoints(r.points);return o.points.length>0&&(o.status="Intersection"),o},e.Intersection.intersectPolygonPolygon=function(t,e){var i,r=new n,s=t.length;for(i=0;i<s;i++){var o=n.intersectLinePolygon(t[i],t[(i+1)%s],e);r.appendPoints(o.points)}return r.points.length>0&&(r.status="Intersection"),r},e.Intersection.intersectPolygonRectangle=function(t,i,r){var s=i.min(r),o=i.max(r),a=new e.Point(o.x,s.y),l=new e.Point(s.x,o.y),c=n.intersectLinePolygon(s,a,t),h=n.intersectLinePolygon(a,o,t),u=n.intersectLinePolygon(o,l,t),d=n.intersectLinePolygon(l,s,t),f=new n;return f.appendPoints(c.points),f.appendPoints(h.points),f.appendPoints(u.points),f.appendPoints(d.points),f.points.length>0&&(f.status="Intersection"),f})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});function n(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function i(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t}e.Color?e.warn("fabric.Color is already defined."):(e.Color=n,e.Color.prototype={_tryParsingColor:function(t){var e;t in n.colorNameMap&&(t=n.colorNameMap[t]),"transparent"===t&&(e=[255,255,255,0]),e||(e=n.sourceFromHex(t)),e||(e=n.sourceFromRgb(t)),e||(e=n.sourceFromHsl(t)),e||(e=[0,0,0,1]),e&&this.setSource(e)},_rgbToHsl:function(t,n,i){var r,s,o,a=e.util.array.max([t/=255,n/=255,i/=255]),l=e.util.array.min([t,n,i]);if(o=(a+l)/2,a===l)r=s=0;else{var c=a-l;switch(s=o>.5?c/(2-a-l):c/(a+l),a){case t:r=(n-i)/c+(n<i?6:0);break;case n:r=(i-t)/c+2;break;case i:r=(t-n)/c+4}r/=6}return[Math.round(360*r),Math.round(100*s),Math.round(100*o)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=1===(t=i[0].toString(16)).length?"0"+t:t,e=1===(e=i[1].toString(16)).length?"0"+e:e,n=1===(n=i[2].toString(16)).length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},toHexa:function(){var t,e=this.getSource();return t=1===(t=(t=Math.round(255*e[3])).toString(16)).length?"0"+t:t,this.toHex()+t.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10);return this.setSource([e,e,e,t[3]]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){t instanceof n||(t=new n(t));var e,i=[],r=this.getAlpha(),s=this.getSource(),o=t.getSource();for(e=0;e<3;e++)i.push(Math.round(.5*s[e]+.5*o[e]));return i[3]=r,this.setSource(i),this}},e.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*((?:\d*\.?\d+)?)\s*)?\)$/i,e.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/i,e.Color.reHex=/^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i,e.Color.colorNameMap={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"},e.Color.fromRgb=function(t){return n.fromSource(n.sourceFromRgb(t))},e.Color.sourceFromRgb=function(t){var e=t.match(n.reRGBa);if(e){var i=parseInt(e[1],10)/(/%$/.test(e[1])?100:1)*(/%$/.test(e[1])?255:1),r=parseInt(e[2],10)/(/%$/.test(e[2])?100:1)*(/%$/.test(e[2])?255:1),s=parseInt(e[3],10)/(/%$/.test(e[3])?100:1)*(/%$/.test(e[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(s,10),e[4]?parseFloat(e[4]):1]}},e.Color.fromRgba=n.fromRgb,e.Color.fromHsl=function(t){return n.fromSource(n.sourceFromHsl(t))},e.Color.sourceFromHsl=function(t){var e=t.match(n.reHSLa);if(e){var r,s,o,a=(parseFloat(e[1])%360+360)%360/360,l=parseFloat(e[2])/(/%$/.test(e[2])?100:1),c=parseFloat(e[3])/(/%$/.test(e[3])?100:1);if(0===l)r=s=o=c;else{var h=c<=.5?c*(l+1):c+l-c*l,u=2*c-h;r=i(u,h,a+1/3),s=i(u,h,a),o=i(u,h,a-1/3)}return[Math.round(255*r),Math.round(255*s),Math.round(255*o),e[4]?parseFloat(e[4]):1]}},e.Color.fromHsla=n.fromHsl,e.Color.fromHex=function(t){return n.fromSource(n.sourceFromHex(t))},e.Color.sourceFromHex=function(t){if(t.match(n.reHex)){var e=t.slice(t.indexOf("#")+1),i=3===e.length||4===e.length,r=8===e.length||4===e.length,s=i?e.charAt(0)+e.charAt(0):e.substring(0,2),o=i?e.charAt(1)+e.charAt(1):e.substring(2,4),a=i?e.charAt(2)+e.charAt(2):e.substring(4,6),l=r?i?e.charAt(3)+e.charAt(3):e.substring(6,8):"FF";return[parseInt(s,16),parseInt(o,16),parseInt(a,16),parseFloat((parseInt(l,16)/255).toFixed(2))]}},e.Color.fromSource=function(t){var e=new n;return e.setSource(t),e})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=["e","se","s","sw","w","nw","n","ne","e"],i=["ns","nesw","ew","nwse"],r={},s="left",o="top",a="right",l="bottom",c="center",h={top:l,bottom:o,left:a,right:s,center:c},u=e.util.radiansToDegrees,d=Math.sign||function(t){return(t>0)-(t<0)||+t};function f(t,e){var n=t.angle+u(Math.atan2(e.y,e.x))+360;return Math.round(n%360/45)}function p(t,n){var i=n.transform.target,r=i.canvas,s=e.util.object.clone(n);s.target=i,r&&r.fire("object:"+t,s),i.fire(t,n)}function g(t,e){var n=e.canvas,i=t[n.uniScaleKey];return n.uniformScaling&&!i||!n.uniformScaling&&i}function m(t){return t.originX===c&&t.originY===c}function v(t,e,n){var i=t.lockScalingX,r=t.lockScalingY;return!((!i||!r)&&(e||!i&&!r||!n)&&(!i||"x"!==e)&&(!r||"y"!==e))}function y(t,e,n,i){return{e:t,transform:e,pointer:{x:n,y:i}}}function _(t){return function(e,n,i,r){var s=n.target,o=s.getCenterPoint(),a=s.translateToOriginPoint(o,n.originX,n.originY),l=t(e,n,i,r);return s.setPositionByOrigin(a,n.originX,n.originY),l}}function b(t,e){return function(n,i,r,s){var o=e(n,i,r,s);return o&&p(t,y(n,i,r,s)),o}}function w(t,n,i,r,s){var o=t.target,a=o.controls[t.corner],l=o.canvas.getZoom(),c=o.padding/l,h=o.toLocalPoint(new e.Point(r,s),n,i);return h.x>=c&&(h.x-=c),h.x<=-c&&(h.x+=c),h.y>=c&&(h.y-=c),h.y<=c&&(h.y+=c),h.x-=a.offsetX,h.y-=a.offsetY,h}function C(t){return t.flipX!==t.flipY}function x(t,e,n,i,r){if(0!==t[e]){var s=t._getTransformedDimensions()[i];t.set(n,r/s*t[n])}}function S(t,e,n,i){var r,c=e.target,h=c._getTransformedDimensions(0,c.skewY),d=w(e,e.originX,e.originY,n,i),f=Math.abs(2*d.x)-h.x,p=c.skewX;f<2?r=0:(r=u(Math.atan2(f/c.scaleX,h.y/c.scaleY)),e.originX===s&&e.originY===l&&(r=-r),e.originX===a&&e.originY===o&&(r=-r),C(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().y;c.set("skewX",r),x(c,"skewY","scaleY","y",m)}return g}function k(t,e,n,i){var r,c=e.target,h=c._getTransformedDimensions(c.skewX,0),d=w(e,e.originX,e.originY,n,i),f=Math.abs(2*d.y)-h.y,p=c.skewY;f<2?r=0:(r=u(Math.atan2(f/c.scaleY,h.x/c.scaleX)),e.originX===s&&e.originY===l&&(r=-r),e.originX===a&&e.originY===o&&(r=-r),C(c)&&(r=-r));var g=p!==r;if(g){var m=c._getTransformedDimensions().x;c.set("skewY",r),x(c,"skewX","scaleX","x",m)}return g}function T(t,e,n,i,r){var s,o,a,l,c,u,f=e.target,p=f.lockScalingX,y=f.lockScalingY,_=(r=r||{}).by,b=g(t,f),C=v(f,_,b),x=e.gestureScale;if(C)return!1;if(x)o=e.scaleX*x,a=e.scaleY*x;else{if(s=w(e,e.originX,e.originY,n,i),c="y"!==_?d(s.x):1,u="x"!==_?d(s.y):1,e.signX||(e.signX=c),e.signY||(e.signY=u),f.lockScalingFlip&&(e.signX!==c||e.signY!==u))return!1;if(l=f._getTransformedDimensions(),b&&!_){var S=Math.abs(s.x)+Math.abs(s.y),k=e.original,T=S/(Math.abs(l.x*k.scaleX/f.scaleX)+Math.abs(l.y*k.scaleY/f.scaleY));o=k.scaleX*T,a=k.scaleY*T}else o=Math.abs(s.x*f.scaleX/l.x),a=Math.abs(s.y*f.scaleY/l.y);m(e)&&(o*=2,a*=2),e.signX!==c&&"y"!==_&&(e.originX=h[e.originX],o*=-1,e.signX=c),e.signY!==u&&"x"!==_&&(e.originY=h[e.originY],a*=-1,e.signY=u)}var E=f.scaleX,O=f.scaleY;return _?("x"===_&&f.set("scaleX",o),"y"===_&&f.set("scaleY",a)):(!p&&f.set("scaleX",o),!y&&f.set("scaleY",a)),E!==f.scaleX||O!==f.scaleY}r.scaleCursorStyleHandler=function(t,e,i){var r=g(t,i),s="";if(0!==e.x&&0===e.y?s="x":0===e.x&&0!==e.y&&(s="y"),v(i,s,r))return"not-allowed";var o=f(i,e);return n[o]+"-resize"},r.skewCursorStyleHandler=function(t,e,n){var r="not-allowed";if(0!==e.x&&n.lockSkewingY)return r;if(0!==e.y&&n.lockSkewingX)return r;var s=f(n,e)%4;return i[s]+"-resize"},r.scaleSkewCursorStyleHandler=function(t,e,n){return t[n.canvas.altActionKey]?r.skewCursorStyleHandler(t,e,n):r.scaleCursorStyleHandler(t,e,n)},r.rotationWithSnapping=b("rotating",_(function(t,e,n,i){var r=e,s=r.target,o=s.translateToOriginPoint(s.getCenterPoint(),r.originX,r.originY);if(s.lockRotation)return!1;var a,l=Math.atan2(r.ey-o.y,r.ex-o.x),c=Math.atan2(i-o.y,n-o.x),h=u(c-l+r.theta);if(s.snapAngle>0){var d=s.snapAngle,f=s.snapThreshold||d,p=Math.ceil(h/d)*d,g=Math.floor(h/d)*d;Math.abs(h-g)<f?h=g:Math.abs(h-p)<f&&(h=p)}return h<0&&(h=360+h),a=s.angle!==(h%=360),s.angle=h,a})),r.scalingEqually=b("scaling",_(function(t,e,n,i){return T(t,e,n,i)})),r.scalingX=b("scaling",_(function(t,e,n,i){return T(t,e,n,i,{by:"x"})})),r.scalingY=b("scaling",_(function(t,e,n,i){return T(t,e,n,i,{by:"y"})})),r.scalingYOrSkewingX=function(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerX(t,e,n,i):r.scalingY(t,e,n,i)},r.scalingXOrSkewingY=function(t,e,n,i){return t[e.target.canvas.altActionKey]?r.skewHandlerY(t,e,n,i):r.scalingX(t,e,n,i)},r.changeWidth=b("resizing",_(function(t,e,n,i){var r=e.target,s=w(e,e.originX,e.originY,n,i),o=r.strokeWidth/(r.strokeUniform?r.scaleX:1),a=m(e)?2:1,l=r.width,c=Math.abs(s.x*a/r.scaleX)-o;return r.set("width",Math.max(c,0)),l!==c})),r.skewHandlerX=function(t,e,n,i){var r,l=e.target,h=l.skewX,u=e.originY;return!l.lockSkewingX&&(0===h?r=w(e,c,c,n,i).x>0?s:a:(h>0&&(r=u===o?s:a),h<0&&(r=u===o?a:s),C(l)&&(r=r===s?a:s)),e.originX=r,b("skewing",_(S))(t,e,n,i))},r.skewHandlerY=function(t,e,n,i){var r,a=e.target,h=a.skewY,u=e.originX;return!a.lockSkewingY&&(0===h?r=w(e,c,c,n,i).y>0?o:l:(h>0&&(r=u===s?o:l),h<0&&(r=u===s?l:o),C(a)&&(r=r===o?l:o)),e.originY=r,b("skewing",_(k))(t,e,n,i))},r.dragHandler=function(t,e,n,i){var r=e.target,s=n-e.offsetX,o=i-e.offsetY,a=!r.get("lockMovementX")&&r.left!==s,l=!r.get("lockMovementY")&&r.top!==o;return a&&r.set("left",s),l&&r.set("top",o),(a||l)&&p("moving",y(t,e,n,i)),a||l},r.scaleOrSkewActionName=function(t,e,n){var i=t[n.canvas.altActionKey];return 0===e.x?i?"skewX":"scaleY":0===e.y?i?"skewY":"scaleX":void 0},r.rotationStyleHandler=function(t,e,n){return n.lockRotation?"not-allowed":e.cursorStyle},r.fireEvent=p,r.wrapWithFixedAnchor=_,r.wrapWithFireEvent=b,r.getLocalPoint=w,e.controlsUtils=r}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.degreesToRadians,i=e.controlsUtils;i.renderCircleControl=function(t,e,n,i,r){i=i||{};var s,o=this.sizeX||i.cornerSize||r.cornerSize,a=this.sizeY||i.cornerSize||r.cornerSize,l=void 0!==i.transparentCorners?i.transparentCorners:r.transparentCorners,c=l?"stroke":"fill",h=!l&&(i.cornerStrokeColor||r.cornerStrokeColor),u=e,d=n;t.save(),t.fillStyle=i.cornerColor||r.cornerColor,t.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor,o>a?(s=o,t.scale(1,a/o),d=n*o/a):a>o?(s=a,t.scale(o/a,1),u=e*a/o):s=o,t.lineWidth=1,t.beginPath(),t.arc(u,d,s/2,0,2*Math.PI,!1),t[c](),h&&t.stroke(),t.restore()},i.renderSquareControl=function(t,e,i,r,s){r=r||{};var o=this.sizeX||r.cornerSize||s.cornerSize,a=this.sizeY||r.cornerSize||s.cornerSize,l=void 0!==r.transparentCorners?r.transparentCorners:s.transparentCorners,c=l?"stroke":"fill",h=!l&&(r.cornerStrokeColor||s.cornerStrokeColor),u=o/2,d=a/2;t.save(),t.fillStyle=r.cornerColor||s.cornerColor,t.strokeStyle=r.cornerStrokeColor||s.cornerStrokeColor,t.lineWidth=1,t.translate(e,i),t.rotate(n(s.angle)),t[c+"Rect"](-u,-d,o,a),h&&t.strokeRect(-u,-d,o,a),t.restore()}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Control=function(t){for(var e in t)this[e]=t[e]},e.Control.prototype={visible:!0,actionName:"scale",angle:0,x:0,y:0,offsetX:0,offsetY:0,sizeX:null,sizeY:null,touchSizeX:null,touchSizeY:null,cursorStyle:"crosshair",withConnection:!1,actionHandler:function(){},mouseDownHandler:function(){},mouseUpHandler:function(){},getActionHandler:function(){return this.actionHandler},getMouseDownHandler:function(){return this.mouseDownHandler},getMouseUpHandler:function(){return this.mouseUpHandler},cursorStyleHandler:function(t,e){return e.cursorStyle},getActionName:function(t,e){return e.actionName},getVisibility:function(t,e){var n=t._controlsVisibility;return n&&void 0!==n[e]?n[e]:this.visible},setVisibility:function(t){this.visible=t},positionHandler:function(t,n){return e.util.transformPoint({x:this.x*t.x+this.offsetX,y:this.y*t.y+this.offsetY},n)},calcCornerCoords:function(t,n,i,r,s){var o,a,l,c,h=s?this.touchSizeX:this.sizeX,u=s?this.touchSizeY:this.sizeY;if(h&&u&&h!==u){var d=Math.atan2(u,h),f=Math.sqrt(h*h+u*u)/2,p=d-e.util.degreesToRadians(t),g=Math.PI/2-d-e.util.degreesToRadians(t);o=f*e.util.cos(p),a=f*e.util.sin(p),l=f*e.util.cos(g),c=f*e.util.sin(g)}else f=.7071067812*(h&&u?h:n),p=e.util.degreesToRadians(45-t),o=l=f*e.util.cos(p),a=c=f*e.util.sin(p);return{tl:{x:i-c,y:r-l},tr:{x:i+o,y:r-a},bl:{x:i-o,y:r+a},br:{x:i+c,y:r+l}}},render:function(t,n,i,r,s){switch((r=r||{}).cornerStyle||s.cornerStyle){case"circle":e.controlsUtils.renderCircleControl.call(this,t,n,i,r,s);break;default:e.controlsUtils.renderSquareControl.call(this,t,n,i,r,s)}}}}(e),function(){function t(t,e){var n,i,r,s,o=t.getAttribute("style"),a=t.getAttribute("offset")||0;if(a=(a=parseFloat(a)/(/%$/.test(a)?100:1))<0?0:a>1?1:a,o){var l=o.split(/\s*;\s*/);for(""===l[l.length-1]&&l.pop(),s=l.length;s--;){var c=l[s].split(/\s*:\s*/),h=c[0].trim(),u=c[1].trim();"stop-color"===h?n=u:"stop-opacity"===h&&(r=u)}}return n||(n=t.getAttribute("stop-color")||"rgb(0,0,0)"),r||(r=t.getAttribute("stop-opacity")),i=(n=new v.Color(n)).getAlpha(),r=isNaN(parseFloat(r))?1:parseFloat(r),r*=i*e,{offset:a,color:n.toRgb(),opacity:r}}var e=v.util.object.clone;v.Gradient=v.util.createClass({offsetX:0,offsetY:0,gradientTransform:null,gradientUnits:"pixels",type:"linear",initialize:function(t){t||(t={}),t.coords||(t.coords={});var e,n=this;Object.keys(t).forEach(function(e){n[e]=t[e]}),this.id?this.id+="_"+v.Object.__uid++:this.id=v.Object.__uid++,e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice()},addColorStop:function(t){for(var e in t){var n=new v.Color(t[e]);this.colorStops.push({offset:parseFloat(e),color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(t){var e={type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?this.gradientTransform.concat():this.gradientTransform};return v.util.populateWithProperties(this,e,t),e},toSVG:function(t,n){var i,r,s,o,a=e(this.coords,!0),l=(n=n||{},e(this.colorStops,!0)),c=a.r1>a.r2,h=this.gradientTransform?this.gradientTransform.concat():v.iMatrix.concat(),u=-this.offsetX,d=-this.offsetY,f=!!n.additionalTransform,p="pixels"===this.gradientUnits?"userSpaceOnUse":"objectBoundingBox";if(l.sort(function(t,e){return t.offset-e.offset}),"objectBoundingBox"===p?(u/=t.width,d/=t.height):(u+=t.width/2,d+=t.height/2),"path"===t.type&&"percentage"!==this.gradientUnits&&(u-=t.pathOffset.x,d-=t.pathOffset.y),h[4]-=u,h[5]-=d,o='id="SVGID_'+this.id+'" gradientUnits="'+p+'"',o+=' gradientTransform="'+(f?n.additionalTransform+" ":"")+v.util.matrixToSVG(h)+'" ',"linear"===this.type?s=["<linearGradient ",o,' x1="',a.x1,'" y1="',a.y1,'" x2="',a.x2,'" y2="',a.y2,'">\n']:"radial"===this.type&&(s=["<radialGradient ",o,' cx="',c?a.x1:a.x2,'" cy="',c?a.y1:a.y2,'" r="',c?a.r1:a.r2,'" fx="',c?a.x2:a.x1,'" fy="',c?a.y2:a.y1,'">\n']),"radial"===this.type){if(c)for((l=l.concat()).reverse(),i=0,r=l.length;i<r;i++)l[i].offset=1-l[i].offset;var g=Math.min(a.r1,a.r2);if(g>0){var m=g/Math.max(a.r1,a.r2);for(i=0,r=l.length;i<r;i++)l[i].offset+=m*(1-l[i].offset)}}for(i=0,r=l.length;i<r;i++){var y=l[i];s.push("<stop ",'offset="',100*y.offset+"%",'" style="stop-color:',y.color,void 0!==y.opacity?";stop-opacity: "+y.opacity:";",'"/>\n')}return s.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),s.join("")},toLive:function(t){var e,n,i,r=v.util.object.clone(this.coords);if(this.type){for("linear"===this.type?e=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(e=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2)),n=0,i=this.colorStops.length;n<i;n++){var s=this.colorStops[n].color,o=this.colorStops[n].opacity,a=this.colorStops[n].offset;void 0!==o&&(s=new v.Color(s).setAlpha(o).toRgba()),e.addColorStop(a,s)}return e}}}),v.util.object.extend(v.Gradient,{fromElement:function(e,n,i,r){var s=parseFloat(i)/(/%$/.test(i)?100:1);s=s<0?0:s>1?1:s,isNaN(s)&&(s=1);var o,a,l,c,h=e.getElementsByTagName("stop"),u="userSpaceOnUse"===e.getAttribute("gradientUnits")?"pixels":"percentage",d=e.getAttribute("gradientTransform")||"",f=[],p=0,g=0;for("linearGradient"===e.nodeName||"LINEARGRADIENT"===e.nodeName?(o="linear",a=function(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}(e)):(o="radial",a=function(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}(e)),l=h.length;l--;)f.push(t(h[l],s));return c=v.parseTransformAttribute(d),function(t,e,n,i){var r,s;Object.keys(e).forEach(function(t){"Infinity"===(r=e[t])?s=1:"-Infinity"===r?s=0:(s=parseFloat(e[t],10),"string"==typeof r&&/^(\d+\.\d+)%|(\d+)%$/.test(r)&&(s*=.01,"pixels"===i&&("x1"!==t&&"x2"!==t&&"r2"!==t||(s*=n.viewBoxWidth||n.width),"y1"!==t&&"y2"!==t||(s*=n.viewBoxHeight||n.height)))),e[t]=s})}(0,a,r,u),"pixels"===u&&(p=-n.left,g=-n.top),new v.Gradient({id:e.getAttribute("id"),type:o,coords:a,colorStops:f,gradientUnits:u,gradientTransform:c,offsetX:p,offsetY:g})}})}(),function(){"use strict";var t=v.util.toFixed;v.Pattern=v.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,crossOrigin:"",patternTransform:null,initialize:function(t,e){if(t||(t={}),this.id=v.Object.__uid++,this.setOptions(t),!t.source||t.source&&"string"!=typeof t.source)e&&e(this);else{var n=this;this.source=v.util.createImage(),v.util.loadImage(t.source,function(t,i){n.source=t,e&&e(n,i)},null,this.crossOrigin)}},toObject:function(e){var n,i,r=v.Object.NUM_FRACTION_DIGITS;return"string"==typeof this.source.src?n=this.source.src:"object"==typeof this.source&&this.source.toDataURL&&(n=this.source.toDataURL()),i={type:"pattern",source:n,repeat:this.repeat,crossOrigin:this.crossOrigin,offsetX:t(this.offsetX,r),offsetY:t(this.offsetY,r),patternTransform:this.patternTransform?this.patternTransform.concat():null},v.util.populateWithProperties(this,i,e),i},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,n=e.width/t.width,i=e.height/t.height,r=this.offsetX/t.width,s=this.offsetY/t.height,o="";return"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat||(i=1,s&&(i+=Math.abs(s))),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat||(n=1,r&&(n+=Math.abs(r))),e.src?o=e.src:e.toDataURL&&(o=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+s+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+o+'"></image>\n</pattern>\n'},setOptions:function(t){for(var e in t)this[e]=t[e]},toLive:function(t){var e=this.source;if(!e)return"";if(void 0!==e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}})}(),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;e.Shadow?e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1,initialize:function(t){for(var n in"string"==typeof t&&(t=this._parseShadow(t)),t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[];return{color:(n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)").trim(),offsetX:parseFloat(i[1],10)||0,offsetY:parseFloat(i[2],10)||0,blur:parseFloat(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var i=40,r=40,s=e.Object.NUM_FRACTION_DIGITS,o=e.util.rotateVector({x:this.offsetX,y:this.offsetY},e.util.degreesToRadians(-t.angle)),a=new e.Color(this.color);return t.width&&t.height&&(i=100*n((Math.abs(o.x)+this.blur)/t.width,s)+20,r=100*n((Math.abs(o.y)+this.blur)/t.height,s)+20),t.flipX&&(o.x*=-1),t.flipY&&(o.y*=-1),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n\t<feGaussianBlur in="SourceAlpha" stdDeviation="'+n(this.blur?this.blur/2:0,s)+'"></feGaussianBlur>\n\t<feOffset dx="'+n(o.x,s)+'" dy="'+n(o.y,s)+'" result="oBlur" ></feOffset>\n\t<feFlood flood-color="'+a.toRgb()+'" flood-opacity="'+a.getAlpha()+'"/>\n\t<feComposite in2="oBlur" operator="in" />\n\t<feMerge>\n\t\t<feMergeNode></feMergeNode>\n\t\t<feMergeNode in="SourceGraphic"></feMergeNode>\n\t</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling};var t={},n=e.Shadow.prototype;return["color","blur","offsetX","offsetY","affectStroke","nonScaling"].forEach(function(e){this[e]!==n[e]&&(t[e]=this[e])},this),t}}),e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(-?\d+(?:\.\d*)?(?:px)?(?:\s?|$))?(\d+(?:\.\d*)?(?:px)?)?(?:\s?|$)(?:$|\s)/)}(e),function(){"use strict";if(v.StaticCanvas)v.warn("fabric.StaticCanvas is already defined.");else{var t=v.util.object.extend,e=v.util.getElementOffset,n=v.util.removeFromArray,i=v.util.toFixed,r=v.util.transformPoint,s=v.util.invertTransform,o=v.util.getNodeCanvas,a=v.util.createCanvasElement,l=new Error("Could not initialize `canvas` element");v.StaticCanvas=v.util.createClass(v.CommonMethods,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e)},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!1,renderOnAddRemove:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,viewportTransform:v.iMatrix.concat(),backgroundVpt:!0,overlayVpt:!0,enableRetinaScaling:!0,vptCoords:{},skipOffscreen:!0,clipPath:void 0,_initStatic:function(t,e){var n=this.requestRenderAllBound;this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this.interactive||this._initRetinaScaling(),e.overlayImage&&this.setOverlayImage(e.overlayImage,n),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,n),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,n),e.overlayColor&&this.setOverlayColor(e.overlayColor,n),this.calcOffset()},_isRetinaScaling:function(){return 1!==v.devicePixelRatio&&this.enableRetinaScaling},getRetinaScaling:function(){return this._isRetinaScaling()?v.devicePixelRatio:1},_initRetinaScaling:function(){if(this._isRetinaScaling()){var t=v.devicePixelRatio;this.__initRetinaScaling(t,this.lowerCanvasEl,this.contextContainer),this.upperCanvasEl&&this.__initRetinaScaling(t,this.upperCanvasEl,this.contextTop)}},__initRetinaScaling:function(t,e,n){e.setAttribute("width",this.width*t),e.setAttribute("height",this.height*t),n.scale(t,t)},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},__setBgOverlayImage:function(t,e,n,i){return"string"==typeof e?v.util.loadImage(e,function(e,r){if(e){var s=new v.Image(e,i);this[t]=s,s.canvas=this}n&&n(e,r)},this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,e&&(e.canvas=this),n&&n(e,!1)),this},__setBgOverlayColor:function(t,e,n){return this[t]=e,this._initGradient(e,t),this._initPattern(e,t,n),this},_createCanvasElement:function(){var t=a();if(!t)throw l;if(t.style||(t.style={}),void 0===t.getContext)throw l;return t},_initOptions:function(t){var e=this.lowerCanvasEl;this._setOptions(t),this.width=this.width||parseInt(e.width,10)||0,this.height=this.height||parseInt(e.height,10)||0,this.lowerCanvasEl.style&&(e.width=this.width,e.height=this.height,e.style.width=this.width+"px",e.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=t&&t.getContext?t:v.util.getById(t)||this._createCanvasElement(),v.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;for(var i in e=e||{},t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px",this.hasLostContext=!0),e.backstoreOnly||this._setCssDimension(i,n);return this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(),this._initRetinaScaling(),this.calcOffset(),e.cssOnly||this.requestRenderAll(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return this.viewportTransform[0]},setViewportTransform:function(t){var e,n,i,r=this._activeObject,s=this.backgroundImage,o=this.overlayImage;for(this.viewportTransform=t,n=0,i=this._objects.length;n<i;n++)(e=this._objects[n]).group||e.setCoords(!0);return r&&r.setCoords(),s&&s.setCoords(!0),o&&o.setCoords(!0),this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll(),this},zoomToPoint:function(t,e){var n=t,i=this.viewportTransform.slice(0);t=r(t,s(this.viewportTransform)),i[0]=e,i[3]=e;var o=r(t,i);return i[4]+=n.x-o.x,i[5]+=n.y-o.y,this.setViewportTransform(i)},setZoom:function(t){return this.zoomToPoint(new v.Point(0,0),t),this},absolutePan:function(t){var e=this.viewportTransform.slice(0);return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)},relativePan:function(t){return this.absolutePan(new v.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.fire("object:removed",{target:t}),t.fire("removed"),delete t.canvas},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.backgroundImage=null,this.overlayImage=null,this.backgroundColor="",this.overlayColor="",this._hasITextHandlers&&(this.off("mouse:up",this._mouseUpITextHandler),this._iTextInstances=null,this._hasITextHandlers=!1),this.clearContext(this.contextContainer),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll(),this},renderAll:function(){return this.renderCanvas(this.contextContainer,this._objects),this},renderAndReset:function(){this.isRendering=0,this.renderAll()},requestRenderAll:function(){return this.isRendering||(this.isRendering=v.util.requestAnimFrame(this.renderAndResetBound)),this},calcViewportBoundaries:function(){var t={},e=this.width,n=this.height,i=s(this.viewportTransform);return t.tl=r({x:0,y:0},i),t.br=r({x:e,y:n},i),t.tr=new v.Point(t.br.x,t.tl.y),t.bl=new v.Point(t.tl.x,t.br.y),this.vptCoords=t,t},cancelRequestedRender:function(){this.isRendering&&(v.util.cancelAnimFrame(this.isRendering),this.isRendering=0)},renderCanvas:function(t,e){var n=this.viewportTransform,i=this.clipPath;this.cancelRequestedRender(),this.calcViewportBoundaries(),this.clearContext(t),v.util.setImageSmoothing(t,this.imageSmoothingEnabled),this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._renderObjects(t,e),t.restore(),!this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),i&&(i.canvas=this,i.shouldCache(),i._transformDone=!0,i.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t)),this._renderOverlay(t),this.controlsAboveOverlay&&this.interactive&&this.drawControls(t),this.fire("after:render",{ctx:t})},drawClipPathOnCanvas:function(t){var e=this.viewportTransform,n=this.clipPath;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.globalCompositeOperation="destination-in",n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},_renderObjects:function(t,e){var n,i;for(n=0,i=e.length;n<i;++n)e[n]&&e[n].render(t)},_renderBackgroundOrOverlay:function(t,e){var n=this[e+"Color"],i=this[e+"Image"],r=this.viewportTransform,s=this[e+"Vpt"];if(n||i){if(n){t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=n.toLive?n.toLive(t,this):n,s&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),t.transform(1,0,0,1,n.offsetX||0,n.offsetY||0);var o=n.gradientTransform||n.patternTransform;o&&t.transform(o[0],o[1],o[2],o[3],o[4],o[5]),t.fill(),t.restore()}i&&(t.save(),s&&t.transform(r[0],r[1],r[2],r[3],r[4],r[5]),i.render(t),t.restore())}},_renderBackground:function(t){this._renderBackgroundOrOverlay(t,"background")},_renderOverlay:function(t){this._renderBackgroundOrOverlay(t,"overlay")},getCenter:function(){return{top:this.height/2,left:this.width/2}},centerObjectH:function(t){return this._centerObject(t,new v.Point(this.getCenter().left,t.getCenterPoint().y))},centerObjectV:function(t){return this._centerObject(t,new v.Point(t.getCenterPoint().x,this.getCenter().top))},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new v.Point(e.left,e.top))},viewportCenterObject:function(t){var e=this.getVpCenter();return this._centerObject(t,e)},viewportCenterObjectH:function(t){var e=this.getVpCenter();return this._centerObject(t,new v.Point(e.x,t.getCenterPoint().y)),this},viewportCenterObjectV:function(t){var e=this.getVpCenter();return this._centerObject(t,new v.Point(t.getCenterPoint().x,e.y))},getVpCenter:function(){var t=this.getCenter(),e=s(this.viewportTransform);return r({x:t.left,y:t.top},e)},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll(),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i=this.clipPath,r={version:v.version,objects:this._toObjects(e,n)};return i&&(r.clipPath=this._toObject(this.clipPath,e,n)),t(r,this.__serializeBgOverlay(e,n)),v.util.populateWithProperties(this,r,n),r},_toObjects:function(t,e){return this._objects.filter(function(t){return!t.excludeFromExport}).map(function(n){return this._toObject(n,t,e)},this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),r},__serializeBgOverlay:function(t,e){var n={},i=this.backgroundImage,r=this.overlayImage;return this.backgroundColor&&(n.background=this.backgroundColor.toObject?this.backgroundColor.toObject(e):this.backgroundColor),this.overlayColor&&(n.overlay=this.overlayColor.toObject?this.overlayColor.toObject(e):this.overlayColor),i&&!i.excludeFromExport&&(n.backgroundImage=this._toObject(i,t,e)),r&&!r.excludeFromExport&&(n.overlayImage=this._toObject(r,t,e)),n},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={}),t.reviver=e;var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this.clipPath&&n.push('<g clip-path="url(#'+this.clipPath.clipPathId+')" >\n'),this._setSVGBgOverlayColor(n,"background"),this._setSVGBgOverlayImage(n,"backgroundImage",e),this._setSVGObjects(n,e),this.clipPath&&n.push("</g>\n"),this._setSVGBgOverlayColor(n,"overlay"),this._setSVGBgOverlayImage(n,"overlayImage",e),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>\n','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,r=e.width||this.width,s=e.height||this.height,o='viewBox="0 0 '+this.width+" "+this.height+'" ',a=v.Object.NUM_FRACTION_DIGITS;e.viewBox?o='viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':this.svgViewportTransformation&&(o='viewBox="'+i(-(n=this.viewportTransform)[4]/n[0],a)+" "+i(-n[5]/n[3],a)+" "+i(this.width/n[0],a)+" "+i(this.height/n[3],a)+'" '),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',r,'" ','height="',s,'" ',o,'xml:space="preserve">\n',"<desc>Created with Fabric.js ",v.version,"</desc>\n","<defs>\n",this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),"</defs>\n")},createSVGClipPathMarkup:function(t){var e=this.clipPath;return e?(e.clipPathId="CLIPPATH_"+v.Object.__uid++,'<clipPath id="'+e.clipPathId+'" >\n'+this.clipPath.toClipPathSVG(t.reviver)+"</clipPath>\n"):""},createSVGRefElementsMarkup:function(){var t=this;return["background","overlay"].map(function(e){var n=t[e+"Color"];if(n&&n.toLive){var i=t[e+"Vpt"],r=t.viewportTransform;return n.toSVG({width:t.width/(i?r[0]:1),height:t.height/(i?r[3]:1)},{additionalTransform:i?v.util.matrixToSVG(r):""})}}).join("")},createSVGFontFacesMarkup:function(){var t,e,n,i,r,s,o,a,l="",c={},h=v.fontPaths,u=[];for(this._objects.forEach(function t(e){u.push(e),e._objects&&e._objects.forEach(t)}),o=0,a=u.length;o<a;o++)if(e=(t=u[o]).fontFamily,-1!==t.type.indexOf("text")&&!c[e]&&h[e]&&(c[e]=!0,t.styles))for(r in n=t.styles)for(s in i=n[r])!c[e=i[s].fontFamily]&&h[e]&&(c[e]=!0);for(var d in c)l+=["\t\t@font-face {\n","\t\t\tfont-family: '",d,"';\n","\t\t\tsrc: url('",h[d],"');\n","\t\t}\n"].join("");return l&&(l=['\t<style type="text/css">',"<![CDATA[\n",l,"]]>","</style>\n"].join("")),l},_setSVGObjects:function(t,e){var n,i,r,s=this._objects;for(i=0,r=s.length;i<r;i++)(n=s[i]).excludeFromExport||this._setSVGObject(t,n,e)},_setSVGObject:function(t,e,n){t.push(e.toSVG(n))},_setSVGBgOverlayImage:function(t,e,n){this[e]&&!this[e].excludeFromExport&&this[e].toSVG&&t.push(this[e].toSVG(n))},_setSVGBgOverlayColor:function(t,e){var n=this[e+"Color"],i=this.width,r=this.height;if(n)if(n.toLive){var s=n.repeat,o=v.util.invertTransform(this.viewportTransform),a=this[e+"Vpt"]?v.util.matrixToSVG(o):"";t.push('<rect transform="'+a+" translate(",i/2,",",r/2,')"',' x="',n.offsetX-i/2,'" y="',n.offsetY-r/2,'" ','width="',"repeat-y"===s||"no-repeat"===s?n.source.width:i,'" height="',"repeat-x"===s||"no-repeat"===s?n.source.height:r,'" fill="url(#SVGID_'+n.id+')"',"></rect>\n")}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',n,'"',"></rect>\n")},sendToBack:function(t){if(!t)return this;var e,i,r,s=this._activeObject;if(t===s&&"activeSelection"===t.type)for(e=(r=s._objects).length;e--;)n(this._objects,i=r[e]),this._objects.unshift(i);else n(this._objects,t),this._objects.unshift(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},bringToFront:function(t){if(!t)return this;var e,i,r,s=this._activeObject;if(t===s&&"activeSelection"===t.type)for(r=s._objects,e=0;e<r.length;e++)n(this._objects,i=r[e]),this._objects.push(i);else n(this._objects,t),this._objects.push(t);return this.renderOnAddRemove&&this.requestRenderAll(),this},sendBackwards:function(t,e){if(!t)return this;var i,r,s,o,a,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(a=l._objects,i=0;i<a.length;i++)(s=this._objects.indexOf(r=a[i]))>0+c&&(o=s-1,n(this._objects,r),this._objects.splice(o,0,r)),c++;else 0!==(s=this._objects.indexOf(t))&&(o=this._findNewLowerIndex(t,s,e),n(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewLowerIndex:function(t,e,n){var i,r;if(n){for(i=e,r=e-1;r>=0;--r)if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e-1;return i},bringForward:function(t,e){if(!t)return this;var i,r,s,o,a,l=this._activeObject,c=0;if(t===l&&"activeSelection"===t.type)for(i=(a=l._objects).length;i--;)(s=this._objects.indexOf(r=a[i]))<this._objects.length-1-c&&(o=s+1,n(this._objects,r),this._objects.splice(o,0,r)),c++;else(s=this._objects.indexOf(t))!==this._objects.length-1&&(o=this._findNewUpperIndex(t,s,e),n(this._objects,t),this._objects.splice(o,0,t));return this.renderOnAddRemove&&this.requestRenderAll(),this},_findNewUpperIndex:function(t,e,n){var i,r,s;if(n){for(i=e,r=e+1,s=this._objects.length;r<s;++r)if(t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t)){i=r;break}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderOnAddRemove&&this.requestRenderAll()},dispose:function(){return this.isRendering&&(v.util.cancelAnimFrame(this.isRendering),this.isRendering=0),this.forEachObject(function(t){t.dispose&&t.dispose()}),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose&&this.backgroundImage.dispose(),this.backgroundImage=null,this.overlayImage&&this.overlayImage.dispose&&this.overlayImage.dispose(),this.overlayImage=null,this._iTextInstances=null,this.contextContainer=null,v.util.cleanUpJsdomNode(this.lowerCanvasEl),this.lowerCanvasEl=void 0,this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this._objects.length+" }>"}}),t(v.StaticCanvas.prototype,v.Observable),t(v.StaticCanvas.prototype,v.Collection),t(v.StaticCanvas.prototype,v.DataURLExporter),t(v.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=a();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"setLineDash":return void 0!==n.setLineDash;default:return null}}}),v.StaticCanvas.prototype.toJSON=v.StaticCanvas.prototype.toObject,v.isLikelyNode&&(v.StaticCanvas.prototype.createPNGStream=function(){var t=o(this.lowerCanvasEl);return t&&t.createPNGStream()},v.StaticCanvas.prototype.createJPEGStream=function(t){var e=o(this.lowerCanvasEl);return e&&e.createJPEGStream(t)})}}(),v.BaseBrush=v.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeMiterLimit:10,strokeDashArray:null,limitedToCanvasSize:!1,_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,v.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray||[])},_saveAndTransform:function(t){var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},_setShadow:function(){if(this.shadow){var t=this.canvas,e=this.shadow,n=t.contextTop,i=t.getZoom();t&&t._isRetinaScaling()&&(i*=v.devicePixelRatio),n.shadowColor=e.color,n.shadowBlur=e.blur*i,n.shadowOffsetX=e.offsetX*i,n.shadowOffsetY=e.offsetY*i}},needsFullRender:function(){return new v.Color(this.color).getAlpha()<1||!!this.shadow},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0},_isOutSideCanvas:function(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}),v.PencilBrush=v.util.createClass(v.BaseBrush,{decimate:.4,initialize:function(t){this.canvas=t,this._points=[]},_drawSegment:function(t,e,n){var i=e.midPointFrom(n);return t.quadraticCurveTo(e.x,e.y,i.x,i.y),i},onMouseDown:function(t,e){this.canvas._isMainEvent(e.e)&&(this._prepareForDrawing(t),this._captureDrawingPath(t),this._render())},onMouseMove:function(t,e){if(this.canvas._isMainEvent(e.e)&&(!0!==this.limitedToCanvasSize||!this._isOutSideCanvas(t))&&this._captureDrawingPath(t)&&this._points.length>1)if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{var n=this._points,i=n.length,r=this.canvas.contextTop;this._saveAndTransform(r),this.oldEnd&&(r.beginPath(),r.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=this._drawSegment(r,n[i-2],n[i-1],!0),r.stroke(),r.restore()}},onMouseUp:function(t){return!this.canvas._isMainEvent(t.e)||(this.oldEnd=void 0,this._finalizeAndAddPath(),!1)},_prepareForDrawing:function(t){var e=new v.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1])||(this._points.push(t),0))},_reset:function(){this._points=[],this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new v.Point(t.x,t.y);return this._addPoint(e)},_render:function(){var t,e,n=this.canvas.contextTop,i=this._points[0],r=this._points[1];if(this._saveAndTransform(n),n.beginPath(),2===this._points.length&&i.x===r.x&&i.y===r.y){var s=this.width/1e3;i=new v.Point(i.x,i.y),r=new v.Point(r.x,r.y),i.x-=s,r.x+=s}for(n.moveTo(i.x,i.y),t=1,e=this._points.length;t<e;t++)this._drawSegment(n,i,r),i=this._points[t],r=this._points[t+1];n.lineTo(i.x,i.y),n.stroke(),n.restore()},convertPointsToSVGPath:function(t){var e,n=[],i=this.width/1e3,r=new v.Point(t[0].x,t[0].y),s=new v.Point(t[1].x,t[1].y),o=t.length,a=1,l=0,c=o>2;for(c&&(a=t[2].x<s.x?-1:t[2].x===s.x?0:1,l=t[2].y<s.y?-1:t[2].y===s.y?0:1),n.push("M ",r.x-a*i," ",r.y-l*i," "),e=1;e<o;e++){if(!r.eq(s)){var h=r.midPointFrom(s);n.push("Q ",r.x," ",r.y," ",h.x," ",h.y," ")}r=t[e],e+1<t.length&&(s=t[e+1])}return c&&(a=r.x>t[e-2].x?1:r.x===t[e-2].x?0:-1,l=r.y>t[e-2].y?1:r.y===t[e-2].y?0:-1),n.push("L ",r.x+a*i," ",r.y+l*i),n},createPath:function(t){var e=new v.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new v.Shadow(this.shadow)),e},decimatePoints:function(t,e){if(t.length<=2)return t;var n,i=this.canvas.getZoom(),r=Math.pow(e/i,2),s=t.length-1,o=t[0],a=[o];for(n=1;n<s-1;n++)Math.pow(o.x-t[n].x,2)+Math.pow(o.y-t[n].y,2)>=r&&a.push(o=t[n]);return a.push(t[s]),a},_finalizeAndAddPath:function(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));var t=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"!==t){var e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}else this.canvas.requestRenderAll()}}),v.CircleBrush=v.util.createClass(v.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop;this._saveAndTransform(n),this.dot(n,e),n.restore()},dot:function(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},_render:function(){var t,e,n=this.canvas.contextTop,i=this.points;for(this._saveAndTransform(n),t=0,e=i.length;t<e;t++)this.dot(n,i[t]);n.restore()},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))},onMouseUp:function(){var t,e,n=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;var i=[];for(t=0,e=this.points.length;t<e;t++){var r=this.points[t],s=new v.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&(s.shadow=new v.Shadow(this.shadow)),i.push(s)}var o=new v.Group(i);o.canvas=this.canvas,this.canvas.fire("before:path:created",{path:o}),this.canvas.add(o),this.canvas.fire("path:created",{path:o}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=n,this.canvas.requestRenderAll()},addPoint:function(t){var e=new v.Point(t.x,t.y),n=v.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new v.Color(this.color).setAlpha(v.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),v.SprayBrush=v.util.createClass(v.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render(this.sprayChunkPoints)},onMouseMove:function(t){!0===this.limitedToCanvasSize&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.render(this.sprayChunkPoints))},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;n<i;n++)for(var r=this.sprayChunks[n],s=0,o=r.length;s<o;s++){var a=new v.Rect({width:r[s].width,height:r[s].width,left:r[s].x+1,top:r[s].y+1,originX:"center",originY:"center",fill:this.color});e.push(a)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new v.Group(e);this.shadow&&l.set("shadow",new v.Shadow(this.shadow)),this.canvas.fire("before:path:created",{path:l}),this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()},_getOptimizedRects:function(t){var e,n,i,r={};for(n=0,i=t.length;n<i;n++)r[e=t[n].left+""+t[n].top]||(r[e]=t[n]);var s=[];for(e in r)s.push(r[e]);return s},render:function(t){var e,n,i=this.canvas.contextTop;for(i.fillStyle=this.color,this._saveAndTransform(i),e=0,n=t.length;e<n;e++){var r=t[e];void 0!==r.opacity&&(i.globalAlpha=r.opacity),i.fillRect(r.x,r.y,r.width,r.width)}i.restore()},_render:function(){var t,e,n=this.canvas.contextTop;for(n.fillStyle=this.color,this._saveAndTransform(n),t=0,e=this.sprayChunks.length;t<e;t++)this.render(this.sprayChunks[t]);n.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];var e,n,i,r,s=this.width/2;for(r=0;r<this.density;r++){e=v.util.getRandomInt(t.x-s,t.x+s),n=v.util.getRandomInt(t.y-s,t.y+s),i=this.dotWidthVariance?v.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var o=new v.Point(e,n);o.width=i,this.randomOpacity&&(o.opacity=v.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(o)}this.sprayChunks.push(this.sprayChunkPoints)}}),v.PatternBrush=v.util.createClass(v.PencilBrush,{getPatternSrc:function(){var t=v.util.createCanvasElement(),e=t.getContext("2d");return t.width=t.height=25,e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill(),t},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat")},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t),n=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new v.Pattern({source:this.source||this.getPatternSrcFunction(),offsetX:-n.x,offsetY:-n.y}),e}}),function(){var t=v.util.getPointer,e=v.util.degreesToRadians,n=Math.abs,i=v.StaticCanvas.supports("setLineDash"),r=v.util.isTouchEvent,s=.5;for(var o in v.Canvas=v.util.createClass(v.StaticCanvas,{initialize:function(t,e){e||(e={}),this.renderAndResetBound=this.renderAndReset.bind(this),this.requestRenderAllBound=this.requestRenderAll.bind(this),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas()},uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",interactive:!0,selection:!0,selectionKey:"shiftKey",altSelectionKey:null,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",notAllowedCursor:"not-allowed",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,preserveObjectStacking:!1,snapAngle:0,snapThreshold:null,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,targets:[],_hoveredTarget:null,_hoveredTargets:[],_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this._initRetinaScaling(),this.freeDrawingBrush=v.PencilBrush&&new v.PencilBrush(this),this.calcOffset()},_chooseObjectsToRender:function(){var t,e,n,i=this.getActiveObjects();if(i.length>0&&!this.preserveObjectStacking){e=[],n=[];for(var r=0,s=this._objects.length;r<s;r++)-1===i.indexOf(t=this._objects[r])?e.push(t):n.push(t);i.length>1&&(this._activeObject._objects=n),e.push.apply(e,n)}else e=this._objects;return e},renderAll:function(){return!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&this.renderTopLayer(this.contextTop),this.renderCanvas(this.contextContainer,this._chooseObjectsToRender()),this},renderTopLayer:function(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()},renderTop:function(){var t=this.contextTop;return this.clearContext(t),this.renderTopLayer(t),this.fire("after:render"),this},_normalizePointer:function(t,e){var n=t.calcTransformMatrix(),i=v.util.invertTransform(n),r=this.restorePointerVpt(e);return v.util.transformPoint(r,i)},isTargetTransparent:function(t,e,n){if(t.shouldCache()&&t._cacheCanvas&&t!==this._activeObject){var i=this._normalizePointer(t,{x:e,y:n}),r=Math.max(t.cacheTranslationX+i.x*t.zoomX,0),s=Math.max(t.cacheTranslationY+i.y*t.zoomY,0);return v.util.isTransparent(t._cacheContext,Math.round(r),Math.round(s),this.targetFindTolerance)}var o=this.contextCache,a=t.selectionBackgroundColor,l=this.viewportTransform;return t.selectionBackgroundColor="",this.clearContext(o),o.save(),o.transform(l[0],l[1],l[2],l[3],l[4],l[5]),t.render(o),o.restore(),t.selectionBackgroundColor=a,v.util.isTransparent(o,e,n,this.targetFindTolerance)},_isSelectionKeyPressed:function(t){return"[object Array]"===Object.prototype.toString.call(this.selectionKey)?!!this.selectionKey.find(function(e){return!0===t[e]}):t[this.selectionKey]},_shouldClearSelection:function(t,e){var n=this.getActiveObjects(),i=this._activeObject;return!e||e&&i&&n.length>1&&-1===n.indexOf(e)&&i!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e,n){var i;if(t)return"scale"===e||"scaleX"===e||"scaleY"===e||"resizing"===e?i=this.centeredScaling||t.centeredScaling:"rotate"===e&&(i=this.centeredRotation||t.centeredRotation),i?!n:n},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":"mr"!==e&&"tr"!==e&&"br"!==e||(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":"bl"!==e&&"mb"!==e&&"br"!==e||(n.y="top"),n},_getActionFromCorner:function(t,e,n,i){if(!e||!t)return"drag";var r=i.controls[e];return r.getActionName(n,r,i)},_setupCurrentTransform:function(t,n,i){if(n){var r=this.getPointer(t),s=n.__corner,o=n.controls[s],a=i&&s?o.getActionHandler(t,n,o):v.controlsUtils.dragHandler,l=this._getActionFromCorner(i,s,t,n),c=this._getOriginFromCorner(n,s),h=t[this.centeredKey],u={target:n,action:l,actionHandler:a,corner:s,scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,offsetX:r.x-n.left,offsetY:r.y-n.top,originX:c.x,originY:c.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:e(n.angle),width:n.width*n.scaleX,shiftKey:t.shiftKey,altKey:h,original:v.util.saveObjectTransform(n)};this._shouldCenterTransform(n,l,h)&&(u.originX="center",u.originY="center"),u.original.originX=c.x,u.original.originY=c.y,this._currentTransform=u,this._beforeTransform(t)}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_drawSelection:function(t){var e=this._groupSelector,r=e.left,o=e.top,a=n(r),l=n(o);if(this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(r>0?0:-r),e.ey-(o>0?0:-o),a,l)),this.selectionLineWidth&&this.selectionBorderColor)if(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1&&!i){var c=e.ex+s-(r>0?0:a),h=e.ey+s-(o>0?0:l);t.beginPath(),v.util.drawDashedLine(t,c,h,c+a,h,this.selectionDashArray),v.util.drawDashedLine(t,c,h+l-1,c+a,h+l-1,this.selectionDashArray),v.util.drawDashedLine(t,c,h,c,h+l,this.selectionDashArray),v.util.drawDashedLine(t,c+a-1,h,c+a-1,h+l,this.selectionDashArray),t.closePath(),t.stroke()}else v.Object.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(e.ex+s-(r>0?0:a),e.ey+s-(o>0?0:l),a,l)},findTarget:function(t,e){if(!this.skipTargetFind){var n,i,s=this.getPointer(t,!0),o=this._activeObject,a=this.getActiveObjects(),l=r(t),c=a.length>1&&!e||1===a.length;if(this.targets=[],c&&o._findTargetCorner(s,l))return o;if(a.length>1&&!e&&o===this._searchPossibleTargets([o],s))return o;if(1===a.length&&o===this._searchPossibleTargets([o],s)){if(!this.preserveObjectStacking)return o;n=o,i=this.targets,this.targets=[]}var h=this._searchPossibleTargets(this._objects,s);return t[this.altSelectionKey]&&h&&n&&h!==n&&(h=n,this.targets=i),h}},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&e.containsPoint(t)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;if(!this.isTargetTransparent(e,n.x,n.y))return!0}},_searchPossibleTargets:function(t,e){for(var n,i,r=t.length;r--;){var s=t[r],o=s.group?this._normalizePointer(s.group,e):e;if(this._checkTarget(o,s,e)){(n=t[r]).subTargetCheck&&n instanceof v.Group&&(i=this._searchPossibleTargets(n._objects,e))&&this.targets.push(i);break}}return n},restorePointerVpt:function(t){return v.util.transformPoint(t,v.util.invertTransform(this.viewportTransform))},getPointer:function(e,n){if(this._absolutePointer&&!n)return this._absolutePointer;if(this._pointer&&n)return this._pointer;var i,r=t(e),s=this.upperCanvasEl,o=s.getBoundingClientRect(),a=o.width||0,l=o.height||0;a&&l||("top"in o&&"bottom"in o&&(l=Math.abs(o.top-o.bottom)),"right"in o&&"left"in o&&(a=Math.abs(o.right-o.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,n||(r=this.restorePointerVpt(r));var c=this.getRetinaScaling();return 1!==c&&(r.x/=c,r.y/=c),{x:r.x*(i=0===a||0===l?{width:1,height:1}:{width:s.width/a,height:s.height/l}).width,y:r.y*i.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,""),e=this.lowerCanvasEl,n=this.upperCanvasEl;n?n.className="":(n=this._createCanvasElement(),this.upperCanvasEl=n),v.util.addClass(n,"upper-canvas "+t),this.wrapperEl.appendChild(n),this._copyCanvasStyle(e,n),this._applyCanvasStyle(n),this.contextTop=n.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=v.util.wrapElement(this.lowerCanvasEl,"div",{class:this.containerClass}),v.util.setStyle(this.wrapperEl,{width:this.width+"px",height:this.height+"px",position:"relative"}),v.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.width||t.width,n=this.height||t.height;v.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0,"touch-action":this.allowTouchScrolling?"manipulation":"none","-ms-touch-action":this.allowTouchScrolling?"manipulation":"none"}),t.width=e,t.height=n,v.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},getActiveObject:function(){return this._activeObject},getActiveObjects:function(){var t=this._activeObject;return t?"activeSelection"===t.type&&t._objects?t._objects.slice(0):[t]:[]},_onObjectRemoved:function(t){t===this._activeObject&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared",{target:t}),t.fire("deselected")),t===this._hoveredTarget&&(this._hoveredTarget=null,this._hoveredTargets=[]),this.callSuper("_onObjectRemoved",t)},_fireSelectionEvents:function(t,e){var n=!1,i=this.getActiveObjects(),r=[],s=[];t.forEach(function(t){-1===i.indexOf(t)&&(n=!0,t.fire("deselected",{e:e,target:t}),s.push(t))}),i.forEach(function(i){-1===t.indexOf(i)&&(n=!0,i.fire("selected",{e:e,target:i}),r.push(i))}),t.length>0&&i.length>0?n&&this.fire("selection:updated",{e:e,selected:r,deselected:s,updated:r[0]||s[0],target:this._activeObject}):i.length>0?this.fire("selection:created",{e:e,selected:r,target:this._activeObject}):t.length>0&&this.fire("selection:cleared",{e:e,deselected:s})},setActiveObject:function(t,e){var n=this.getActiveObjects();return this._setActiveObject(t,e),this._fireSelectionEvents(n,e),this},_setActiveObject:function(t,e){return this._activeObject!==t&&!!this._discardActiveObject(e,t)&&!t.onSelect({e:e})&&(this._activeObject=t,!0)},_discardActiveObject:function(t,e){var n=this._activeObject;if(n){if(n.onDeselect({e:t,object:e}))return!1;this._activeObject=null}return!0},discardActiveObject:function(t){var e=this.getActiveObjects(),n=this.getActiveObject();return e.length&&this.fire("before:selection:cleared",{target:n,e:t}),this._discardActiveObject(t),this._fireSelectionEvents(e,t),this},dispose:function(){var t=this.wrapperEl;return this.removeListeners(),t.removeChild(this.upperCanvasEl),t.removeChild(this.lowerCanvasEl),this.contextCache=null,this.contextTop=null,["upperCanvasEl","cacheCanvasEl"].forEach((function(t){v.util.cleanUpJsdomNode(this[t]),this[t]=void 0}).bind(this)),t.parentNode&&t.parentNode.replaceChild(this.lowerCanvasEl,this.wrapperEl),delete this.wrapperEl,v.StaticCanvas.prototype.dispose.call(this),this},clear:function(){return this.discardActiveObject(),this.clearContext(this.contextTop),this.callSuper("clear")},drawControls:function(t){var e=this._activeObject;e&&e._renderControls(t)},_toObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(t),r=this.callSuper("_toObject",t,e,n);return this._unwindGroupTransformOnObject(t,i),r},_realizeGroupTransformOnObject:function(t){if(t.group&&"activeSelection"===t.group.type&&this._activeObject===t.group){var e={};return["angle","flipX","flipY","left","scaleX","scaleY","skewX","skewY","top"].forEach(function(n){e[n]=t[n]}),v.util.addTransformToObject(t,this._activeObject.calcOwnMatrix()),e}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},_setSVGObject:function(t,e,n){var i=this._realizeGroupTransformOnObject(e);this.callSuper("_setSVGObject",t,e,n),this._unwindGroupTransformOnObject(e,i)},setViewportTransform:function(t){this.renderOnAddRemove&&this._activeObject&&this._activeObject.isEditing&&this._activeObject.clearContextTop(),v.StaticCanvas.prototype.setViewportTransform.call(this,t)}}),v.StaticCanvas)"prototype"!==o&&(v.Canvas[o]=v.StaticCanvas[o])}(),function(){var t=v.util.addListener,e=v.util.removeListener,n={passive:!1};function i(t,e){return t.button&&t.button===e-1}v.util.object.extend(v.Canvas.prototype,{mainTouchId:null,_initEventListeners:function(){this.removeListeners(),this._bindEvents(),this.addOrRemove(t,"add")},_getEventPrefix:function(){return this.enablePointerEvents?"pointer":"mouse"},addOrRemove:function(t,e){var i=this.upperCanvasEl,r=this._getEventPrefix();t(v.window,"resize",this._onResize),t(i,r+"down",this._onMouseDown),t(i,r+"move",this._onMouseMove,n),t(i,r+"out",this._onMouseOut),t(i,r+"enter",this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,n),"undefined"!=typeof eventjs&&e in eventjs&&(eventjs[e](i,"gesture",this._onGesture),eventjs[e](i,"drag",this._onDrag),eventjs[e](i,"orientation",this._onOrientationChange),eventjs[e](i,"shake",this._onShake),eventjs[e](i,"longpress",this._onLongPress))},removeListeners:function(){this.addOrRemove(e,"remove");var t=this._getEventPrefix();e(v.document,t+"up",this._onMouseUp),e(v.document,"touchend",this._onTouchEnd,n),e(v.document,t+"move",this._onMouseMove,n),e(v.document,"touchmove",this._onMouseMove,n)},_bindEvents:function(){this.eventsBound||(this._onMouseDown=this._onMouseDown.bind(this),this._onTouchStart=this._onTouchStart.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onTouchEnd=this._onTouchEnd.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this),this._onMouseOut=this._onMouseOut.bind(this),this._onMouseEnter=this._onMouseEnter.bind(this),this._onContextMenu=this._onContextMenu.bind(this),this._onDoubleClick=this._onDoubleClick.bind(this),this._onDragOver=this._onDragOver.bind(this),this._onDragEnter=this._simpleEventHandler.bind(this,"dragenter"),this._onDragLeave=this._simpleEventHandler.bind(this,"dragleave"),this._onDrop=this._simpleEventHandler.bind(this,"drop"),this.eventsBound=!0)},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t){this.__onMouseWheel(t)},_onMouseOut:function(t){var e=this._hoveredTarget;this.fire("mouse:out",{target:e,e:t}),this._hoveredTarget=null,e&&e.fire("mouseout",{e:t});var n=this;this._hoveredTargets.forEach(function(i){n.fire("mouse:out",{target:e,e:t}),i&&e.fire("mouseout",{e:t})}),this._hoveredTargets=[],this._iTextInstances&&this._iTextInstances.forEach(function(t){t.isEditing&&t.hiddenTextarea.focus()})},_onMouseEnter:function(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",{target:null,e:t}),this._hoveredTarget=null,this._hoveredTargets=[])},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onDragOver:function(t){t.preventDefault();var e=this._simpleEventHandler("dragover",t);this._fireEnterLeaveEvents(e,t)},_onContextMenu:function(t){return this.stopContextMenu&&(t.stopPropagation(),t.preventDefault()),!1},_onDoubleClick:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData(t)},getPointerId:function(t){var e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1},_isMainEvent:function(t){return!0===t.isPrimary||!1!==t.isPrimary&&("touchend"===t.type&&0===t.touches.length||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)},_onTouchStart:function(i){i.preventDefault(),null===this.mainTouchId&&(this.mainTouchId=this.getPointerId(i)),this.__onMouseDown(i),this._resetTransformEventData();var r=this.upperCanvasEl,s=this._getEventPrefix();t(v.document,"touchend",this._onTouchEnd,n),t(v.document,"touchmove",this._onMouseMove,n),e(r,s+"down",this._onMouseDown)},_onMouseDown:function(i){this.__onMouseDown(i),this._resetTransformEventData();var r=this.upperCanvasEl,s=this._getEventPrefix();e(r,s+"move",this._onMouseMove,n),t(v.document,s+"up",this._onMouseUp),t(v.document,s+"move",this._onMouseMove,n)},_onTouchEnd:function(i){if(!(i.touches.length>0)){this.__onMouseUp(i),this._resetTransformEventData(),this.mainTouchId=null;var r=this._getEventPrefix();e(v.document,"touchend",this._onTouchEnd,n),e(v.document,"touchmove",this._onMouseMove,n);var s=this;this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(function(){t(s.upperCanvasEl,r+"down",s._onMouseDown),s._willAddMouseDown=0},400)}},_onMouseUp:function(i){this.__onMouseUp(i),this._resetTransformEventData();var r=this.upperCanvasEl,s=this._getEventPrefix();this._isMainEvent(i)&&(e(v.document,s+"up",this._onMouseUp),e(v.document,s+"move",this._onMouseMove,n),t(r,s+"move",this._onMouseMove,n))},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t){var e=this._activeObject;return!!(!!e!=!!t||e&&t&&e!==t)},__onMouseUp:function(t){var e,n=this._currentTransform,r=this._groupSelector,s=!1,o=!r||0===r.left&&0===r.top;if(this._cacheTransformEventData(t),e=this._target,this._handleEvent(t,"up:before"),i(t,3))this.fireRightClick&&this._handleEvent(t,"up",3,o);else{if(i(t,2))return this.fireMiddleClick&&this._handleEvent(t,"up",2,o),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)this._onMouseUpInDrawingMode(t);else if(this._isMainEvent(t)){if(n&&(this._finalizeCurrentTransform(t),s=n.actionPerformed),!o){var a=e===this._activeObject;this._maybeGroupObjects(t),s||(s=this._shouldRender(e)||!a&&e===this._activeObject)}if(e){if(e.selectable&&e!==this._activeObject&&"up"===e.activeOn)this.setActiveObject(e,t),s=!0;else{var l=e._findTargetCorner(this.getPointer(t,!0),v.util.isTouchEvent(t)),c=e.controls[l],h=c&&c.getMouseUpHandler(t,e,c);if(h){var u=this.getPointer(t);h(t,n,u.x,u.y)}}e.isMoving=!1}this._setCursorFromEvent(t,e),this._handleEvent(t,"up",1,o),this._groupSelector=null,this._currentTransform=null,e&&(e.__corner=0),s?this.requestRenderAll():o||this.renderTop()}}},_simpleEventHandler:function(t,e){var n=this.findTarget(e),i=this.targets,r={e:e,target:n,subTargets:i};if(this.fire(t,r),n&&n.fire(t,r),!i)return n;for(var s=0;s<i.length;s++)i[s].fire(t,r);return n},_handleEvent:function(t,e,n,i){var r=this._target,s=this.targets||[],o={e:t,target:r,subTargets:s,button:n||1,isClick:i||!1,pointer:this._pointer,absolutePointer:this._absolutePointer,transform:this._currentTransform};"up"===e&&(o.currentTarget=this.findTarget(t),o.currentSubTargets=this.targets),this.fire("mouse:"+e,o),r&&r.fire("mouse"+e,o);for(var a=0;a<s.length;a++)s[a].fire("mouse"+e,o)},_finalizeCurrentTransform:function(t){var e,n=this._currentTransform,i=n.target,r={e:t,target:i,transform:n,action:n.action};i._scaling&&(i._scaling=!1),i.setCoords(),(n.actionPerformed||this.stateful&&i.hasStateChanged())&&(n.actionPerformed&&(e=this._addEventOptions(r,n),this._fire(e,r)),this._fire("modified",r))},_addEventOptions:function(t,e){var n,i;switch(e.action){case"scaleX":n="scaled",i="x";break;case"scaleY":n="scaled",i="y";break;case"skewX":n="skewed",i="x";break;case"skewY":n="skewed",i="y";break;case"scale":n="scaled",i="equally";break;case"rotate":n="rotated";break;case"drag":n="moved"}return t.by=i,n},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&this.discardActiveObject(t).requestRenderAll();var e=this.getPointer(t);this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=this.getPointer(t);this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")},_onMouseUpInDrawingMode:function(t){var e=this.getPointer(t);this._isCurrentlyDrawing=this.freeDrawingBrush.onMouseUp({e:t,pointer:e}),this._handleEvent(t,"up")},__onMouseDown:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"down:before");var e=this._target;if(i(t,3))this.fireRightClick&&this._handleEvent(t,"down",3);else if(i(t,2))this.fireMiddleClick&&this._handleEvent(t,"down",2);else if(this.isDrawingMode)this._onMouseDownInDrawingMode(t);else if(this._isMainEvent(t)&&!this._currentTransform){this._previousPointer=l=this._pointer;var n=this._shouldRender(e),r=this._shouldGroup(t,e);if(this._shouldClearSelection(t,e)?this.discardActiveObject(t):r&&(this._handleGrouping(t,e),e=this._activeObject),!this.selection||e&&(e.selectable||e.isEditing||e===this._activeObject)||(this._groupSelector={ex:l.x,ey:l.y,top:0,left:0}),e){var s=e===this._activeObject;e.selectable&&"down"===e.activeOn&&this.setActiveObject(e,t);var o=e._findTargetCorner(this.getPointer(t,!0),v.util.isTouchEvent(t));if(e.__corner=o,e===this._activeObject&&(o||!r)){this._setupCurrentTransform(t,e,s);var a=e.controls[o],l=this.getPointer(t),c=a&&a.getMouseDownHandler(t,e,a);c&&c(t,this._currentTransform,l.x,l.y)}}this._handleEvent(t,"down"),(n||r)&&this.requestRenderAll()}},_resetTransformEventData:function(){this._target=null,this._pointer=null,this._absolutePointer=null},_cacheTransformEventData:function(t){this._resetTransformEventData(),this._pointer=this.getPointer(t,!0),this._absolutePointer=this.restorePointerVpt(this._pointer),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)||null},_beforeTransform:function(t){var e=this._currentTransform;this.stateful&&e.target.saveState(),this.fire("before:transform",{e:t,transform:e})},__onMouseMove:function(t){var e,n;if(this._handleEvent(t,"move:before"),this._cacheTransformEventData(t),this.isDrawingMode)this._onMouseMoveInDrawingMode(t);else if(this._isMainEvent(t)){var i=this._groupSelector;i?(i.left=(n=this._pointer).x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t)||null,this._setCursorFromEvent(t,e),this._fireOverOutEvents(e,t)),this._handleEvent(t,"move"),this._resetTransformEventData()}},_fireOverOutEvents:function(t,e){var n=this._hoveredTarget,i=this._hoveredTargets,r=this.targets,s=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"mouseout",canvasEvtOut:"mouse:out",evtIn:"mouseover",canvasEvtIn:"mouse:over"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(r[o],e,{oldTarget:i[o],evtOut:"mouseout",evtIn:"mouseover"});this._hoveredTarget=t,this._hoveredTargets=this.targets.concat()},_fireEnterLeaveEvents:function(t,e){var n=this._draggedoverTarget,i=this._hoveredTargets,r=this.targets,s=Math.max(i.length,r.length);this.fireSyntheticInOutEvents(t,e,{oldTarget:n,evtOut:"dragleave",evtIn:"dragenter"});for(var o=0;o<s;o++)this.fireSyntheticInOutEvents(r[o],e,{oldTarget:i[o],evtOut:"dragleave",evtIn:"dragenter"});this._draggedoverTarget=t},fireSyntheticInOutEvents:function(t,e,n){var i,r,s,o=n.oldTarget,a=o!==t,l=n.canvasEvtIn,c=n.canvasEvtOut;a&&(i={e:e,target:t,previousTarget:o},r={e:e,target:o,nextTarget:t}),s=t&&a,o&&a&&(c&&this.fire(c,r),o.fire(n.evtOut,r)),s&&(l&&this.fire(l,i),t.fire(n.evtIn,i))},__onMouseWheel:function(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.shiftKey=t.shiftKey,n.altKey=t[this.centeredKey],this._performTransformAction(t,n,e),n.actionPerformed&&this.requestRenderAll()},_performTransformAction:function(t,e,n){var i=e.action,r=!1,s=e.actionHandler;s&&(r=s(t,e,n.x,n.y)),"drag"===i&&r&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||r},_fire:v.controlsUtils.fireEvent,_setCursorFromEvent:function(t,e){if(!e)return this.setCursor(this.defaultCursor),!1;var n=e.hoverCursor||this.hoverCursor,i=this._activeObject&&"activeSelection"===this._activeObject.type?this._activeObject:null,r=(!i||!i.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));r?this.setCursor(this.getCornerCursor(r,e,t)):(e.subTargetCheck&&this.targets.concat().reverse().map(function(t){n=t.hoverCursor||n}),this.setCursor(n))},getCornerCursor:function(t,e,n){var i=e.controls[t];return i.cursorStyleHandler(n,i,e)}})}(),c=Math.min,h=Math.max,v.util.object.extend(v.Canvas.prototype,{_shouldGroup:function(t,e){var n=this._activeObject;return n&&this._isSelectionKeyPressed(t)&&e&&e.selectable&&this.selection&&(n!==e||"activeSelection"===n.type)&&!e.onSelect({e:t})},_handleGrouping:function(t,e){var n=this._activeObject;n.__corner||(e!==n||(e=this.findTarget(t,!0))&&e.selectable)&&(n&&"activeSelection"===n.type?this._updateActiveSelection(e,t):this._createActiveSelection(e,t))},_updateActiveSelection:function(t,e){var n=this._activeObject,i=n._objects.slice(0);n.contains(t)?(n.removeWithUpdate(t),this._hoveredTarget=t,this._hoveredTargets=this.targets.concat(),1===n.size()&&this._setActiveObject(n.item(0),e)):(n.addWithUpdate(t),this._hoveredTarget=n,this._hoveredTargets=this.targets.concat()),this._fireSelectionEvents(i,e)},_createActiveSelection:function(t,e){var n=this.getActiveObjects(),i=this._createGroup(t);this._hoveredTarget=i,this._setActiveObject(i,e),this._fireSelectionEvents(n,e)},_createGroup:function(t){var e=this._objects,n=e.indexOf(this._activeObject)<e.indexOf(t)?[this._activeObject,t]:[t,this._activeObject];return this._activeObject.isEditing&&this._activeObject.exitEditing(),new v.ActiveSelection(n,{canvas:this})},_groupSelectedObjects:function(t){var e,n=this._collectObjects(t);1===n.length?this.setActiveObject(n[0],t):n.length>1&&(e=new v.ActiveSelection(n.reverse(),{canvas:this}),this.setActiveObject(e,t))},_collectObjects:function(t){for(var e,n=[],i=this._groupSelector.ex,r=this._groupSelector.ey,s=i+this._groupSelector.left,o=r+this._groupSelector.top,a=new v.Point(c(i,s),c(r,o)),l=new v.Point(h(i,s),h(r,o)),u=!this.selectionFullyContained,d=i===s&&r===o,f=this._objects.length;f--&&!((e=this._objects[f])&&e.selectable&&e.visible&&(u&&e.intersectsWithRect(a,l)||e.isContainedWithinRect(a,l)||u&&e.containsPoint(a)||u&&e.containsPoint(l))&&(n.push(e),d)););return n.length>1&&(n=n.filter(function(e){return!e.onSelect({e:t})})),n},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t),this.setCursor(this.defaultCursor),this._groupSelector=null}}),v.util.object.extend(v.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=(t.multiplier||1)*(t.enableRetinaScaling?this.getRetinaScaling():1),r=this.toCanvasElement(i,t);return v.util.toDataURL(r,e,n)},toCanvasElement:function(t,e){var n=((e=e||{}).width||this.width)*(t=t||1),i=(e.height||this.height)*t,r=this.getZoom(),s=this.width,o=this.height,a=r*t,l=this.viewportTransform,c=this.interactive,h=[a,0,0,a,(l[4]-(e.left||0))*t,(l[5]-(e.top||0))*t],u=this.enableRetinaScaling,d=v.util.createCanvasElement(),f=this.contextTop;return d.width=n,d.height=i,this.contextTop=null,this.enableRetinaScaling=!1,this.interactive=!1,this.viewportTransform=h,this.width=n,this.height=i,this.calcViewportBoundaries(),this.renderCanvas(d.getContext("2d"),this._objects),this.viewportTransform=l,this.width=s,this.height=o,this.calcViewportBoundaries(),this.interactive=c,this.enableRetinaScaling=u,this.contextTop=f,d}}),v.util.object.extend(v.StaticCanvas.prototype,{loadFromJSON:function(t,e,n){if(t){var i="string"==typeof t?JSON.parse(t):v.util.object.clone(t),r=this,s=i.clipPath,o=this.renderOnAddRemove;return this.renderOnAddRemove=!1,delete i.clipPath,this._enlivenObjects(i.objects,function(t){r.clear(),r._setBgOverlay(i,function(){s?r._enlivenObjects([s],function(n){r.clipPath=n[0],r.__setupCanvas.call(r,i,t,o,e)}):r.__setupCanvas.call(r,i,t,o,e)})},n),this}},__setupCanvas:function(t,e,n,i){var r=this;e.forEach(function(t,e){r.insertAt(t,e)}),this.renderOnAddRemove=n,delete t.objects,delete t.backgroundImage,delete t.overlayImage,delete t.background,delete t.overlay,this._setOptions(t),this.renderAll(),i&&i()},_setBgOverlay:function(t,e){var n={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(t.backgroundImage||t.overlayImage||t.background||t.overlay){var i=function(){n.backgroundImage&&n.overlayImage&&n.backgroundColor&&n.overlayColor&&e&&e()};this.__setBgOverlay("backgroundImage",t.backgroundImage,n,i),this.__setBgOverlay("overlayImage",t.overlayImage,n,i),this.__setBgOverlay("backgroundColor",t.background,n,i),this.__setBgOverlay("overlayColor",t.overlay,n,i)}else e&&e()},__setBgOverlay:function(t,e,n,i){var r=this;if(!e)return n[t]=!0,void(i&&i());"backgroundImage"===t||"overlayImage"===t?v.util.enlivenObjects([e],function(e){r[t]=e[0],n[t]=!0,i&&i()}):this["set"+v.util.string.capitalize(t,!0)](e,function(){n[t]=!0,i&&i()})},_enlivenObjects:function(t,e,n){t&&0!==t.length?v.util.enlivenObjects(t,function(t){e&&e(t)},null,n):e&&e([])},_toDataURL:function(t,e){this.clone(function(n){e(n.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,n){this.clone(function(i){n(i.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(n,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=v.util.createCanvasElement();e.width=this.width,e.height=this.height;var n=new v.Canvas(e);this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),t&&t(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,s=e.util.string.capitalize,o=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass(e.CommonMethods,{type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,skewX:0,skewY:0,cornerSize:13,touchCornerSize:24,transparentCorners:!0,hoverCursor:null,moveCursor:null,padding:0,borderColor:"rgb(178,204,255)",borderDashArray:null,cornerColor:"rgb(178,204,255)",cornerStrokeColor:null,cornerStyle:"rect",cornerDashArray:null,centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",selectionBackgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,minScaleLimit:0,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,perPixelTargetFind:!1,includeDefaultValues:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,excludeFromExport:!1,objectCaching:!e.isLikelyNode,statefullCache:!1,noScaleCache:!0,strokeUniform:!1,dirty:!0,__corner:0,paintFirst:"fill",activeOn:"down",stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform".split(" "),cacheProperties:"fill stroke strokeWidth strokeDashArray width height paintFirst strokeUniform strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit backgroundColor clipPath".split(" "),colorProperties:"fill stroke backgroundColor".split(" "),clipPath:void 0,inverted:!1,absolutePositioned:!1,initialize:function(t){t&&this.setOptions(t)},_createCacheCanvas:function(){this._cacheProperties={},this._cacheCanvas=e.util.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0},_limitCacheSize:function(t){var n=e.perfLimitSizeTotal,i=t.width,r=t.height,s=e.maxCacheSideLimit,o=e.minCacheSideLimit;if(i<=s&&r<=s&&i*r<=n)return i<o&&(t.width=o),r<o&&(t.height=o),t;var a=e.util.limitDimsByArea(i/r,n),l=e.util.capValue,c=l(o,a.x,s),h=l(o,a.y,s);return i>c&&(t.zoomX/=i/c,t.width=c,t.capped=!0),r>h&&(t.zoomY/=r/h,t.height=h,t.capped=!0),t},_getCacheCanvasDimensions:function(){var t=this.getTotalObjectScaling(),e=this._getTransformedDimensions(0,0),n=e.x*t.scaleX/this.scaleX,i=e.y*t.scaleY/this.scaleY;return{width:n+2,height:i+2,zoomX:t.scaleX,zoomY:t.scaleY,x:n,y:i}},_updateCacheCanvas:function(){var t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){var n=t._currentTransform.action;if(this===t._currentTransform.target&&n.slice&&"scale"===n.slice(0,5))return!1}var i,r,s=this._cacheCanvas,o=this._limitCacheSize(this._getCacheCanvasDimensions()),a=e.minCacheSideLimit,l=o.width,c=o.height,h=o.zoomX,u=o.zoomY,d=l!==this.cacheWidth||c!==this.cacheHeight,f=0,p=0,g=!1;if(d){var m=this._cacheCanvas.width,v=this._cacheCanvas.height,y=l>m||c>v;g=y||(l<.9*m||c<.9*v)&&m>a&&v>a,y&&!o.capped&&(l>a||c>a)&&(f=.1*l,p=.1*c)}return!(!d&&this.zoomX===h&&this.zoomY===u||(g?(s.width=Math.ceil(l+f),s.height=Math.ceil(c+p)):(this._cacheContext.setTransform(1,0,0,1,0,0),this._cacheContext.clearRect(0,0,s.width,s.height)),i=o.x/2,r=o.y/2,this.cacheTranslationX=Math.round(s.width/2-i)+i,this.cacheTranslationY=Math.round(s.height/2-r)+r,this.cacheWidth=l,this.cacheHeight=c,this._cacheContext.translate(this.cacheTranslationX,this.cacheTranslationY),this._cacheContext.scale(h,u),this.zoomX=h,this.zoomY=u,0))},setOptions:function(t){this._setOptions(t),this._initGradient(t.fill,"fill"),this._initGradient(t.stroke,"stroke"),this._initPattern(t.fill,"fill"),this._initPattern(t.stroke,"stroke")},transform:function(t){var e=this.calcTransformMatrix(!(this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop));t.transform(e[0],e[1],e[2],e[3],e[4],e[5])},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,i={type:this.type,version:e.version,originX:this.originX,originY:this.originY,left:r(this.left,n),top:r(this.top,n),width:r(this.width,n),height:r(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:r(this.strokeWidth,n),strokeDashArray:this.strokeDashArray?this.strokeDashArray.concat():this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeDashOffset:this.strokeDashOffset,strokeLineJoin:this.strokeLineJoin,strokeUniform:this.strokeUniform,strokeMiterLimit:r(this.strokeMiterLimit,n),scaleX:r(this.scaleX,n),scaleY:r(this.scaleY,n),angle:r(this.angle,n),flipX:this.flipX,flipY:this.flipY,opacity:r(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,backgroundColor:this.backgroundColor,fillRule:this.fillRule,paintFirst:this.paintFirst,globalCompositeOperation:this.globalCompositeOperation,skewX:r(this.skewX,n),skewY:r(this.skewY,n)};return this.clipPath&&(i.clipPath=this.clipPath.toObject(t),i.clipPath.inverted=this.clipPath.inverted,i.clipPath.absolutePositioned=this.clipPath.absolutePositioned),e.util.populateWithProperties(this,i,t),this.includeDefaultValues||(i=this._removeDefaultValues(i)),i},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype;return n.stateProperties.forEach(function(e){"left"!==e&&"top"!==e&&(t[e]===n[e]&&delete t[e],"[object Array]"===Object.prototype.toString.call(t[e])&&"[object Array]"===Object.prototype.toString.call(n[e])&&0===t[e].length&&0===n[e].length&&delete t[e])}),t},toString:function(){return"#<fabric."+s(this.type)+">"},getObjectScaling:function(){var t=e.util.qrDecompose(this.calcTransformMatrix());return{scaleX:Math.abs(t.scaleX),scaleY:Math.abs(t.scaleY)}},getTotalObjectScaling:function(){var t=this.getObjectScaling(),e=t.scaleX,n=t.scaleY;if(this.canvas){var i=this.canvas.getZoom(),r=this.canvas.getRetinaScaling();e*=i*r,n*=i*r}return{scaleX:e,scaleY:n}},getObjectOpacity:function(){var t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t},_set:function(t,n){var i=this[t]!==n,r=!1;return("scaleX"===t||"scaleY"===t)&&(n=this._constrainScale(n)),"scaleX"===t&&n<0?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&n<0?(this.flipY=!this.flipY,n*=-1):"shadow"!==t||!n||n instanceof e.Shadow?"dirty"===t&&this.group&&this.group.set("dirty",n):n=new e.Shadow(n),this[t]=n,i&&(r=this.group&&this.group.isOnACache(),this.cacheProperties.indexOf(t)>-1?(this.dirty=!0,r&&this.group.set("dirty",!0)):r&&this.stateProperties.indexOf(t)>-1&&this.group.set("dirty",!0)),this},setOnGroup:function(){},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:e.iMatrix.concat()},isNotVisible:function(){return 0===this.opacity||!this.width&&!this.height&&0===this.strokeWidth||!this.visible},render:function(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t,this),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.dirty=!1,this.drawObject(t),this.objectCaching&&this.statefullCache&&this.saveState({propertySet:"cacheProperties"})),t.restore())},renderCache:function(t){t=t||{},this._cacheCanvas||this._createCacheCanvas(),this.isCacheDirty()&&(this.statefullCache&&this.saveState({propertySet:"cacheProperties"}),this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)},_removeCacheCanvas:function(){this._cacheCanvas=null,this.cacheWidth=0,this.cacheHeight=0},hasStroke:function(){return this.stroke&&"transparent"!==this.stroke&&0!==this.strokeWidth},hasFill:function(){return this.fill&&"transparent"!==this.fill},needsItsOwnCache:function(){return!("stroke"!==this.paintFirst||!this.hasFill()||!this.hasStroke()||"object"!=typeof this.shadow)||!!this.clipPath},shouldCache:function(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.group||!this.group.isOnACache()),this.ownCaching},willDrawShadow:function(){return!!this.shadow&&(0!==this.shadow.offsetX||0!==this.shadow.offsetY)},drawClipPathOnCache:function(t){var n=this.clipPath;if(t.save(),t.globalCompositeOperation=n.inverted?"destination-out":"destination-in",n.absolutePositioned){var i=e.util.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}n.transform(t),t.scale(1/n.zoomX,1/n.zoomY),t.drawImage(n._cacheCanvas,-n.cacheTranslationX,-n.cacheTranslationY),t.restore()},drawObject:function(t,e){var n=this.fill,i=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t),this.fill=n,this.stroke=i},_drawClipPath:function(t){var e=this.clipPath;e&&(e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t))},drawCacheOnCanvas:function(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)},isCacheDirty:function(t){if(this.isNotVisible())return!1;if(this._cacheCanvas&&!t&&this._updateCacheCanvas())return!0;if(this.dirty||this.clipPath&&this.clipPath.absolutePositioned||this.statefullCache&&this.hasStateChanged("cacheProperties")){if(this._cacheCanvas&&!t){var e=this.cacheWidth/this.zoomX,n=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-e/2,-n/2,e,n)}return!0}return!1},_renderBackground:function(t){if(this.backgroundColor){var e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}},_setOpacity:function(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity},_setStrokeStyles:function(t,e){var n=e.stroke;n&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?this._applyPatternForTransformedGradient(t,n):(t.strokeStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):t.strokeStyle=e.stroke)},_setFillStyles:function(t,e){var n=e.fill;n&&(n.toLive?(t.fillStyle=n.toLive(t,this),this._applyPatternGradientTransform(t,e.fill)):t.fillStyle=n)},_setClippingProperties:function(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"},_setLineDash:function(t,e,n){e&&0!==e.length&&(1&e.length&&e.push.apply(e,e),a?t.setLineDash(e):n&&n(t))},_renderControls:function(t,n){var i,r,s,a=this.getViewportTransform(),l=this.calcTransformMatrix();r=void 0!==(n=n||{}).hasBorders?n.hasBorders:this.hasBorders,s=void 0!==n.hasControls?n.hasControls:this.hasControls,l=e.util.multiplyTransformMatrices(a,l),i=e.util.qrDecompose(l),t.save(),t.translate(i.translateX,i.translateY),t.lineWidth=1*this.borderScaleFactor,this.group||(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),n.forActiveSelection?(t.rotate(o(i.angle)),r&&this.drawBordersInGroup(t,i,n)):(t.rotate(o(this.angle)),r&&this.drawBorders(t,n)),s&&this.drawControls(t,n),t.restore()},_setShadow:function(t){if(this.shadow){var n,i=this.shadow,r=this.canvas,s=r&&r.viewportTransform[0]||1,o=r&&r.viewportTransform[3]||1;n=i.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),r&&r._isRetinaScaling()&&(s*=e.devicePixelRatio,o*=e.devicePixelRatio),t.shadowColor=i.color,t.shadowBlur=i.blur*e.browserShadowBlurConstant*(s+o)*(n.scaleX+n.scaleY)/4,t.shadowOffsetX=i.offsetX*s*n.scaleX,t.shadowOffsetY=i.offsetY*o*n.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_applyPatternGradientTransform:function(t,e){if(!e||!e.toLive)return{offsetX:0,offsetY:0};var n=e.gradientTransform||e.patternTransform,i=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return"percentage"===e.gradientUnits?t.transform(this.width,0,0,this.height,i,r):t.transform(1,0,0,1,i,r),n&&t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),{offsetX:i,offsetY:r}},_renderPaintInOrder:function(t){"stroke"===this.paintFirst?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))},_render:function(){},_renderFill:function(t){this.fill&&(t.save(),this._setFillStyles(t,this),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore())},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform&&this.group){var e=this.getObjectScaling();t.scale(1/e.scaleX,1/e.scaleY)}else this.strokeUniform&&t.scale(1/this.scaleX,1/this.scaleY);this._setLineDash(t,this.strokeDashArray,this._renderDashedStroke),this._setStrokeStyles(t,this),t.stroke(),t.restore()}},_applyPatternForTransformedGradient:function(t,n){var i,r=this._limitCacheSize(this._getCacheCanvasDimensions()),s=e.util.createCanvasElement(),o=this.canvas.getRetinaScaling(),a=r.x/this.scaleX/o,l=r.y/this.scaleY/o;s.width=a,s.height=l,(i=s.getContext("2d")).beginPath(),i.moveTo(0,0),i.lineTo(a,0),i.lineTo(a,l),i.lineTo(0,l),i.closePath(),i.translate(a/2,l/2),i.scale(r.zoomX/this.scaleX/o,r.zoomY/this.scaleY/o),this._applyPatternGradientTransform(i,n),i.fillStyle=n.toLive(t),i.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/r.zoomX,o*this.scaleY/r.zoomY),t.strokeStyle=i.createPattern(s,"no-repeat")},_findCenterFromElement:function(){return{x:this.left+this.width/2,y:this.top+this.height/2}},_assignTransformMatrixProps:function(){if(this.transformMatrix){var t=e.util.qrDecompose(this.transformMatrix);this.flipX=!1,this.flipY=!1,this.set("scaleX",t.scaleX),this.set("scaleY",t.scaleY),this.angle=t.angle,this.skewX=t.skewX,this.skewY=0}},_removeTransformMatrix:function(t){var n=this._findCenterFromElement();this.transformMatrix&&(this._assignTransformMatrixProps(),n=e.util.transformPoint(n,this.transformMatrix)),this.transformMatrix=null,t&&(this.scaleX*=t.scaleX,this.scaleY*=t.scaleY,this.cropX=t.cropX,this.cropY=t.cropY,n.x+=t.offsetLeft,n.y+=t.offsetTop,this.width=t.width,this.height=t.height),this.setPositionByOrigin(n,"center","center")},clone:function(t,n){var i=this.toObject(n);this.constructor.fromObject?this.constructor.fromObject(i,t):e.Object._fromObject("Object",i,t)},cloneAsImage:function(t,n){var i=this.toCanvasElement(n);return t&&t(new e.Image(i)),this},toCanvasElement:function(t){t||(t={});var n=e.util,i=n.saveObjectTransform(this),r=this.group,s=this.shadow,o=Math.abs,a=(t.multiplier||1)*(t.enableRetinaScaling?e.devicePixelRatio:1);delete this.group,t.withoutTransform&&n.resetObjectTransform(this),t.withoutShadow&&(this.shadow=null);var l,c,h,u=e.util.createCanvasElement(),d=this.getBoundingRect(!0,!0),f=this.shadow,p={x:0,y:0};f&&(c=f.blur,l=f.nonScaling?{scaleX:1,scaleY:1}:this.getObjectScaling(),p.x=2*Math.round(o(f.offsetX)+c)*o(l.scaleX),p.y=2*Math.round(o(f.offsetY)+c)*o(l.scaleY)),h=d.height+p.y,u.width=Math.ceil(d.width+p.x),u.height=Math.ceil(h);var g=new e.StaticCanvas(u,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1});"jpeg"===t.format&&(g.backgroundColor="#fff"),this.setPositionByOrigin(new e.Point(g.width/2,g.height/2),"center","center");var m=this.canvas;g.add(this);var v=g.toCanvasElement(a||1,t);return this.shadow=s,this.set("canvas",m),r&&(this.group=r),this.set(i).setCoords(),g._objects=[],g.dispose(),g=null,v},toDataURL:function(t){return t||(t={}),e.util.toDataURL(this.toCanvasElement(t),t.format||"png",t.quality||1)},isType:function(t){return this.type===t},complexity:function(){return 1},toJSON:function(t){return this.toObject(t)},rotate:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas&&this.canvas.centerObjectH(this),this},viewportCenterH:function(){return this.canvas&&this.canvas.viewportCenterObjectH(this),this},centerV:function(){return this.canvas&&this.canvas.centerObjectV(this),this},viewportCenterV:function(){return this.canvas&&this.canvas.viewportCenterObjectV(this),this},center:function(){return this.canvas&&this.canvas.centerObject(this),this},viewportCenter:function(){return this.canvas&&this.canvas.viewportCenterObject(this),this},getLocalPointer:function(t,n){n=n||this.canvas.getPointer(t);var i=new e.Point(n.x,n.y),r=this._getLeftTopCoords();return this.angle&&(i=e.util.rotatePoint(i,r,o(-this.angle))),{x:i.x-r.x,y:i.y-r.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors&&e.util.createAccessors(e.Object),n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object._fromObject=function(t,n,r,s){var o=e[t];n=i(n,!0),e.util.enlivenPatterns([n.fill,n.stroke],function(t){void 0!==t[0]&&(n.fill=t[0]),void 0!==t[1]&&(n.stroke=t[1]),e.util.enlivenObjects([n.clipPath],function(t){n.clipPath=t[0];var e=s?new o(n[s],n):new o(n);r&&r(e)})})},e.Object.__uid=0)}(e),u=v.util.degreesToRadians,d={left:-.5,center:0,right:.5},f={top:-.5,center:0,bottom:.5},v.util.object.extend(v.Object.prototype,{translateToGivenOrigin:function(t,e,n,i,r){var s,o,a,l=t.x,c=t.y;return"string"==typeof e?e=d[e]:e-=.5,"string"==typeof i?i=d[i]:i-=.5,"string"==typeof n?n=f[n]:n-=.5,"string"==typeof r?r=f[r]:r-=.5,o=r-n,((s=i-e)||o)&&(a=this._getTransformedDimensions(),l=t.x+s*a.x,c=t.y+o*a.y),new v.Point(l,c)},translateToCenterPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,e,n,"center","center");return this.angle?v.util.rotatePoint(i,t,u(this.angle)):i},translateToOriginPoint:function(t,e,n){var i=this.translateToGivenOrigin(t,"center","center",e,n);return this.angle?v.util.rotatePoint(i,t,u(this.angle)):i},getCenterPoint:function(){var t=new v.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(t,e,n){var i,r,s=this.getCenterPoint();return i=void 0!==e&&void 0!==n?this.translateToGivenOrigin(s,"center","center",e,n):new v.Point(this.left,this.top),r=new v.Point(t.x,t.y),this.angle&&(r=v.util.rotatePoint(r,s,-u(this.angle))),r.subtractEquals(i)},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(t){var e,n,i=u(this.angle),r=this.getScaledWidth(),s=v.util.cos(i)*r,o=v.util.sin(i)*r;this.left+=s*((n="string"==typeof t?d[t]:t-.5)-(e="string"==typeof this.originX?d[this.originX]:this.originX-.5)),this.top+=o*(n-e),this.setCoords(),this.originX=t},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}}),function(){var t=v.util,e=t.degreesToRadians,n=t.multiplyTransformMatrices,i=t.transformPoint;t.object.extend(v.Object.prototype,{oCoords:null,aCoords:null,lineCoords:null,ownMatrixCache:null,matrixCache:null,controls:{},_getCoords:function(t,e){return e?t?this.calcACoords():this.calcLineCoords():(this.aCoords&&this.lineCoords||this.setCoords(!0),t?this.aCoords:this.lineCoords)},getCoords:function(t,e){return n=this._getCoords(t,e),[new v.Point(n.tl.x,n.tl.y),new v.Point(n.tr.x,n.tr.y),new v.Point(n.br.x,n.br.y),new v.Point(n.bl.x,n.bl.y)];var n},intersectsWithRect:function(t,e,n,i){var r=this.getCoords(n,i);return"Intersection"===v.Intersection.intersectPolygonRectangle(r,t,e).status},intersectsWithObject:function(t,e,n){return"Intersection"===v.Intersection.intersectPolygonPolygon(this.getCoords(e,n),t.getCoords(e,n)).status||t.isContainedWithinObject(this,e,n)||this.isContainedWithinObject(t,e,n)},isContainedWithinObject:function(t,e,n){for(var i=this.getCoords(e,n),r=0,s=t._getImageLines(e?t.aCoords:t.lineCoords);r<4;r++)if(!t.containsPoint(i[r],s))return!1;return!0},isContainedWithinRect:function(t,e,n,i){var r=this.getBoundingRect(n,i);return r.left>=t.x&&r.left+r.width<=e.x&&r.top>=t.y&&r.top+r.height<=e.y},containsPoint:function(t,e,n,i){var r=this._getCoords(n,i),s=(e=e||this._getImageLines(r),this._findCrossPoints(t,e));return 0!==s&&s%2==1},isOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.getCoords(!0,t).some(function(t){return t.x<=n.x&&t.x>=e.x&&t.y<=n.y&&t.y>=e.y})||!!this.intersectsWithRect(e,n,!0,t)||this._containsCenterOfCanvas(e,n,t)},_containsCenterOfCanvas:function(t,e,n){return!!this.containsPoint({x:(t.x+e.x)/2,y:(t.y+e.y)/2},null,!0,n)},isPartiallyOnScreen:function(t){if(!this.canvas)return!1;var e=this.canvas.vptCoords.tl,n=this.canvas.vptCoords.br;return!!this.intersectsWithRect(e,n,!0,t)||this.getCoords(!0,t).every(function(t){return(t.x>=n.x||t.x<=e.x)&&(t.y>=n.y||t.y<=e.y)})&&this._containsCenterOfCanvas(e,n,t)},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,s=0;for(var o in e)if(!((r=e[o]).o.y<t.y&&r.d.y<t.y||r.o.y>=t.y&&r.d.y>=t.y||(i=r.o.x===r.d.x&&r.o.x>=t.x?r.o.x:-(t.y-0*t.x-(r.o.y-(n=(r.d.y-r.o.y)/(r.d.x-r.o.x))*r.o.x))/(0-n),i>=t.x&&(s+=1),2!==s)))break;return s},getBoundingRect:function(e,n){var i=this.getCoords(e,n);return t.makeBoundingBoxFromPoints(i)},getScaledWidth:function(){return this._getTransformedDimensions().x},getScaledHeight:function(){return this._getTransformedDimensions().y},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:0===t?1e-4:t},scale:function(t){return this._set("scaleX",t),this._set("scaleY",t),this.setCoords()},scaleToWidth:function(t,e){var n=this.getBoundingRect(e).width/this.getScaledWidth();return this.scale(t/this.width/n)},scaleToHeight:function(t,e){var n=this.getBoundingRect(e).height/this.getScaledHeight();return this.scale(t/this.height/n)},calcCoords:function(t){return t?this.calcACoords():this.calcOCoords()},calcLineCoords:function(){var n=this.getViewportTransform(),r=this.padding,s=e(this.angle),o=t.cos(s)*r,a=t.sin(s)*r,l=o+a,c=o-a,h=this.calcACoords(),u={tl:i(h.tl,n),tr:i(h.tr,n),bl:i(h.bl,n),br:i(h.br,n)};return r&&(u.tl.x-=c,u.tl.y-=l,u.tr.x+=l,u.tr.y-=c,u.bl.x-=l,u.bl.y+=c,u.br.x+=c,u.br.y+=l),u},calcOCoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),i=this.getViewportTransform(),r=n(i,e),s=n(r,t),o=(s=n(s,[1/i[0],0,0,1/i[3],0,0]),this._calculateCurrentDimensions()),a={};return this.forEachControl(function(t,e,n){a[e]=t.positionHandler(o,s,n)}),a},calcACoords:function(){var t=this._calcRotateMatrix(),e=this._calcTranslateMatrix(),r=n(e,t),s=this._getTransformedDimensions(),o=s.x/2,a=s.y/2;return{tl:i({x:-o,y:-a},r),tr:i({x:o,y:-a},r),bl:i({x:-o,y:a},r),br:i({x:o,y:a},r)}},setCoords:function(t){return this.aCoords=this.calcACoords(),this.lineCoords=this.group?this.aCoords:this.calcLineCoords(),t||(this.oCoords=this.calcOCoords(),this._setCornerCoords&&this._setCornerCoords()),this},_calcRotateMatrix:function(){return t.calcRotateMatrix(this)},_calcTranslateMatrix:function(){var t=this.getCenterPoint();return[1,0,0,1,t.x,t.y]},transformMatrixKey:function(t){var e="_",n="";return!t&&this.group&&(n=this.group.transformMatrixKey(t)+e),n+this.top+e+this.left+e+this.scaleX+e+this.scaleY+e+this.skewX+e+this.skewY+e+this.angle+e+this.originX+e+this.originY+e+this.width+e+this.height+e+this.strokeWidth+this.flipX+this.flipY},calcTransformMatrix:function(t){var e=this.calcOwnMatrix();if(t||!this.group)return e;var i=this.transformMatrixKey(t),r=this.matrixCache||(this.matrixCache={});return r.key===i?r.value:(this.group&&(e=n(this.group.calcTransformMatrix(!1),e)),r.key=i,r.value=e,e)},calcOwnMatrix:function(){var e=this.transformMatrixKey(!0),n=this.ownMatrixCache||(this.ownMatrixCache={});if(n.key===e)return n.value;var i=this._calcTranslateMatrix(),r={angle:this.angle,translateX:i[4],translateY:i[5],scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY};return n.key=e,n.value=t.composeMatrix(r),n.value},_calcDimensionsTransformMatrix:function(e,n,i){return t.calcDimensionsMatrix({skewX:e,skewY:n,scaleX:this.scaleX*(i&&this.flipX?-1:1),scaleY:this.scaleY*(i&&this.flipY?-1:1)})},_getNonTransformedDimensions:function(){var t=this.strokeWidth;return{x:this.width+t,y:this.height+t}},_getTransformedDimensions:function(e,n){void 0===e&&(e=this.skewX),void 0===n&&(n=this.skewY);var i,r,s=this._getNonTransformedDimensions();if(this.strokeUniform?(i=this.width,r=this.height):(i=s.x,r=s.y),0===e&&0===n)return this._finalizeDimensions(i*this.scaleX,r*this.scaleY);var o=t.sizeAfterTransform(i,r,{scaleX:this.scaleX,scaleY:this.scaleY,skewX:e,skewY:n});return this._finalizeDimensions(o.x,o.y)},_finalizeDimensions:function(t,e){return this.strokeUniform?{x:t+this.strokeWidth,y:e+this.strokeWidth}:{x:t,y:e}},_calculateCurrentDimensions:function(){var t=this.getViewportTransform(),e=this._getTransformedDimensions();return i(e,t,!0).scalarAdd(2*this.padding)}})}(),v.util.object.extend(v.Object.prototype,{sendToBack:function(){return this.group?v.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas&&this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?v.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas&&this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?v.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas&&this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?v.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas&&this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group&&"activeSelection"!==this.group.type?v.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas&&this.canvas.moveTo(this,t),this}}),function(){function t(t,e){if(e){if(e.toLive)return t+": url(#SVGID_"+e.id+"); ";var n=new v.Color(e),i=t+": "+n.toRgb()+"; ",r=n.getAlpha();return 1!==r&&(i+=t+"-opacity: "+r.toString()+"; "),i}return t+": none; "}var e=v.util.toFixed;v.util.object.extend(v.Object.prototype,{getSvgStyles:function(e){var n=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"none",s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",l=this.strokeMiterLimit?this.strokeMiterLimit:"4",c=void 0!==this.opacity?this.opacity:"1",h=this.visible?"":" visibility: hidden;",u=e?"":this.getSvgFilter(),d=t("fill",this.fill);return[t("stroke",this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",l,"; ",d,"fill-rule: ",n,"; ","opacity: ",c,";",u,h].join("")},getSvgSpanStyles:function(e,n){var i="; ",r=e.fontFamily?"font-family: "+(-1===e.fontFamily.indexOf("'")&&-1===e.fontFamily.indexOf('"')?"'"+e.fontFamily+"'":e.fontFamily)+i:"",s=e.strokeWidth?"stroke-width: "+e.strokeWidth+i:"",o=(r=r,e.fontSize?"font-size: "+e.fontSize+"px"+i:""),a=e.fontStyle?"font-style: "+e.fontStyle+i:"",l=e.fontWeight?"font-weight: "+e.fontWeight+i:"",c=e.fill?t("fill",e.fill):"",h=e.stroke?t("stroke",e.stroke):"",u=this.getSvgTextDecoration(e);return u&&(u="text-decoration: "+u+i),[h,s,r,o,a,l,u,c,e.deltaY?"baseline-shift: "+-e.deltaY+"; ":"",n?"white-space: pre; ":""].join("")},getSvgTextDecoration:function(t){return["overline","underline","line-through"].filter(function(e){return t[e.replace("-","")]}).join(" ")},getSvgFilter:function(){return this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":""},getSvgCommons:function(){return[this.id?'id="'+this.id+'" ':"",this.clipPath?'clip-path="url(#'+this.clipPath.clipPathId+')" ':""].join("")},getSvgTransform:function(t,e){var n=t?this.calcTransformMatrix():this.calcOwnMatrix();return'transform="'+v.util.matrixToSVG(n)+(e||"")+'" '},_setSVGBg:function(t){if(this.backgroundColor){var n=v.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(this.backgroundColor),' x="',e(-this.width/2,n),'" y="',e(-this.height/2,n),'" width="',e(this.width,n),'" height="',e(this.height,n),'"></rect>\n')}},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})},toClipPathSVG:function(t){return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})},_createBaseClipPathSVGMarkup:function(t,e){var n=(e=e||{}).reviver,i=[this.getSvgTransform(!0,e.additionalTransform||""),this.getSvgCommons()].join(""),r=t.indexOf("COMMON_PARTS");return t[r]=i,n?n(t.join("")):t.join("")},_createBaseSVGMarkup:function(t,e){var n,i,r=(e=e||{}).noStyle,s=e.reviver,o=r?"":'style="'+this.getSvgStyles()+'" ',a=e.withShadow?'style="'+this.getSvgFilter()+'" ':"",l=this.clipPath,c=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",h=l&&l.absolutePositioned,u=this.stroke,d=this.fill,f=this.shadow,p=[],g=t.indexOf("COMMON_PARTS"),m=e.additionalTransform;return l&&(l.clipPathId="CLIPPATH_"+v.Object.__uid++,i='<clipPath id="'+l.clipPathId+'" >\n'+l.toClipPathSVG(s)+"</clipPath>\n"),h&&p.push("<g ",a,this.getSvgCommons()," >\n"),p.push("<g ",this.getSvgTransform(!1),h?"":a+this.getSvgCommons()," >\n"),n=[o,c,r?"":this.addPaintOrder()," ",m?'transform="'+m+'" ':""].join(""),t[g]=n,d&&d.toLive&&p.push(d.toSVG(this)),u&&u.toLive&&p.push(u.toSVG(this)),f&&p.push(f.toSVG(this)),l&&p.push(i),p.push(t.join("")),p.push("</g>\n"),h&&p.push("</g>\n"),s?s(p.join("")):p.join("")},addPaintOrder:function(){return"fill"!==this.paintFirst?' paint-order="'+this.paintFirst+'" ':""}})}(),function(){var t=v.util.object.extend,e="stateProperties";function n(e,n,i){var r={};i.forEach(function(t){r[t]=e[t]}),t(e[n],r,!0)}function i(t,e,n){if(t===e)return!0;if(Array.isArray(t)){if(!Array.isArray(e)||t.length!==e.length)return!1;for(var r=0,s=t.length;r<s;r++)if(!i(t[r],e[r]))return!1;return!0}if(t&&"object"==typeof t){var o,a=Object.keys(t);if(!e||"object"!=typeof e||!n&&a.length!==Object.keys(e).length)return!1;for(r=0,s=a.length;r<s;r++)if("canvas"!==(o=a[r])&&"group"!==o&&!i(t[o],e[o]))return!1;return!0}}v.util.object.extend(v.Object.prototype,{hasStateChanged:function(t){var n="_"+(t=t||e);return Object.keys(this[n]).length<this[t].length||!i(this[n],this,!0)},saveState:function(t){var i=t&&t.propertySet||e,r="_"+i;return this[r]?(n(this,r,this[i]),t&&t.stateProperties&&n(this,r,t.stateProperties),this):this.setupState(t)},setupState:function(t){var n=(t=t||{}).propertySet||e;return t.propertySet=n,this["_"+n]={},this.saveState(t),this}})}(),function(){var t=v.util.degreesToRadians;v.util.object.extend(v.Object.prototype,{_findTargetCorner:function(t,e){if(!this.hasControls||this.group||!this.canvas||this.canvas._activeObject!==this)return!1;var n,i,r,s=t.x,o=t.y,a=Object.keys(this.oCoords),l=a.length-1;for(this.__corner=0;l>=0;l--)if(this.isControlVisible(r=a[l])&&(i=this._getImageLines(e?this.oCoords[r].touchCorner:this.oCoords[r].corner),0!==(n=this._findCrossPoints({x:s,y:o},i))&&n%2==1))return this.__corner=r,r;return!1},forEachControl:function(t){for(var e in this.controls)t(this.controls[e],e,this)},_setCornerCoords:function(){var t=this.oCoords;for(var e in t){var n=this.controls[e];t[e].corner=n.calcCornerCoords(this.angle,this.cornerSize,t[e].x,t[e].y,!1),t[e].touchCorner=n.calcCornerCoords(this.angle,this.touchCornerSize,t[e].x,t[e].y,!0)}},drawSelectionBackground:function(e){if(!this.selectionBackgroundColor||this.canvas&&!this.canvas.interactive||this.canvas&&this.canvas._activeObject!==this)return this;e.save();var n=this.getCenterPoint(),i=this._calculateCurrentDimensions(),r=this.canvas.viewportTransform;return e.translate(n.x,n.y),e.scale(1/r[0],1/r[3]),e.rotate(t(this.angle)),e.fillStyle=this.selectionBackgroundColor,e.fillRect(-i.x/2,-i.y/2,i.x,i.y),e.restore(),this},drawBorders:function(t,e){e=e||{};var n=this._calculateCurrentDimensions(),i=this.borderScaleFactor,r=n.x+i,s=n.y+i,o=void 0!==e.hasControls?e.hasControls:this.hasControls,a=!1;return t.save(),t.strokeStyle=e.borderColor||this.borderColor,this._setLineDash(t,e.borderDashArray||this.borderDashArray,null),t.strokeRect(-r/2,-s/2,r,s),o&&(t.beginPath(),this.forEachControl(function(e,n,i){e.withConnection&&e.getVisibility(i,n)&&(a=!0,t.moveTo(e.x*r,e.y*s),t.lineTo(e.x*r+e.offsetX,e.y*s+e.offsetY))}),a&&t.stroke()),t.restore(),this},drawBordersInGroup:function(t,e,n){n=n||{};var i=v.util.sizeAfterTransform(this.width,this.height,e),r=this.strokeWidth,s=this.strokeUniform,o=this.borderScaleFactor,a=i.x+r*(s?this.canvas.getZoom():e.scaleX)+o,l=i.y+r*(s?this.canvas.getZoom():e.scaleY)+o;return t.save(),this._setLineDash(t,n.borderDashArray||this.borderDashArray,null),t.strokeStyle=n.borderColor||this.borderColor,t.strokeRect(-a/2,-l/2,a,l),t.restore(),this},drawControls:function(t,e){return e=e||{},t.save(),t.setTransform(this.canvas.getRetinaScaling(),0,0,this.canvas.getRetinaScaling(),0,0),t.strokeStyle=t.fillStyle=e.cornerColor||this.cornerColor,this.transparentCorners||(t.strokeStyle=e.cornerStrokeColor||this.cornerStrokeColor),this._setLineDash(t,e.cornerDashArray||this.cornerDashArray,null),this.setCoords(),this.forEachControl(function(n,i,r){n.getVisibility(r,i)&&n.render(t,r.oCoords[i].x,r.oCoords[i].y,e,r)}),t.restore(),this},isControlVisible:function(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)},setControlVisible:function(t,e){return this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e,this},setControlsVisibility:function(t){for(var e in t||(t={}),t)this.setControlVisible(e,t[e]);return this},onDeselect:function(){},onSelect:function(){}})}(),v.util.object.extend(v.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,s=this;return v.util.animate({startValue:t.left,endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),s.requestRenderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,s=this;return v.util.animate({startValue:t.top,endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),s.requestRenderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){var n=function(){},i=(e=e||{}).onComplete||n,r=e.onChange||n,s=this;return v.util.animate({startValue:t.opacity,endValue:0,duration:this.FX_DURATION,onChange:function(e){t.set("opacity",e),s.requestRenderAll(),r()},onComplete:function(){s.remove(t),i()}}),this}}),v.util.object.extend(v.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e=[];for(t in arguments[0])e.push(t);for(var n=0,i=e.length;n<i;n++)this._animate(t=e[n],arguments[0][t],arguments[1],n!==i-1)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,n,i){var r,s=this;e=e.toString(),n=n?v.util.object.clone(n):{},~t.indexOf(".")&&(r=t.split("."));var o=s.colorProperties.indexOf(t)>-1||r&&s.colorProperties.indexOf(r[1])>-1,a=r?this.get(r[0])[r[1]]:this.get(t);"from"in n||(n.from=a),o||(e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e));var l={startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(s)},onChange:function(e,o,a){r?s[r[0]][r[1]]=e:s.set(t,e),i||n.onChange&&n.onChange(e,o,a)},onComplete:function(t,e,r){i||(s.setCoords(),n.onComplete&&n.onComplete(t,e,r))}};o?v.util.animateColor(l.startValue,l.endValue,l.duration,l):v.util.animate(l)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r={x1:1,x2:1,y1:1,y2:1},s=e.StaticCanvas.supports("setLineDash");function o(t,e){var n=t.origin,i=t.axis1,r=t.axis2,s=t.dimension,o=e.nearest,a=e.center,l=e.farthest;return function(){switch(this.get(n)){case o:return Math.min(this.get(i),this.get(r));case a:return Math.min(this.get(i),this.get(r))+.5*this.get(s);case l:return Math.max(this.get(i),this.get(r))}}}e.Line?e.warn("fabric.Line is already defined"):(e.Line=e.util.createClass(e.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,cacheProperties:e.Object.prototype.cacheProperties.concat("x1","x2","y1","y2"),initialize:function(t,e){t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),void 0!==r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:o({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:o({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t){if(t.beginPath(),!this.strokeDashArray||this.strokeDashArray&&s){var e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2)}t.lineWidth=this.strokeWidth;var n=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=n},_renderDashedStroke:function(t){var n=this.calcLinePoints();t.beginPath(),e.util.drawDashedLine(t,n.x1,n.y1,n.x2,n.y2,this.strokeDashArray),t.closePath()},_findCenterFromElement:function(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}},toObject:function(t){return n(this.callSuper("toObject",t),this.calcLinePoints())},_getNonTransformedDimensions:function(){var t=this.callSuper("_getNonTransformedDimensions");return"butt"===this.strokeLineCap&&(0===this.width&&(t.y-=this.strokeWidth),0===this.height&&(t.x-=this.strokeWidth)),t},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1;return{x1:t*this.width*.5,x2:t*this.width*-.5,y1:e*this.height*.5,y2:e*this.height*-.5}},_toSVG:function(){var t=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="',t.x1,'" y1="',t.y1,'" x2="',t.x2,'" y2="',t.y2,'" />\n']}}),e.Line.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),e.Line.fromElement=function(t,i,r){r=r||{};var s=e.parseAttributes(t,e.Line.ATTRIBUTE_NAMES);i(new e.Line([s.x1||0,s.y1||0,s.x2||0,s.y2||0],n(s,r)))},e.Line.fromObject=function(t,n){var r=i(t,!0);r.points=[t.x1,t.y1,t.x2,t.y2],e.Object._fromObject("Line",r,function(t){delete t.points,n&&n(t)},"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.PI;e.Circle?e.warn("fabric.Circle is already defined."):(e.Circle=e.util.createClass(e.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*n,cacheProperties:e.Object.prototype.cacheProperties.concat("radius","startAngle","endAngle"),_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return this.callSuper("toObject",["radius","startAngle","endAngle"].concat(t))},_toSVG:function(){var t,i=(this.endAngle-this.startAngle)%(2*n);if(0===i)t=["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',this.radius,'" />\n'];else{var r=e.util.cos(this.startAngle)*this.radius,s=e.util.sin(this.startAngle)*this.radius,o=e.util.cos(this.endAngle)*this.radius,a=e.util.sin(this.endAngle)*this.radius;t=['<path d="M '+r+" "+s," A "+this.radius+" "+this.radius," 0 ",+(i>n?"1":"0")+" 1"," "+o+" "+a,'" ',"COMMON_PARTS"," />\n"]}return t},_render:function(t){t.beginPath(),t.arc(0,0,this.radius,this.startAngle,this.endAngle,!1),this._renderPaintInOrder(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){return this.radius=t,this.set("width",2*t).set("height",2*t)}}),e.Circle.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),e.Circle.fromElement=function(t,n){var i,r=e.parseAttributes(t,e.Circle.ATTRIBUTE_NAMES);if(!("radius"in(i=r)&&i.radius>=0))throw new Error("value of `r` attribute is required and can not be negative");r.left=(r.left||0)-r.radius,r.top=(r.top||0)-r.radius,n(new e.Circle(r))},e.Circle.fromObject=function(t,n){return e.Object._fromObject("Circle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Triangle?e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",width:100,height:100,_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n=this.width/2,i=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-n,i,0,-i,this.strokeDashArray),e.util.drawDashedLine(t,0,-i,n,i,this.strokeDashArray),e.util.drawDashedLine(t,n,i,-n,i,this.strokeDashArray),t.closePath()},_toSVG:function(){var t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',[-t+" "+e,"0 "+-e,t+" "+e].join(","),'" />']}}),e.Triangle.fromObject=function(t,n){return e.Object._fromObject("Triangle",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI;e.Ellipse?e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this.set("rx",t&&t.rx||0),this.set("ry",t&&t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" ','rx="',this.rx,'" ry="',this.ry,'" />\n']},_render:function(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,n,!1),t.restore(),this._renderPaintInOrder(t)}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){var i=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);i.left=(i.left||0)-i.rx,i.top=(i.top||0)-i.ry,n(new e.Ellipse(i))},e.Ellipse.fromObject=function(t,n){return e.Object._fromObject("Ellipse",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Rect?e.warn("fabric.Rect is already defined"):(e.Rect=e.util.createClass(e.Object,{stateProperties:e.Object.prototype.stateProperties.concat("rx","ry"),type:"rect",rx:0,ry:0,cacheProperties:e.Object.prototype.cacheProperties.concat("rx","ry"),initialize:function(t){this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t){var e=this.rx?Math.min(this.rx,this.width/2):0,n=this.ry?Math.min(this.ry,this.height/2):0,i=this.width,r=this.height,s=-this.width/2,o=-this.height/2,a=0!==e||0!==n,l=.4477152502;t.beginPath(),t.moveTo(s+e,o),t.lineTo(s+i-e,o),a&&t.bezierCurveTo(s+i-l*e,o,s+i,o+l*n,s+i,o+n),t.lineTo(s+i,o+r-n),a&&t.bezierCurveTo(s+i,o+r-l*n,s+i-l*e,o+r,s+i-e,o+r),t.lineTo(s+e,o+r),a&&t.bezierCurveTo(s+l*e,o+r,s,o+r-l*n,s,o+r-n),t.lineTo(s,o+n),a&&t.bezierCurveTo(s,o+l*n,s+l*e,o,s+e,o),t.closePath(),this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n=-this.width/2,i=-this.height/2,r=this.width,s=this.height;t.beginPath(),e.util.drawDashedLine(t,n,i,n+r,i,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i,n+r,i+s,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i+s,n,i+s,this.strokeDashArray),e.util.drawDashedLine(t,n,i+s,n,i,this.strokeDashArray),t.closePath()},toObject:function(t){return this.callSuper("toObject",["rx","ry"].concat(t))},_toSVG:function(){return["<rect ","COMMON_PARTS",'x="',-this.width/2,'" y="',-this.height/2,'" rx="',this.rx,'" ry="',this.ry,'" width="',this.width,'" height="',this.height,'" />\n']}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i,r){if(!t)return i(null);r=r||{};var s=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);s.left=s.left||0,s.top=s.top||0,s.height=s.height||0,s.width=s.width||0;var o=new e.Rect(n(r?e.util.object.clone(r):{},s));o.visible=o.visible&&o.width>0&&o.height>0,i(o)},e.Rect.fromObject=function(t,n){return e.Object._fromObject("Rect",t,n)})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,s=e.util.toFixed;e.Polyline?e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,cacheProperties:e.Object.prototype.cacheProperties.concat("points"),initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._setPositionDimensions(e)},_setPositionDimensions:function(t){var e,n=this._calcDimensions(t);this.width=n.width,this.height=n.height,t.fromSVG||(e=this.translateToGivenOrigin({x:n.left-this.strokeWidth/2,y:n.top-this.strokeWidth/2},"left","top",this.originX,this.originY)),void 0===t.left&&(this.left=t.fromSVG?n.left:e.x),void 0===t.top&&(this.top=t.fromSVG?n.top:e.y),this.pathOffset={x:n.left+this.width/2,y:n.top+this.height/2}},_calcDimensions:function(){var t=this.points,e=i(t,"x")||0,n=i(t,"y")||0;return{left:e,top:n,width:(r(t,"x")||0)-e,height:(r(t,"y")||0)-n}},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},_toSVG:function(){for(var t=[],n=this.pathOffset.x,i=this.pathOffset.y,r=e.Object.NUM_FRACTION_DIGITS,o=0,a=this.points.length;o<a;o++)t.push(s(this.points[o].x-n,r),",",s(this.points[o].y-i,r)," ");return["<"+this.type+" ","COMMON_PARTS",'points="',t.join(""),'" />\n']},commonRender:function(t){var e,n=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(var s=0;s<n;s++)t.lineTo((e=this.points[s]).x-i,e.y-r);return!0},_render:function(t){this.commonRender(t)&&this._renderPaintInOrder(t)},_renderDashedStroke:function(t){var n,i;t.beginPath();for(var r=0,s=this.points.length;r<s;r++)e.util.drawDashedLine(t,(n=this.points[r]).x,n.y,(i=this.points[r+1]||n).x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElementGenerator=function(t){return function(i,r,s){if(!i)return r(null);s||(s={});var o=e.parsePointsAttribute(i.getAttribute("points")),a=e.parseAttributes(i,e[t].ATTRIBUTE_NAMES);a.fromSVG=!0,r(new e[t](o,n(a,s)))}},e.Polyline.fromElement=e.Polyline.fromElementGenerator("Polyline"),e.Polyline.fromObject=function(t,n){return e.Object._fromObject("Polyline",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Polygon?e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Polyline,{type:"polygon",_render:function(t){this.commonRender(t)&&(t.closePath(),this._renderPaintInOrder(t))},_renderDashedStroke:function(t){this.callSuper("_renderDashedStroke",t),t.closePath()}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=e.Polyline.fromElementGenerator("Polygon"),e.Polygon.fromObject=function(t,n){return e.Object._fromObject("Polygon",t,n,"points")})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,s=Object.prototype.toString,o=e.util.toFixed;e.Path?e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,cacheProperties:e.Object.prototype.cacheProperties.concat("path","fillRule"),stateProperties:e.Object.prototype.stateProperties.concat("path"),initialize:function(t,n){this.callSuper("initialize",n=n||{}),t||(t=[]);var i="[object Array]"===s.call(t);this.path=e.util.makePathSimpler(i?t:e.util.parsePath(t)),this.path&&e.Polyline.prototype._setPositionDimensions.call(this,n)},_renderPathCommands:function(t){var e,n=0,i=0,r=0,s=0,o=-this.pathOffset.x,a=-this.pathOffset.y;t.beginPath();for(var l=0,c=this.path.length;l<c;++l)switch((e=this.path[l])[0]){case"L":t.lineTo((r=e[1])+o,(s=e[2])+a);break;case"M":n=r=e[1],i=s=e[2],t.moveTo(r+o,s+a);break;case"C":t.bezierCurveTo(e[1]+o,e[2]+a,e[3]+o,e[4]+a,(r=e[5])+o,(s=e[6])+a);break;case"Q":t.quadraticCurveTo(e[1]+o,e[2]+a,e[3]+o,e[4]+a),r=e[3],s=e[4];break;case"z":case"Z":r=n,s=i,t.closePath()}},_render:function(t){this._renderPathCommands(t),this._renderPaintInOrder(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){return r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()})})},toDatalessObject:function(t){var e=this.toObject(["sourcePath"].concat(t));return e.sourcePath&&delete e.path,e},_toSVG:function(){return["<path ","COMMON_PARTS",'d="',this.path.map(function(t){return t.join(" ")}).join(" "),'" stroke-linecap="round" ',"/>\n"]},_getOffsetTransform:function(){var t=e.Object.NUM_FRACTION_DIGITS;return" translate("+o(-this.pathOffset.x,t)+", "+o(-this.pathOffset.y,t)+")"},toClipPathSVG:function(t){var e=this._getOffsetTransform();return"\t"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},toSVG:function(t){var e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})},complexity:function(){return this.path.length},_calcDimensions:function(){for(var t,r,s=[],o=[],a=0,l=0,c=0,h=0,u=0,d=this.path.length;u<d;++u){switch((t=this.path[u])[0]){case"L":c=t[1],h=t[2],r=[];break;case"M":a=c=t[1],l=h=t[2],r=[];break;case"C":r=e.util.getBoundsOfCurve(c,h,t[1],t[2],t[3],t[4],t[5],t[6]),c=t[5],h=t[6];break;case"Q":r=e.util.getBoundsOfCurve(c,h,t[1],t[2],t[1],t[2],t[3],t[4]),c=t[3],h=t[4];break;case"z":case"Z":c=a,h=l}r.forEach(function(t){s.push(t.x),o.push(t.y)}),s.push(c),o.push(h)}var f=n(s)||0,p=n(o)||0;return{left:f,top:p,width:(i(s)||0)-f,height:(i(o)||0)-p}}}),e.Path.fromObject=function(t,n){"string"==typeof t.sourcePath?e.loadSVGFromURL(t.sourcePath,function(e){var i=e[0];i.setOptions(t),n&&n(i)}):e.Object._fromObject("Path",t,n,"path")},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){var s=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);s.fromSVG=!0,n(new e.Path(s.d,r(s,i)))})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max;e.Group||(e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,subTargetCheck:!1,cacheProperties:[],useSetOnGroup:!1,initialize:function(t,e,n){e=e||{},this._objects=[],n&&this.callSuper("initialize",e),this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;if(n)this._updateObjectsACoords();else{var r=e&&e.centerPoint;void 0!==e.originX&&(this.originX=e.originX),void 0!==e.originY&&(this.originY=e.originY),r||this._calcBounds(),this._updateObjectsCoords(r),delete e.centerPoint,this.callSuper("initialize",e)}this.setCoords()},_updateObjectsACoords:function(){for(var t=this._objects.length;t--;)this._objects[t].setCoords(!0)},_updateObjectsCoords:function(t){t=t||this.getCenterPoint();for(var e=this._objects.length;e--;)this._updateObjectCoords(this._objects[e],t)},_updateObjectCoords:function(t,e){t.set({left:t.left-e.x,top:t.top-e.y}),t.group=this,t.setCoords(!0)},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){var n=!!this.group;return this._restoreObjectsState(),e.util.resetObjectTransform(this),t&&(n&&e.util.removeTransformFromObject(t,this.group.calcTransformMatrix()),this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this._calcBounds(),this._updateObjectsCoords(),this.dirty=!0,n?this.group.addWithUpdate():this.setCoords(),this},removeWithUpdate:function(t){return this._restoreObjectsState(),e.util.resetObjectTransform(this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this.setCoords(),this.dirty=!0,this},_onObjectAdded:function(t){this.dirty=!0,t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){this.dirty=!0,delete t.group},_set:function(t,n){var i=this._objects.length;if(this.useSetOnGroup)for(;i--;)this._objects[i].setOnGroup(t,n);if("canvas"===t)for(;i--;)this._objects[i]._set(t,n);e.Object.prototype._set.call(this,t,n)},toObject:function(t){var n=this.includeDefaultValues,i=this._objects.map(function(e){var i=e.includeDefaultValues;e.includeDefaultValues=n;var r=e.toObject(t);return e.includeDefaultValues=i,r}),r=e.Object.prototype.toObject.call(this,t);return r.objects=i,r},toDatalessObject:function(t){var n,i=this.sourcePath;if(i)n=i;else{var r=this.includeDefaultValues;n=this._objects.map(function(e){var n=e.includeDefaultValues;e.includeDefaultValues=r;var i=e.toDatalessObject(t);return e.includeDefaultValues=n,i})}var s=e.Object.prototype.toDatalessObject.call(this,t);return s.objects=n,s},render:function(t){this._transformDone=!0,this.callSuper("render",t),this._transformDone=!1},shouldCache:function(){var t=e.Object.prototype.shouldCache.call(this);if(t)for(var n=0,i=this._objects.length;n<i;n++)if(this._objects[n].willDrawShadow())return this.ownCaching=!1,!1;return t},willDrawShadow:function(){if(e.Object.prototype.willDrawShadow.call(this))return!0;for(var t=0,n=this._objects.length;t<n;t++)if(this._objects[t].willDrawShadow())return!0;return!1},isOnACache:function(){return this.ownCaching||this.group&&this.group.isOnACache()},drawObject:function(t){for(var e=0,n=this._objects.length;e<n;e++)this._objects[e].render(t);this._drawClipPath(t)},isCacheDirty:function(t){if(this.callSuper("isCacheDirty",t))return!0;if(!this.statefullCache)return!1;for(var e=0,n=this._objects.length;e<n;e++)if(this._objects[e].isCacheDirty(!0)){if(this._cacheCanvas){var i=this.cacheWidth/this.zoomX,r=this.cacheHeight/this.zoomY;this._cacheContext.clearRect(-i/2,-r/2,i,r)}return!0}return!1},_restoreObjectsState:function(){var t=this.calcOwnMatrix();return this._objects.forEach(function(n){e.util.addTransformToObject(n,t),delete n.group,n.setCoords()}),this},realizeTransform:function(t,n){return e.util.addTransformToObject(t,n),t},destroy:function(){return this._objects.forEach(function(t){t.set("dirty",!0)}),this._restoreObjectsState()},toActiveSelection:function(){if(this.canvas){var t=this._objects,n=this.canvas;this._objects=[];var i=this.toObject();delete i.objects;var r=new e.ActiveSelection([]);return r.set(i),r.type="activeSelection",n.remove(this),t.forEach(function(t){t.group=r,t.dirty=!0,n.add(t)}),r.canvas=n,r._objects=t,n._activeObject=r,r.setCoords(),r}},ungroupOnCanvas:function(){return this._restoreObjectsState()},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords(!0)}),this},_calcBounds:function(t){for(var e,n,i,r,s=[],o=[],a=["tr","br","bl","tl"],l=0,c=this._objects.length,h=a.length;l<c;++l){for(i=(e=this._objects[l]).calcACoords(),r=0;r<h;r++)s.push(i[n=a[r]].x),o.push(i[n].y);e.aCoords=i}this._getBounds(s,o,t)},_getBounds:function(t,r,s){var o=new e.Point(n(t),n(r)),a=new e.Point(i(t),i(r)),l=o.y||0,c=o.x||0,h=a.y-o.y||0;this.width=a.x-o.x||0,this.height=h,s||this.setPositionByOrigin({x:c,y:l},"left","top")},_toSVG:function(t){for(var e=["<g ","COMMON_PARTS"," >\n"],n=0,i=this._objects.length;n<i;n++)e.push("\t\t",this._objects[n].toSVG(t));return e.push("</g>\n"),e},getSvgStyles:function(){var t=this.visible?"":" visibility: hidden;";return[void 0!==this.opacity&&1!==this.opacity?"opacity: "+this.opacity+";":"",this.getSvgFilter(),t].join("")},toClipPathSVG:function(t){for(var e=[],n=0,i=this._objects.length;n<i;n++)e.push("\t",this._objects[n].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}}),e.Group.fromObject=function(t,n){var i=t.objects,r=e.util.object.clone(t,!0);delete r.objects,"string"!=typeof i?e.util.enlivenObjects(i,function(i){e.util.enlivenObjects([t.clipPath],function(r){var s=e.util.object.clone(t,!0);s.clipPath=r[0],delete s.objects,n&&n(new e.Group(i,s,!0))})}):e.loadSVGFromURL(i,function(s){var o=e.util.groupSVGElements(s,t,i);o.set(r),n&&n(o)})})}(e),function(t){"use strict";var e=t.fabric||(t.fabric={});e.ActiveSelection||(e.ActiveSelection=e.util.createClass(e.Group,{type:"activeSelection",initialize:function(t,n){n=n||{},this._objects=t||[];for(var i=this._objects.length;i--;)this._objects[i].group=this;n.originX&&(this.originX=n.originX),n.originY&&(this.originY=n.originY),this._calcBounds(),this._updateObjectsCoords(),e.Object.prototype.initialize.call(this,n),this.setCoords()},toGroup:function(){var t=this._objects.concat();this._objects=[];var n=e.Object.prototype.toObject.call(this),i=new e.Group([]);if(delete n.type,i.set(n),t.forEach(function(t){t.canvas.remove(t),t.group=i}),i._objects=t,!this.canvas)return i;var r=this.canvas;return r.add(i),r._activeObject=i,i.setCoords(),i},onDeselect:function(){return this.destroy(),!1},toString:function(){return"#<fabric.ActiveSelection: ("+this.complexity()+")>"},shouldCache:function(){return!1},isOnACache:function(){return!1},_renderControls:function(t,e,n){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,this.callSuper("_renderControls",t,e),void 0===(n=n||{}).hasControls&&(n.hasControls=!1),n.forActiveSelection=!0;for(var i=0,r=this._objects.length;i<r;i++)this._objects[i]._renderControls(t,n);t.restore()}}),e.ActiveSelection.fromObject=function(t,n){e.util.enlivenObjects(t.objects,function(i){delete t.objects,n&&n(new e.ActiveSelection(i,t,!0))})})}(e),function(t){"use strict";var e=v.util.object.extend;t.fabric||(t.fabric={}),t.fabric.Image?v.warn("fabric.Image is already defined."):(v.Image=v.util.createClass(v.Object,{type:"image",strokeWidth:0,srcFromAttribute:!1,_lastScaleX:1,_lastScaleY:1,_filterScalingX:1,_filterScalingY:1,minimumScaleTrigger:.5,stateProperties:v.Object.prototype.stateProperties.concat("cropX","cropY"),cacheProperties:v.Object.prototype.cacheProperties.concat("cropX","cropY"),cacheKey:"",cropX:0,cropY:0,imageSmoothing:!0,initialize:function(t,e){e||(e={}),this.filters=[],this.cacheKey="texture"+v.Object.__uid++,this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element||{}},setElement:function(t,e){return this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._element=t,this._originalElement=t,this._initConfig(e),0!==this.filters.length&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters(),this},removeTexture:function(t){var e=v.filterBackend;e&&e.evictCachesForKey&&e.evictCachesForKey(t)},dispose:function(){this.removeTexture(this.cacheKey),this.removeTexture(this.cacheKey+"_filtered"),this._cacheContext=void 0,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach((function(t){v.util.cleanUpJsdomNode(this[t]),this[t]=void 0}).bind(this))},getCrossOrigin:function(){return this._originalElement&&(this._originalElement.crossOrigin||null)},getOriginalSize:function(){var t=this.getElement();return{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}},_stroke:function(t){if(this.stroke&&0!==this.strokeWidth){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,-n),t.lineTo(e,-n),t.lineTo(e,n),t.lineTo(-e,n),t.lineTo(-e,-n),t.closePath()}},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.save(),this._setStrokeStyles(t,this),t.beginPath(),v.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),v.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),v.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),v.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var n=[];this.filters.forEach(function(t){t&&n.push(t.toObject())});var i=e(this.callSuper("toObject",["cropX","cropY"].concat(t)),{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:n});return this.resizeFilter&&(i.resizeFilter=this.resizeFilter.toObject()),i},hasCrop:function(){return this.cropX||this.cropY||this.width<this._element.width||this.height<this._element.height},_toSVG:function(){var t,e=[],n=[],i=this._element,r=-this.width/2,s=-this.height/2,o="",a="";if(!i)return[];if(this.hasCrop()){var l=v.Object.__uid++;e.push('<clipPath id="imageCrop_'+l+'">\n','\t<rect x="'+r+'" y="'+s+'" width="'+this.width+'" height="'+this.height+'" />\n',"</clipPath>\n"),o=' clip-path="url(#imageCrop_'+l+')" '}if(this.imageSmoothing||(a='" image-rendering="optimizeSpeed'),n.push("\t<image ","COMMON_PARTS",'xlink:href="',this.getSvgSrc(!0),'" x="',r-this.cropX,'" y="',s-this.cropY,'" width="',i.width||i.naturalWidth,'" height="',i.height||i.height,a,'"',o,"></image>\n"),this.stroke||this.strokeDashArray){var c=this.fill;this.fill=null,t=["\t<rect ",'x="',r,'" y="',s,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'],this.fill=c}return"fill"!==this.paintFirst?e.concat(t,n):e.concat(n,t)},getSrc:function(t){var e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src"):e.src:this.src||""},setSrc:function(t,e,n){return v.util.loadImage(t,function(t,i){this.setElement(t,n),this._setWidthHeight(),e&&e(this,i)},this,n&&n.crossOrigin),this},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},applyResizeFilters:function(){var t=this.resizeFilter,e=this.minimumScaleTrigger,n=this.getTotalObjectScaling(),i=n.scaleX,r=n.scaleY,s=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||i>e&&r>e)return this._element=s,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=i,void(this._lastScaleY=r);v.filterBackend||(v.filterBackend=v.initFilterBackend());var o=v.util.createCanvasElement(),a=this._filteredEl?this.cacheKey+"_filtered":this.cacheKey,l=s.width,c=s.height;o.width=l,o.height=c,this._element=o,this._lastScaleX=t.scaleX=i,this._lastScaleY=t.scaleY=r,v.filterBackend.applyFilters([t],s,l,c,this._element,a),this._filterScalingX=o.width/this._originalElement.width,this._filterScalingY=o.height/this._originalElement.height},applyFilters:function(t){if(t=(t=t||this.filters||[]).filter(function(t){return t&&!t.isNeutralState()}),this.set("dirty",!0),this.removeTexture(this.cacheKey+"_filtered"),0===t.length)return this._element=this._originalElement,this._filteredEl=null,this._filterScalingX=1,this._filterScalingY=1,this;var e=this._originalElement,n=e.naturalWidth||e.width,i=e.naturalHeight||e.height;if(this._element===this._originalElement){var r=v.util.createCanvasElement();r.width=n,r.height=i,this._element=r,this._filteredEl=r}else this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,n,i),this._lastScaleX=1,this._lastScaleY=1;return v.filterBackend||(v.filterBackend=v.initFilterBackend()),v.filterBackend.applyFilters(t,this._originalElement,n,i,this._element,this.cacheKey),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height),this},_render:function(t){v.util.setImageSmoothing(t,this.imageSmoothing),!0!==this.isMoving&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)},drawCacheOnCanvas:function(t){v.util.setImageSmoothing(t,this.imageSmoothing),v.Object.prototype.drawCacheOnCanvas.call(this,t)},shouldCache:function(){return this.needsItsOwnCache()},_renderFill:function(t){var e=this._element;if(e){var n=this._filterScalingX,i=this._filterScalingY,r=this.width,s=this.height,o=Math.min,a=Math.max,l=a(this.cropX,0),c=a(this.cropY,0),h=e.naturalWidth||e.width,u=e.naturalHeight||e.height,d=l*n,f=c*i,p=o(r*n,h-d),g=o(s*i,u-f),m=-r/2,v=-s/2,y=o(r,h/n-l),_=o(s,u/i-c);e&&t.drawImage(e,d,f,p,g,m,v,y,_)}},_needsResize:function(){var t=this.getTotalObjectScaling();return t.scaleX!==this._lastScaleX||t.scaleY!==this._lastScaleY},_resetWidthHeight:function(){this.set(this.getOriginalSize())},_initElement:function(t,e){this.setElement(v.util.getById(t),e),v.util.addClass(this.getElement(),v.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t)},_initFilters:function(t,e){t&&t.length?v.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){t||(t={});var e=this.getElement();this.width=t.width||e.naturalWidth||e.width||0,this.height=t.height||e.naturalHeight||e.height||0},parsePreserveAspectRatioAttribute:function(){var t,e=v.util.parsePreserveAspectRatioAttribute(this.preserveAspectRatio||""),n=this._element.width,i=this._element.height,r=1,s=1,o=0,a=0,l=0,c=0,h=this.width,u=this.height,d={width:h,height:u};return!e||"none"===e.alignX&&"none"===e.alignY?(r=h/n,s=u/i):("meet"===e.meetOrSlice&&(t=(h-n*(r=s=v.util.findScaleToFit(this._element,d)))/2,"Min"===e.alignX&&(o=-t),"Max"===e.alignX&&(o=t),t=(u-i*s)/2,"Min"===e.alignY&&(a=-t),"Max"===e.alignY&&(a=t)),"slice"===e.meetOrSlice&&(t=n-h/(r=s=v.util.findScaleToCover(this._element,d)),"Mid"===e.alignX&&(l=t/2),"Max"===e.alignX&&(l=t),t=i-u/s,"Mid"===e.alignY&&(c=t/2),"Max"===e.alignY&&(c=t),n=h/r,i=u/s)),{width:n,height:i,scaleX:r,scaleY:s,offsetLeft:o,offsetTop:a,cropX:l,cropY:c}}}),v.Image.CSS_CANVAS="canvas-img",v.Image.prototype.getSvgSrc=v.Image.prototype.getSrc,v.Image.fromObject=function(t,e){var n=v.util.object.clone(t);v.util.loadImage(n.src,function(t,i){i?e&&e(null,!0):v.Image.prototype._initFilters.call(n,n.filters,function(i){n.filters=i||[],v.Image.prototype._initFilters.call(n,[n.resizeFilter],function(i){n.resizeFilter=i[0],v.util.enlivenObjects([n.clipPath],function(i){n.clipPath=i[0];var r=new v.Image(t,n);e(r,!1)})})})},null,n.crossOrigin)},v.Image.fromURL=function(t,e,n){v.util.loadImage(t,function(t,i){e&&e(new v.Image(t,n),i)},null,n&&n.crossOrigin)},v.Image.ATTRIBUTE_NAMES=v.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href crossOrigin image-rendering".split(" ")),v.Image.fromElement=function(t,n,i){var r=v.parseAttributes(t,v.Image.ATTRIBUTE_NAMES);v.Image.fromURL(r["xlink:href"],n,e(i?v.util.object.clone(i):{},r))})}(e),v.util.object.extend(v.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.angle%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.rotate(this._getAngleValueForStraighten()),this},fxStraighten:function(t){var e=function(){},n=(t=t||{}).onComplete||e,i=t.onChange||e,r=this;return v.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.rotate(t),i()},onComplete:function(){r.setCoords(),n()}}),this}}),v.util.object.extend(v.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.requestRenderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.requestRenderAllBound}),this}}),function(){"use strict";function t(t,e){var n="precision "+e+" float;\nvoid main(){}",i=t.createShader(t.FRAGMENT_SHADER);return t.shaderSource(i,n),t.compileShader(i),!!t.getShaderParameter(i,t.COMPILE_STATUS)}function e(t){t&&t.tileSize&&(this.tileSize=t.tileSize),this.setupGLContext(this.tileSize,this.tileSize),this.captureGPUInfo()}v.isWebglSupported=function(e){if(v.isLikelyNode)return!1;e=e||v.WebglFilterBackend.prototype.tileSize;var n=document.createElement("canvas"),i=n.getContext("webgl")||n.getContext("experimental-webgl"),r=!1;if(i){v.maxTextureSize=i.getParameter(i.MAX_TEXTURE_SIZE),r=v.maxTextureSize>=e;for(var s=["highp","mediump","lowp"],o=0;o<3;o++)if(t(i,s[o])){v.webGlPrecision=s[o];break}}return this.isSupported=r,r},v.WebglFilterBackend=e,e.prototype={tileSize:2048,resources:{},setupGLContext:function(t,e){this.dispose(),this.createWebGLCanvas(t,e),this.aPosition=new Float32Array([0,0,0,1,1,0,1,1]),this.chooseFastestCopyGLTo2DMethod(t,e)},chooseFastestCopyGLTo2DMethod:function(t,e){var n,i=void 0!==window.performance;try{new ImageData(1,1),n=!0}catch(u){n=!1}var r="undefined"!=typeof ArrayBuffer,s="undefined"!=typeof Uint8ClampedArray;if(i&&n&&r&&s){var o=v.util.createCanvasElement(),a=new ArrayBuffer(t*e*4);if(v.forceGLPutImageData)return this.imageBuffer=a,void(this.copyGLTo2D=b);var l,c,h={imageBuffer:a,destinationWidth:t,destinationHeight:e,targetCanvas:o};o.width=t,o.height=e,l=window.performance.now(),_.call(h,this.gl,h),c=window.performance.now()-l,l=window.performance.now(),b.call(h,this.gl,h),c>window.performance.now()-l?(this.imageBuffer=a,this.copyGLTo2D=b):this.copyGLTo2D=_}},createWebGLCanvas:function(t,e){var n=v.util.createCanvasElement();n.width=t,n.height=e;var i={alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1},r=n.getContext("webgl",i);r||(r=n.getContext("experimental-webgl",i)),r&&(r.clearColor(0,0,0,0),this.canvas=n,this.gl=r)},applyFilters:function(t,e,n,i,r,s){var o,a=this.gl;s&&(o=this.getCachedTexture(s,e));var l={originalWidth:e.width||e.originalWidth,originalHeight:e.height||e.originalHeight,sourceWidth:n,sourceHeight:i,destinationWidth:n,destinationHeight:i,context:a,sourceTexture:this.createTexture(a,n,i,!o&&e),targetTexture:this.createTexture(a,n,i),originalTexture:o||this.createTexture(a,n,i,!o&&e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},c=a.createFramebuffer();return a.bindFramebuffer(a.FRAMEBUFFER,c),t.forEach(function(t){t&&t.applyTo(l)}),function(t){var e=t.targetCanvas,n=t.destinationWidth,i=t.destinationHeight;e.width===n&&e.height===i||(e.width=n,e.height=i)}(l),this.copyGLTo2D(a,l),a.bindTexture(a.TEXTURE_2D,null),a.deleteTexture(l.sourceTexture),a.deleteTexture(l.targetTexture),a.deleteFramebuffer(c),r.getContext("2d").setTransform(1,0,0,1,0,0),l},dispose:function(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()},clearWebGLCaches:function(){this.programCache={},this.textureCache={}},createTexture:function(t,e,n,i){var r=t.createTexture();return t.bindTexture(t.TEXTURE_2D,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),i?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,i):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e,n,0,t.RGBA,t.UNSIGNED_BYTE,null),r},getCachedTexture:function(t,e){if(this.textureCache[t])return this.textureCache[t];var n=this.createTexture(this.gl,e.width,e.height,e);return this.textureCache[t]=n,n},evictCachesForKey:function(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])},copyGLTo2D:_,captureGPUInfo:function(){if(this.gpuInfo)return this.gpuInfo;var t=this.gl,e={renderer:"",vendor:""};if(!t)return e;var n=t.getExtension("WEBGL_debug_renderer_info");if(n){var i=t.getParameter(n.UNMASKED_RENDERER_WEBGL),r=t.getParameter(n.UNMASKED_VENDOR_WEBGL);i&&(e.renderer=i.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}}(),function(){"use strict";var t=function(){};function e(){}v.Canvas2dFilterBackend=e,e.prototype={evictCachesForKey:t,dispose:t,clearWebGLCaches:t,resources:{},applyFilters:function(t,e,n,i,r){var s=r.getContext("2d");s.drawImage(e,0,0,n,i);var o={sourceWidth:n,sourceHeight:i,imageData:s.getImageData(0,0,n,i),originalEl:e,originalImageData:s.getImageData(0,0,n,i),canvasEl:r,ctx:s,filterBackend:this};return t.forEach(function(t){t.applyTo(o)}),o.imageData.width===n&&o.imageData.height===i||(r.width=o.imageData.width,r.height=o.imageData.height),s.putImageData(o.imageData,0,0),o}}}(),v.Image=v.Image||{},v.Image.filters=v.Image.filters||{},v.Image.filters.BaseFilter=v.util.createClass({type:"BaseFilter",vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvoid main() {\nvTexCoord = aPosition;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:"precision highp float;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\n}",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},createProgram:function(t,e,n){e=e||this.fragmentSource,n=n||this.vertexSource,"highp"!==v.webGlPrecision&&(e=e.replace(/precision highp float/g,"precision "+v.webGlPrecision+" float"));var i=t.createShader(t.VERTEX_SHADER);if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))throw new Error("Vertex shader compile error for "+this.type+": "+t.getShaderInfoLog(i));var r=t.createShader(t.FRAGMENT_SHADER);if(t.shaderSource(r,e),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Error("Fragment shader compile error for "+this.type+": "+t.getShaderInfoLog(r));var s=t.createProgram();if(t.attachShader(s,i),t.attachShader(s,r),t.linkProgram(s),!t.getProgramParameter(s,t.LINK_STATUS))throw new Error('Shader link error for "${this.type}" '+t.getProgramInfoLog(s));var o=this.getAttributeLocations(t,s),a=this.getUniformLocations(t,s)||{};return a.uStepW=t.getUniformLocation(s,"uStepW"),a.uStepH=t.getUniformLocation(s,"uStepH"),{program:s,attributeLocations:o,uniformLocations:a}},getAttributeLocations:function(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}},getUniformLocations:function(){return{}},sendAttributeData:function(t,e,n){var i=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(i),t.vertexAttribPointer(i,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)},_setupFrameBuffer:function(t){var e,n,i=t.context;t.passes>1?(n=t.destinationHeight,t.sourceWidth===(e=t.destinationWidth)&&t.sourceHeight===n||(i.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(i,e,n)),i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,t.targetTexture,0)):(i.bindFramebuffer(i.FRAMEBUFFER,null),i.finish())},_swapTextures:function(t){t.passes--,t.pass++;var e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e},isNeutralState:function(){var t=this.mainParameter,e=v.Image.filters[this.type].prototype;if(t){if(Array.isArray(e[t])){for(var n=e[t].length;n--;)if(this[t][n]!==e[t][n])return!1;return!0}return e[t]===this[t]}return!1},applyTo:function(t){t.webgl?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},retrieveShader:function(t){return t.programCache.hasOwnProperty(this.type)||(t.programCache[this.type]=this.createProgram(t.context)),t.programCache[this.type]},applyToWebGL:function(t){var e=t.context,n=this.retrieveShader(t);e.bindTexture(e.TEXTURE_2D,0===t.pass&&t.originalTexture?t.originalTexture:t.sourceTexture),e.useProgram(n.program),this.sendAttributeData(e,n.attributeLocations,t.aPosition),e.uniform1f(n.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(n.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,n.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)},bindAdditionalTexture:function(t,e,n){t.activeTexture(n),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)},unbindAdditionalTexture:function(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)},getMainParameter:function(){return this[this.mainParameter]},setMainParameter:function(t){this[this.mainParameter]=t},sendUniformData:function(){},createHelpLayer:function(t){if(!t.helpLayer){var e=document.createElement("canvas");e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}},toObject:function(){var t={type:this.type},e=this.mainParameter;return e&&(t[e]=this[e]),t},toJSON:function(){return this.toObject()}}),v.Image.filters.BaseFilter.fromObject=function(t,e){var n=new v.Image.filters[t.type](t);return e&&e(n),n},function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.ColorMatrix=(0,e.util.createClass)(n.BaseFilter,{type:"ColorMatrix",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nuniform mat4 uColorMatrix;\nuniform vec4 uConstants;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor *= uColorMatrix;\ncolor += uConstants;\ngl_FragColor = color;\n}",matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],mainParameter:"matrix",colorsOnly:!0,initialize:function(t){this.callSuper("initialize",t),this.matrix=this.matrix.slice(0)},applyTo2d:function(t){var e,n,i,r,s,o=t.imageData.data,a=o.length,l=this.matrix,c=this.colorsOnly;for(s=0;s<a;s+=4)e=o[s],n=o[s+1],i=o[s+2],c?(o[s]=e*l[0]+n*l[1]+i*l[2]+255*l[4],o[s+1]=e*l[5]+n*l[6]+i*l[7]+255*l[9],o[s+2]=e*l[10]+n*l[11]+i*l[12]+255*l[14]):(o[s]=e*l[0]+n*l[1]+i*l[2]+(r=o[s+3])*l[3]+255*l[4],o[s+1]=e*l[5]+n*l[6]+i*l[7]+r*l[8]+255*l[9],o[s+2]=e*l[10]+n*l[11]+i*l[12]+r*l[13]+255*l[14],o[s+3]=e*l[15]+n*l[16]+i*l[17]+r*l[18]+255*l[19])},getUniformLocations:function(t,e){return{uColorMatrix:t.getUniformLocation(e,"uColorMatrix"),uConstants:t.getUniformLocation(e,"uConstants")}},sendUniformData:function(t,e){var n=this.matrix,i=[n[4],n[9],n[14],n[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,[n[0],n[1],n[2],n[3],n[5],n[6],n[7],n[8],n[10],n[11],n[12],n[13],n[15],n[16],n[17],n[18]]),t.uniform4fv(e.uConstants,i)}}),e.Image.filters.ColorMatrix.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Brightness=(0,e.util.createClass)(n.BaseFilter,{type:"Brightness",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBrightness;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += uBrightness;\ngl_FragColor = color;\n}",brightness:0,mainParameter:"brightness",applyTo2d:function(t){if(0!==this.brightness){var e,n=t.imageData.data,i=n.length,r=Math.round(255*this.brightness);for(e=0;e<i;e+=4)n[e]=n[e]+r,n[e+1]=n[e+1]+r,n[e+2]=n[e+2]+r}},getUniformLocations:function(t,e){return{uBrightness:t.getUniformLocation(e,"uBrightness")}},sendUniformData:function(t,e){t.uniform1f(e.uBrightness,this.brightness)}}),e.Image.filters.Brightness.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters;i.Convolute=(0,e.util.createClass)(i.BaseFilter,{type:"Convolute",opaque:!1,matrix:[0,0,0,0,1,0,0,0,0],fragmentSource:{Convolute_3_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_3_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[9];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 3.0; h+=1.0) {\nfor (float w = 0.0; w < 3.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_5_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_5_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[25];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 5.0; h+=1.0) {\nfor (float w = 0.0; w < 5.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_7_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_7_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[49];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 7.0; h+=1.0) {\nfor (float w = 0.0; w < 7.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}",Convolute_9_1:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 0);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];\n}\n}\ngl_FragColor = color;\n}",Convolute_9_0:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uMatrix[81];\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = vec4(0, 0, 0, 1);\nfor (float h = 0.0; h < 9.0; h+=1.0) {\nfor (float w = 0.0; w < 9.0; w+=1.0) {\nvec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));\ncolor.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];\n}\n}\nfloat alpha = texture2D(uTexture, vTexCoord).a;\ngl_FragColor = color;\ngl_FragColor.a = alpha;\n}"},retrieveShader:function(t){var e=Math.sqrt(this.matrix.length),n=this.type+"_"+e+"_"+(this.opaque?1:0),i=this.fragmentSource[n];return t.programCache.hasOwnProperty(n)||(t.programCache[n]=this.createProgram(t.context,i)),t.programCache[n]},applyTo2d:function(t){var e,n,i,r,s,o,a,l,c,h,u,d,f,p=t.imageData,g=p.data,m=this.matrix,v=Math.round(Math.sqrt(m.length)),y=Math.floor(v/2),_=p.width,b=p.height,w=t.ctx.createImageData(_,b),C=w.data,x=this.opaque?1:0;for(u=0;u<b;u++)for(h=0;h<_;h++){for(s=4*(u*_+h),e=0,n=0,i=0,r=0,f=0;f<v;f++)for(d=0;d<v;d++)o=h+d-y,(a=u+f-y)<0||a>=b||o<0||o>=_||(e+=g[l=4*(a*_+o)]*(c=m[f*v+d]),n+=g[l+1]*c,i+=g[l+2]*c,x||(r+=g[l+3]*c));C[s]=e,C[s+1]=n,C[s+2]=i,C[s+3]=x?g[s+3]:r}t.imageData=w},getUniformLocations:function(t,e){return{uMatrix:t.getUniformLocation(e,"uMatrix"),uOpaque:t.getUniformLocation(e,"uOpaque"),uHalfSize:t.getUniformLocation(e,"uHalfSize"),uSize:t.getUniformLocation(e,"uSize")}},sendUniformData:function(t,e){t.uniform1fv(e.uMatrix,this.matrix)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Grayscale=(0,e.util.createClass)(n.BaseFilter,{type:"Grayscale",fragmentSource:{average:"precision highp float;\nuniform sampler2D uTexture;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat average = (color.r + color.b + color.g) / 3.0;\ngl_FragColor = vec4(average, average, average, color.a);\n}",lightness:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;\ngl_FragColor = vec4(average, average, average, col.a);\n}",luminosity:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uMode;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 col = texture2D(uTexture, vTexCoord);\nfloat average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;\ngl_FragColor = vec4(average, average, average, col.a);\n}"},mode:"average",mainParameter:"mode",applyTo2d:function(t){var e,n,i=t.imageData.data,r=i.length,s=this.mode;for(e=0;e<r;e+=4)"average"===s?n=(i[e]+i[e+1]+i[e+2])/3:"lightness"===s?n=(Math.min(i[e],i[e+1],i[e+2])+Math.max(i[e],i[e+1],i[e+2]))/2:"luminosity"===s&&(n=.21*i[e]+.72*i[e+1]+.07*i[e+2]),i[e]=n,i[e+1]=n,i[e+2]=n},retrieveShader:function(t){var e=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,this.fragmentSource[this.mode])),t.programCache[e]},getUniformLocations:function(t,e){return{uMode:t.getUniformLocation(e,"uMode")}},sendUniformData:function(t,e){t.uniform1i(e.uMode,1)},isNeutralState:function(){return!1}}),e.Image.filters.Grayscale.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Invert=(0,e.util.createClass)(n.BaseFilter,{type:"Invert",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform int uInvert;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nif (uInvert == 1) {\ngl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);\n} else {\ngl_FragColor = color;\n}\n}",invert:!0,mainParameter:"invert",applyTo2d:function(t){var e,n=t.imageData.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},isNeutralState:function(){return!this.invert},getUniformLocations:function(t,e){return{uInvert:t.getUniformLocation(e,"uInvert")}},sendUniformData:function(t,e){t.uniform1i(e.uInvert,this.invert)}}),e.Image.filters.Invert.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters;i.Noise=(0,e.util.createClass)(i.BaseFilter,{type:"Noise",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uStepH;\nuniform float uNoise;\nuniform float uSeed;\nvarying vec2 vTexCoord;\nfloat rand(vec2 co, float seed, float vScale) {\nreturn fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);\n}\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ncolor.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;\ngl_FragColor = color;\n}",mainParameter:"noise",noise:0,applyTo2d:function(t){if(0!==this.noise){var e,n,i,r=t.imageData.data,s=this.noise;for(e=0,n=r.length;e<n;e+=4)i=(.5-Math.random())*s,r[e]+=i,r[e+1]+=i,r[e+2]+=i}},getUniformLocations:function(t,e){return{uNoise:t.getUniformLocation(e,"uNoise"),uSeed:t.getUniformLocation(e,"uSeed")}},sendUniformData:function(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Pixelate=(0,e.util.createClass)(n.BaseFilter,{type:"Pixelate",blocksize:4,mainParameter:"blocksize",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uBlocksize;\nuniform float uStepW;\nuniform float uStepH;\nvarying vec2 vTexCoord;\nvoid main() {\nfloat blockW = uBlocksize * uStepW;\nfloat blockH = uBlocksize * uStepW;\nint posX = int(vTexCoord.x / blockW);\nint posY = int(vTexCoord.y / blockH);\nfloat fposX = float(posX);\nfloat fposY = float(posY);\nvec2 squareCoords = vec2(fposX * blockW, fposY * blockH);\nvec4 color = texture2D(uTexture, squareCoords);\ngl_FragColor = color;\n}",applyTo2d:function(t){var e,n,i,r,s,o,a,l,c,h,u,d=t.imageData,f=d.data,p=d.height,g=d.width;for(n=0;n<p;n+=this.blocksize)for(i=0;i<g;i+=this.blocksize)for(r=f[e=4*n*g+4*i],s=f[e+1],o=f[e+2],a=f[e+3],h=Math.min(n+this.blocksize,p),u=Math.min(i+this.blocksize,g),l=n;l<h;l++)for(c=i;c<u;c++)f[e=4*l*g+4*c]=r,f[e+1]=s,f[e+2]=o,f[e+3]=a},isNeutralState:function(){return 1===this.blocksize},getUniformLocations:function(t,e){return{uBlocksize:t.getUniformLocation(e,"uBlocksize"),uStepW:t.getUniformLocation(e,"uStepW"),uStepH:t.getUniformLocation(e,"uStepH")}},sendUniformData:function(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}),e.Image.filters.Pixelate.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.Image.filters;i.RemoveColor=(0,e.util.createClass)(i.BaseFilter,{type:"RemoveColor",color:"#FFFFFF",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uLow;\nuniform vec4 uHigh;\nvarying vec2 vTexCoord;\nvoid main() {\ngl_FragColor = texture2D(uTexture, vTexCoord);\nif(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {\ngl_FragColor.a = 0.0;\n}\n}",distance:.02,useAlpha:!1,applyTo2d:function(t){var n,i,r,s,o=t.imageData.data,a=255*this.distance,l=new e.Color(this.color).getSource(),c=[l[0]-a,l[1]-a,l[2]-a],h=[l[0]+a,l[1]+a,l[2]+a];for(n=0;n<o.length;n+=4)r=o[n+1],s=o[n+2],(i=o[n])>c[0]&&r>c[1]&&s>c[2]&&i<h[0]&&r<h[1]&&s<h[2]&&(o[n+3]=0)},getUniformLocations:function(t,e){return{uLow:t.getUniformLocation(e,"uLow"),uHigh:t.getUniformLocation(e,"uHigh")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource(),r=parseFloat(this.distance),s=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(n.uLow,[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1]),t.uniform4fv(n.uHigh,s)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,distance:this.distance})}}),e.Image.filters.RemoveColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters,i=e.util.createClass,r={Brownie:[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0],Vintage:[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0],Kodachrome:[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0],Technicolor:[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0],Polaroid:[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],Sepia:[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0],BlackWhite:[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]};for(var s in r)n[s]=i(n.ColorMatrix,{type:s,matrix:r[s],mainParameter:!1,colorsOnly:!0}),e.Image.filters[s].fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters;n.BlendColor=(0,e.util.createClass)(n.BaseFilter,{type:"BlendColor",color:"#F95C63",mode:"multiply",alpha:1,fragmentSource:{multiply:"gl_FragColor.rgb *= uColor.rgb;\n",screen:"gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);\n",add:"gl_FragColor.rgb += uColor.rgb;\n",diff:"gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);\n",subtract:"gl_FragColor.rgb -= uColor.rgb;\n",lighten:"gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);\n",darken:"gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);\n",exclusion:"gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);\n",overlay:"if (uColor.r < 0.5) {\ngl_FragColor.r *= 2.0 * uColor.r;\n} else {\ngl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);\n}\nif (uColor.g < 0.5) {\ngl_FragColor.g *= 2.0 * uColor.g;\n} else {\ngl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);\n}\nif (uColor.b < 0.5) {\ngl_FragColor.b *= 2.0 * uColor.b;\n} else {\ngl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);\n}\n",tint:"gl_FragColor.rgb *= (1.0 - uColor.a);\ngl_FragColor.rgb += uColor.rgb;\n"},buildSource:function(t){return"precision highp float;\nuniform sampler2D uTexture;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\ngl_FragColor = color;\nif (color.a > 0.0) {\n"+this.fragmentSource[t]+"}\n}"},retrieveShader:function(t){var e,n=this.type+"_"+this.mode;return t.programCache.hasOwnProperty(n)||(e=this.buildSource(this.mode),t.programCache[n]=this.createProgram(t.context,e)),t.programCache[n]},applyTo2d:function(t){var n,i,r,s,o,a,l,c=t.imageData.data,h=c.length,u=1-this.alpha;n=(l=new e.Color(this.color).getSource())[0]*this.alpha,i=l[1]*this.alpha,r=l[2]*this.alpha;for(var d=0;d<h;d+=4)switch(s=c[d],o=c[d+1],a=c[d+2],this.mode){case"multiply":c[d]=s*n/255,c[d+1]=o*i/255,c[d+2]=a*r/255;break;case"screen":c[d]=255-(255-s)*(255-n)/255,c[d+1]=255-(255-o)*(255-i)/255,c[d+2]=255-(255-a)*(255-r)/255;break;case"add":c[d]=s+n,c[d+1]=o+i,c[d+2]=a+r;break;case"diff":case"difference":c[d]=Math.abs(s-n),c[d+1]=Math.abs(o-i),c[d+2]=Math.abs(a-r);break;case"subtract":c[d]=s-n,c[d+1]=o-i,c[d+2]=a-r;break;case"darken":c[d]=Math.min(s,n),c[d+1]=Math.min(o,i),c[d+2]=Math.min(a,r);break;case"lighten":c[d]=Math.max(s,n),c[d+1]=Math.max(o,i),c[d+2]=Math.max(a,r);break;case"overlay":c[d]=n<128?2*s*n/255:255-2*(255-s)*(255-n)/255,c[d+1]=i<128?2*o*i/255:255-2*(255-o)*(255-i)/255,c[d+2]=r<128?2*a*r/255:255-2*(255-a)*(255-r)/255;break;case"exclusion":c[d]=n+s-2*n*s/255,c[d+1]=i+o-2*i*o/255,c[d+2]=r+a-2*r*a/255;break;case"tint":c[d]=n+s*u,c[d+1]=i+o*u,c[d+2]=r+a*u}},getUniformLocations:function(t,e){return{uColor:t.getUniformLocation(e,"uColor")}},sendUniformData:function(t,n){var i=new e.Color(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(n.uColor,i)},toObject:function(){return{type:this.type,color:this.color,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendColor.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric,n=e.Image.filters;n.BlendImage=(0,e.util.createClass)(n.BaseFilter,{type:"BlendImage",image:null,mode:"multiply",alpha:1,vertexSource:"attribute vec2 aPosition;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nuniform mat3 uTransformMatrix;\nvoid main() {\nvTexCoord = aPosition;\nvTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;\ngl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);\n}",fragmentSource:{multiply:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.rgba *= color2.rgba;\ngl_FragColor = color;\n}",mask:"precision highp float;\nuniform sampler2D uTexture;\nuniform sampler2D uImage;\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nvarying vec2 vTexCoord2;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec4 color2 = texture2D(uImage, vTexCoord2);\ncolor.a = color2.a;\ngl_FragColor = color;\n}"},retrieveShader:function(t){var e=this.type+"_"+this.mode,n=this.fragmentSource[this.mode];return t.programCache.hasOwnProperty(e)||(t.programCache[e]=this.createProgram(t.context,n)),t.programCache[e]},applyToWebGL:function(t){var e=t.context,n=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,n,e.TEXTURE1),this.callSuper("applyToWebGL",t),this.unbindAdditionalTexture(e,e.TEXTURE1)},createTexture:function(t,e){return t.getCachedTexture(e.cacheKey,e._element)},calculateMatrix:function(){var t=this.image;return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/t._element.width,-t.top/t._element.height,1]},applyTo2d:function(t){var n,i,r,s,o,a,l,c,h,u,d,f=t.imageData,p=t.filterBackend.resources,g=f.data,m=g.length,v=f.width,y=f.height,_=this.image;p.blendImage||(p.blendImage=e.util.createCanvasElement()),u=(h=p.blendImage).getContext("2d"),h.width!==v||h.height!==y?(h.width=v,h.height=y):u.clearRect(0,0,v,y),u.setTransform(_.scaleX,0,0,_.scaleY,_.left,_.top),u.drawImage(_._element,0,0,v,y),d=u.getImageData(0,0,v,y).data;for(var b=0;b<m;b+=4)switch(o=g[b],a=g[b+1],l=g[b+2],c=g[b+3],n=d[b],i=d[b+1],r=d[b+2],s=d[b+3],this.mode){case"multiply":g[b]=o*n/255,g[b+1]=a*i/255,g[b+2]=l*r/255,g[b+3]=c*s/255;break;case"mask":g[b+3]=s}},getUniformLocations:function(t,e){return{uTransformMatrix:t.getUniformLocation(e,"uTransformMatrix"),uImage:t.getUniformLocation(e,"uImage")}},sendUniformData:function(t,e){var n=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,n)},toObject:function(){return{type:this.type,image:this.image&&this.image.toObject(),mode:this.mode,alpha:this.alpha}}}),e.Image.filters.BlendImage.fromObject=function(t,n){e.Image.fromObject(t.image,function(i){var r=e.util.object.clone(t);r.image=i,n(new e.Image.filters.BlendImage(r))})}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,s=Math.abs,o=Math.round,a=Math.sin,l=Math.ceil,c=e.Image.filters;c.Resize=(0,e.util.createClass)(c.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3,getUniformLocations:function(t,e){return{uDelta:t.getUniformLocation(e,"uDelta"),uTaps:t.getUniformLocation(e,"uTaps")}},sendUniformData:function(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)},retrieveShader:function(t){var e=this.getFilterWindow(),n=this.type+"_"+e;if(!t.programCache.hasOwnProperty(n)){var i=this.generateShader(e);t.programCache[n]=this.createProgram(t.context,i)}return t.programCache[n]},getFilterWindow:function(){return Math.ceil(this.lanczosLobes/this.tempScale)},getTaps:function(){for(var t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,n=this.getFilterWindow(),i=new Array(n),r=1;r<=n;r++)i[r-1]=t(r*e);return i},generateShader:function(t){for(var e=new Array(t),n=this.fragmentSourceTOP,i=1;i<=t;i++)e[i-1]=i+".0 * uDelta";return n+="uniform float uTaps["+t+"];\n",n+="void main() {\n",n+="  vec4 color = texture2D(uTexture, vTexCoord);\n",n+="  float sum = 1.0;\n",e.forEach(function(t,e){n+="  color += texture2D(uTexture, vTexCoord + "+t+") * uTaps["+e+"];\n",n+="  color += texture2D(uTexture, vTexCoord - "+t+") * uTaps["+e+"];\n",n+="  sum += 2.0 * uTaps["+e+"];\n"}),n+="  gl_FragColor = color / sum;\n",n+="}"},fragmentSourceTOP:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\n",applyTo:function(t){t.webgl?(t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t),t.sourceHeight=t.destinationHeight):this.applyTo2d(t)},isNeutralState:function(){return 1===this.scaleX&&1===this.scaleY},lanczosCreate:function(t){return function(e){if(e>=t||e<=-t)return 0;if(e<1.1920929e-7&&e>-1.1920929e-7)return 1;var n=(e*=Math.PI)/t;return a(e)/e*a(n)/n}},applyTo2d:function(t){var e=t.imageData,n=this.scaleX,i=this.scaleY;this.rcpScaleX=1/n,this.rcpScaleY=1/i;var r,s=e.width,a=e.height,l=o(s*n),c=o(a*i);"sliceHack"===this.resizeType?r=this.sliceByTwo(t,s,a,l,c):"hermite"===this.resizeType?r=this.hermiteFastResize(t,s,a,l,c):"bilinear"===this.resizeType?r=this.bilinearFiltering(t,s,a,l,c):"lanczos"===this.resizeType&&(r=this.lanczosResize(t,s,a,l,c)),t.imageData=r},sliceByTwo:function(t,n,r,s,o){var a,l,c=t.imageData,h=.5,u=!1,d=!1,f=n*h,p=r*h,g=e.filterBackend.resources,m=0,v=0,y=n,_=0;for(g.sliceByTwo||(g.sliceByTwo=document.createElement("canvas")),((a=g.sliceByTwo).width<1.5*n||a.height<r)&&(a.width=1.5*n,a.height=r),(l=a.getContext("2d")).clearRect(0,0,1.5*n,r),l.putImageData(c,0,0),s=i(s),o=i(o);!u||!d;)n=f,r=p,s<i(f*h)?f=i(f*h):(f=s,u=!0),o<i(p*h)?p=i(p*h):(p=o,d=!0),l.drawImage(a,m,v,n,r,y,_,f,p),m=y,v=_,_+=p;return l.getImageData(m,v,s,o)},lanczosResize:function(t,e,o,a,c){var h=t.imageData.data,u=t.ctx.createImageData(a,c),d=u.data,f=this.lanczosCreate(this.lanczosLobes),p=this.rcpScaleX,g=this.rcpScaleY,m=2/this.rcpScaleX,v=2/this.rcpScaleY,y=l(p*this.lanczosLobes/2),_=l(g*this.lanczosLobes/2),b={},w={},C={};return function t(l){var x,S,k,T,E,O,P,A,M,I,D;for(w.x=(l+.5)*p,C.x=i(w.x),x=0;x<c;x++){for(w.y=(x+.5)*g,C.y=i(w.y),E=0,O=0,P=0,A=0,M=0,S=C.x-y;S<=C.x+y;S++)if(!(S<0||S>=e)){I=i(1e3*s(S-w.x)),b[I]||(b[I]={});for(var R=C.y-_;R<=C.y+_;R++)R<0||R>=o||(D=i(1e3*s(R-w.y)),b[I][D]||(b[I][D]=f(r(n(I*m,2)+n(D*v,2))/1e3)),(k=b[I][D])>0&&(E+=k,O+=k*h[T=4*(R*e+S)],P+=k*h[T+1],A+=k*h[T+2],M+=k*h[T+3]))}d[T=4*(x*a+l)]=O/E,d[T+1]=P/E,d[T+2]=A/E,d[T+3]=M/E}return++l<a?t(l):u}(0)},bilinearFiltering:function(t,e,n,r,s){var o,a,l,c,h,u,d,f,p=0,g=this.rcpScaleX,m=this.rcpScaleY,v=4*(e-1),y=t.imageData.data,_=t.ctx.createImageData(r,s),b=_.data;for(l=0;l<s;l++)for(c=0;c<r;c++)for(h=g*c-(o=i(g*c)),u=m*l-(a=i(m*l)),f=4*(a*e+o),d=0;d<4;d++)b[p++]=y[f+d]*(1-h)*(1-u)+y[f+4+d]*h*(1-u)+y[f+v+d]*u*(1-h)+y[f+v+4+d]*h*u;return _},hermiteFastResize:function(t,e,n,o,a){for(var c=this.rcpScaleX,h=this.rcpScaleY,u=l(c/2),d=l(h/2),f=t.imageData.data,p=t.ctx.createImageData(o,a),g=p.data,m=0;m<a;m++)for(var v=0;v<o;v++){for(var y=4*(v+m*o),_=0,b=0,w=0,C=0,x=0,S=0,k=0,T=(m+.5)*h,E=i(m*h);E<(m+1)*h;E++)for(var O=s(T-(E+.5))/d,P=(v+.5)*c,A=O*O,M=i(v*c);M<(v+1)*c;M++){var I=s(P-(M+.5))/u,D=r(A+I*I);D>1&&D<-1||(_=2*D*D*D-3*D*D+1)>0&&(k+=_*f[3+(I=4*(M+E*e))],w+=_,f[I+3]<255&&(_=_*f[I+3]/250),C+=_*f[I],x+=_*f[I+1],S+=_*f[I+2],b+=_)}g[y]=C/b,g[y+1]=x/b,g[y+2]=S/b,g[y+3]=k/w}return p},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Contrast=(0,e.util.createClass)(n.BaseFilter,{type:"Contrast",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uContrast;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));\ncolor.rgb = contrastF * (color.rgb - 0.5) + 0.5;\ngl_FragColor = color;\n}",contrast:0,mainParameter:"contrast",applyTo2d:function(t){if(0!==this.contrast){var e,n=t.imageData.data,i=n.length,r=Math.floor(255*this.contrast),s=259*(r+255)/(255*(259-r));for(e=0;e<i;e+=4)n[e]=s*(n[e]-128)+128,n[e+1]=s*(n[e+1]-128)+128,n[e+2]=s*(n[e+2]-128)+128}},getUniformLocations:function(t,e){return{uContrast:t.getUniformLocation(e,"uContrast")}},sendUniformData:function(t,e){t.uniform1f(e.uContrast,this.contrast)}}),e.Image.filters.Contrast.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Saturation=(0,e.util.createClass)(n.BaseFilter,{type:"Saturation",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform float uSaturation;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nfloat rgMax = max(color.r, color.g);\nfloat rgbMax = max(rgMax, color.b);\ncolor.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;\ncolor.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;\ncolor.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;\ngl_FragColor = color;\n}",saturation:0,mainParameter:"saturation",applyTo2d:function(t){if(0!==this.saturation){var e,n,i=t.imageData.data,r=i.length,s=-this.saturation;for(e=0;e<r;e+=4)n=Math.max(i[e],i[e+1],i[e+2]),i[e]+=n!==i[e]?(n-i[e])*s:0,i[e+1]+=n!==i[e+1]?(n-i[e+1])*s:0,i[e+2]+=n!==i[e+2]?(n-i[e+2])*s:0}},getUniformLocations:function(t,e){return{uSaturation:t.getUniformLocation(e,"uSaturation")}},sendUniformData:function(t,e){t.uniform1f(e.uSaturation,-this.saturation)}}),e.Image.filters.Saturation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Blur=(0,e.util.createClass)(n.BaseFilter,{type:"Blur",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec2 uDelta;\nvarying vec2 vTexCoord;\nconst float nSamples = 15.0;\nvec3 v3offset = vec3(12.9898, 78.233, 151.7182);\nfloat random(vec3 scale) {\nreturn fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);\n}\nvoid main() {\nvec4 color = vec4(0.0);\nfloat total = 0.0;\nfloat offset = random(v3offset);\nfor (float t = -nSamples; t <= nSamples; t++) {\nfloat percent = (t + offset - 0.5) / nSamples;\nfloat weight = 1.0 - abs(percent);\ncolor += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;\ntotal += weight;\n}\ngl_FragColor = color / total;\n}",blur:0,mainParameter:"blur",applyTo:function(t){t.webgl?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)},applyTo2d:function(t){t.imageData=this.simpleBlur(t)},simpleBlur:function(t){var n,i,r=t.filterBackend.resources,s=t.imageData.width,o=t.imageData.height;r.blurLayer1||(r.blurLayer1=e.util.createCanvasElement(),r.blurLayer2=e.util.createCanvasElement()),i=r.blurLayer2,(n=r.blurLayer1).width===s&&n.height===o||(i.width=n.width=s,i.height=n.height=o);var a,l,c,h,u=n.getContext("2d"),d=i.getContext("2d"),f=.06*this.blur*.5;for(u.putImageData(t.imageData,0,0),d.clearRect(0,0,s,o),h=-15;h<=15;h++)c=f*(l=h/15)*s+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,c,a),u.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);for(h=-15;h<=15;h++)c=f*(l=h/15)*o+(a=(Math.random()-.5)/4),d.globalAlpha=1-Math.abs(l),d.drawImage(n,a,c),u.drawImage(i,0,0),d.globalAlpha=1,d.clearRect(0,0,i.width,i.height);t.ctx.drawImage(n,0,0);var p=t.ctx.getImageData(0,0,n.width,n.height);return u.globalAlpha=1,u.clearRect(0,0,n.width,n.height),p},getUniformLocations:function(t,e){return{delta:t.getUniformLocation(e,"uDelta")}},sendUniformData:function(t,e){var n=this.chooseRightDelta();t.uniform2fv(e.delta,n)},chooseRightDelta:function(){var t,e=1,n=[0,0];return this.horizontal?this.aspectRatio>1&&(e=1/this.aspectRatio):this.aspectRatio<1&&(e=this.aspectRatio),t=e*this.blur*.12,this.horizontal?n[0]=t:n[1]=t,n}}),n.Blur.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Gamma=(0,e.util.createClass)(n.BaseFilter,{type:"Gamma",fragmentSource:"precision highp float;\nuniform sampler2D uTexture;\nuniform vec3 uGamma;\nvarying vec2 vTexCoord;\nvoid main() {\nvec4 color = texture2D(uTexture, vTexCoord);\nvec3 correction = (1.0 / uGamma);\ncolor.r = pow(color.r, correction.r);\ncolor.g = pow(color.g, correction.g);\ncolor.b = pow(color.b, correction.b);\ngl_FragColor = color;\ngl_FragColor.rgb *= color.a;\n}",gamma:[1,1,1],mainParameter:"gamma",initialize:function(t){this.gamma=[1,1,1],n.BaseFilter.prototype.initialize.call(this,t)},applyTo2d:function(t){var e,n=t.imageData.data,i=this.gamma,r=n.length,s=1/i[0],o=1/i[1],a=1/i[2];for(this.rVals||(this.rVals=new Uint8Array(256),this.gVals=new Uint8Array(256),this.bVals=new Uint8Array(256)),e=0,r=256;e<r;e++)this.rVals[e]=255*Math.pow(e/255,s),this.gVals[e]=255*Math.pow(e/255,o),this.bVals[e]=255*Math.pow(e/255,a);for(e=0,r=n.length;e<r;e+=4)n[e]=this.rVals[n[e]],n[e+1]=this.gVals[n[e+1]],n[e+2]=this.bVals[n[e+2]]},getUniformLocations:function(t,e){return{uGamma:t.getUniformLocation(e,"uGamma")}},sendUniformData:function(t,e){t.uniform3fv(e.uGamma,this.gamma)}}),e.Image.filters.Gamma.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.Composed=(0,e.util.createClass)(n.BaseFilter,{type:"Composed",subFilters:[],initialize:function(t){this.callSuper("initialize",t),this.subFilters=this.subFilters.slice(0)},applyTo:function(t){t.passes+=this.subFilters.length-1,this.subFilters.forEach(function(e){e.applyTo(t)})},toObject:function(){return e.util.object.extend(this.callSuper("toObject"),{subFilters:this.subFilters.map(function(t){return t.toObject()})})},isNeutralState:function(){return!this.subFilters.some(function(t){return!t.isNeutralState()})}}),e.Image.filters.Composed.fromObject=function(t,n){var i=(t.subFilters||[]).map(function(t){return new e.Image.filters[t.type](t)}),r=new e.Image.filters.Composed({subFilters:i});return n&&n(r),r}}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.Image.filters;n.HueRotation=(0,e.util.createClass)(n.ColorMatrix,{type:"HueRotation",rotation:0,mainParameter:"rotation",calculateMatrix:function(){var t=this.rotation*Math.PI,n=e.util.cos(t),i=e.util.sin(t),r=1/3,s=Math.sqrt(r)*i,o=1-n;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=n+o/3,this.matrix[1]=r*o-s,this.matrix[2]=r*o+s,this.matrix[5]=r*o+s,this.matrix[6]=n+r*o,this.matrix[7]=r*o-s,this.matrix[10]=r*o-s,this.matrix[11]=r*o+s,this.matrix[12]=n+r*o},isNeutralState:function(t){return this.calculateMatrix(),n.BaseFilter.prototype.isNeutralState.call(this,t)},applyTo:function(t){this.calculateMatrix(),n.BaseFilter.prototype.applyTo.call(this,t)}}),e.Image.filters.HueRotation.fromObject=e.Image.filters.BaseFilter.fromObject}(e),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.clone;if(e.Text)e.warn("fabric.Text is already defined");else{var i="fontFamily fontWeight fontSize text underline overline linethrough textAlign fontStyle lineHeight textBackgroundColor charSpacing styles path".split(" ");e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:["fontSize","fontWeight","fontFamily","fontStyle","lineHeight","text","charSpacing","textAlign","styles","path"],_reNewline:/\r?\n/,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:"left",fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stateProperties:e.Object.prototype.stateProperties.concat(i),cacheProperties:e.Object.prototype.cacheProperties.concat(i),stroke:null,shadow:null,path:null,_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,styles:null,_measuringContext:null,deltaY:0,direction:"ltr",_styleProperties:["stroke","strokeWidth","fill","fontFamily","fontSize","fontWeight","fontStyle","underline","overline","linethrough","deltaY","textBackgroundColor"],__charBounds:[],CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2,initialize:function(t,e){this.styles=e&&e.styles||{},this.text=t,this.__skipDimension=!0,this.callSuper("initialize",e),this.path&&this.setPathInfo(),this.__skipDimension=!1,this.initDimensions(),this.setCoords(),this.setupState({propertySet:"_dimensionAffectingProps"})},setPathInfo:function(){var t=this.path;t&&(t.segmentsInfo=e.util.getPathSegmentsInfo(t.path))},getMeasuringContext:function(){return e._measuringContext||(e._measuringContext=this.canvas&&this.canvas.contextCache||e.util.createCanvasElement().getContext("2d")),e._measuringContext},_splitText:function(){var t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t},initDimensions:function(){this.__skipDimension||(this._splitText(),this._clearCache(),this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.saveState({propertySet:"_dimensionAffectingProps"}))},enlargeSpaces:function(){for(var t,e,n,i,r,s,o=0,a=this._textLines.length;o<a;o++)if(("justify"===this.textAlign||o!==a-1&&!this.isEndOfWrapping(o))&&(n=0,i=this._textLines[o],(e=this.getLineWidth(o))<this.width&&(s=this.textLines[o].match(this._reSpacesAndTabs)))){t=(this.width-e)/s.length;for(var l=0,c=i.length;l<=c;l++)r=this.__charBounds[o][l],this._reSpaceAndTab.test(i[l])?(r.width+=t,r.kernedWidth+=t,r.left+=n,n+=t):r.left+=n}},isEndOfWrapping:function(t){return t===this._textLines.length-1},missingNewlineOffset:function(){return 1},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_getCacheCanvasDimensions:function(){var t=this.callSuper("_getCacheCanvasDimensions"),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t},_render:function(t){this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")},_renderText:function(t){"stroke"===this.paintFirst?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))},_setTextStyles:function(t,e,n){t.textBaseline="alphabetic",t.font=this._getFontDeclaration(e,n)},calcTextWidth:function(){for(var t=this.getLineWidth(0),e=1,n=this._textLines.length;e<n;e++){var i=this.getLineWidth(e);i>t&&(t=i)}return t},_renderTextLine:function(t,e,n,i,r,s){this._renderChars(t,e,n,i,r,s)},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styleHas("textBackgroundColor")){for(var e,n,i,r,s,o,a,l=t.fillStyle,c=this._getLeftOffset(),h=this._getTopOffset(),u=0,d=0,f=this.path,p=0,g=this._textLines.length;p<g;p++)if(e=this.getHeightOfLine(p),this.textBackgroundColor||this.styleHas("textBackgroundColor",p)){i=this._textLines[p],n=this._getLineLeftOffset(p),d=0,u=0,r=this.getValueOfPropertyAt(p,0,"textBackgroundColor");for(var m=0,v=i.length;m<v;m++)s=this.__charBounds[p][m],o=this.getValueOfPropertyAt(p,m,"textBackgroundColor"),f?(t.save(),t.translate(s.renderLeft,s.renderTop),t.rotate(s.angle),t.fillStyle=o,o&&t.fillRect(-s.width/2,-e/this.lineHeight*(1-this._fontSizeFraction),s.width,e/this.lineHeight),t.restore()):o!==r?(a=c+n+u,"rtl"===this.direction&&(a=this.width-a-d),t.fillStyle=r,r&&t.fillRect(a,h,d,e/this.lineHeight),u=s.left,d=s.width,r=o):d+=s.kernedWidth;o&&!f&&(a=c+n+u,"rtl"===this.direction&&(a=this.width-a-d),t.fillStyle=o,t.fillRect(a,h,d,e/this.lineHeight)),h+=e}else h+=e;t.fillStyle=l,this._removeShadow(t)}},getFontCache:function(t){var n=t.fontFamily.toLowerCase();e.charWidthsCache[n]||(e.charWidthsCache[n]={});var i=e.charWidthsCache[n],r=t.fontStyle.toLowerCase()+"_"+(t.fontWeight+"").toLowerCase();return i[r]||(i[r]={}),i[r]},_measureChar:function(t,e,n,i){var r,s,o,a,l=this.getFontCache(e),c=n+t,h=this._getFontDeclaration(e)===this._getFontDeclaration(i),u=e.fontSize/this.CACHE_FONT_SIZE;if(n&&void 0!==l[n]&&(o=l[n]),void 0!==l[t]&&(a=r=l[t]),h&&void 0!==l[c]&&(a=(s=l[c])-o),void 0===r||void 0===o||void 0===s){var d=this.getMeasuringContext();this._setTextStyles(d,e,!0)}return void 0===r&&(a=r=d.measureText(t).width,l[t]=r),void 0===o&&h&&n&&(o=d.measureText(n).width,l[n]=o),h&&void 0===s&&(s=d.measureText(c).width,l[c]=s,a=s-o),{width:r*u,kernedWidth:a*u}},getHeightOfChar:function(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")},measureLine:function(t){var e=this._measureLine(t);return 0!==this.charSpacing&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e},_measureLine:function(t){var n,i,r,s,o,a,l=0,c=this._textLines[t],h=new Array(c.length),u=0,d=this.path;for(this.__charBounds[t]=h,d&&(o=e.util.getPointOnPath(d.path,0,d.segmentsInfo),a=d.segmentsInfo[d.segmentsInfo.length-1].length,o.x+=d.pathOffset.x,o.y+=d.pathOffset.y),n=0;n<c.length;n++)s=this._getGraphemeBox(i=c[n],t,n,r),d&&(u>a&&(u%=a),this._setGraphemeOnPath(u,s,o)),h[n]=s,l+=s.kernedWidth,u+=s.kernedWidth,r=i;return h[n]={left:s?s.left+s.width:0,width:0,kernedWidth:0,height:this.fontSize},{width:l,numOfSpaces:0}},_setGraphemeOnPath:function(t,n,i){var r=this.path,s=e.util.getPointOnPath(r.path,t+n.kernedWidth/2,r.segmentsInfo);n.renderLeft=s.x-i.x,n.renderTop=s.y-i.y,n.angle=s.angle},_getGraphemeBox:function(t,e,n,i,r){var s,o=this.getCompleteStyleDeclaration(e,n),a=i?this.getCompleteStyleDeclaration(e,n-1):{},l=this._measureChar(t,o,i,a),c=l.kernedWidth,h=l.width;0!==this.charSpacing&&(h+=s=this._getWidthOfCharSpacing(),c+=s);var u={width:h,left:0,height:o.fontSize,kernedWidth:c,deltaY:o.deltaY};if(n>0&&!r){var d=this.__charBounds[e][n-1];u.left=d.left+d.width+l.kernedWidth-l.width}return u},getHeightOfLine:function(t){if(this.__lineHeights[t])return this.__lineHeights[t];for(var e=this._textLines[t],n=this.getHeightOfChar(t,0),i=1,r=e.length;i<r;i++)n=Math.max(this.getHeightOfChar(t,i),n);return this.__lineHeights[t]=n*this.lineHeight*this._fontSizeMult},calcTextHeight:function(){for(var t,e=0,n=0,i=this._textLines.length;n<i;n++)t=this.getHeightOfLine(n),e+=n===i-1?t/this.lineHeight:t;return e},_getLeftOffset:function(){return"ltr"===this.direction?-this.width/2:this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextCommon:function(t,e){t.save();for(var n=0,i=this._getLeftOffset(),r=this._getTopOffset(),s=0,o=this._textLines.length;s<o;s++){var a=this.getHeightOfLine(s),l=a/this.lineHeight,c=this._getLineLeftOffset(s);this._renderTextLine(e,t,this._textLines[s],i+c,r+n+l,s),n+=a}t.restore()},_renderTextFill:function(t){(this.fill||this.styleHas("fill"))&&this._renderTextCommon(t,"fillText")},_renderTextStroke:function(t){(this.stroke&&0!==this.strokeWidth||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())},_renderChars:function(t,e,n,i,r,s){var o,a,l,c,h,u=this.getHeightOfLine(s),d=-1!==this.textAlign.indexOf("justify"),f="",p=0,g=this.path,m=!d&&0===this.charSpacing&&this.isEmptyStyles(s)&&!g,v="ltr"===this.direction,y="ltr"===this.direction?1:-1;if(e.save(),r-=u*this._fontSizeFraction/this.lineHeight,m)return e.canvas.setAttribute("dir",v?"ltr":"rtl"),e.direction=v?"ltr":"rtl",e.textAlign=v?"left":"right",this._renderChar(t,e,s,0,n.join(""),i,r,u),void e.restore();for(var _=0,b=n.length-1;_<=b;_++)c=_===b||this.charSpacing||g,f+=n[_],l=this.__charBounds[s][_],0===p?(i+=y*(l.kernedWidth-l.width),p+=l.width):p+=l.kernedWidth,d&&!c&&this._reSpaceAndTab.test(n[_])&&(c=!0),c||(o=o||this.getCompleteStyleDeclaration(s,_),a=this.getCompleteStyleDeclaration(s,_+1),c=this._hasStyleChanged(o,a)),c&&(g?(e.save(),e.translate(l.renderLeft,l.renderTop),e.rotate(l.angle),this._renderChar(t,e,s,_,f,-p/2,0,u),e.restore()):(h=i,e.canvas.setAttribute("dir",v?"ltr":"rtl"),e.direction=v?"ltr":"rtl",e.textAlign=v?"left":"right",this._renderChar(t,e,s,_,f,h,r,u)),f="",o=a,i+=y*p,p=0);e.restore()},_applyPatternGradientTransformText:function(t){var n,i=e.util.createCanvasElement(),r=this.width+this.strokeWidth,s=this.height+this.strokeWidth;return i.width=r,i.height=s,(n=i.getContext("2d")).beginPath(),n.moveTo(0,0),n.lineTo(r,0),n.lineTo(r,s),n.lineTo(0,s),n.closePath(),n.translate(r/2,s/2),n.fillStyle=t.toLive(n),this._applyPatternGradientTransform(n,t),n.fill(),n.createPattern(i,"no-repeat")},handleFiller:function(t,e,n){var i,r;return n.toLive?"percentage"===n.gradientUnits||n.gradientTransform||n.patternTransform?(t.translate(i=-this.width/2,r=-this.height/2),t[e]=this._applyPatternGradientTransformText(n),{offsetX:i,offsetY:r}):(t[e]=n.toLive(t,this),this._applyPatternGradientTransform(t,n)):(t[e]=n,{offsetX:0,offsetY:0})},_setStrokeStyles:function(t,e){return t.lineWidth=e.strokeWidth,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",e.stroke)},_setFillStyles:function(t,e){return this.handleFiller(t,"fillStyle",e.fill)},_renderChar:function(t,e,n,i,r,s,o){var a,l,c=this._getStyleDeclaration(n,i),h=this.getCompleteStyleDeclaration(n,i),u="fillText"===t&&h.fill,d="strokeText"===t&&h.stroke&&h.strokeWidth;(d||u)&&(e.save(),u&&(a=this._setFillStyles(e,h)),d&&(l=this._setStrokeStyles(e,h)),e.font=this._getFontDeclaration(h),c&&c.textBackgroundColor&&this._removeShadow(e),c&&c.deltaY&&(o+=c.deltaY),u&&e.fillText(r,s-a.offsetX,o-a.offsetY),d&&e.strokeText(r,s-l.offsetX,o-l.offsetY),e.restore())},setSuperscript:function(t,e){return this._setScript(t,e,this.superscript)},setSubscript:function(t,e){return this._setScript(t,e,this.subscript)},_setScript:function(t,e,n){var i=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"fontSize"),s=this.getValueOfPropertyAt(i.lineIndex,i.charIndex,"deltaY");return this.setSelectionStyles({fontSize:r*n.size,deltaY:s+r*n.baseline},t,e),this},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth||t.fontSize!==e.fontSize||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.deltaY!==e.deltaY},_hasStyleChangedForSvg:function(t,e){return this._hasStyleChanged(t,e)||t.overline!==e.overline||t.underline!==e.underline||t.linethrough!==e.linethrough},_getLineLeftOffset:function(t){var e=this.getLineWidth(t),n=this.width-e,i=this.textAlign,r=this.direction,s=0,o=this.isEndOfWrapping(t);return"justify"===i||"justify-center"===i&&!o||"justify-right"===i&&!o||"justify-left"===i&&!o?0:("center"===i&&(s=n/2),"right"===i&&(s=n),"justify-center"===i&&(s=n/2),"justify-right"===i&&(s=n),"rtl"===r&&(s-=n),s)},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]},_shouldClearDimensionCache:function(){var t=this._forceClearCache;return t||(t=this.hasStateChanged("_dimensionAffectingProps")),t&&(this.dirty=!0,this._forceClearCache=!1),t},getLineWidth:function(t){return this.__lineWidths[t]?this.__lineWidths[t]:(e=""===this._textLines[t]?0:this.measureLine(t).width,this.__lineWidths[t]=e,e);var e},_getWidthOfCharSpacing:function(){return 0!==this.charSpacing?this.fontSize*this.charSpacing/1e3:0},getValueOfPropertyAt:function(t,e,n){var i=this._getStyleDeclaration(t,e);return i&&void 0!==i[n]?i[n]:this[n]},_renderTextDecoration:function(t,e){if(this[e]||this.styleHas(e)){for(var n,i,r,s,o,a,l,c,h,u,d,f,p,g,m,v,y=this._getLeftOffset(),_=this._getTopOffset(),b=this.path,w=this._getWidthOfCharSpacing(),C=this.offsets[e],x=0,S=this._textLines.length;x<S;x++)if(n=this.getHeightOfLine(x),this[e]||this.styleHas(e,x)){l=this._textLines[x],g=n/this.lineHeight,s=this._getLineLeftOffset(x),u=0,d=0,c=this.getValueOfPropertyAt(x,0,e),v=this.getValueOfPropertyAt(x,0,"fill"),h=_+g*(1-this._fontSizeFraction),i=this.getHeightOfChar(x,0),o=this.getValueOfPropertyAt(x,0,"deltaY");for(var k=0,T=l.length;k<T;k++)if(f=this.__charBounds[x][k],p=this.getValueOfPropertyAt(x,k,e),m=this.getValueOfPropertyAt(x,k,"fill"),r=this.getHeightOfChar(x,k),a=this.getValueOfPropertyAt(x,k,"deltaY"),b&&p&&m)t.save(),t.fillStyle=v,t.translate(f.renderLeft,f.renderTop),t.rotate(f.angle),t.fillRect(-f.kernedWidth/2,C*r+a,f.kernedWidth,this.fontSize/15),t.restore();else if((p!==c||m!==v||r!==i||a!==o)&&d>0){var E=y+s+u;"rtl"===this.direction&&(E=this.width-E-d),c&&v&&(t.fillStyle=v,t.fillRect(E,h+C*i+o,d,this.fontSize/15)),u=f.left,d=f.width,c=p,v=m,i=r,o=a}else d+=f.kernedWidth;E=y+s+u,"rtl"===this.direction&&(E=this.width-E-d),t.fillStyle=m,p&&m&&t.fillRect(E,h+C*i+o,d-w,this.fontSize/15),_+=n}else _+=n;this._removeShadow(t)}},_getFontDeclaration:function(t,n){var i=t||this,r=this.fontFamily,s=e.Text.genericFonts.indexOf(r.toLowerCase())>-1,o=void 0===r||r.indexOf("'")>-1||r.indexOf(",")>-1||r.indexOf('"')>-1||s?i.fontFamily:'"'+i.fontFamily+'"';return[e.isLikelyNode?i.fontWeight:i.fontStyle,e.isLikelyNode?i.fontStyle:i.fontWeight,n?this.CACHE_FONT_SIZE+"px":i.fontSize+"px",o].join(" ")},render:function(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._shouldClearDimensionCache()&&this.initDimensions(),this.callSuper("render",t)))},_splitTextIntoLines:function(t){for(var n=t.split(this._reNewline),i=new Array(n.length),r=["\n"],s=[],o=0;o<n.length;o++)i[o]=e.util.string.graphemeSplit(n[o]),s=s.concat(i[o],r);return s.pop(),{_unwrappedLines:i,lines:n,graphemeText:s,graphemeLines:i}},toObject:function(t){var e=["text","fontSize","fontWeight","fontFamily","fontStyle","lineHeight","underline","overline","linethrough","textAlign","textBackgroundColor","charSpacing","path","direction"].concat(t),i=this.callSuper("toObject",e);return i.styles=n(this.styles,!0),i.path=this.path&&this.path.toObject(),i},set:function(t,e){this.callSuper("set",t,e);var n=!1,i=!1;if("object"==typeof t)for(var r in t)"path"===r&&this.setPathInfo(),n=n||-1!==this._dimensionAffectingProps.indexOf(r),i=i||"path"===r;else n=-1!==this._dimensionAffectingProps.indexOf(t),i="path"===t;return i&&this.setPathInfo(),n&&(this.initDimensions(),this.setCoords()),this},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size letter-spacing text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,i,r){if(!t)return i(null);var s=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES),o=s.textAnchor||"left";if((r=e.util.object.extend(r?n(r):{},s)).top=r.top||0,r.left=r.left||0,s.textDecoration){var a=s.textDecoration;-1!==a.indexOf("underline")&&(r.underline=!0),-1!==a.indexOf("overline")&&(r.overline=!0),-1!==a.indexOf("line-through")&&(r.linethrough=!0),delete r.textDecoration}"dx"in s&&(r.left+=s.dx),"dy"in s&&(r.top+=s.dy),"fontSize"in r||(r.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE);var l="";"textContent"in t?l=t.textContent:"firstChild"in t&&null!==t.firstChild&&"data"in t.firstChild&&null!==t.firstChild.data&&(l=t.firstChild.data),l=l.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," ");var c=r.strokeWidth;r.strokeWidth=0;var h=new e.Text(l,r),u=h.getScaledHeight()/h.height,d=((h.height+h.strokeWidth)*h.lineHeight-h.height)*u,f=h.getScaledHeight()+d,p=0;"center"===o&&(p=h.getScaledWidth()/2),"right"===o&&(p=h.getScaledWidth()),h.set({left:h.left-p,top:h.top-(f-h.fontSize*(.07+h._fontSizeFraction))/h.lineHeight,strokeWidth:void 0!==c?c:1}),i(h)},e.Text.fromObject=function(t,i){var r=n(t),s=t.path;return delete r.path,e.Object._fromObject("Text",r,function(t){s?e.Object._fromObject("Path",s,function(e){t.set("path",e),i(t)},"path"):i(t)},"text")},e.Text.genericFonts=["sans-serif","serif","cursive","fantasy","monospace"],e.util.createAccessors&&e.util.createAccessors(e.Text)}}(e),v.util.object.extend(v.Text.prototype,{isEmptyStyles:function(t){if(!this.styles)return!0;if(void 0!==t&&!this.styles[t])return!0;var e=void 0===t?this.styles:{line:this.styles[t]};for(var n in e)for(var i in e[n])for(var r in e[n][i])return!1;return!0},styleHas:function(t,e){if(!this.styles||!t||""===t)return!1;if(void 0!==e&&!this.styles[e])return!1;var n=void 0===e?this.styles:{0:this.styles[e]};for(var i in n)for(var r in n[i])if(void 0!==n[i][r][t])return!0;return!1},cleanStyle:function(t){if(!this.styles||!t||""===t)return!1;var e,n,i=this.styles,r=0,s=!0,o=0;for(var a in i){for(var l in e=0,i[a]){var c;r++,(c=i[a][l]).hasOwnProperty(t)?(n?c[t]!==n&&(s=!1):n=c[t],c[t]===this[t]&&delete c[t]):s=!1,0!==Object.keys(c).length?e++:delete i[a][l]}0===e&&delete i[a]}for(var h=0;h<this._textLines.length;h++)o+=this._textLines[h].length;s&&r===o&&(this[t]=n,this.removeStyle(t))},removeStyle:function(t){if(this.styles&&t&&""!==t){var e,n,i,r=this.styles;for(n in r){for(i in e=r[n])delete e[i][t],0===Object.keys(e[i]).length&&delete e[i];0===Object.keys(e).length&&delete r[n]}}},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this._getLineStyle(n.lineIndex)||this._setLineStyle(n.lineIndex),this._getStyleDeclaration(n.lineIndex,n.charIndex)||this._setStyleDeclaration(n.lineIndex,n.charIndex,{}),v.util.object.extend(this._getStyleDeclaration(n.lineIndex,n.charIndex),e)},get2DCursorLocation:function(t,e){void 0===t&&(t=this.selectionStart);for(var n=e?this._unwrappedTextLines:this._textLines,i=n.length,r=0;r<i;r++){if(t<=n[r].length)return{lineIndex:r,charIndex:t};t-=n[r].length+this.missingNewlineOffset(r)}return{lineIndex:r-1,charIndex:n[r-1].length<t?n[r-1].length:t}},getSelectionStyles:function(t,e,n){void 0===t&&(t=this.selectionStart||0),void 0===e&&(e=this.selectionEnd||t);for(var i=[],r=t;r<e;r++)i.push(this.getStyleAtPosition(r,n));return i},getStyleAtPosition:function(t,e){var n=this.get2DCursorLocation(t);return(e?this.getCompleteStyleDeclaration(n.lineIndex,n.charIndex):this._getStyleDeclaration(n.lineIndex,n.charIndex))||{}},setSelectionStyles:function(t,e,n){void 0===e&&(e=this.selectionStart||0),void 0===n&&(n=this.selectionEnd||e);for(var i=e;i<n;i++)this._extendStyles(i,t);return this._forceClearCache=!0,this},_getStyleDeclaration:function(t,e){var n=this.styles&&this.styles[t];return n?n[e]:null},getCompleteStyleDeclaration:function(t,e){for(var n,i=this._getStyleDeclaration(t,e)||{},r={},s=0;s<this._styleProperties.length;s++)r[n=this._styleProperties[s]]=void 0===i[n]?this[n]:i[n];return r},_setStyleDeclaration:function(t,e,n){this.styles[t][e]=n},_deleteStyleDeclaration:function(t,e){delete this.styles[t][e]},_getLineStyle:function(t){return!!this.styles[t]},_setLineStyle:function(t){this.styles[t]={}},_deleteLineStyle:function(t){delete this.styles[t]}}),function(){function t(t){t.textDecoration&&(t.textDecoration.indexOf("underline")>-1&&(t.underline=!0),t.textDecoration.indexOf("line-through")>-1&&(t.linethrough=!0),t.textDecoration.indexOf("overline")>-1&&(t.overline=!0),delete t.textDecoration)}v.IText=v.util.createClass(v.Text,v.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,__widthOfSpace:[],inCompositionMode:!1,initialize:function(t,e){this.callSuper("initialize",t,e),this.initBehavior()},setSelectionStart:function(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)},_updateAndFire:function(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()},_fireSelectionChanged:function(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})},initDimensions:function(){this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this.callSuper("initDimensions")},render:function(t){this.clearContextTop(),this.callSuper("render",t),this.cursorOffsetCache={},this.renderCursorOrSelection()},_render:function(t){this.callSuper("_render",t)},clearContextTop:function(t){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var e=this.canvas.contextTop,n=this.canvas.viewportTransform;e.save(),e.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this.transform(e),this._clearTextArea(e),t||e.restore()}},renderCursorOrSelection:function(){if(this.isEditing&&this.canvas&&this.canvas.contextTop){var t=this._getCursorBoundaries(),e=this.canvas.contextTop;this.clearContextTop(!0),this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),e.restore()}},_clearTextArea:function(t){var e=this.width+4,n=this.height+4;t.clearRect(-e/2,-n/2,e,n)},_getCursorBoundaries:function(t){void 0===t&&(t=this.selectionStart);var e=this._getLeftOffset(),n=this._getTopOffset(),i=this._getCursorBoundariesOffsets(t);return{left:e,top:n,leftOffset:i.left,topOffset:i.top}},_getCursorBoundariesOffsets:function(t){if(this.cursorOffsetCache&&"top"in this.cursorOffsetCache)return this.cursorOffsetCache;var e,n,i,r,s=0,o=0,a=this.get2DCursorLocation(t);i=a.charIndex,n=a.lineIndex;for(var l=0;l<n;l++)s+=this.getHeightOfLine(l);e=this._getLineLeftOffset(n);var c=this.__charBounds[n][i];return c&&(o=c.left),0!==this.charSpacing&&i===this._textLines[n].length&&(o-=this._getWidthOfCharSpacing()),r={top:s,left:e+(o>0?o:0)},"rtl"===this.direction&&(r.left*=-1),this.cursorOffsetCache=r,this.cursorOffsetCache},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex>0?n.charIndex-1:0,s=this.getValueOfPropertyAt(i,r,"fontSize"),o=this.scaleX*this.canvas.getZoom(),a=this.cursorWidth/o,l=t.topOffset,c=this.getValueOfPropertyAt(i,r,"deltaY");l+=(1-this._fontSizeFraction)*this.getHeightOfLine(i)/this.lineHeight-s*(1-this._fontSizeFraction),this.inCompositionMode&&this.renderSelection(t,e),e.fillStyle=this.cursorColor||this.getValueOfPropertyAt(i,r,"fill"),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+t.leftOffset-a/2,l+t.top+c,a,s)},renderSelection:function(t,e){for(var n=this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,i=this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd,r=-1!==this.textAlign.indexOf("justify"),s=this.get2DCursorLocation(n),o=this.get2DCursorLocation(i),a=s.lineIndex,l=o.lineIndex,c=s.charIndex<0?0:s.charIndex,h=o.charIndex<0?0:o.charIndex,u=a;u<=l;u++){var d,f=this._getLineLeftOffset(u)||0,p=this.getHeightOfLine(u),g=0,m=0;if(u===a&&(g=this.__charBounds[a][c].left),u>=a&&u<l)m=r&&!this.isEndOfWrapping(u)?this.width:this.getLineWidth(u)||5;else if(u===l)if(0===h)m=this.__charBounds[l][h].left;else{var v=this._getWidthOfCharSpacing();m=this.__charBounds[l][h-1].left+this.__charBounds[l][h-1].width-v}d=p,(this.lineHeight<1||u===l&&this.lineHeight>1)&&(p/=this.lineHeight);var y=t.left+f+g,_=m-g,b=p,w=0;this.inCompositionMode?(e.fillStyle=this.compositionColor||"black",b=1,w=p):e.fillStyle=this.selectionColor,"rtl"===this.direction&&(y=this.width-y-_),e.fillRect(y,t.top+t.topOffset+w,_,b),t.topOffset+=d}},getCurrentCharFontSize:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")},getCurrentCharColor:function(){var t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fill")},_getCurrentCharIndex:function(){var t=this.get2DCursorLocation(this.selectionStart,!0);return{l:t.lineIndex,c:t.charIndex>0?t.charIndex-1:0}}}),v.IText.fromObject=function(e,n){if(t(e),e.styles)for(var i in e.styles)for(var r in e.styles[i])t(e.styles[i][r]);v.Object._fromObject("IText",e,n,"text")}}(),p=v.util.object.clone,v.util.object.extend(v.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation(),this.mouseMoveHandler=this.mouseMoveHandler.bind(this)},onDeselect:function(){this.isEditing&&this.exitEditing(),this.selected=!1},initAddedHandler:function(){var t=this;this.on("added",function(){var e=t.canvas;e&&(e._hasITextHandlers||(e._hasITextHandlers=!0,t._initCanvasHandlers(e)),e._iTextInstances=e._iTextInstances||[],e._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){var e=t.canvas;e&&(e._iTextInstances=e._iTextInstances||[],v.util.removeFromArray(e._iTextInstances,t),0===e._iTextInstances.length&&(e._hasITextHandlers=!1,t._removeCanvasHandlers(e)))})},_initCanvasHandlers:function(t){t._mouseUpITextHandler=function(){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.__isMousedown=!1})},t.on("mouse:up",t._mouseUpITextHandler)},_removeCanvasHandlers:function(t){t.off("mouse:up",t._mouseUpITextHandler)},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&t.selectionStart===t.selectionEnd&&t.renderCursorOrSelection()},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this.abortCursorAnimation(),this._currentCursorOpacity=1,this._cursorTimeout2=setTimeout(function(){e._tick()},n)},abortCursorAnimation:function(){var t=this._currentTickState||this._currentTickCompleteState,e=this.canvas;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,t&&e&&e.clearContext(e.contextTop||e.contextContainer)},selectAll:function(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this},getSelectedText:function(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n--;for(;/\S/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this._text[n]))for(;this._reSpace.test(this._text[n]);)e++,n++;for(;/\S/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this._text[n])&&n>-1;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this._text[n])&&n<this._text.length;)e++,n++;return t+e},searchWordBoundary:function(t,e){for(var n=this._text,i=this._reSpace.test(n[t])?t-1:t,r=n[i],s=v.reNonWord;!s.test(r)&&i>0&&i<n.length;)r=n[i+=e];return s.test(r)&&(i+=1===e?0:1),i},selectWord:function(t){var e=this.searchWordBoundary(t=t||this.selectionStart,-1),n=this.searchWordBoundary(t,1);this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()},selectLine:function(t){var e=this.findLineBoundaryLeft(t=t||this.selectionStart),n=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=n,this._fireSelectionChanged(),this._updateTextarea(),this},enterEditing:function(t){if(!this.isEditing&&this.editable)return this.canvas&&(this.canvas.calcOffset(),this.exitEditingOnOthers(this.canvas)),this.isEditing=!0,this.initHiddenTextarea(t),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered"),this._fireSelectionChanged(),this.canvas?(this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this.canvas.requestRenderAll(),this):this},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){this.canvas.on("mouse:move",this.mouseMoveHandler)},mouseMoveHandler:function(t){if(this.__isMousedown&&this.isEditing){var e=this.getSelectionStartFromPointer(t.e),n=this.selectionStart,i=this.selectionEnd;(e===this.__selectionStartOnMouseDown&&n!==i||n!==e&&i!==e)&&(e>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=e):(this.selectionStart=e,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===n&&this.selectionEnd===i||(this.restartCursorIfNeeded(),this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},fromStringToGraphemeSelection:function(t,e,n){var i=n.slice(0,t),r=v.util.string.graphemeSplit(i).length;if(t===e)return{selectionStart:r,selectionEnd:r};var s=n.slice(t,e);return{selectionStart:r,selectionEnd:r+v.util.string.graphemeSplit(s).length}},fromGraphemeToStringSelection:function(t,e,n){var i=n.slice(0,t).join("").length;return t===e?{selectionStart:i,selectionEnd:i}:{selectionStart:i,selectionEnd:i+n.slice(t,e).join("").length}},_updateTextarea:function(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){var t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}},updateFromTextArea:function(){if(this.hiddenTextarea){this.cursorOffsetCache={},this.text=this.hiddenTextarea.value,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords());var t=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value);this.selectionEnd=this.selectionStart=t.selectionEnd,this.inCompositionMode||(this.selectionStart=t.selectionStart),this.updateTextareaPosition()}},updateTextareaPosition:function(){if(this.selectionStart===this.selectionEnd){var t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}},_calcTextareaPosition:function(){if(!this.canvas)return{x:1,y:1};var t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),n=this.get2DCursorLocation(t),i=this.getValueOfPropertyAt(n.lineIndex,n.charIndex,"fontSize")*this.lineHeight,r=e.leftOffset,s=this.calcTransformMatrix(),o={x:e.left+r,y:e.top+e.topOffset+i},a=this.canvas.getRetinaScaling(),l=this.canvas.upperCanvasEl,c=l.width/a,h=l.height/a,u=c-i,d=h-i,f=l.clientWidth/c,p=l.clientHeight/h;return o=v.util.transformPoint(o,s),(o=v.util.transformPoint(o,this.canvas.viewportTransform)).x*=f,o.y*=p,o.x<0&&(o.x=0),o.x>u&&(o.x=u),o.y<0&&(o.y=0),o.y>d&&(o.y=d),o.x+=this.canvas._offset.left,o.y+=this.canvas._offset.top,{left:o.x+"px",top:o.y+"px",fontSize:i+"px",charHeight:i}},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){var t=this._textBeforeEdit!==this.text,e=this.hiddenTextarea;return this.selected=!1,this.isEditing=!1,this.selectionEnd=this.selectionStart,e&&(e.blur&&e.blur(),e.parentNode&&e.parentNode.removeChild(e)),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire("modified"),this.canvas&&(this.canvas.off("mouse:move",this.mouseMoveHandler),this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},removeStyleFromTo:function(t,e){var n,i,r=this.get2DCursorLocation(t,!0),s=this.get2DCursorLocation(e,!0),o=r.lineIndex,a=r.charIndex,l=s.lineIndex,c=s.charIndex;if(o!==l){if(this.styles[o])for(n=a;n<this._unwrappedTextLines[o].length;n++)delete this.styles[o][n];if(this.styles[l])for(n=c;n<this._unwrappedTextLines[l].length;n++)(i=this.styles[l][n])&&(this.styles[o]||(this.styles[o]={}),this.styles[o][a+n-c]=i);for(n=o+1;n<=l;n++)delete this.styles[n];this.shiftLineStyles(l,o-l)}else if(this.styles[o]){i=this.styles[o];var h,u,d=c-a;for(n=a;n<c;n++)delete i[n];for(u in this.styles[o])(h=parseInt(u,10))>=c&&(i[h-d]=i[u],delete i[u])}},shiftLineStyles:function(t,e){var n=p(this.styles);for(var i in this.styles){var r=parseInt(i,10);r>t&&(this.styles[r+e]=n[r],n[r-e]||delete this.styles[r])}},restartCursorIfNeeded:function(){this._currentTickState&&!this._currentTickState.isAborted&&this._currentTickCompleteState&&!this._currentTickCompleteState.isAborted||this.initDelayedCursor()},insertNewlineStyleObject:function(t,e,n,i){var r,s={},o=!1,a=this._unwrappedTextLines[t].length===e;for(var l in n||(n=1),this.shiftLineStyles(t,n),this.styles[t]&&(r=this.styles[t][0===e?e:e-1]),this.styles[t]){var c=parseInt(l,10);c>=e&&(o=!0,s[c-e]=this.styles[t][l],a&&0===e||delete this.styles[t][l])}var h=!1;for(o&&!a&&(this.styles[t+n]=s,h=!0),h&&n--;n>0;)i&&i[n-1]?this.styles[t+n]={0:p(i[n-1])}:r?this.styles[t+n]={0:p(r)}:delete this.styles[t+n],n--;this._forceClearCache=!0},insertCharStyleObject:function(t,e,n,i){this.styles||(this.styles={});var r=this.styles[t],s=r?p(r):{};for(var o in n||(n=1),s){var a=parseInt(o,10);a>=e&&(r[a+n]=s[a],s[a-n]||delete r[a])}if(this._forceClearCache=!0,i)for(;n--;)Object.keys(i[n]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+n]=p(i[n]));else if(r)for(var l=r[e?e-1:1];l&&n--;)this.styles[t][e+n]=p(l)},insertNewStyleBlock:function(t,e,n){for(var i=this.get2DCursorLocation(e,!0),r=[0],s=0,o=0;o<t.length;o++)"\n"===t[o]?r[++s]=0:r[s]++;for(r[0]>0&&(this.insertCharStyleObject(i.lineIndex,i.charIndex,r[0],n),n=n&&n.slice(r[0]+1)),s&&this.insertNewlineStyleObject(i.lineIndex,i.charIndex+r[0],s),o=1;o<s;o++)r[o]>0?this.insertCharStyleObject(i.lineIndex+o,0,r[o],n):n&&(this.styles[i.lineIndex+o][0]=n[0]),n=n&&n.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(i.lineIndex+o,0,r[o],n)},setSelectionStartEndWithShift:function(t,e,n){n<=t?(e===t?this._selectionDirection="left":"right"===this._selectionDirection&&(this._selectionDirection="left",this.selectionEnd=t),this.selectionStart=n):n>t&&n<e?"right"===this._selectionDirection?this.selectionEnd=n:this.selectionStart=n:(e===t?this._selectionDirection="right":"left"===this._selectionDirection&&(this._selectionDirection="right",this.selectionStart=e),this.selectionEnd=n)},setSelectionInBoundaries:function(){var t=this.text.length;this.selectionStart>t?this.selectionStart=t:this.selectionStart<0&&(this.selectionStart=0),this.selectionEnd>t?this.selectionEnd=t:this.selectionEnd<0&&(this.selectionEnd=0)}}),v.util.object.extend(v.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown)},onMouseDown:function(t){if(this.canvas){this.__newClickTime=+new Date;var e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected}},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},doubleClickHandler:function(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))},tripleClickHandler:function(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))},initClicks:function(){this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler)},_mouseDownHandler:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.__isMousedown=!0,this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(t.e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection()))},_mouseDownHandlerBefore:function(t){!this.canvas||!this.editable||t.e.button&&1!==t.e.button||(this.selected=this===this.canvas._activeObject)},initMousedownHandler:function(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore)},initMouseupHandler:function(){this.on("mouseup",this.mouseUpHandler)},mouseUpHandler:function(t){if(this.__isMousedown=!1,!(!this.editable||this.group||t.transform&&t.transform.actionPerformed||t.e.button&&1!==t.e.button)){if(this.canvas){var e=this.canvas._activeObject;if(e&&e!==this)return}this.__lastSelected&&!this.__corner?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(t.e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0}},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())},getSelectionStartFromPointer:function(t){for(var e,n=this.getLocalPointer(t),i=0,r=0,s=0,o=0,a=0,l=0,c=this._textLines.length;l<c&&s<=n.y;l++)s+=this.getHeightOfLine(l)*this.scaleY,a=l,l>0&&(o+=this._textLines[l-1].length+this.missingNewlineOffset(l-1));r=this._getLineLeftOffset(a)*this.scaleX,e=this._textLines[a],"rtl"===this.direction&&(n.x=this.width*this.scaleX-n.x+r);for(var h=0,u=e.length;h<u&&(i=r,(r+=this.__charBounds[a][h].kernedWidth*this.scaleX)<=n.x);h++)o++;return this._getNewSelectionStartFromOffset(n,i,r,o,u)},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var s=n-t.x,o=i+(s>t.x-e||s<0?0:1);return this.flipX&&(o=r-o),o>this._text.length&&(o=this._text.length),o}}),v.util.object.extend(v.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=v.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.setAttribute("autocorrect","off"),this.hiddenTextarea.setAttribute("autocomplete","off"),this.hiddenTextarea.setAttribute("spellcheck","false"),this.hiddenTextarea.setAttribute("data-fabric-hiddentextarea",""),this.hiddenTextarea.setAttribute("wrap","off");var t=this._calcTextareaPosition();this.hiddenTextarea.style.cssText="position: absolute; top: "+t.top+"; left: "+t.left+"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding\uff70top: "+t.fontSize+";",v.document.body.appendChild(this.hiddenTextarea),v.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),v.util.addListener(this.hiddenTextarea,"keyup",this.onKeyUp.bind(this)),v.util.addListener(this.hiddenTextarea,"input",this.onInput.bind(this)),v.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),v.util.addListener(this.hiddenTextarea,"cut",this.copy.bind(this)),v.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),v.util.addListener(this.hiddenTextarea,"compositionstart",this.onCompositionStart.bind(this)),v.util.addListener(this.hiddenTextarea,"compositionupdate",this.onCompositionUpdate.bind(this)),v.util.addListener(this.hiddenTextarea,"compositionend",this.onCompositionEnd.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(v.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},keysMap:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown"},keysMapRtl:{9:"exitEditing",27:"exitEditing",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorLeft",36:"moveCursorRight",37:"moveCursorRight",38:"moveCursorUp",39:"moveCursorLeft",40:"moveCursorDown"},ctrlKeysMapUp:{67:"copy",88:"cut"},ctrlKeysMapDown:{65:"selectAll"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){var e="rtl"===this.direction?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}},onKeyUp:function(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())},onInput:function(t){var e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),this.isEditing){var n,i,r,s,o,a=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,l=this._text.length,c=a.length,h=c-l,u=this.selectionStart,d=this.selectionEnd,f=u!==d;if(""===this.hiddenTextarea.value)return this.styles={},this.updateFromTextArea(),this.fire("changed"),void(this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll()));var p=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),g=u>p.selectionStart;f?(n=this._text.slice(u,d),h+=d-u):c<l&&(n=g?this._text.slice(d+h,d):this._text.slice(u,u-h)),i=a.slice(p.selectionEnd-h,p.selectionEnd),n&&n.length&&(i.length&&(r=this.getSelectionStyles(u,u+1,!1),r=i.map(function(){return r[0]})),f?(s=u,o=d):g?(s=d-n.length,o=d):(s=d,o=d+n.length),this.removeStyleFromTo(s,o)),i.length&&(e&&i.join("")===v.copiedText&&!v.disableStyleCopyPaste&&(r=v.copiedTextStyle),this.insertNewStyleBlock(i,u,r)),this.updateFromTextArea(),this.fire("changed"),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())}},onCompositionStart:function(){this.inCompositionMode=!0},onCompositionEnd:function(){this.inCompositionMode=!1},onCompositionUpdate:function(t){this.compositionStart=t.target.selectionStart,this.compositionEnd=t.target.selectionEnd,this.updateTextareaPosition()},copy:function(){this.selectionStart!==this.selectionEnd&&(v.copiedText=this.getSelectedText(),v.copiedTextStyle=v.disableStyleCopyPaste?null:this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0)},paste:function(){this.fromPaste=!0},_getClipboardData:function(t){return t&&t.clipboardData||v.window.clipboardData},_getWidthBeforeCursor:function(t,e){var n,i=this._getLineLeftOffset(t);return e>0&&(i+=(n=this.__charBounds[t][e-1]).left+n.width),i},getDownCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(r===this._textLines.length-1||t.metaKey||34===t.keyCode)return this._text.length-n;var s=i.charIndex,o=this._getWidthBeforeCursor(r,s),a=this._getIndexOnLine(r+1,o);return this._textLines[r].slice(s).length+a+1+this.missingNewlineOffset(r)},_getSelectionForOffset:function(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart},getUpCursorOffset:function(t,e){var n=this._getSelectionForOffset(t,e),i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return-n;var s=i.charIndex,o=this._getWidthBeforeCursor(r,s),a=this._getIndexOnLine(r-1,o),l=this._textLines[r].slice(0,s),c=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+a-l.length+(1-c)},_getIndexOnLine:function(t,e){for(var n,i,r=this._textLines[t],s=this._getLineLeftOffset(t),o=0,a=0,l=r.length;a<l;a++)if((s+=n=this.__charBounds[t][a].width)>e){i=!0;var c=s,h=Math.abs(s-n-e);o=Math.abs(c-e)<h?a:a-1;break}return i||(o=r.length-1),o},moveCursorDown:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)},moveCursorUp:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorUpOrDown("Up",t)},_moveCursorUpOrDown:function(t,e){var n=this["get"+t+"CursorOffset"](e,"right"===this._selectionDirection);e.shiftKey?this.moveCursorWithShift(n):this.moveCursorWithoutShift(n),0!==n&&(this.setSelectionInBoundaries(),this.abortCursorAnimation(),this._currentCursorOpacity=1,this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorWithShift:function(t){return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,"left"===this._selectionDirection?this.selectionStart+t:this.selectionEnd+t),0!==t},moveCursorWithoutShift:function(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),0!==t},moveCursorLeft:function(t){0===this.selectionStart&&0===this.selectionEnd||this._moveCursorLeftOrRight("Left",t)},_move:function(t,e,n){var i;if(t.altKey)i=this["findWordBoundary"+n](this[e]);else{if(!t.metaKey&&35!==t.keyCode&&36!==t.keyCode)return this[e]+="Left"===n?-1:1,!0;i=this["findLineBoundary"+n](this[e])}if(void 0!==typeof i&&this[e]!==i)return this[e]=i,!0},_moveLeft:function(t,e){return this._move(t,e,"Left")},_moveRight:function(t,e){return this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){var e=!0;return this._selectionDirection="left",this.selectionEnd===this.selectionStart&&0!==this.selectionStart&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e},moveCursorLeftWithShift:function(t){return"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):0!==this.selectionStart?(this._selectionDirection="left",this._moveLeft(t,"selectionStart")):void 0},moveCursorRight:function(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)},_moveCursorLeftOrRight:function(t,e){var n="moveCursor"+t+"With";this._currentCursorOpacity=1,this[n+=e.shiftKey?"Shift":"outShift"](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())},moveCursorRightWithShift:function(t){return"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection="right",this._moveRight(t,"selectionEnd")):void 0},moveCursorRightWithoutShift:function(t){var e=!0;return this._selectionDirection="right",this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e},removeChars:function(t,e){void 0===e&&(e=t+1),this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()},insertChars:function(t,e,n,i){void 0===i&&(i=n),i>n&&this.removeStyleFromTo(n,i);var r=v.util.string.graphemeSplit(t);this.insertNewStyleBlock(r,n,e),this._text=[].concat(this._text.slice(0,n),r,this._text.slice(i)),this.text=this._text.join(""),this.set("dirty",!0),this._shouldClearDimensionCache()&&(this.initDimensions(),this.setCoords()),this._removeExtraneousStyles()}}),g=v.util.toFixed,m=/  +/g,v.util.object.extend(v.Text.prototype,{_toSVG:function(){var t=this._getSVGLeftTopOffsets(),e=this._getSVGTextAndBg(t.textTop,t.textLeft);return this._wrapSVGTextAndBg(e)},toSVG:function(t){return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,noStyle:!0,withShadow:!0})},_getSVGLeftTopOffsets:function(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}},_wrapSVGTextAndBg:function(t){var e=this.getSvgTextDecoration(this);return[t.textBgRects.join(""),'\t\t<text xml:space="preserve" ',this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",e?'text-decoration="'+e+'" ':"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",t.textSpans.join(""),"</text>\n"]},_getSVGTextAndBg:function(t,e){var n,i=[],r=[],s=t;this._setSVGBg(r);for(var o=0,a=this._textLines.length;o<a;o++)n=this._getLineLeftOffset(o),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(r,o,e+n,s),this._setSVGTextLineText(i,o,e+n,s),s+=this.getHeightOfLine(o);return{textSpans:i,textBgRects:r}},_createTextCharSpan:function(t,e,n,i){var r=t!==t.trim()||t.match(m),s=this.getSvgSpanStyles(e,r),o=s?'style="'+s+'"':"",a=e.deltaY,l="",c=v.Object.NUM_FRACTION_DIGITS;return a&&(l=' dy="'+g(a,c)+'" '),['<tspan x="',g(n,c),'" y="',g(i,c),'" ',l,o,">",v.util.string.escapeXml(t),"</tspan>"].join("")},_setSVGTextLineText:function(t,e,n,i){var r,s,o,a,l,c=this.getHeightOfLine(e),h=-1!==this.textAlign.indexOf("justify"),u="",d=0,f=this._textLines[e];i+=c*(1-this._fontSizeFraction)/this.lineHeight;for(var p=0,g=f.length-1;p<=g;p++)l=p===g||this.charSpacing,u+=f[p],o=this.__charBounds[e][p],0===d?(n+=o.kernedWidth-o.width,d+=o.width):d+=o.kernedWidth,h&&!l&&this._reSpaceAndTab.test(f[p])&&(l=!0),l||(r=r||this.getCompleteStyleDeclaration(e,p),s=this.getCompleteStyleDeclaration(e,p+1),l=this._hasStyleChangedForSvg(r,s)),l&&(a=this._getStyleDeclaration(e,p)||{},t.push(this._createTextCharSpan(u,a,n,i)),u="",r=s,n+=d,d=0)},_pushTextBgRect:function(t,e,n,i,r,s){var o=v.Object.NUM_FRACTION_DIGITS;t.push("\t\t<rect ",this._getFillAttributes(e),' x="',g(n,o),'" y="',g(i,o),'" width="',g(r,o),'" height="',g(s,o),'"></rect>\n')},_setSVGTextLineBg:function(t,e,n,i){for(var r,s,o=this._textLines[e],a=this.getHeightOfLine(e)/this.lineHeight,l=0,c=0,h=this.getValueOfPropertyAt(e,0,"textBackgroundColor"),u=0,d=o.length;u<d;u++)r=this.__charBounds[e][u],(s=this.getValueOfPropertyAt(e,u,"textBackgroundColor"))!==h?(h&&this._pushTextBgRect(t,h,n+c,i,l,a),c=r.left,l=r.width,h=s):l+=r.kernedWidth;s&&this._pushTextBgRect(t,s,n+c,i,l,a)},_getFillAttributes:function(t){var e=t&&"string"==typeof t?new v.Color(t):"";return e&&e.getSource()&&1!==e.getAlpha()?'opacity="'+e.getAlpha()+'" fill="'+e.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_getSVGLineTopOffset:function(t){for(var e,n=0,i=0;i<t;i++)n+=this.getHeightOfLine(i);return e=this.getHeightOfLine(i),{lineTop:n,offset:(this._fontSizeMult-this._fontSizeFraction)*e/(this.lineHeight*this._fontSizeMult)}},getSvgStyles:function(t){return v.Object.prototype.getSvgStyles.call(this,t)+" white-space: pre;"}}),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Textbox=e.util.createClass(e.IText,e.Observable,{type:"textbox",minWidth:20,dynamicMinWidth:2,__cachedLines:null,lockScalingFlip:!0,noScaleCache:!1,_dimensionAffectingProps:e.Text.prototype._dimensionAffectingProps.concat("width"),_wordJoiners:/[ \t\r]/,splitByGrapheme:!1,initDimensions:function(){this.__skipDimension||(this.isEditing&&this.initDelayedCursor(),this.clearContextTop(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),-1!==this.textAlign.indexOf("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.saveState({propertySet:"_dimensionAffectingProps"}))},_generateStyleMap:function(t){for(var e=0,n=0,i=0,r={},s=0;s<t.graphemeLines.length;s++)"\n"===t.graphemeText[i]&&s>0?(n=0,i++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[i])&&s>0&&(n++,i++),r[s]={line:e,offset:n},i+=t.graphemeLines[s].length,n+=t.graphemeLines[s].length;return r},styleHas:function(t,n){if(this._styleMap&&!this.isWrapping){var i=this._styleMap[n];i&&(n=i.line)}return e.Text.prototype.styleHas.call(this,t,n)},isEmptyStyles:function(t){if(!this.styles)return!0;var e,n,i=0,r=!1,s=this._styleMap[t],o=this._styleMap[t+1];for(var a in s&&(t=s.line,i=s.offset),o&&(r=o.line===t,e=o.offset),n=void 0===t?this.styles:{line:this.styles[t]})for(var l in n[a])if(l>=i&&(!r||l<e))for(var c in n[a][l])return!1;return!0},_getStyleDeclaration:function(t,e){if(this._styleMap&&!this.isWrapping){var n=this._styleMap[t];if(!n)return null;t=n.line,e=n.offset+e}return this.callSuper("_getStyleDeclaration",t,e)},_setStyleDeclaration:function(t,e,n){var i=this._styleMap[t];this.styles[t=i.line][e=i.offset+e]=n},_deleteStyleDeclaration:function(t,e){var n=this._styleMap[t];delete this.styles[t=n.line][e=n.offset+e]},_getLineStyle:function(t){return!!this.styles[this._styleMap[t].line]},_setLineStyle:function(t){this.styles[this._styleMap[t].line]={}},_wrapText:function(t,e){var n,i=[];for(this.isWrapping=!0,n=0;n<t.length;n++)i=i.concat(this._wrapLine(t[n],n,e));return this.isWrapping=!1,i},_measureWord:function(t,e,n){var i,r=0;n=n||0;for(var s=0,o=t.length;s<o;s++)r+=this._getGraphemeBox(t[s],e,s+n,i,!0).kernedWidth,i=t[s];return r},_wrapLine:function(t,n,i,r){var s=0,o=this.splitByGrapheme,a=[],l=[],c=o?e.util.string.graphemeSplit(t):t.split(this._wordJoiners),h="",u=0,d=o?"":" ",f=0,p=0,g=0,m=!0,v=this._getWidthOfCharSpacing();r=r||0,0===c.length&&c.push([]),i-=r;for(var y=0;y<c.length;y++)h=o?c[y]:e.util.string.graphemeSplit(c[y]),f=this._measureWord(h,n,u),u+=h.length,(s+=p+f-v)>i&&!m?(a.push(l),l=[],s=f,m=!0):s+=v,m||o||l.push(d),l=l.concat(h),p=o?0:this._measureWord([d],n,u),u++,m=!1,f>g&&(g=f);return y&&a.push(l),g+r>this.dynamicMinWidth&&(this.dynamicMinWidth=g-v+r),a},isEndOfWrapping:function(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line},missingNewlineOffset:function(t){return this.splitByGrapheme?this.isEndOfWrapping(t)?1:0:1},_splitTextIntoLines:function(t){for(var n=e.Text.prototype._splitTextIntoLines.call(this,t),i=this._wrapText(n.lines,this.width),r=new Array(i.length),s=0;s<i.length;s++)r[s]=i[s].join("");return n.lines=r,n.graphemeLines=i,n},getMinWidth:function(){return Math.max(this.minWidth,this.dynamicMinWidth)},_removeExtraneousStyles:function(){var t={};for(var e in this._styleMap)this._textLines[e]&&(t[this._styleMap[e].line]=1);for(var e in this.styles)t[e]||delete this.styles[e]},toObject:function(t){return this.callSuper("toObject",["minWidth","splitByGrapheme"].concat(t))}}),e.Textbox.fromObject=function(t,n){return e.Object._fromObject("Textbox",t,n,"text")}}(e),function(){var t=v.controlsUtils,e=t.scaleSkewCursorStyleHandler,n=t.scaleCursorStyleHandler,i=t.scalingEqually,r=t.scalingYOrSkewingX,s=t.scalingXOrSkewingY,o=t.scaleOrSkewActionName,a=v.Object.prototype.controls;if(a.ml=new v.Control({x:-.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mr=new v.Control({x:.5,y:0,cursorStyleHandler:e,actionHandler:s,getActionName:o}),a.mb=new v.Control({x:0,y:.5,cursorStyleHandler:e,actionHandler:r,getActionName:o}),a.mt=new v.Control({x:0,y:-.5,cursorStyleHandler:e,actionHandler:r,getActionName:o}),a.tl=new v.Control({x:-.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),a.tr=new v.Control({x:.5,y:-.5,cursorStyleHandler:n,actionHandler:i}),a.bl=new v.Control({x:-.5,y:.5,cursorStyleHandler:n,actionHandler:i}),a.br=new v.Control({x:.5,y:.5,cursorStyleHandler:n,actionHandler:i}),a.mtr=new v.Control({x:0,y:-.5,actionHandler:t.rotationWithSnapping,cursorStyleHandler:t.rotationStyleHandler,offsetY:-40,withConnection:!0,actionName:"rotate"}),v.Textbox){var l=v.Textbox.prototype.controls={};l.mtr=a.mtr,l.tr=a.tr,l.br=a.br,l.tl=a.tl,l.bl=a.bl,l.mt=a.mt,l.mb=a.mb,l.mr=new v.Control({x:.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"}),l.ml=new v.Control({x:-.5,y:0,actionHandler:t.changeWidth,cursorStyleHandler:e,actionName:"resizing"})}}()},6809:(t,e,n)=>{"use strict";function i(t){return"function"==typeof t}let r=!1;const s={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}};function o(t){setTimeout(()=>{throw t},0)}const a={closed:!0,next(t){},error(t){if(s.useDeprecatedSynchronousErrorHandling)throw t;o(t)},complete(){}},l=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))();function c(t){return null!==t&&"object"==typeof t}const h=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let u=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:r,_unsubscribe:s,_subscriptions:o}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(i(s)){r&&(this._unsubscribe=void 0);try{s.call(this)}catch(a){e=a instanceof h?d(a.errors):[a]}}if(l(o)){let t=-1,n=o.length;for(;++t<n;){const n=o[t];if(c(n))try{n.unsubscribe()}catch(a){e=e||[],a instanceof h?e=e.concat(d(a.errors)):e.push(a)}}}if(e)throw new h(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:i}=n;if(null===i)n._parentOrParents=this;else if(i instanceof t){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[n]:r.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}return t.EMPTY=function(t){return t.closed=!0,t}(new t),t})();function d(t){return t.reduce((t,e)=>t.concat(e instanceof h?e.errors:e),[])}const f=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())();class p extends u{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=a;break;case 1:if(!t){this.destination=a;break}if("object"==typeof t){t instanceof p?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new g(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new g(this,t,e,n)}}[f](){return this}static create(t,e,n){const i=new p(t,e,n);return i.syncErrorThrowable=!1,i}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class g extends p{constructor(t,e,n,r){let s;super(),this._parentSubscriber=t;let o=this;i(e)?s=e:e&&(s=e.next,n=e.error,r=e.complete,e!==a&&(o=Object.create(e),i(o.unsubscribe)&&this.add(o.unsubscribe.bind(o)),o.unsubscribe=this.unsubscribe.bind(this))),this._context=o,this._next=s,this._error=n,this._complete=r}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;s.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=s;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):o(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;o(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);s.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),s.useDeprecatedSynchronousErrorHandling)throw n;o(n)}}__tryOrSetError(t,e,n){if(!s.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(i){return s.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=i,t.syncErrorThrown=!0,!0):(o(i),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}const m=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")();function v(t){return t}let y=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:i}=this,r=function(t,e,n){if(t){if(t instanceof p)return t;if(t[f])return t[f]()}return t||e||n?new p(t,e,n):new p(a)}(t,e,n);if(r.add(i?i.call(r,this.source):this.source||s.useDeprecatedSynchronousErrorHandling&&!r.syncErrorThrowable?this._subscribe(r):this._trySubscribe(r)),s.useDeprecatedSynchronousErrorHandling&&r.syncErrorThrowable&&(r.syncErrorThrowable=!1,r.syncErrorThrown))throw r.syncErrorValue;return r}_trySubscribe(t){try{return this._subscribe(t)}catch(e){s.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof p?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=_(e))((e,n)=>{let i;i=this.subscribe(e=>{try{t(e)}catch(r){n(r),i&&i.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[m](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?v:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=_(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function _(t){if(t||(t=s.Promise||Promise),!t)throw new Error("no Promise impl found");return t}const b=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})();class w extends u{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}class C extends p{constructor(t){super(t),this.destination=t}}let x=(()=>{class t extends y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[f](){return new C(this)}lift(t){const e=new S(this,this);return e.operator=t,e}next(t){if(this.closed)throw new b;if(!this.isStopped){const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].next(t)}}error(t){if(this.closed)throw new b;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,i=e.slice();for(let r=0;r<n;r++)i[r].error(t);this.observers.length=0}complete(){if(this.closed)throw new b;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let i=0;i<e;i++)n[i].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new b;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new b;return this.hasError?(t.error(this.thrownError),u.EMPTY):this.isStopped?(t.complete(),u.EMPTY):(this.observers.push(t),new w(this,t))}asObservable(){const t=new y;return t.source=this,t}}return t.create=(t,e)=>new S(t,e),t})();class S extends x{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):u.EMPTY}}function k(t){return t&&"function"==typeof t.schedule}function T(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new E(t,e))}}class E{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new O(t,this.project,this.thisArg))}}class O extends p{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const P=t=>e=>{for(let n=0,i=t.length;n<i&&!e.closed;n++)e.next(t[n]);e.complete()};function A(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}const M=A(),I=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function D(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}const R=t=>{if(t&&"function"==typeof t[m])return n=t,t=>{const e=n[m]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(I(t))return P(t);if(D(t))return(t=>e=>(t.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,o),e))(t);if(t&&"function"==typeof t[M])return e=t,t=>{const n=e[M]();for(;;){let e;try{e=n.next()}catch(i){return t.error(i),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=c(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n};function L(t,e){return new y(n=>{const i=new u;let r=0;return i.add(e.schedule(function(){r!==t.length?(n.next(t[r++]),n.closed||i.add(this.schedule())):n.complete()})),i})}function F(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[m]}(t))return function(t,e){return new y(n=>{const i=new u;return i.add(e.schedule(()=>{const r=t[m]();i.add(r.subscribe({next(t){i.add(e.schedule(()=>n.next(t)))},error(t){i.add(e.schedule(()=>n.error(t)))},complete(){i.add(e.schedule(()=>n.complete()))}}))})),i})}(t,e);if(D(t))return function(t,e){return new y(n=>{const i=new u;return i.add(e.schedule(()=>t.then(t=>{i.add(e.schedule(()=>{n.next(t),i.add(e.schedule(()=>n.complete()))}))},t=>{i.add(e.schedule(()=>n.error(t)))}))),i})}(t,e);if(I(t))return L(t,e);if(function(t){return t&&"function"==typeof t[M]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new y(n=>{const i=new u;let r;return i.add(()=>{r&&"function"==typeof r.return&&r.return()}),i.add(e.schedule(()=>{r=t[M](),i.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=r.next();t=n.value,e=n.done}catch(i){return void n.error(i)}e?n.complete():(n.next(t),this.schedule())}))})),i})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof y?t:new y(R(t))}class j extends p{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class N extends p{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function B(t,e){if(e.closed)return;if(t instanceof y)return t.subscribe(e);let n;try{n=R(t)(e)}catch(i){e.error(i)}return n}function $(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?i=>i.pipe($((n,i)=>F(t(n,i)).pipe(T((t,r)=>e(n,t,i,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new z(t,n)))}class z{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new V(t,this.project,this.concurrent))}}class V extends N{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this.active++,this._innerSub(e)}_innerSub(t){const e=new j(this),n=this.destination;n.add(e);const i=B(t,e);i!==e&&n.add(i)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}function G(t=Number.POSITIVE_INFINITY){return $(v,t)}function U(t,e){return e?L(t,e):new y(P(t))}function H(...t){let e=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return k(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof i&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof y?t[0]:G(e)(U(t,n))}function W(){return function(t){return t.lift(new X(t))}}class X{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const i=new q(t,n),r=e.subscribe(i);return i.closed||(i.connection=n.connect()),r}}class q extends p{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,i=t._connection;this.connection=null,!i||n&&i!==n||i.unsubscribe()}}class Y extends y{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new u,t.add(this.source.subscribe(new Z(this.getSubject(),this))),t.closed&&(this._connection=null,t=u.EMPTY)),t}refCount(){return W()(this)}}const K=(()=>{const t=Y.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class Z extends C{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}function Q(){return new x}function J(t){for(let e in t)if(t[e]===J)return e;throw Error("Could not find renamed property on target object.")}function tt(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function et(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(et).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function nt(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const it=J({__forward_ref__:J});function rt(t){return t.__forward_ref__=rt,t.toString=function(){return et(this())},t}function st(t){return ot(t)?t():t}function ot(t){return"function"==typeof t&&t.hasOwnProperty(it)&&t.__forward_ref__===rt}class at extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function lt(t){return"string"==typeof t?t:null==t?"":String(t)}function ct(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():lt(t)}function ht(t,e){const n=e?` in ${e}`:"";throw new at("201",`No provider for ${ct(t)} found${n}`)}function ut(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function dt(t){return{providers:t.providers||[],imports:t.imports||[]}}function ft(t){return pt(t,mt)||pt(t,yt)}function pt(t,e){return t.hasOwnProperty(e)?t[e]:null}function gt(t){return t&&(t.hasOwnProperty(vt)||t.hasOwnProperty(_t))?t[vt]:null}const mt=J({"\u0275prov":J}),vt=J({"\u0275inj":J}),yt=J({ngInjectableDef:J}),_t=J({ngInjectorDef:J});var bt=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let wt;function Ct(t){const e=wt;return wt=t,e}function xt(t,e,n){const i=ft(t);return i&&"root"==i.providedIn?void 0===i.value?i.value=i.factory():i.value:n&bt.Optional?null:void 0!==e?e:void ht(et(t),"Injector")}function St(t){return{toString:t}.toString()}var kt=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),Tt=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const Et="undefined"!=typeof globalThis&&globalThis,Ot="undefined"!=typeof window&&window,Pt="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,At="undefined"!=typeof global&&global,Mt=Et||At||Ot||Pt,It={},Dt=[],Rt=J({"\u0275cmp":J}),Lt=J({"\u0275dir":J}),Ft=J({"\u0275pipe":J}),jt=J({"\u0275mod":J}),Nt=J({"\u0275loc":J}),Bt=J({"\u0275fac":J}),$t=J({__NG_ELEMENT_ID__:J});let zt=0;function Vt(t){return St(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===kt.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Dt,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Tt.Emulated,id:"c",styles:t.styles||Dt,_:null,setInput:null,schemas:t.schemas||null,tView:null},i=t.directives,r=t.features,s=t.pipes;return n.id+=zt++,n.inputs=Xt(t.inputs,e),n.outputs=Xt(t.outputs),r&&r.forEach(t=>t(n)),n.directiveDefs=i?()=>("function"==typeof i?i():i).map(Gt):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Ut):null,n})}function Gt(t){return Yt(t)||function(t){return t[Lt]||null}(t)}function Ut(t){return function(t){return t[Ft]||null}(t)}const Ht={};function Wt(t){const e={type:t.type,bootstrap:t.bootstrap||Dt,declarations:t.declarations||Dt,imports:t.imports||Dt,exports:t.exports||Dt,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&St(()=>{Ht[t.id]=t.type}),e}function Xt(t,e){if(null==t)return It;const n={};for(const i in t)if(t.hasOwnProperty(i)){let r=t[i],s=r;Array.isArray(r)&&(s=r[1],r=r[0]),n[r]=i,e&&(e[r]=s)}return n}const qt=Vt;function Yt(t){return t[Rt]||null}function Kt(t,e){const n=t[jt]||null;if(!n&&!0===e)throw new Error(`Type ${et(t)} does not have '\u0275mod' property.`);return n}const Zt=20,Qt=10;function Jt(t){return Array.isArray(t)&&"object"==typeof t[1]}function te(t){return Array.isArray(t)&&!0===t[1]}function ee(t){return 0!=(8&t.flags)}function ne(t){return 2==(2&t.flags)}function ie(t){return 1==(1&t.flags)}function re(t){return null!==t.template}function se(t,e){return t.hasOwnProperty(Bt)?t[Bt]:null}class oe{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function ae(){return le}function le(t){return t.type.prototype.ngOnChanges&&(t.setInput=he),ce}function ce(){const t=ue(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===It)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function he(t,e,n,i){const r=ue(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:It,current:null}),s=r.current||(r.current={}),o=r.previous,a=this.declaredInputs[n],l=o[a];s[a]=new oe(l&&l.currentValue,e,o===It),t[i]=e}function ue(t){return t.__ngSimpleChanges__||null}ae.ngInherit=!0;const de="http://www.w3.org/2000/svg";let fe;function pe(t){return!!t.listen}const ge={createRenderer:(t,e)=>void 0!==fe?fe:"undefined"!=typeof document?document:void 0};function me(t){for(;Array.isArray(t);)t=t[0];return t}function ve(t,e){return me(e[t])}function ye(t,e){return me(e[t.index])}function _e(t,e){return t.data[e]}function be(t,e){const n=e[t];return Jt(n)?n:n[0]}function we(t){return 4==(4&t[2])}function Ce(t){return 128==(128&t[2])}function xe(t,e){return null==e?null:t[e]}function Se(t){t[18]=0}function ke(t,e){t[5]+=e;let n=t,i=t[3];for(;null!==i&&(1===e&&1===n[5]||-1===e&&0===n[5]);)i[5]+=e,n=i,i=i[3]}const Te={lFrame:Ye(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ee(){return Te.bindingsEnabled}function Oe(){return Te.lFrame.lView}function Pe(){return Te.lFrame.tView}function Ae(t){return Te.lFrame.contextLView=t,t[8]}function Me(){let t=Ie();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ie(){return Te.lFrame.currentTNode}function De(t,e){const n=Te.lFrame;n.currentTNode=t,n.isParent=e}function Re(){return Te.lFrame.isParent}function Le(){Te.lFrame.isParent=!1}function Fe(){return Te.isInCheckNoChangesMode}function je(t){Te.isInCheckNoChangesMode=t}function Ne(){return Te.lFrame.bindingIndex++}function Be(t){const e=Te.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function $e(t,e){const n=Te.lFrame;n.bindingIndex=n.bindingRootIndex=t,ze(e)}function ze(t){Te.lFrame.currentDirectiveIndex=t}function Ve(t){const e=Te.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}function Ge(){return Te.lFrame.currentQueryIndex}function Ue(t){Te.lFrame.currentQueryIndex=t}function He(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function We(t,e,n){if(n&bt.SkipSelf){let i=e,r=t;for(;i=i.parent,!(null!==i||n&bt.Host||(i=He(r),null===i)||(r=r[15],10&i.type)););if(null===i)return!1;e=i,t=r}const i=Te.lFrame=qe();return i.currentTNode=e,i.lView=t,!0}function Xe(t){const e=qe(),n=t[1];Te.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function qe(){const t=Te.lFrame,e=null===t?null:t.child;return null===e?Ye(t):e}function Ye(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function Ke(){const t=Te.lFrame;return Te.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Ze=Ke;function Qe(){const t=Ke();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function Je(){return Te.lFrame.selectedIndex}function tn(t){Te.lFrame.selectedIndex=t}function en(){const t=Te.lFrame;return _e(t.tView,t.selectedIndex)}function nn(){Te.lFrame.currentNamespace=de}function rn(){Te.lFrame.currentNamespace=null}function sn(t,e){for(let n=e.directiveStart,i=e.directiveEnd;n<i;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:i,ngAfterContentChecked:r,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=e;i&&(t.contentHooks||(t.contentHooks=[])).push(-n,i),r&&((t.contentHooks||(t.contentHooks=[])).push(n,r),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,r)),s&&(t.viewHooks||(t.viewHooks=[])).push(-n,s),o&&((t.viewHooks||(t.viewHooks=[])).push(n,o),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,o)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function on(t,e,n){cn(t,e,3,n)}function an(t,e,n,i){(3&t[2])===n&&cn(t,e,n,i)}function ln(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function cn(t,e,n,i){const r=null!=i?i:-1,s=e.length-1;let o=0;for(let a=void 0!==i?65535&t[18]:0;a<s;a++)if("number"==typeof e[a+1]){if(o=e[a],null!=i&&o>=i)break}else e[a]<0&&(t[18]+=65536),(o<r||-1==r)&&(hn(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function hn(t,e,n,i){const r=n[i]<0,s=n[i+1],o=t[r?-n[i]:n[i]];if(r){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const un=-1;class dn{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function fn(t,e,n){const i=pe(t);let r=0;for(;r<n.length;){const s=n[r];if("number"==typeof s){if(0!==s)break;r++;const o=n[r++],a=n[r++],l=n[r++];i?t.setAttribute(e,a,l,o):e.setAttributeNS(o,a,l)}else{const o=s,a=n[++r];gn(o)?i&&t.setProperty(e,o,a):i?t.setAttribute(e,o,a):e.setAttribute(o,a),r++}}return r}function pn(t){return 3===t||4===t||6===t}function gn(t){return 64===t.charCodeAt(0)}function mn(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let i=0;i<e.length;i++){const r=e[i];"number"==typeof r?n=r:0===n||vn(t,n,r,null,-1===n||2===n?e[++i]:null)}}return t}function vn(t,e,n,i,r){let s=0,o=t.length;if(-1===e)o=-1;else for(;s<t.length;){const n=t[s++];if("number"==typeof n){if(n===e){o=-1;break}if(n>e){o=s-1;break}}}for(;s<t.length;){const e=t[s];if("number"==typeof e)break;if(e===n){if(null===i)return void(null!==r&&(t[s+1]=r));if(i===t[s+1])return void(t[s+2]=r)}s++,null!==i&&s++,null!==r&&s++}-1!==o&&(t.splice(o,0,e),s=o+1),t.splice(s++,0,n),null!==i&&t.splice(s++,0,i),null!==r&&t.splice(s++,0,r)}function yn(t){return t!==un}function _n(t){return 32767&t}function bn(t,e){let n=t>>16,i=e;for(;n>0;)i=i[15],n--;return i}let wn=!0;function Cn(t){const e=wn;return wn=t,e}let xn=0;function Sn(t,e){const n=Tn(t,e);if(-1!==n)return n;const i=e[1];i.firstCreatePass&&(t.injectorIndex=e.length,kn(i.data,t),kn(e,null),kn(i.blueprint,null));const r=En(t,e),s=t.injectorIndex;if(yn(r)){const t=_n(r),n=bn(r,e),i=n[1].data;for(let r=0;r<8;r++)e[s+r]=n[t+r]|i[t+r]}return e[s+8]=r,s}function kn(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Tn(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function En(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,i=null,r=e;for(;null!==r;){const t=r[1],e=t.type;if(i=2===e?t.declTNode:1===e?r[6]:null,null===i)return un;if(n++,r=r[15],-1!==i.injectorIndex)return i.injectorIndex|n<<16}return un}function On(t,e,n){!function(t,e,n){let i;"string"==typeof n?i=n.charCodeAt(0)||0:n.hasOwnProperty($t)&&(i=n[$t]),null==i&&(i=n[$t]=xn++);const r=255&i;e.data[t+(r>>5)]|=1<<r}(t,e,n)}function Pn(t,e,n){if(n&bt.Optional)return t;ht(e,"NodeInjector")}function An(t,e,n,i){if(n&bt.Optional&&void 0===i&&(i=null),0==(n&(bt.Self|bt.Host))){const r=t[9],s=Ct(void 0);try{return r?r.get(e,i,n&bt.Optional):xt(e,i,n&bt.Optional)}finally{Ct(s)}}return Pn(i,e,n)}function Mn(t,e,n,i=bt.Default,r){if(null!==t){const s=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty($t)?t[$t]:void 0;return"number"==typeof e?e>=0?255&e:Dn:e}(n);if("function"==typeof s){if(!We(e,t,i))return i&bt.Host?Pn(r,n,i):An(e,n,i,r);try{const t=s(i);if(null!=t||i&bt.Optional)return t;ht(n)}finally{Ze()}}else if("number"==typeof s){let r=null,o=Tn(t,e),a=un,l=i&bt.Host?e[16][6]:null;for((-1===o||i&bt.SkipSelf)&&(a=-1===o?En(t,e):e[o+8],a!==un&&Nn(i,!1)?(r=e[1],o=_n(a),e=bn(a,e)):o=-1);-1!==o;){const t=e[1];if(jn(s,o,t.data)){const t=Rn(o,e,n,r,i,l);if(t!==In)return t}a=e[o+8],a!==un&&Nn(i,e[1].data[o+8]===l)&&jn(s,o,e)?(r=t,o=_n(a),e=bn(a,e)):o=-1}}}return An(e,n,i,r)}const In={};function Dn(){return new Bn(Me(),Oe())}function Rn(t,e,n,i,r,s){const o=e[1],a=o.data[t+8],l=Ln(a,o,n,null==i?ne(a)&&wn:i!=o&&0!=(3&a.type),r&bt.Host&&s===a);return null!==l?Fn(e,o,l,a):In}function Ln(t,e,n,i,r){const s=t.providerIndexes,o=e.data,a=1048575&s,l=t.directiveStart,c=s>>20,h=r?a+c:t.directiveEnd;for(let u=i?a:a+c;u<h;u++){const t=o[u];if(u<l&&n===t||u>=l&&t.type===n)return u}if(r){const t=o[l];if(t&&re(t)&&t.type===n)return l}return null}function Fn(t,e,n,i){let r=t[n];const s=e.data;if(r instanceof dn){const o=r;o.resolving&&function(t,e){throw new at("200",`Circular dependency in DI detected for ${t}`)}(ct(s[n]));const a=Cn(o.canSeeViewProviders);o.resolving=!0;const l=o.injectImpl?Ct(o.injectImpl):null;We(t,i,bt.Default);try{r=t[n]=o.factory(void 0,s,t,i),e.firstCreatePass&&n>=i.directiveStart&&function(t,e,n){const{ngOnChanges:i,ngOnInit:r,ngDoCheck:s}=e.type.prototype;if(i){const i=le(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,i),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,i)}r&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,r),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,s))}(n,s[n],e)}finally{null!==l&&Ct(l),Cn(a),o.resolving=!1,Ze()}}return r}function jn(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Nn(t,e){return!(t&bt.Self||t&bt.Host&&e)}class Bn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Mn(this._tNode,this._lView,t,void 0,e)}}function $n(t){return St(()=>{const e=t.prototype.constructor,n=e[Bt]||zn(e),i=Object.prototype;let r=Object.getPrototypeOf(t.prototype).constructor;for(;r&&r!==i;){const t=r[Bt]||zn(r);if(t&&t!==n)return t;r=Object.getPrototypeOf(r)}return t=>new t})}function zn(t){return ot(t)?()=>{const e=zn(st(t));return e&&e()}:se(t)}function Vn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let i=0;for(;i<t;){const r=n[i];if(pn(r))break;if(0===r)i+=2;else if("number"==typeof r)for(i++;i<t&&"string"==typeof n[i];)i++;else{if(r===e)return n[i+1];i+=2}}}return null}(Me(),t)}const Gn="__parameters__";function Un(t,e,n){return St(()=>{const i=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function r(...t){if(this instanceof r)return i.apply(this,t),this;const e=new r(...t);return n.annotation=e,n;function n(t,n,i){const r=t.hasOwnProperty(Gn)?t[Gn]:Object.defineProperty(t,Gn,{value:[]})[Gn];for(;r.length<=i;)r.push(null);return(r[i]=r[i]||[]).push(e),t}}return n&&(r.prototype=Object.create(n.prototype)),r.prototype.ngMetadataName=t,r.annotationCls=r,r})}const Hn=function(){return Un("Attribute",t=>({attributeName:t,__NG_ELEMENT_ID__:()=>Vn(t)}))}();class Wn{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=ut({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Xn=new Wn("AnalyzeForEntryComponents"),qn=Function;function Yn(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let i=t[n];Array.isArray(i)?(e===t&&(e=t.slice(0,n)),Yn(i,e)):e!==t&&e.push(i)}return e}function Kn(t,e){t.forEach(t=>Array.isArray(t)?Kn(t,e):e(t))}function Zn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Qn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Jn(t,e){const n=[];for(let i=0;i<t;i++)n.push(e);return n}function ti(t,e,n){let i=ni(t,e);return i>=0?t[1|i]=n:(i=~i,function(t,e,n,i){let r=t.length;if(r==e)t.push(n,i);else if(1===r)t.push(i,t[0]),t[0]=n;else{for(r--,t.push(t[r-1],t[r]);r>e;)t[r]=t[r-2],r--;t[e]=n,t[e+1]=i}}(t,i,e,n)),i}function ei(t,e){const n=ni(t,e);if(n>=0)return t[1|n]}function ni(t,e){return function(t,e,n){let i=0,r=t.length>>1;for(;r!==i;){const n=i+(r-i>>1),s=t[n<<1];if(e===s)return n<<1;s>e?r=n:i=n+1}return~(r<<1)}(t,e)}const ii={},ri=/\n/gm,si="__source",oi=J({provide:String,useValue:J});let ai;function li(t){const e=ai;return ai=t,e}function ci(t,e=bt.Default){if(void 0===ai)throw new Error("inject() must be called from an injection context");return null===ai?xt(t,void 0,e):ai.get(t,e&bt.Optional?null:void 0,e)}function hi(t,e=bt.Default){return(wt||ci)(st(t),e)}const ui=hi;function di(t){const e=[];for(let n=0;n<t.length;n++){const i=st(t[n]);if(Array.isArray(i)){if(0===i.length)throw new Error("Arguments array must have arguments.");let t,n=bt.Default;for(let e=0;e<i.length;e++){const r=i[e],s=r.__NG_DI_FLAG__;"number"==typeof s?-1===s?t=r.token:n|=s:t=r}e.push(hi(t,n))}else e.push(hi(i))}return e}function fi(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const pi=fi(Un("Inject",t=>({token:t})),-1),gi=fi(Un("Optional"),8),mi=fi(Un("SkipSelf"),4);class vi{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function yi(t){return t instanceof vi?t.changingThisBreaksApplicationSecurity:t}const _i=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,bi=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var wi=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function Ci(t){const e=function(){const t=Oe();return t&&t[12]}();return e?e.sanitize(wi.URL,t)||"":function(t,e){const n=function(t){return t instanceof vi&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}(t,"URL")?yi(t):(n=lt(t),(n=String(n)).match(_i)||n.match(bi)?n:"unsafe:"+n);var n}function xi(t,e){t.__ngContext__=e}function Si(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function ki(t){return t.ngDebugContext}function Ti(t){return t.ngOriginalError}function Ei(t,...e){t.error(...e)}class Oi{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),i=function(t){return t.ngErrorLogger||Ei}(t);i(this._console,"ERROR",t),e&&i(this._console,"ORIGINAL ERROR",e),n&&i(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?ki(t)?ki(t):this._findContext(Ti(t)):null}_findOriginalError(t){let e=Ti(t);for(;e&&Ti(e);)e=Ti(e);return e}}const Pi=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Mt))();function Ai(t){return t instanceof Function?t():t}var Mi=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Ii(t,e){return(void 0)(t,e)}function Di(t){const e=t[3];return te(e)?e[3]:e}function Ri(t){return Fi(t[13])}function Li(t){return Fi(t[4])}function Fi(t){for(;null!==t&&!te(t);)t=t[4];return t}function ji(t,e,n,i,r){if(null!=i){let s,o=!1;te(i)?s=i:Jt(i)&&(o=!0,i=i[0]);const a=me(i);0===t&&null!==n?null==r?Hi(e,n,a):Ui(e,n,a,r||null,!0):1===t&&null!==n?Ui(e,n,a,r||null,!0):2===t?function(t,e,n){const i=Xi(t,e);i&&function(t,e,n,i){pe(t)?t.removeChild(e,n,i):e.removeChild(n)}(t,i,e,n)}(e,a,o):3===t&&e.destroyNode(a),null!=s&&function(t,e,n,i,r){const s=n[7];s!==me(n)&&ji(e,t,i,s,r);for(let o=Qt;o<n.length;o++){const r=n[o];er(r[1],r,t,e,i,s)}}(e,t,s,n,r)}}function Ni(t,e,n){return pe(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Bi(t,e){const n=t[9],i=n.indexOf(e),r=e[3];1024&e[2]&&(e[2]&=-1025,ke(r,-1)),n.splice(i,1)}function $i(t,e){if(t.length<=Qt)return;const n=Qt+e,i=t[n];if(i){const s=i[17];null!==s&&s!==t&&Bi(s,i),e>0&&(t[n-1][4]=i[4]);const o=Qn(t,Qt+e);er(i[1],r=i,r[11],2,null,null),r[0]=null,r[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),i[3]=null,i[4]=null,i[2]&=-129}var r;return i}function zi(t,e){if(!(256&e[2])){const n=e[11];pe(n)&&n.destroyNode&&er(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Vi(t[1],t);for(;e;){let n=null;if(Jt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)Jt(e)&&Vi(e[1],e),e=e[3];null===e&&(e=t),Jt(e)&&Vi(e[1],e),n=e&&e[4]}e=n}}(e)}}function Vi(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let i=0;i<n.length;i+=2){const t=e[n[i]];if(!(t instanceof dn)){const e=n[i+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2){const i=t[e[n]],r=e[n+1];try{r.call(i)}finally{}}else try{e.call(t)}finally{}}}}(t,e),function(t,e){const n=t.cleanup,i=e[7];let r=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const t=n[s+1],o="function"==typeof t?t(e):me(e[t]),a=i[r=n[s+2]],l=n[s+3];"boolean"==typeof l?o.removeEventListener(n[s],a,l):l>=0?i[r=l]():i[r=-l].unsubscribe(),s+=2}else{const t=i[r=n[s+1]];n[s].call(t)}if(null!==i){for(let t=r+1;t<i.length;t++)(0,i[t])();e[7]=null}}(t,e),1===e[1].type&&pe(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&te(e[3])){n!==e[3]&&Bi(n,e);const i=e[19];null!==i&&i.detachView(t)}}}function Gi(t,e,n){return function(t,e,n){let i=e;for(;null!==i&&40&i.type;)i=(e=i).parent;if(null===i)return n[0];if(2&i.flags){const e=t.data[i.directiveStart].encapsulation;if(e===Tt.None||e===Tt.Emulated)return null}return ye(i,n)}(t,e.parent,n)}function Ui(t,e,n,i,r){pe(t)?t.insertBefore(e,n,i,r):e.insertBefore(n,i,r)}function Hi(t,e,n){pe(t)?t.appendChild(e,n):e.appendChild(n)}function Wi(t,e,n,i,r){null!==i?Ui(t,e,n,i,r):Hi(t,e,n)}function Xi(t,e){return pe(t)?t.parentNode(e):e.parentNode}function qi(t,e,n){return Yi(t,e,n)}let Yi=function(t,e,n){return 40&t.type?ye(t,n):null};function Ki(t,e,n,i){const r=Gi(t,i,e),s=e[11],o=qi(i.parent||e[6],i,e);if(null!=r)if(Array.isArray(n))for(let a=0;a<n.length;a++)Wi(s,r,n[a],o,!1);else Wi(s,r,n,o,!1)}function Zi(t,e){if(null!==e){const n=e.type;if(3&n)return ye(e,t);if(4&n)return Ji(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Zi(t,n);{const n=t[e.index];return te(n)?Ji(-1,n):me(n)}}if(32&n)return Ii(e,t)()||me(t[e.index]);{const n=Qi(t,e);return null!==n?Array.isArray(n)?n[0]:Zi(Di(t[16]),n):Zi(t,e.next)}}return null}function Qi(t,e){return null!==e?t[16][6].projection[e.projection]:null}function Ji(t,e){const n=Qt+t+1;if(n<e.length){const t=e[n],i=t[1].firstChild;if(null!==i)return Zi(t,i)}return e[7]}function tr(t,e,n,i,r,s,o){for(;null!=n;){const a=i[n.index],l=n.type;if(o&&0===e&&(a&&xi(me(a),i),n.flags|=4),64!=(64&n.flags))if(8&l)tr(t,e,n.child,i,r,s,!1),ji(e,t,r,a,s);else if(32&l){const o=Ii(n,i);let l;for(;l=o();)ji(e,t,r,l,s);ji(e,t,r,a,s)}else 16&l?nr(t,e,i,n,r,s):ji(e,t,r,a,s);n=o?n.projectionNext:n.next}}function er(t,e,n,i,r,s){tr(n,i,t.firstChild,e,r,s,!1)}function nr(t,e,n,i,r,s){const o=n[16],a=o[6].projection[i.projection];if(Array.isArray(a))for(let l=0;l<a.length;l++)ji(e,t,r,a[l],s);else tr(t,e,a,o[3],r,s,!0)}function ir(t,e,n){pe(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function rr(t,e,n){pe(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function sr(t,e,n){let i=t.length;for(;;){const r=t.indexOf(e,n);if(-1===r)return r;if(0===r||t.charCodeAt(r-1)<=32){const n=e.length;if(r+n===i||t.charCodeAt(r+n)<=32)return r}n=r+1}}const or="ng-template";function ar(t,e,n){let i=0;for(;i<t.length;){let r=t[i++];if(n&&"class"===r){if(r=t[i],-1!==sr(r.toLowerCase(),e,0))return!0}else if(1===r){for(;i<t.length&&"string"==typeof(r=t[i++]);)if(r.toLowerCase()===e)return!0;return!1}}return!1}function lr(t){return 4===t.type&&t.value!==or}function cr(t,e,n){return e===(4!==t.type||n?t.value:or)}function hr(t,e,n){let i=4;const r=t.attrs||[],s=function(t){for(let e=0;e<t.length;e++)if(pn(t[e]))return e;return t.length}(r);let o=!1;for(let a=0;a<e.length;a++){const l=e[a];if("number"!=typeof l){if(!o)if(4&i){if(i=2|1&i,""!==l&&!cr(t,l,n)||""===l&&1===e.length){if(ur(i))return!1;o=!0}}else{const c=8&i?l:e[++a];if(8&i&&null!==t.attrs){if(!ar(t.attrs,c,n)){if(ur(i))return!1;o=!0}continue}const h=dr(8&i?"class":l,r,lr(t),n);if(-1===h){if(ur(i))return!1;o=!0;continue}if(""!==c){let t;t=h>s?"":r[h+1].toLowerCase();const e=8&i?t:null;if(e&&-1!==sr(e,c,0)||2&i&&c!==t){if(ur(i))return!1;o=!0}}}}else{if(!o&&!ur(i)&&!ur(l))return!1;if(o&&ur(l))continue;o=!1,i=l|1&i}}return ur(i)||o}function ur(t){return 0==(1&t)}function dr(t,e,n,i){if(null===e)return-1;let r=0;if(i||!n){let n=!1;for(;r<e.length;){const i=e[r];if(i===t)return r;if(3===i||6===i)n=!0;else{if(1===i||2===i){let t=e[++r];for(;"string"==typeof t;)t=e[++r];continue}if(4===i)break;if(0===i){r+=4;continue}}r+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const i=t[n];if("number"==typeof i)return-1;if(i===e)return n;n++}return-1}(e,t)}function fr(t,e,n=!1){for(let i=0;i<e.length;i++)if(hr(t,e[i],n))return!0;return!1}function pr(t,e){t:for(let n=0;n<e.length;n++){const i=e[n];if(t.length===i.length){for(let e=0;e<t.length;e++)if(t[e]!==i[e])continue t;return!0}}return!1}function gr(t,e){return t?":not("+e.trim()+")":e}function mr(t){let e=t[0],n=1,i=2,r="",s=!1;for(;n<t.length;){let o=t[n];if("string"==typeof o)if(2&i){const e=t[++n];r+="["+o+(e.length>0?'="'+e+'"':"")+"]"}else 8&i?r+="."+o:4&i&&(r+=" "+o);else""===r||ur(o)||(e+=gr(s,r),r=""),i=o,s=s||!ur(i);n++}return""!==r&&(e+=gr(s,r)),e}const vr={};function yr(t){_r(Pe(),Oe(),Je()+t,Fe())}function _r(t,e,n,i){if(!i)if(3==(3&e[2])){const i=t.preOrderCheckHooks;null!==i&&on(e,i,n)}else{const i=t.preOrderHooks;null!==i&&an(e,i,0,n)}tn(n)}function br(t,e){return t<<17|e<<2}function wr(t){return t>>17&32767}function Cr(t){return 2|t}function xr(t){return(131068&t)>>2}function Sr(t,e){return-131069&t|e<<2}function kr(t){return 1|t}function Tr(t,e){const n=t.contentQueries;if(null!==n)for(let i=0;i<n.length;i+=2){const r=n[i],s=n[i+1];if(-1!==s){const n=t.data[s];Ue(r),n.contentQueries(2,e[s],s)}}}function Er(t,e,n,i,r,s,o,a,l,c){const h=e.blueprint.slice();return h[0]=r,h[2]=140|i,Se(h),h[3]=h[15]=t,h[8]=n,h[10]=o||t&&t[10],h[11]=a||t&&t[11],h[12]=l||t&&t[12]||null,h[9]=c||t&&t[9]||null,h[6]=s,h[16]=2==e.type?t[16]:h,h}function Or(t,e,n,i,r){let s=t.data[e];if(null===s)s=function(t,e,n,i,r){const s=Ie(),o=Re(),a=t.data[e]=function(t,e,n,i,r,s){return{type:n,index:i,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:r,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,e,i,r);return null===t.firstChild&&(t.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(t,e,n,i,r),Te.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=i,s.attrs=r;const t=function(){const t=Te.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();s.injectorIndex=null===t?-1:t.injectorIndex}return De(s,!0),s}function Pr(t,e,n,i){if(0===n)return-1;const r=e.length;for(let s=0;s<n;s++)e.push(i),t.blueprint.push(i),t.data.push(null);return r}function Ar(t,e,n){Xe(e);try{const i=t.viewQuery;null!==i&&os(1,i,n);const r=t.template;null!==r&&Dr(t,e,r,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&Tr(t,e),t.staticViewQueries&&os(2,t.viewQuery,n);const s=t.components;null!==s&&function(t,e){for(let n=0;n<e.length;n++)es(t,e[n])}(e,s)}catch(i){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),i}finally{e[2]&=-5,Qe()}}function Mr(t,e,n,i){const r=e[2];if(256==(256&r))return;Xe(e);const s=Fe();try{Se(e),Te.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Dr(t,e,n,2,i);const o=3==(3&r);if(!s)if(o){const n=t.preOrderCheckHooks;null!==n&&on(e,n,null)}else{const n=t.preOrderHooks;null!==n&&an(e,n,0,null),ln(e,0)}if(function(t){for(let e=Ri(t);null!==e;e=Li(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],i=n[3];0==(1024&n[2])&&ke(i,1),n[2]|=1024}}}(e),function(t){for(let e=Ri(t);null!==e;e=Li(e))for(let t=Qt;t<e.length;t++){const n=e[t],i=n[1];Ce(n)&&Mr(i,n,i.template,n[8])}}(e),null!==t.contentQueries&&Tr(t,e),!s)if(o){const n=t.contentCheckHooks;null!==n&&on(e,n)}else{const n=t.contentHooks;null!==n&&an(e,n,1),ln(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const i=n[t];if(i<0)tn(~i);else{const r=i,s=n[++t],o=n[++t];$e(s,r),o(2,e[r])}}}finally{tn(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Jr(t,e[n])}(e,a);const l=t.viewQuery;if(null!==l&&os(2,l,i),!s)if(o){const n=t.viewCheckHooks;null!==n&&on(e,n)}else{const n=t.viewHooks;null!==n&&an(e,n,2),ln(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),s||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,ke(e[3],-1))}finally{Qe()}}function Ir(t,e,n,i){const r=e[10],s=!Fe(),o=we(e);try{s&&!o&&r.begin&&r.begin(),o&&Ar(t,e,i),Mr(t,e,n,i)}finally{s&&!o&&r.end&&r.end()}}function Dr(t,e,n,i,r){const s=Je(),o=2&i;try{tn(-1),o&&e.length>Zt&&_r(t,e,Zt,Fe()),n(i,r)}finally{tn(s)}}function Rr(t,e,n){if(ee(e)){const i=e.directiveEnd;for(let r=e.directiveStart;r<i;r++){const e=t.data[r];e.contentQueries&&e.contentQueries(1,n[r],r)}}}function Lr(t,e,n){Ee()&&(function(t,e,n,i){const r=n.directiveStart,s=n.directiveEnd;t.firstCreatePass||Sn(n,e),xi(i,e);const o=n.initialInputs;for(let a=r;a<s;a++){const i=t.data[a],s=re(i);s&&Yr(e,n,i);const l=Fn(e,t,a,n);xi(l,e),null!==o&&Kr(0,a-r,l,i,0,o),s&&(be(n.index,e)[8]=l)}}(t,e,n,ye(n,e)),128==(128&n.flags)&&function(t,e,n){const i=n.directiveStart,r=n.directiveEnd,s=n.index,o=Te.lFrame.currentDirectiveIndex;try{tn(s);for(let n=i;n<r;n++){const i=t.data[n],r=e[n];ze(n),null===i.hostBindings&&0===i.hostVars&&null===i.hostAttrs||Ur(i,r)}}finally{tn(-1),ze(o)}}(t,e,n))}function Fr(t,e,n=ye){const i=e.localNames;if(null!==i){let r=e.index+1;for(let s=0;s<i.length;s+=2){const o=i[s+1],a=-1===o?n(e,t):t[o];t[r++]=a}}}function jr(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Nr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Nr(t,e,n,i,r,s,o,a,l,c){const h=Zt+i,u=h+r,d=function(t,e){const n=[];for(let i=0;i<e;i++)n.push(i<t?null:vr);return n}(h,u),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,h),bindingStartIndex:h,expandoStartIndex:u,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:l,consts:f,incompleteFirstPass:!1}}function Br(t,e,n,i){const r=ls(e);null===n?r.push(i):(r.push(n),t.firstCreatePass&&cs(t).push(i,r.length-1))}function $r(t,e,n){for(let i in t)if(t.hasOwnProperty(i)){const r=t[i];(n=null===n?{}:n).hasOwnProperty(i)?n[i].push(e,r):n[i]=[e,r]}return n}function zr(t,e,n,i,r,s,o,a){const l=ye(e,n);let c,h=e.inputs;var u;!a&&null!=h&&(c=h[i])?(ds(t,n,c,i,r),ne(e)&&function(t,e){const n=be(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(i="class"===(u=i)?"className":"for"===u?"htmlFor":"formaction"===u?"formAction":"innerHtml"===u?"innerHTML":"readonly"===u?"readOnly":"tabindex"===u?"tabIndex":u,r=null!=o?o(r,e.value||"",i):r,pe(s)?s.setProperty(l,i,r):gn(i)||(l.setProperty?l.setProperty(i,r):l[i]=r))}function Vr(t,e,n,i){let r=!1;if(Ee()){const s=function(t,e,n){const i=t.directiveRegistry;let r=null;if(i)for(let s=0;s<i.length;s++){const o=i[s];fr(n,o.selectors,!1)&&(r||(r=[]),On(Sn(n,e),t,o.type),re(o)?(Hr(t,n),r.unshift(o)):r.push(o))}return r}(t,e,n),o=null===i?null:{"":-1};if(null!==s){r=!0,Xr(n,t.data.length,s.length);for(let t=0;t<s.length;t++){const e=s[t];e.providersResolver&&e.providersResolver(e)}let i=!1,a=!1,l=Pr(t,e,s.length,null);for(let r=0;r<s.length;r++){const c=s[r];n.mergedAttrs=mn(n.mergedAttrs,c.hostAttrs),qr(t,n,e,l,c),Wr(l,c,o),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const h=c.type.prototype;!i&&(h.ngOnChanges||h.ngOnInit||h.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),i=!0),a||!h.ngOnChanges&&!h.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),l++}!function(t,e){const n=e.directiveEnd,i=t.data,r=e.attrs,s=[];let o=null,a=null;for(let l=e.directiveStart;l<n;l++){const t=i[l],n=t.inputs,c=null===r||lr(e)?null:Zr(n,r);s.push(c),o=$r(n,l,o),a=$r(t.outputs,l,a)}null!==o&&(o.hasOwnProperty("class")&&(e.flags|=16),o.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=s,e.inputs=o,e.outputs=a}(t,n)}o&&function(t,e,n){if(e){const i=t.localNames=[];for(let t=0;t<e.length;t+=2){const r=n[e[t+1]];if(null==r)throw new at("301",`Export of name '${e[t+1]}' not found!`);i.push(e[t],r)}}}(n,i,o)}return n.mergedAttrs=mn(n.mergedAttrs,n.attrs),r}function Gr(t,e,n,i,r,s){const o=s.hostBindings;if(o){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const s=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(i,r,o)}}function Ur(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Hr(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Wr(t,e,n){if(n){if(e.exportAs)for(let i=0;i<e.exportAs.length;i++)n[e.exportAs[i]]=t;re(e)&&(n[""]=t)}}function Xr(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function qr(t,e,n,i,r){t.data[i]=r;const s=r.factory||(r.factory=se(r.type)),o=new dn(s,re(r),null);t.blueprint[i]=o,n[i]=o,Gr(t,e,0,i,Pr(t,n,r.hostVars,vr),r)}function Yr(t,e,n){const i=ye(e,t),r=jr(n),s=t[10],o=ns(t,Er(t,r,null,n.onPush?64:16,i,e,s,s.createRenderer(i,n),null,null));t[e.index]=o}function Kr(t,e,n,i,r,s){const o=s[e];if(null!==o){const t=i.setInput;for(let e=0;e<o.length;){const r=o[e++],s=o[e++],a=o[e++];null!==t?i.setInput(n,a,r,s):n[s]=a}}}function Zr(t,e){let n=null,i=0;for(;i<e.length;){const r=e[i];if(0!==r)if(5!==r){if("number"==typeof r)break;t.hasOwnProperty(r)&&(null===n&&(n=[]),n.push(r,t[r],e[i+1])),i+=2}else i+=2;else i+=4}return n}function Qr(t,e,n,i){return new Array(t,!0,!1,e,null,0,i,n,null,null)}function Jr(t,e){const n=be(e,t);if(Ce(n)){const t=n[1];80&n[2]?Mr(t,n,t.template,n[8]):n[5]>0&&ts(n)}}function ts(t){for(let n=Ri(t);null!==n;n=Li(n))for(let t=Qt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Mr(t,e,t.template,e[8])}else e[5]>0&&ts(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const i=be(e[n],t);Ce(i)&&i[5]>0&&ts(i)}}function es(t,e){const n=be(e,t),i=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(i,n),Ar(i,n,n[8])}function ns(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function is(t){for(;t;){t[2]|=64;const e=Di(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function rs(t,e,n){const i=e[10];i.begin&&i.begin();try{Mr(t,e,t.template,n)}catch(r){throw us(e,r),r}finally{i.end&&i.end()}}function ss(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],i=Si(n),r=i[1];Ir(r,i,r.template,n)}}(t[8])}function os(t,e,n){Ue(0),e(t,n)}const as=(()=>Promise.resolve(null))();function ls(t){return t[7]||(t[7]=[])}function cs(t){return t.cleanup||(t.cleanup=[])}function hs(t,e,n){return(null===t||re(t))&&(n=function(t){for(;Array.isArray(t);){if("object"==typeof t[1])return t;t=t[0]}return null}(n[e.index])),n[11]}function us(t,e){const n=t[9],i=n?n.get(Oi,null):null;i&&i.handleError(e)}function ds(t,e,n,i,r){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],l=e[o],c=t.data[o];null!==c.setInput?c.setInput(l,r,i,a):l[a]=r}}function fs(t,e,n){let i=n?t.styles:null,r=n?t.classes:null,s=0;if(null!==e)for(let o=0;o<e.length;o++){const t=e[o];"number"==typeof t?s=t:1==s?r=nt(r,t):2==s&&(i=nt(i,t+": "+e[++o]+";"))}n?t.styles=i:t.stylesWithoutHost=i,n?t.classes=r:t.classesWithoutHost=r}const ps=new Wn("INJECTOR",-1);class gs{get(t,e=ii){if(e===ii){const e=new Error(`NullInjectorError: No provider for ${et(t)}!`);throw e.name="NullInjectorError",e}return e}}const ms=new Wn("Set Injector scope."),vs={},ys={};let _s;function bs(){return void 0===_s&&(_s=new gs),_s}function ws(t,e=null,n=null,i){return new Cs(t,n,e||bs(),i)}class Cs{constructor(t,e,n,i=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const r=[];e&&Kn(e,n=>this.processProvider(n,t,e)),Kn([t],t=>this.processInjectorType(t,[],r)),this.records.set(ps,ks(void 0,this));const s=this.records.get(ms);this.scope=null!=s?s.value:null,this.source=i||("object"==typeof t?null:et(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=ii,n=bt.Default){this.assertNotDestroyed();const i=li(this);try{if(!(n&bt.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(r=t)||"object"==typeof r&&r instanceof Wn)&&ft(t);e=n&&this.injectableDefInScope(n)?ks(xs(t),vs):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&bt.Self?bs():this.parent).get(t,e=n&bt.Optional&&e===ii?null:e)}catch(s){if("NullInjectorError"===s.name){if((s.ngTempTokenPath=s.ngTempTokenPath||[]).unshift(et(t)),i)throw s;return function(t,e,n,i){const r=t.ngTempTokenPath;throw e[si]&&r.unshift(e[si]),t.message=function(t,e,n,i=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let r=et(e);if(Array.isArray(e))r=e.map(et).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let i=e[n];t.push(n+":"+("string"==typeof i?JSON.stringify(i):et(i)))}r=`{${t.join(", ")}}`}return`${n}${i?"("+i+")":""}[${r}]: ${t.replace(ri,"\n  ")}`}("\n"+t.message,r,n,i),t.ngTokenPath=r,t.ngTempTokenPath=null,t}(s,t,"R3InjectorError",this.source)}throw s}finally{li(i)}var r}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(et(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=st(t)))return!1;let i=gt(t);const r=null==i&&t.ngModule||void 0,s=void 0===r?t:r,o=-1!==n.indexOf(s);if(void 0!==r&&(i=gt(r)),null==i)return!1;if(null!=i.imports&&!o){let t;n.push(s);try{Kn(i.imports,i=>{this.processInjectorType(i,e,n)&&(void 0===t&&(t=[]),t.push(i))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:i}=t[e];Kn(i,t=>this.processProvider(t,n,i||Dt))}}this.injectorDefTypes.add(s);const a=se(s)||(()=>new s);this.records.set(s,ks(a,vs));const l=i.providers;if(null!=l&&!o){const e=t;Kn(l,t=>this.processProvider(t,e,l))}return void 0!==r&&void 0!==t.providers}processProvider(t,e,n){let i=Es(t=st(t))?t:st(t&&t.provide);const r=function(t,e,n){return Ts(t)?ks(void 0,t.useValue):ks(Ss(t),vs)}(t);if(Es(t)||!0!==t.multi)this.records.get(i);else{let e=this.records.get(i);e||(e=ks(void 0,vs,!0),e.factory=()=>di(e.multi),this.records.set(i,e)),i=t,e.multi.push(t)}this.records.set(i,r)}hydrate(t,e){var n;return e.value===vs&&(e.value=ys,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){if(!t.providedIn)return!1;const e=st(t.providedIn);return"string"==typeof e?"any"===e||e===this.scope:this.injectorDefTypes.has(e)}}function xs(t){const e=ft(t),n=null!==e?e.factory:se(t);if(null!==n)return n;if(t instanceof Wn)throw new Error(`Token ${et(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=Jn(e,"?");throw new Error(`Can't resolve all parameters for ${et(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[mt]||t[yt]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Ss(t,e,n){let i;if(Es(t)){const e=st(t);return se(e)||xs(e)}if(Ts(t))i=()=>st(t.useValue);else if((r=t)&&r.useFactory)i=()=>t.useFactory(...di(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))i=()=>hi(st(t.useExisting));else{const e=st(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return se(e)||xs(e);i=()=>new e(...di(t.deps))}var r;return i}function ks(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ts(t){return null!==t&&"object"==typeof t&&oi in t}function Es(t){return"function"==typeof t}const Os=function(t,e,n){return function(t,e=null,n=null,i){const r=ws(t,e,n,i);return r._resolveInjectorDefTypes(),r}({name:n},e,t,n)};let Ps=(()=>{class t{static create(t,e){return Array.isArray(t)?Os(t,e,""):Os(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=ii,t.NULL=new gs,t.\u0275prov=ut({token:t,providedIn:"any",factory:()=>hi(ps)}),t.__NG_ELEMENT_ID__=-1,t})();function As(t,e){sn(Si(t)[1],Me())}function Ms(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const i=[t];for(;e;){let r;if(re(t))r=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");r=e.\u0275dir}if(r){if(n){i.push(r);const e=t;e.inputs=Is(t.inputs),e.declaredInputs=Is(t.declaredInputs),e.outputs=Is(t.outputs);const n=r.hostBindings;n&&Ls(t,n);const s=r.viewQuery,o=r.contentQueries;if(s&&Ds(t,s),o&&Rs(t,o),tt(t.inputs,r.inputs),tt(t.declaredInputs,r.declaredInputs),tt(t.outputs,r.outputs),re(r)&&r.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(r.data.animation)}}const e=r.features;if(e)for(let i=0;i<e.length;i++){const r=e[i];r&&r.ngInherit&&r(t),r===Ms&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let i=t.length-1;i>=0;i--){const r=t[i];r.hostVars=e+=r.hostVars,r.hostAttrs=mn(r.hostAttrs,n=mn(n,r.hostAttrs))}}(i)}function Is(t){return t===It?{}:t===Dt?[]:t}function Ds(t,e){const n=t.viewQuery;t.viewQuery=n?(t,i)=>{e(t,i),n(t,i)}:e}function Rs(t,e){const n=t.contentQueries;t.contentQueries=n?(t,i,r)=>{e(t,i,r),n(t,i,r)}:e}function Ls(t,e){const n=t.hostBindings;t.hostBindings=n?(t,i)=>{e(t,i),n(t,i)}:e}let Fs=null;function js(){if(!Fs){const t=Mt.Symbol;if(t&&t.iterator)Fs=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Fs=n)}}}return Fs}function Ns(t){return!!Bs(t)&&(Array.isArray(t)||!(t instanceof Map)&&js()in t)}function Bs(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function $s(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function zs(t,e,n,i){const r=Oe();return $s(r,Ne(),e)&&(Pe(),function(t,e,n,i,r,s){const o=ye(t,e);!function(t,e,n,i,r,s,o){if(null==s)pe(t)?t.removeAttribute(e,r,n):e.removeAttribute(r);else{const a=null==o?lt(s):o(s,i||"",r);pe(t)?t.setAttribute(e,r,a,n):n?e.setAttributeNS(n,r,a):e.setAttribute(r,a)}}(e[11],o,s,t.value,n,i,r)}(en(),r,t,e,n,i)),zs}function Vs(t,e,n,i){return $s(t,Ne(),n)?e+lt(n)+i:vr}function Gs(t,e,n,i,r,s,o,a){const l=Oe(),c=Pe(),h=t+Zt,u=c.firstCreatePass?function(t,e,n,i,r,s,o,a,l){const c=e.consts,h=Or(e,t,4,o||null,xe(c,a));Vr(e,n,h,xe(c,l)),sn(e,h);const u=h.tViews=Nr(2,h,i,r,s,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,h),u.queries=e.queries.embeddedTView(h)),h}(h,c,l,e,n,i,r,s,o):c.data[h];De(u,!1);const d=l[11].createComment("");Ki(c,l,d,u),xi(d,l),ns(l,l[h]=Qr(d,l,d,u)),ie(u)&&Lr(c,l,u),null!=o&&Fr(l,u,a)}function Us(t){return function(t,e){return t[e]}(Te.lFrame.contextLView,Zt+t)}function Hs(t,e=bt.Default){const n=Oe();return null===n?hi(t,e):Mn(Me(),n,st(t),e)}function Ws(t,e,n){const i=Oe();return $s(i,Ne(),e)&&zr(Pe(),en(),i,t,e,i[11],n,!1),Ws}function Xs(t,e,n,i,r){const s=r?"class":"style";ds(t,n,e.inputs[s],s,i)}function qs(t,e,n,i){const r=Oe(),s=Pe(),o=Zt+t,a=r[11],l=r[o]=Ni(a,e,Te.lFrame.currentNamespace),c=s.firstCreatePass?function(t,e,n,i,r,s,o){const a=e.consts,l=Or(e,t,2,r,xe(a,s));return Vr(e,n,l,xe(a,o)),null!==l.attrs&&fs(l,l.attrs,!1),null!==l.mergedAttrs&&fs(l,l.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,l),l}(o,s,r,0,e,n,i):s.data[o];De(c,!0);const h=c.mergedAttrs;null!==h&&fn(a,l,h);const u=c.classes;null!==u&&rr(a,l,u);const d=c.styles;null!==d&&ir(a,l,d),64!=(64&c.flags)&&Ki(s,r,l,c),0===Te.lFrame.elementDepthCount&&xi(l,r),Te.lFrame.elementDepthCount++,ie(c)&&(Lr(s,r,c),Rr(s,c,r)),null!==i&&Fr(r,c)}function Ys(){let t=Me();Re()?Le():(t=t.parent,De(t,!1));const e=t;Te.lFrame.elementDepthCount--;const n=Pe();n.firstCreatePass&&(sn(n,t),ee(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Xs(n,e,Oe(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Xs(n,e,Oe(),e.stylesWithoutHost,!1)}function Ks(t,e,n,i){qs(t,e,n,i),Ys()}function Zs(t,e,n){const i=Oe(),r=Pe(),s=t+Zt,o=r.firstCreatePass?function(t,e,n,i,r){const s=e.consts,o=xe(s,i),a=Or(e,t,8,"ng-container",o);return null!==o&&fs(a,o,!0),Vr(e,n,a,xe(s,r)),null!==e.queries&&e.queries.elementStart(e,a),a}(s,r,i,e,n):r.data[s];De(o,!0);const a=i[s]=i[11].createComment("");Ki(r,i,a,o),xi(a,i),ie(o)&&(Lr(r,i,o),Rr(r,o,i)),null!=n&&Fr(i,o)}function Qs(){let t=Me();const e=Pe();Re()?Le():(t=t.parent,De(t,!1)),e.firstCreatePass&&(sn(e,t),ee(t)&&e.queries.elementEnd(t))}function Js(){return Oe()}function to(t){return!!t&&"function"==typeof t.then}const eo=function(t){return!!t&&"function"==typeof t.subscribe};function no(t,e,n,i){const r=Oe(),s=Pe(),o=Me();return ro(s,r,r[11],o,t,e,!!n,i),no}function io(t,e){const n=Me(),i=Oe(),r=Pe();return ro(r,i,hs(Ve(r.data),n,i),n,t,e,!1),io}function ro(t,e,n,i,r,s,o,a){const l=ie(i),c=t.firstCreatePass&&cs(t),h=ls(e);let u=!0;if(3&i.type||a){const d=ye(i,e),f=a?a(d):d,p=h.length,g=a?t=>a(me(t[i.index])):i.index;if(pe(n)){let o=null;if(!a&&l&&(o=function(t,e,n,i){const r=t.cleanup;if(null!=r)for(let s=0;s<r.length-1;s+=2){const t=r[s];if(t===n&&r[s+1]===i){const t=e[7],n=r[s+2];return t.length>n?t[n]:null}"string"==typeof t&&(s+=2)}return null}(t,e,r,i.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,u=!1;else{s=oo(i,e,0,s,!1);const t=n.listen(f,r,s);h.push(s,t),c&&c.push(r,g,p,p+1)}}else s=oo(i,e,0,s,!0),f.addEventListener(r,s,o),h.push(s),c&&c.push(r,g,p,o)}else s=oo(i,e,0,s,!1);const d=i.outputs;let f;if(u&&null!==d&&(f=d[r])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(s),o=h.length;h.push(s,t),c&&c.push(r,i.index,o,-(o+1))}}}function so(t,e,n,i){try{return!1!==n(i)}catch(r){return us(t,r),!1}}function oo(t,e,n,i,r){return function n(s){if(s===Function)return i;const o=2&t.flags?be(t.index,e):e;0==(32&e[2])&&is(o);let a=so(e,0,i,s),l=n.__ngNextListenerFn__;for(;l;)a=so(e,0,l,s)&&a,l=l.__ngNextListenerFn__;return r&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function ao(t=1){return function(t){return(Te.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,Te.lFrame.contextLView))[8]}(t)}function lo(t,e){let n=null;const i=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let r=0;r<e.length;r++){const s=e[r];if("*"!==s){if(null===i?fr(t,s,!0):pr(i,s))return r}else n=r}return n}function co(t){const e=Oe()[16][6];if(!e.projection){const n=e.projection=Jn(t?t.length:1,null),i=n.slice();let r=e.child;for(;null!==r;){const e=t?lo(r,t):0;null!==e&&(i[e]?i[e].projectionNext=r:n[e]=r,i[e]=r),r=r.next}}}function ho(t,e=0,n){const i=Oe(),r=Pe(),s=Or(r,Zt+t,16,null,n||null);null===s.projection&&(s.projection=e),Le(),64!=(64&s.flags)&&function(t,e,n){nr(e[11],0,e,n,Gi(t,n,e),qi(n.parent||e[6],n,e))}(r,i,s)}function uo(t,e,n){return fo(t,"",e,"",n),uo}function fo(t,e,n,i,r){const s=Oe(),o=Vs(s,e,n,i);return o!==vr&&zr(Pe(),en(),s,t,o,s[11],r,!1),fo}function po(t,e,n,i,r){const s=t[n+1],o=null===e;let a=i?wr(s):xr(s),l=!1;for(;0!==a&&(!1===l||o);){const n=t[a+1];go(t[a],e)&&(l=!0,t[a+1]=i?kr(n):Cr(n)),a=i?wr(n):xr(n)}l&&(t[n+1]=i?Cr(s):kr(s))}function go(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&ni(t,e)>=0}const mo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function vo(t){return t.substring(mo.key,mo.keyEnd)}function yo(t,e){const n=mo.textEnd;return n===e?-1:(e=mo.keyEnd=function(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}(t,mo.key=e,n),_o(t,e,n))}function _o(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function bo(t,e,n){return xo(t,e,n,!1),bo}function wo(t,e){return xo(t,e,null,!0),wo}function Co(t,e){for(let n=function(t){return function(t){mo.key=0,mo.keyEnd=0,mo.value=0,mo.valueEnd=0,mo.textEnd=t.length}(t),yo(t,_o(t,0,mo.textEnd))}(e);n>=0;n=yo(e,n))ti(t,vo(e),!0)}function xo(t,e,n,i){const r=Oe(),s=Pe(),o=Be(2);s.firstUpdatePass&&ko(s,t,o,i),e!==vr&&$s(r,o,e)&&Oo(s,s.data[Je()],r,r[11],t,r[o+1]=function(t,e){return null==t||("string"==typeof e?t+=e:"object"==typeof t&&(t=et(yi(t)))),t}(e,n),i,o)}function So(t,e){return e>=t.expandoStartIndex}function ko(t,e,n,i){const r=t.data;if(null===r[n+1]){const s=r[Je()],o=So(t,n);Mo(s,i)&&null===e&&!o&&(e=!1),e=function(t,e,n,i){const r=Ve(t);let s=i?e.residualClasses:e.residualStyles;if(null===r)0===(i?e.classBindings:e.styleBindings)&&(n=Eo(n=To(null,t,e,n,i),e.attrs,i),s=null);else{const o=e.directiveStylingLast;if(-1===o||t[o]!==r)if(n=To(r,t,e,n,i),null===s){let n=function(t,e,n){const i=n?e.classBindings:e.styleBindings;if(0!==xr(i))return t[wr(i)]}(t,e,i);void 0!==n&&Array.isArray(n)&&(n=To(null,t,e,n[1],i),n=Eo(n,e.attrs,i),function(t,e,n,i){t[wr(n?e.classBindings:e.styleBindings)]=i}(t,e,i,n))}else s=function(t,e,n){let i;const r=e.directiveEnd;for(let s=1+e.directiveStylingLast;s<r;s++)i=Eo(i,t[s].hostAttrs,n);return Eo(i,e.attrs,n)}(t,e,i)}return void 0!==s&&(i?e.residualClasses=s:e.residualStyles=s),n}(r,s,e,i),function(t,e,n,i,r,s){let o=s?e.classBindings:e.styleBindings,a=wr(o),l=xr(o);t[i]=n;let c,h=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||ni(t,c)>0)&&(h=!0)}else c=n;if(r)if(0!==l){const e=wr(t[a+1]);t[i+1]=br(e,a),0!==e&&(t[e+1]=Sr(t[e+1],i)),t[a+1]=131071&t[a+1]|i<<17}else t[i+1]=br(a,0),0!==a&&(t[a+1]=Sr(t[a+1],i)),a=i;else t[i+1]=br(l,0),0===a?a=i:t[l+1]=Sr(t[l+1],i),l=i;h&&(t[i+1]=Cr(t[i+1])),po(t,c,i,!0),po(t,c,i,!1),function(t,e,n,i,r){const s=r?t.residualClasses:t.residualStyles;null!=s&&"string"==typeof e&&ni(s,e)>=0&&(n[i+1]=kr(n[i+1]))}(e,c,t,i,s),o=br(a,l),s?e.classBindings=o:e.styleBindings=o}(r,s,e,n,o,i)}}function To(t,e,n,i,r){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=e[a],i=Eo(i,s.hostAttrs,r),s!==t);)a++;return null!==t&&(n.directiveStylingLast=a),i}function Eo(t,e,n){const i=n?1:2;let r=-1;if(null!==e)for(let s=0;s<e.length;s++){const o=e[s];"number"==typeof o?r=o:r===i&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),ti(t,o,!!n||e[++s]))}return void 0===t?null:t}function Oo(t,e,n,i,r,s,o,a){if(!(3&e.type))return;const l=t.data,c=l[a+1];Ao(1==(1&c)?Po(l,e,n,r,xr(c),o):void 0)||(Ao(s)||2==(2&c)&&(s=Po(l,null,n,r,a,o)),function(t,e,n,i,r){const s=pe(t);if(e)r?s?t.addClass(n,i):n.classList.add(i):s?t.removeClass(n,i):n.classList.remove(i);else{let e=-1===i.indexOf("-")?void 0:Mi.DashCase;if(null==r)s?t.removeStyle(n,i,e):n.style.removeProperty(i);else{const o="string"==typeof r&&r.endsWith("!important");o&&(r=r.slice(0,-10),e|=Mi.Important),s?t.setStyle(n,i,r,e):n.style.setProperty(i,r,o?"important":"")}}}(i,o,ve(Je(),n),r,s))}function Po(t,e,n,i,r,s){const o=null===e;let a;for(;r>0;){const e=t[r],s=Array.isArray(e),l=s?e[1]:e,c=null===l;let h=n[r+1];h===vr&&(h=c?Dt:void 0);let u=c?ei(h,i):l===i?h:void 0;if(s&&!Ao(u)&&(u=ei(e,i)),Ao(u)&&(a=u,o))return a;const d=t[r+1];r=o?wr(d):xr(d)}if(null!==e){let t=s?e.residualClasses:e.residualStyles;null!=t&&(a=ei(t,i))}return a}function Ao(t){return void 0!==t}function Mo(t,e){return 0!=(t.flags&(e?16:32))}function Io(t,e=""){const n=Oe(),i=Pe(),r=t+Zt,s=i.firstCreatePass?Or(i,r,1,e,null):i.data[r],o=n[r]=function(t,e){return pe(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Ki(i,n,o,s),De(s,!1)}function Do(t){return Ro("",t,""),Do}function Ro(t,e,n){const i=Oe(),r=Vs(i,t,e,n);return r!==vr&&function(t,e,n){const i=ve(e,t);!function(t,e,n){pe(t)?t.setValue(e,n):e.textContent=n}(t[11],i,n)}(i,Je(),r),Ro}function Lo(t,e,n){const i=Oe();return $s(i,Ne(),e)&&zr(Pe(),en(),i,t,e,i[11],n,!0),Lo}function Fo(t,e,n){const i=Oe();if($s(i,Ne(),e)){const r=Pe(),s=en();zr(r,s,i,t,e,hs(Ve(r.data),s,i),n,!0)}return Fo}const jo=void 0;var No=["en",[["a","p"],["AM","PM"],jo],[["AM","PM"],jo,jo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],jo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],jo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",jo,"{1} 'at' {0}",jo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Bo={};function $o(t){return t in Bo||(Bo[t]=Mt.ng&&Mt.ng.common&&Mt.ng.common.locales&&Mt.ng.common.locales[t]),Bo[t]}var zo=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const Vo="en-US";let Go=Vo;function Uo(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,i){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Go=t.toLowerCase().replace(/_/g,"-"))}function Ho(t,e,n,i,r){if(t=st(t),Array.isArray(t))for(let s=0;s<t.length;s++)Ho(t[s],e,n,i,r);else{const s=Pe(),o=Oe();let a=Es(t)?t:st(t.provide),l=Ss(t);const c=Me(),h=1048575&c.providerIndexes,u=c.directiveStart,d=c.providerIndexes>>20;if(Es(t)||!t.multi){const i=new dn(l,r,Hs),f=qo(a,e,r?h:h+d,u);-1===f?(On(Sn(c,o),s,a),Wo(s,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(i),o.push(i)):(n[f]=i,o[f]=i)}else{const f=qo(a,e,h+d,u),p=qo(a,e,h,h+d),g=f>=0&&n[f],m=p>=0&&n[p];if(r&&!m||!r&&!g){On(Sn(c,o),s,a);const h=function(t,e,n,i,r){const s=new dn(t,n,Hs);return s.multi=[],s.index=e,s.componentProviders=0,Xo(s,r,i&&!n),s}(r?Ko:Yo,n.length,r,i,l);!r&&m&&(n[p].providerFactory=h),Wo(s,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,r&&(c.providerIndexes+=1048576),n.push(h),o.push(h)}else Wo(s,t,f>-1?f:p,Xo(n[r?p:f],l,!r&&i));!r&&i&&m&&n[p].componentProviders++}}}function Wo(t,e,n,i){const r=Es(e);if(r||e.useClass){const s=(e.useClass||e).prototype.ngOnDestroy;if(s){const o=t.destroyHooks||(t.destroyHooks=[]);if(!r&&e.multi){const t=o.indexOf(n);-1===t?o.push(n,[i,s]):o[t+1].push(i,s)}else o.push(n,s)}}}function Xo(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function qo(t,e,n,i){for(let r=n;r<i;r++)if(e[r]===t)return r;return-1}function Yo(t,e,n,i){return Zo(this.multi,[])}function Ko(t,e,n,i){const r=this.multi;let s;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Fn(n,n[1],this.providerFactory.index,i);s=e.slice(0,t),Zo(r,s);for(let n=t;n<e.length;n++)s.push(e[n])}else s=[],Zo(r,s);return s}function Zo(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Qo(t,e=[]){return n=>{n.providersResolver=(n,i)=>function(t,e,n){const i=Pe();if(i.firstCreatePass){const r=re(t);Ho(n,i.data,i.blueprint,r,!0),Ho(e,i.data,i.blueprint,r,!1)}}(n,i?i(t):t,e)}}class Jo{}class ta{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${et(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let ea=(()=>{class t{}return t.NULL=new ta,t})();function na(...t){}function ia(t,e){return new sa(ye(t,e))}const ra=function(){return ia(Me(),Oe())};let sa=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=ra,t})();function oa(t){return t instanceof sa?t.nativeElement:t}class aa{}let la=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>ca(),t})();const ca=function(){const t=Oe(),e=be(Me().index,t);return function(t){return t[11]}(Jt(e)?e:t)};let ha=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>null}),t})();class ua{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const da=new ua("12.0.4");class fa{constructor(){}supports(t){return Ns(t)}create(t){return new ga(t)}}const pa=(t,e)=>e;class ga{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pa}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,i=0,r=null;for(;e||n;){const s=!n||e&&e.currentIndex<_a(n,i,r)?e:n,o=_a(s,i,r),a=s.currentIndex;if(s===n)i--,n=n._nextRemoved;else if(e=e._next,null==s.previousIndex)i++;else{r||(r=[]);const t=o-i,e=a-i;if(t!=e){for(let n=0;n<t;n++){const i=n<r.length?r[n]:r[n]=0,s=i+n;e<=s&&s<t&&(r[n]=i+1)}r[s.previousIndex]=e-t}}o!==a&&t(s,o,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Ns(t))throw new Error(`Error trying to diff '${et(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,i,r=this._itHead,s=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],i=this._trackByFn(e,n),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,n,i,e)),Object.is(r.item,n)||this._addIdentityChange(r,n)):(r=this._mismatch(r,n,i,e),s=!0),r=r._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[js()]();let i;for(;!(i=n.next()).done;)e(i.value)}}(t,t=>{i=this._trackByFn(e,t),null!==r&&Object.is(r.trackById,i)?(s&&(r=this._verifyReinsertion(r,t,i,e)),Object.is(r.item,t)||this._addIdentityChange(r,t)):(r=this._mismatch(r,t,i,e),s=!0),r=r._next,e++}),this.length=e;return this._truncate(r),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,i){let r;return null===t?r=this._itTail:(r=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,r,i)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,i))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,r,i)):t=this._addAfter(new ma(e,n),r,i),t}_verifyReinsertion(t,e,n,i){let r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==r?t=this._reinsertAfter(r,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,r=t._nextRemoved;return null===i?this._removalsHead=r:i._nextRemoved=r,null===r?this._removalsTail=i:r._prevRemoved=i,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const i=null===e?this._itHead:e._next;return t._next=i,t._prev=e,null===i?this._itTail=t:i._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ya),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ya),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class ma{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class va{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ya{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new va,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function _a(t,e,n){const i=t.previousIndex;if(null===i)return i;let r=0;return n&&i<n.length&&(r=n[i]),i+e+r}class ba{constructor(){}supports(t){return t instanceof Map||Bs(t)}create(){return new wa}}class wa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Bs(t)))throw new Error(`Error trying to diff '${et(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const i=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,i)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const i=n._prev,r=n._next;return i&&(i._next=r),r&&(r._prev=i),n._next=null,n._prev=null,n}const n=new Ca(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class Ca{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function xa(){return new Sa([new fa])}let Sa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||xa()),deps:[[t,new mi,new gi]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:xa}),t})();function ka(){return new Ta([new ba])}let Ta=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||ka()),deps:[[t,new mi,new gi]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=ut({token:t,providedIn:"root",factory:ka}),t})();function Ea(t,e,n,i,r=!1){for(;null!==n;){const s=e[n.index];if(null!==s&&i.push(me(s)),te(s))for(let t=Qt;t<s.length;t++){const e=s[t],n=e[1].firstChild;null!==n&&Ea(e[1],e,n,i)}const o=n.type;if(8&o)Ea(t,e,n.child,i);else if(32&o){const t=Ii(n,e);let r;for(;r=t();)i.push(r)}else if(16&o){const t=Qi(e,n);if(Array.isArray(t))i.push(...t);else{const n=Di(e[16]);Ea(n[1],n,t,i,!0)}}n=r?n.projectionNext:n.next}return i}class Oa{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return Ea(e,t,e.firstChild,[])}get context(){return this._lView[8]}set context(t){this._lView[8]=t}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(te(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&($i(t,n),Qn(e,n))}this._attachedToViewContainer=!1}zi(this._lView[1],this._lView)}onDestroy(t){Br(this._lView[1],this._lView,null,t)}markForCheck(){is(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){rs(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){je(!0);try{rs(t,e,n)}finally{je(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,er(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class Pa extends Oa{constructor(t){super(t),this._view=t}detectChanges(){ss(this._view)}checkNoChanges(){!function(t){je(!0);try{ss(t)}finally{je(!1)}}(this._view)}get context(){return null}}const Aa=function(t){return function(t,e,n){if(ne(t)&&!n){const n=be(t.index,e);return new Oa(n,n)}return 47&t.type?new Oa(e[16],e):null}(Me(),Oe(),16==(16&t))};let Ma=(()=>{class t{}return t.__NG_ELEMENT_ID__=Aa,t})();const Ia=[new ba],Da=new Sa([new fa]),Ra=new Ta(Ia),La=function(){return Ba(Me(),Oe())};let Fa=(()=>{class t{}return t.__NG_ELEMENT_ID__=La,t})();const ja=Fa,Na=class extends ja{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Er(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const i=this._declarationLView[19];return null!==i&&(n[19]=i.createEmbeddedView(e)),Ar(e,n,t),new Oa(n)}};function Ba(t,e){return 4&t.type?new Na(e,t,ia(t,e)):null}class $a{}class za{}const Va=function(){return qa(Me(),Oe())};let Ga=(()=>{class t{}return t.__NG_ELEMENT_ID__=Va,t})();const Ua=Ga,Ha=class extends Ua{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return ia(this._hostTNode,this._hostLView)}get injector(){return new Bn(this._hostTNode,this._hostLView)}get parentInjector(){const t=En(this._hostTNode,this._hostLView);if(yn(t)){const e=bn(t,this._hostLView),n=_n(t);return new Bn(e[1].data[n+8],e)}return new Bn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Wa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-Qt}createEmbeddedView(t,e,n){const i=t.createEmbeddedView(e||{});return this.insert(i,n),i}createComponent(t,e,n,i,r){const s=n||this.parentInjector;if(!r&&null==t.ngModule&&s){const t=s.get($a,null);t&&(r=t)}const o=t.create(s,i,void 0,r);return this.insert(o.hostView,e),o}insert(t,e){const n=t._lView,i=n[1];if(te(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],i=new Ha(e,e[6],e[3]);i.detach(i.indexOf(t))}}const r=this._adjustIndex(e),s=this._lContainer;!function(t,e,n,i){const r=Qt+i,s=n.length;i>0&&(n[r-1][4]=e),i<s-Qt?(e[4]=n[r],Zn(n,Qt+i,e)):(n.push(e),e[4]=null),e[3]=n;const o=e[17];null!==o&&n!==o&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(o,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(i,n,s,r);const o=Ji(r,s),a=n[11],l=Xi(a,s[7]);return null!==l&&function(t,e,n,i,r,s){i[0]=r,i[6]=e,er(t,i,n,1,r,s)}(i,s[6],a,n,l,o),t.attachToViewContainerRef(),Zn(Xa(s),r,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Wa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=$i(this._lContainer,e);n&&(Qn(Xa(this._lContainer),e),zi(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=$i(this._lContainer,e);return n&&null!=Qn(Xa(this._lContainer),e)?new Oa(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Wa(t){return t[8]}function Xa(t){return t[8]||(t[8]=[])}function qa(t,e){let n;const i=e[t.index];if(te(i))n=i;else{let r;if(8&t.type)r=me(i);else{const n=e[11];r=n.createComment("");const i=ye(t,e);Ui(n,Xi(n,i),r,function(t,e){return pe(t)?t.nextSibling(e):e.nextSibling}(n,i),!1)}e[t.index]=n=Qr(i,e,r,t),ns(e,n)}return new Ha(n,t,e)}const Ya={};class Ka extends ea{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=Yt(t);return new Ja(e,this.ngModule)}}function Za(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Qa=new Wn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Pi});class Ja extends Jo{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(mr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Za(this.componentDef.inputs)}get outputs(){return Za(this.componentDef.outputs)}create(t,e,n,i){const r=(i=i||this.ngModule)?function(t,e){return{get:(n,i,r)=>{const s=t.get(n,Ya,r);return s!==Ya||i===Ya?s:e.get(n,i,r)}}}(t,i.injector):t,s=r.get(aa,ge),o=r.get(ha,null),a=s.createRenderer(null,this.componentDef),l=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(pe(t))return t.selectRootElement(e,n===Tt.ShadowDom);let i="string"==typeof e?t.querySelector(e):e;return i.textContent="",i}(a,n,this.componentDef.encapsulation):Ni(s.createRenderer(null,this.componentDef),l,function(t){const e=t.toLowerCase();return"svg"===e?de:"math"===e?"http://www.w3.org/1998/MathML/":null}(l)),h=this.componentDef.onPush?576:528,u={components:[],scheduler:Pi,clean:as,playerHandler:null,flags:0},d=Nr(0,null,null,1,0,null,null,null,null,null),f=Er(null,d,u,h,null,null,s,a,o,r);let p,g;Xe(f);try{const t=function(t,e,n,i,r,s){const o=n[1];n[20]=t;const a=Or(o,20,2,"#host",null),l=a.mergedAttrs=e.hostAttrs;null!==l&&(fs(a,l,!0),null!==t&&(fn(r,t,l),null!==a.classes&&rr(r,t,a.classes),null!==a.styles&&ir(r,t,a.styles)));const c=i.createRenderer(t,e),h=Er(n,jr(e),null,e.onPush?64:16,n[20],a,i,c,null,null);return o.firstCreatePass&&(On(Sn(a,n),o,e.type),Hr(o,a),Xr(a,n.length,1)),ns(n,h),n[20]=h}(c,this.componentDef,f,s,a);if(c)if(n)fn(a,c,["ng-version",da.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let i=1,r=2;for(;i<t.length;){let s=t[i];if("string"==typeof s)2===r?""!==s&&e.push(s,t[++i]):8===r&&n.push(s);else{if(!ur(r))break;r=s}i++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&fn(a,c,t),e&&e.length>0&&rr(a,c,e.join(" "))}if(g=_e(d,Zt),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const i=e[n];t.push(null!=i?Array.from(i):null)}}p=function(t,e,n,i,r){const s=n[1],o=function(t,e,n){const i=Me();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),qr(t,i,e,Pr(t,e,1,null),n));const r=Fn(e,t,i.directiveStart,i);xi(r,e);const s=ye(i,e);return s&&xi(s,e),r}(s,n,e);if(i.components.push(o),t[8]=o,r&&r.forEach(t=>t(o,e)),e.contentQueries){const t=Me();e.contentQueries(1,o,t.directiveStart)}const a=Me();return!s.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(tn(a.index),Gr(n[1],a,0,a.directiveStart,a.directiveEnd,e),Ur(e,o)),o}(t,this.componentDef,f,u,[As]),Ar(d,f,null)}finally{Qe()}return new tl(this.componentType,p,ia(g,f),f,g)}}class tl extends class{}{constructor(t,e,n,i,r){super(),this.location=n,this._rootLView=i,this._tNode=r,this.instance=e,this.hostView=this.changeDetectorRef=new Pa(i),this.componentType=t}get injector(){return new Bn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const el=new Map;class nl extends $a{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ka(this);const n=Kt(t),i=t[Nt]||null;i&&Uo(i),this._bootstrapComponents=Ai(n.bootstrap),this._r3Injector=ws(t,e,[{provide:$a,useValue:this},{provide:ea,useValue:this.componentFactoryResolver}],et(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Ps.THROW_IF_NOT_FOUND,n=bt.Default){return t===Ps||t===$a||t===ps?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class il extends za{constructor(t){super(),this.moduleType=t,null!==Kt(t)&&function(t){const e=new Set;!function t(n){const i=Kt(n,!0),r=i.id;null!==r&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${et(e)} vs ${et(e.name)}`)}(r,el.get(r),n),el.set(r,n));const s=Ai(i.imports);for(const o of s)e.has(o)||(e.add(o),t(o))}(t)}(t)}create(t){return new nl(this.moduleType,t)}}function rl(t){return e=>{setTimeout(t,void 0,e)}}const sl=class extends x{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var i,r,s;let o=t,a=e||(()=>null),l=n;if(t&&"object"==typeof t){const e=t;o=null===(i=e.next)||void 0===i?void 0:i.bind(e),a=null===(r=e.error)||void 0===r?void 0:r.bind(e),l=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(a=rl(a),o&&(o=rl(o)),l&&(l=rl(l)));const c=super.subscribe({next:o,error:a,complete:l});return t instanceof u&&t.add(c),c}};function ol(){return this._results[js()]()}class al{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=js(),n=al.prototype;n[e]||(n[e]=ol)}get changes(){return this._changes||(this._changes=new sl)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const i=Yn(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let i=0;i<t.length;i++){let r=t[i],s=e[i];if(n&&(r=n(r),s=n(s)),s!==r)return!1}return!0}(n._results,i,e))&&(n._results=i,n.length=i.length,n.last=i[this.length-1],n.first=i[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ll{constructor(t){this.queryList=t,this.matches=null}clone(){return new ll(this.queryList)}setDirty(){this.queryList.setDirty()}}class cl{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,i=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);i.push(this.queries[n.indexInDeclarationView].clone())}return new cl(i)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==xl(t,e).matches&&this.queries[e].setDirty()}}class hl{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class ul{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const i=null!==e?e.length:0,r=this.getByIndex(n).embeddedTView(t,i);r&&(r.indexInDeclarationView=n,null!==e?e.push(r):e=[r])}return null!==e?new ul(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class dl{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new dl(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){const r=n[i];this.matchTNodeWithReadOption(t,e,fl(e,r)),this.matchTNodeWithReadOption(t,e,Ln(e,t,r,!1,!1))}else n===Fa?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ln(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const i=this.metadata.read;if(null!==i)if(i===sa||i===Ga||i===Fa&&4&e.type)this.addMatch(e.index,-2);else{const n=Ln(e,t,i,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function fl(t,e){const n=t.localNames;if(null!==n)for(let i=0;i<n.length;i+=2)if(n[i]===e)return n[i+1];return null}function pl(t,e,n,i){return-1===n?function(t,e){return 11&t.type?ia(t,e):4&t.type?Ba(t,e):null}(e,t):-2===n?function(t,e,n){return n===sa?ia(e,t):n===Fa?Ba(e,t):n===Ga?qa(e,t):void 0}(t,e,i):Fn(t,t[1],n,e)}function gl(t,e,n,i){const r=e[19].queries[i];if(null===r.matches){const i=t.data,s=n.matches,o=[];for(let t=0;t<s.length;t+=2){const r=s[t];o.push(r<0?null:pl(e,i[r],s[t+1],n.metadata.read))}r.matches=o}return r.matches}function ml(t,e,n,i){const r=t.queries.getByIndex(n),s=r.matches;if(null!==s){const o=gl(t,e,r,n);for(let t=0;t<s.length;t+=2){const n=s[t];if(n>0)i.push(o[t/2]);else{const r=s[t+1],o=e[-n];for(let t=Qt;t<o.length;t++){const e=o[t];e[17]===e[3]&&ml(e[1],e,r,i)}if(null!==o[9]){const t=o[9];for(let e=0;e<t.length;e++){const n=t[e];ml(n[1],n,r,i)}}}}}return i}function vl(t){const e=Oe(),n=Pe(),i=Ge();Ue(i+1);const r=xl(n,i);if(t.dirty&&we(e)===(2==(2&r.metadata.flags))){if(null===r.matches)t.reset([]);else{const s=r.crossesNgTemplate?ml(n,e,i,[]):gl(n,e,r,i);t.reset(s,oa),t.notifyOnChanges()}return!0}return!1}function yl(t,e,n){const i=Pe();i.firstCreatePass&&(Cl(i,new hl(t,e,n),-1),2==(2&e)&&(i.staticViewQueries=!0)),wl(i,Oe(),e)}function _l(t,e,n,i){const r=Pe();if(r.firstCreatePass){const s=Me();Cl(r,new hl(e,n,i),s.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(r,t),2==(2&n)&&(r.staticContentQueries=!0)}wl(r,Oe(),n)}function bl(){return t=Oe(),e=Ge(),t[19].queries[e].queryList;var t,e}function wl(t,e,n){const i=new al(4==(4&n));Br(t,e,i,i.destroy),null===e[19]&&(e[19]=new cl),e[19].queries.push(new ll(i))}function Cl(t,e,n){null===t.queries&&(t.queries=new ul),t.queries.track(new dl(e,n))}function xl(t,e){return t.queries.getByIndex(e)}const Sl=new Wn("Application Initializer");let kl=(()=>{class t{constructor(t){this.appInits=t,this.resolve=na,this.reject=na,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();if(to(e))t.push(e);else if(eo(e)){const n=new Promise((t,n)=>{e.subscribe({complete:t,error:n})});t.push(n)}}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(hi(Sl,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Tl=new Wn("AppId"),El={provide:Tl,useFactory:function(){return`${Ol()}${Ol()}${Ol()}`},deps:[]};function Ol(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Pl=new Wn("Platform Initializer"),Al=new Wn("Platform ID"),Ml=new Wn("appBootstrapListener");let Il=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Dl=new Wn("LocaleId"),Rl=new Wn("DefaultCurrencyCode");class Ll{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Fl=function(t){return new il(t)},jl=Fl,Nl=function(t){return Promise.resolve(Fl(t))},Bl=function(t){const e=Fl(t),n=Ai(Kt(t).declarations).reduce((t,e)=>{const n=Yt(e);return n&&t.push(new Ja(n)),t},[]);return new Ll(e,n)},$l=Bl,zl=function(t){return Promise.resolve(Bl(t))};let Vl=(()=>{class t{constructor(){this.compileModuleSync=jl,this.compileModuleAsync=Nl,this.compileModuleAndAllComponentsSync=$l,this.compileModuleAndAllComponentsAsync=zl}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Gl=(()=>Promise.resolve(0))();function Ul(t){"undefined"==typeof Zone?Gl.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Hl{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new sl(!1),this.onMicrotaskEmpty=new sl(!1),this.onStable=new sl(!1),this.onError=new sl(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&e,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=function(){let t=Mt.requestAnimationFrame,e=Mt.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const i=e[Zone.__symbol__("OriginalDelegate")];i&&(e=i)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Mt,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ql(t),t.isCheckStableRunning=!0,Xl(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ql(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,i,r,s,o,a)=>{try{return Yl(t),n.invokeTask(r,s,o,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),Kl(t)}},onInvoke:(n,i,r,s,o,a,l)=>{try{return Yl(t),n.invoke(r,s,o,a,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Kl(t)}},onHasTask:(e,n,i,r)=>{e.hasTask(i,r),n===i&&("microTask"==r.change?(t._hasPendingMicrotasks=r.microTask,ql(t),Xl(t)):"macroTask"==r.change&&(t.hasPendingMacrotasks=r.macroTask))},onHandleError:(e,n,i,r)=>(e.handleError(i,r),t.runOutsideAngular(()=>t.onError.emit(r)),!1)})}(i)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hl.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Hl.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,i){const r=this._inner,s=r.scheduleEventTask("NgZoneEvent: "+i,t,Wl,na,na);try{return r.runTask(s,e,n)}finally{r.cancelTask(s)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Wl={};function Xl(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function ql(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Yl(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Kl(t){t._nesting--,Xl(t)}class Zl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new sl,this.onMicrotaskEmpty=new sl,this.onStable=new sl,this.onError=new sl}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,i){return t.apply(e,n)}}let Ql=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hl.assertNotInAngularZone(),Ul(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ul(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let i=-1;e&&e>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==i),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:i,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(hi(Hl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Jl=(()=>{class t{constructor(){this._applications=new Map,nc.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return nc.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class tc{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}let ec,nc=new tc,ic=!0,rc=!1;function sc(){return rc=!0,ic}const oc=new Wn("AllowMultipleToken");class ac{constructor(t,e){this.name=t,this.token=e}}function lc(t,e,n=[]){const i=`Platform: ${e}`,r=new Wn(i);return(e=[])=>{let s=cc();if(!s||s.injector.get(oc,!1))if(t)t(n.concat(e).concat({provide:r,useValue:!0}));else{const t=n.concat(e).concat({provide:r,useValue:!0},{provide:ms,useValue:"platform"});!function(t){if(ec&&!ec.destroyed&&!ec.injector.get(oc,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");ec=t.get(hc);const e=t.get(Pl,null);e&&e.forEach(t=>t())}(Ps.create({providers:t,name:i}))}return function(t){const e=cc();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(r)}}function cc(){return ec&&!ec.destroyed?ec:null}let hc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Zl:("zone.js"===t?void 0:t)||new Hl({enableLongStackTrace:sc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),i=[{provide:Hl,useValue:n}];return n.run(()=>{const e=Ps.create({providers:i,parent:this.injector,name:t.moduleType.name}),r=t.create(e),s=r.injector.get(Oi,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{s.handleError(t)}});r.onDestroy(()=>{fc(this._modules,r),t.unsubscribe()})}),function(t,e,n){try{const i=n();return to(i)?i.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):i}catch(i){throw e.runOutsideAngular(()=>t.handleError(i)),i}}(s,n,()=>{const t=r.injector.get(kl);return t.runInitializers(),t.donePromise.then(()=>(Uo(r.injector.get(Dl,Vo)||Vo),this._moduleDoBootstrap(r),r))})})}bootstrapModule(t,e=[]){const n=uc({},e);return function(t,e,n){const i=new il(n);return Promise.resolve(i)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(dc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${et(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(hi(Ps))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function uc(t,e){return Array.isArray(e)?e.reduce(uc,t):Object.assign(Object.assign({},t),e)}let dc=(()=>{class t{constructor(t,e,n,i,r){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=i,this._initStatus=r,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const s=new y(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),o=new y(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Hl.assertNotInAngularZone(),Ul(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Hl.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=H(s,o.pipe(t=>{return W()((e=Q,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,K);return i.source=t,i.subjectFactory=n,i})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Jo?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const i=n.isBoundToModule?void 0:this._injector.get($a),r=n.create(Ps.NULL,[],e||n.selector,i),s=r.location.nativeElement,o=r.injector.get(Ql,null),a=o&&r.injector.get(Jl);return o&&a&&a.registerApplication(s,o),r.onDestroy(()=>{this.detachView(r.hostView),fc(this.components,r),a&&a.unregisterApplication(s)}),this._loadComponent(r),r}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;fc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Ml,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(hi(Hl),hi(Ps),hi(Oi),hi(ea),hi(kl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function fc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class pc{}class gc{}const mc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let vc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||mc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,i]=t.split("#");return void 0===i&&(i="default"),n(8255)(e).then(t=>t[i]).then(t=>yc(t,e,i)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,i]=t.split("#"),r="NgFactory";return void 0===i&&(i="default",r=""),n(8255)(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[i+r]).then(t=>yc(t,e,i))}}return t.\u0275fac=function(e){return new(e||t)(hi(Vl),hi(gc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function yc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const _c=lc(null,"core",[{provide:Al,useValue:"unknown"},{provide:hc,deps:[Ps]},{provide:Jl,deps:[]},{provide:Il,deps:[]}]),bc=[{provide:dc,useClass:dc,deps:[Hl,Ps,Oi,ea,kl]},{provide:Qa,deps:[Hl],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:kl,useClass:kl,deps:[[new gi,Sl]]},{provide:Vl,useClass:Vl,deps:[]},El,{provide:Sa,useFactory:function(){return Da},deps:[]},{provide:Ta,useFactory:function(){return Ra},deps:[]},{provide:Dl,useFactory:function(t){return Uo(t=t||"undefined"!=typeof $localize&&$localize.locale||Vo),t},deps:[[new pi(Dl),new gi,new mi]]},{provide:Rl,useValue:"USD"}];let wc=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(hi(dc))},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:bc}),t})(),Cc=null;function xc(){return Cc}const Sc=new Wn("DocumentToken");let kc=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:Tc,token:t,providedIn:"platform"}),t})();function Tc(){return hi(Oc)}const Ec=new Wn("Location Initialized");let Oc=(()=>{class t extends kc{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return xc().getBaseHref(this._doc)}onPopState(t){const e=xc().getGlobalEventTarget(this._doc,"window");return e.addEventListener("popstate",t,!1),()=>e.removeEventListener("popstate",t)}onHashChange(t){const e=xc().getGlobalEventTarget(this._doc,"window");return e.addEventListener("hashchange",t,!1),()=>e.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){Pc()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){Pc()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(hi(Sc))},t.\u0275prov=ut({factory:Ac,token:t,providedIn:"platform"}),t})();function Pc(){return!!window.history.pushState}function Ac(){return new Oc(hi(Sc))}function Mc(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function Ic(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function Dc(t){return t&&"?"!==t[0]?"?"+t:t}let Rc=(()=>{class t{historyGo(t){throw new Error("Not implemented")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:Lc,token:t,providedIn:"root"}),t})();function Lc(t){const e=hi(Sc).location;return new jc(hi(kc),e&&e.origin||"")}const Fc=new Wn("appBaseHref");let jc=(()=>{class t extends Rc{constructor(t,e){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Mc(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+Dc(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,i){const r=this.prepareExternalUrl(n+Dc(i));this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){const r=this.prepareExternalUrl(n+Dc(i));this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(hi(kc),hi(Fc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Nc=(()=>{class t extends Rc{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=e&&(this._baseHref=e)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=Mc(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,i){let r=this.prepareExternalUrl(n+Dc(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.pushState(t,e,r)}replaceState(t,e,n,i){let r=this.prepareExternalUrl(n+Dc(i));0==r.length&&(r=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,r)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformLocation).historyGo)||void 0===n||n.call(e,t)}}return t.\u0275fac=function(e){return new(e||t)(hi(kc),hi(Fc,8))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),Bc=(()=>{class t{constructor(t,e){this._subject=new sl,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=Ic(zc(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+Dc(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,zc(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dc(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+Dc(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var e,n;null===(n=(e=this._platformStrategy).historyGo)||void 0===n||n.call(e,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(hi(Rc),hi(kc))},t.normalizeQueryParams=Dc,t.joinWithSlash=Mc,t.stripTrailingSlash=Ic,t.\u0275prov=ut({factory:$c,token:t,providedIn:"root"}),t})();function $c(){return new Bc(hi(Rc),hi(kc))}function zc(t){return t.replace(/\/index.html$/,"")}var Vc=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});class Gc{}let Uc=(()=>{class t extends Gc{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(function(t){return function(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=$o(e);if(n)return n;const i=e.split("-")[0];if(n=$o(i),n)return n;if("en"===i)return No;throw new Error(`Missing locale data for the locale "${t}".`)}(t)[zo.PluralCase]}(e||this.locale)(t)){case Vc.Zero:return"zero";case Vc.One:return"one";case Vc.Two:return"two";case Vc.Few:return"few";case Vc.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(hi(Dl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function Hc(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[i,r]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(i.trim()===e)return decodeURIComponent(r)}return null}class Wc{constructor(t,e,n,i){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Xc=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,i)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new Wc(null,this._ngForOf,-1,-1),null===i?void 0:i),r=new qc(t,n);e.push(r)}else if(null==i)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const r=this._viewContainer.get(n);this._viewContainer.move(r,i);const s=new qc(t,r);e.push(s)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,i=this._viewContainer.length;n<i;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=i,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Hs(Ga),Hs(Fa),Hs(Sa))},t.\u0275dir=qt({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class qc{constructor(t,e){this.record=t,this.view=e}}let Yc=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new Kc,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Zc("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Zc("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(Hs(Ga),Hs(Fa))},t.\u0275dir=qt({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class Kc{constructor(){this.$implicit=null,this.ngIf=null}}function Zc(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${et(e)}'.`)}class Qc{constructor(t,e){this._viewContainerRef=t,this._templateRef=e,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(t){t&&!this._created?this.create():!t&&this._created&&this.destroy()}}let Jc=(()=>{class t{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(t){this._ngSwitch=t,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(t){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(t)}_matchCase(t){const e=t==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||e,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),e}_updateDefaultCases(t){if(this._defaultViews&&t!==this._defaultUsed){this._defaultUsed=t;for(let e=0;e<this._defaultViews.length;e++)this._defaultViews[e].enforceState(t)}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"}}),t})(),th=(()=>{class t{constructor(t,e,n){this.ngSwitch=n,n._addCase(),this._view=new Qc(t,e)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return t.\u0275fac=function(e){return new(e||t)(Hs(Ga),Hs(Fa),Hs(Jc,9))},t.\u0275dir=qt({type:t,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"}}),t})(),eh=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[{provide:Gc,useClass:Uc}]}),t})(),nh=(()=>{class t{}return t.\u0275prov=ut({token:t,providedIn:"root",factory:()=>new ih(hi(Sc),window)}),t})();class ih{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let i=n.currentNode;for(;i;){const t=i.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}i=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,i=e.top+this.window.pageYOffset,r=this.offset();this.window.scrollTo(n-r[0],i-r[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=rh(this.window.history)||rh(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function rh(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class sh{}class oh extends class extends class{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){var t;t=new oh,Cc||(Cc=t)}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getBaseHref(t){const e=(lh=lh||document.querySelector("base"),lh?lh.getAttribute("href"):null);return null==e?null:function(t){ah=ah||document.createElement("a"),ah.setAttribute("href",t);const e=ah.pathname;return"/"===e.charAt(0)?e:`/${e}`}(e)}resetBaseElement(){lh=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Hc(document.cookie,t)}}let ah,lh=null;const ch=new Wn("TRANSITION_ID"),hh=[{provide:Sl,useFactory:function(t,e,n){return()=>{n.get(kl).donePromise.then(()=>{const n=xc();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[ch,Sc,Ps],multi:!0}];class uh{static init(){var t;t=new uh,nc=t}addToWindow(t){Mt.getAngularTestability=(e,n=!0)=>{const i=t.findTestabilityInTree(e,n);if(null==i)throw new Error("Could not find testability for element.");return i},Mt.getAllAngularTestabilities=()=>t.getAllTestabilities(),Mt.getAllAngularRootElements=()=>t.getAllRootElements(),Mt.frameworkStabilizers||(Mt.frameworkStabilizers=[]),Mt.frameworkStabilizers.push(t=>{const e=Mt.getAllAngularTestabilities();let n=e.length,i=!1;const r=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(r)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const i=t.getTestability(e);return null!=i?i:n?xc().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}let dh=(()=>{class t{build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const fh=new Wn("EventManagerPlugins");let ph=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let i=0;i<n.length;i++){const e=n[i];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(hi(fh),hi(Hl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class gh{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const i=xc().getGlobalEventTarget(this._doc,t);if(!i)throw new Error(`Unsupported event target ${i} for event ${e}`);return this.addEventListener(i,e,n)}}let mh=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),vh=(()=>{class t extends mh{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,e,n){t.forEach(t=>{const i=this._doc.createElement("style");i.textContent=t,n.push(e.appendChild(i))})}addHost(t){const e=[];this._addStylesToHost(this._stylesSet,t,e),this._hostNodes.set(t,e)}removeHost(t){const e=this._hostNodes.get(t);e&&e.forEach(yh),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((e,n)=>{this._addStylesToHost(t,n,e)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(yh))}}return t.\u0275fac=function(e){return new(e||t)(hi(Sc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function yh(t){xc().remove(t)}const _h={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},bh=/%COMP%/g;function wh(t,e,n){for(let i=0;i<e.length;i++){let r=e[i];Array.isArray(r)?wh(t,r,n):(r=r.replace(bh,t),n.push(r))}return n}function Ch(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let xh=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new Sh(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case Tt.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new kh(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case Tt.ShadowDom:return new Th(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=wh(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(hi(ph),hi(vh),hi(Tl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class Sh{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(_h[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;const r=_h[i];r?t.setAttributeNS(r,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const i=_h[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(Mi.DashCase|Mi.Important)?t.style.setProperty(e,n,i&Mi.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Mi.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Ch(n)):this.eventManager.addEventListener(t,e,Ch(n))}}class kh extends Sh{constructor(t,e,n,i){super(t),this.component=n;const r=wh(i+"-"+n.id,n.styles,[]);e.addStyles(r),this.contentAttr="_ngcontent-%COMP%".replace(bh,i+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(bh,i+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class Th extends Sh{constructor(t,e,n,i){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const r=wh(i.id,i.styles,[]);for(let s=0;s<r.length;s++){const t=document.createElement("style");t.textContent=r[s],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let Eh=(()=>{class t extends gh{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(hi(Sc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Oh=["alt","control","meta","shift"],Ph={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ah={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},Mh={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let Ih=(()=>{class t extends gh{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,i){const r=t.parseEventName(n),s=t.eventCallback(r.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>xc().onAndCancel(e,r.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),i=n.shift();if(0===n.length||"keydown"!==i&&"keyup"!==i)return null;const r=t._normalizeKey(n.pop());let s="";if(Oh.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),s+=t+".")}),s+=r,0!=n.length||0===r.length)return null;const o={};return o.domEventName=i,o.fullKey=s,o}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&Ah.hasOwnProperty(e)&&(e=Ah[e]))}return Ph[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Oh.forEach(i=>{i!=n&&(0,Mh[i])(t)&&(e+=i+".")}),e+=n,e}static eventCallback(e,n,i){return r=>{t.getEventFullKey(r)===e&&i.runGuarded(()=>n(r))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(hi(Sc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const Dh=lc(_c,"browser",[{provide:Al,useValue:"browser"},{provide:Pl,useValue:function(){oh.makeCurrent(),uh.init()},multi:!0},{provide:Sc,useFactory:function(){return function(t){fe=t}(document),document},deps:[]}]),Rh=[[],{provide:ms,useValue:"root"},{provide:Oi,useFactory:function(){return new Oi},deps:[]},{provide:fh,useClass:Eh,multi:!0,deps:[Sc,Hl,Al]},{provide:fh,useClass:Ih,multi:!0,deps:[Sc]},[],{provide:xh,useClass:xh,deps:[ph,vh,Tl]},{provide:aa,useExisting:xh},{provide:mh,useExisting:vh},{provide:vh,useClass:vh,deps:[Sc]},{provide:Ql,useClass:Ql,deps:[Hl]},{provide:ph,useClass:ph,deps:[fh,Hl]},{provide:sh,useClass:dh,deps:[]},[]];let Lh=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:Tl,useValue:e.appId},{provide:ch,useExisting:Tl},hh]}}}return t.\u0275fac=function(e){return new(e||t)(hi(t,12))},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:Rh,imports:[eh,wc]}),t})();function Fh(...t){let e=t[t.length-1];return k(e)?(t.pop(),L(t,e)):U(t)}"undefined"!=typeof window&&window;class jh extends x{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new b;return this._value}next(t){super.next(this._value=t)}}class Nh extends p{notifyNext(t,e,n,i,r){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Bh extends p{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}function $h(t,e,n,i,r=new Bh(t,n,i)){if(!r.closed)return e instanceof y?e.subscribe(r):R(e)(r)}const zh={};class Vh{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Gh(t,this.resultSelector))}}class Gh extends Nh{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(zh),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add($h(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const i=this.values,r=this.toRespond?i[n]===zh?--this.toRespond:this.toRespond:0;i[n]=e,0===r&&(this.resultSelector?this._tryResultSelector(i):this.destination.next(i.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const Uh=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();function Hh(...t){return G(1)(Fh(...t))}const Wh=new y(t=>t.complete());function Xh(t){return t?function(t){return new y(e=>t.schedule(()=>e.complete()))}(t):Wh}function qh(t){return new y(e=>{let n;try{n=t()}catch(i){return void e.error(i)}return(n?F(n):Xh()).subscribe(e)})}function Yh(t,e){return"function"==typeof e?n=>n.pipe(Yh((n,i)=>F(t(n,i)).pipe(T((t,r)=>e(n,t,i,r))))):e=>e.lift(new Kh(t))}class Kh{constructor(t){this.project=t}call(t,e){return e.subscribe(new Zh(t,this.project))}}class Zh extends N{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(i){return void this.destination.error(i)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new j(this),i=this.destination;i.add(n),this.innerSubscription=B(t,n),this.innerSubscription!==n&&i.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Qh=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Jh(t){return e=>0===t?Xh():e.lift(new tu(t))}class tu{constructor(t){if(this.total=t,this.total<0)throw new Qh}call(t,e){return e.subscribe(new eu(t,this.total))}}class eu extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function nu(...t){const e=t[t.length-1];return k(e)?(t.pop(),n=>Hh(t,n,e)):e=>Hh(t,e)}function iu(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(i){return i.lift(new ru(t,e,n))}}class ru{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new su(t,this.accumulator,this.seed,this.hasSeed))}}class su extends p{constructor(t,e,n,i){super(t),this.accumulator=e,this._seed=n,this.hasSeed=i,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(i){this.destination.error(i)}this.seed=n,this.destination.next(n)}}function ou(t,e){return function(n){return n.lift(new au(t,e))}}class au{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new lu(t,this.predicate,this.thisArg))}}class lu extends p{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function cu(t){return function(e){const n=new hu(t),i=e.lift(n);return n.caught=i}}class hu{constructor(t){this.selector=t}call(t,e){return e.subscribe(new uu(t,this.selector,this.caught))}}class uu extends N{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const i=new j(this);this.add(i);const r=B(n,i);r!==i&&this.add(r)}}}function du(t,e){return $(t,e,1)}function fu(t){return function(e){return 0===t?Xh():e.lift(new pu(t))}}class pu{constructor(t){if(this.total=t,this.total<0)throw new Qh}call(t,e){return e.subscribe(new gu(t,this.total))}}class gu extends p{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,i=this.count++;e.length<n?e.push(t):e[i%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,i=this.ring;for(let r=0;r<n;r++){const r=e++%n;t.next(i[r])}}t.complete()}}function mu(t=_u){return e=>e.lift(new vu(t))}class vu{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new yu(t,this.errorFactory))}}class yu extends p{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let e;try{e=this.errorFactory()}catch(t){e=t}this.destination.error(e)}}}function _u(){return new Uh}function bu(t=null){return e=>e.lift(new wu(t))}class wu{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Cu(t,this.defaultValue))}}class Cu extends p{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function xu(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ou((e,n)=>t(e,n,i)):v,Jh(1),n?bu(e):mu(()=>new Uh))}function Su(){}function ku(t,e,n){return function(i){return i.lift(new Tu(t,e,n))}}class Tu{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new Eu(t,this.nextOrObserver,this.error,this.complete))}}class Eu extends p{constructor(t,e,n,r){super(t),this._tapNext=Su,this._tapError=Su,this._tapComplete=Su,this._tapError=n||Su,this._tapComplete=r||Su,i(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||Su,this._tapError=e.error||Su,this._tapComplete=e.complete||Su)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}class Ou{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Pu(t,this.callback))}}class Pu extends p{constructor(t,e){super(t),this.add(new u(e))}}class Au{constructor(t,e){this.id=t,this.url=e}}class Mu extends Au{constructor(t,e,n="imperative",i=null){super(t,e),this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Iu extends Au{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Du extends Au{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ru extends Au{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Lu extends Au{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Fu extends Au{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ju extends Au{constructor(t,e,n,i,r){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=r}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Nu extends Au{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Bu extends Au{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class $u{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zu{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Vu{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Gu{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Uu{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hu{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Wu{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Xu="primary";class qu{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Yu(t){return new qu(t)}function Ku(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Zu(t,e,n){const i=n.path.split("/");if(i.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||i.length<t.length))return null;const r={};for(let s=0;s<i.length;s++){const e=i[s],n=t[s];if(e.startsWith(":"))r[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function Qu(t,e){const n=t?Object.keys(t):void 0,i=e?Object.keys(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!Ju(t[r],e[r]))return!1;return!0}function Ju(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),i=[...e].sort();return n.every((t,e)=>i[e]===t)}return t===e}function td(t){return Array.prototype.concat.apply([],t)}function ed(t){return t.length>0?t[t.length-1]:null}function nd(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function id(t){return eo(t)?t:to(t)?F(Promise.resolve(t)):Fh(t)}const rd={exact:function t(e,n,i){if(!fd(e.segments,n.segments))return!1;if(!cd(e.segments,n.segments,i))return!1;if(e.numberOfChildren!==n.numberOfChildren)return!1;for(const r in n.children){if(!e.children[r])return!1;if(!t(e.children[r],n.children[r],i))return!1}return!0},subset:ad},sd={exact:function(t,e){return Qu(t,e)},subset:function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>Ju(t[n],e[n]))},ignored:()=>!0};function od(t,e,n){return rd[n.paths](t.root,e.root,n.matrixParams)&&sd[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function ad(t,e,n){return ld(t,e,e.segments,n)}function ld(t,e,n,i){if(t.segments.length>n.length){const r=t.segments.slice(0,n.length);return!!fd(r,n)&&!e.hasChildren()&&!!cd(r,n,i)}if(t.segments.length===n.length){if(!fd(t.segments,n))return!1;if(!cd(t.segments,n,i))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!ad(t.children[n],e.children[n],i))return!1}return!0}{const r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!!fd(t.segments,r)&&!!cd(t.segments,r,i)&&!!t.children.primary&&ld(t.children.primary,e,s,i)}}function cd(t,e,n){return e.every((e,i)=>sd[n](t[i].parameters,e.parameters))}class hd{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yu(this.queryParams)),this._queryParamMap}toString(){return md.serialize(this)}}class ud{constructor(t,e){this.segments=t,this.children=e,this.parent=null,nd(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return vd(this)}}class dd{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Yu(this.parameters)),this._parameterMap}toString(){return Sd(this)}}function fd(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class pd{}class gd{parse(t){const e=new Pd(t);return new hd(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${yd(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${bd(e)}=${bd(t)}`).join("&"):`${bd(e)}=${bd(n)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const md=new gd;function vd(t){return t.segments.map(t=>Sd(t)).join("/")}function yd(t,e){if(!t.hasChildren())return vd(t);if(e){const e=t.children.primary?yd(t.children.primary,!1):"",n=[];return nd(t.children,(t,e)=>{e!==Xu&&n.push(`${e}:${yd(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return nd(t.children,(t,i)=>{i===Xu&&(n=n.concat(e(t,i)))}),nd(t.children,(t,i)=>{i!==Xu&&(n=n.concat(e(t,i)))}),n}(t,(e,n)=>n===Xu?[yd(t.children.primary,!1)]:[`${n}:${yd(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${vd(t)}/${e[0]}`:`${vd(t)}/(${e.join("//")})`}}function _d(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bd(t){return _d(t).replace(/%3B/gi,";")}function wd(t){return _d(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Cd(t){return decodeURIComponent(t)}function xd(t){return Cd(t.replace(/\+/g,"%20"))}function Sd(t){return`${wd(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${wd(t)}=${wd(e[t])}`).join("")}`;var e}const kd=/^[^\/()?;=#]+/;function Td(t){const e=t.match(kd);return e?e[0]:""}const Ed=/^[^=?&#]+/,Od=/^[^?&#]+/;class Pd{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new ud([],{}):new ud([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new ud(t,e)),n}parseSegment(){const t=Td(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new dd(Cd(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Td(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Td(this.remaining);t&&(n=t,this.capture(n))}t[Cd(e)]=Cd(n)}parseQueryParam(t){const e=function(t){const e=t.match(Ed);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Od);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const i=xd(e),r=xd(n);if(t.hasOwnProperty(i)){let e=t[i];Array.isArray(e)||(e=[e],t[i]=e),e.push(r)}else t[i]=r}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Td(this.remaining),i=this.remaining[n.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let r;n.indexOf(":")>-1?(r=n.substr(0,n.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=Xu);const s=this.parseChildren();e[r]=1===Object.keys(s).length?s.primary:new ud([],s),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Ad{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Md(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Md(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=Id(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return Id(t,this._root).map(t=>t.value)}}function Md(t,e){if(t===e.value)return e;for(const n of e.children){const e=Md(t,n);if(e)return e}return null}function Id(t,e){if(t===e.value)return[e];for(const n of e.children){const i=Id(t,n);if(i.length)return i.unshift(e),i}return[]}class Dd{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Rd(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Ld extends Ad{constructor(t,e){super(t),this.snapshot=e,zd(this,t)}toString(){return this.snapshot.toString()}}function Fd(t,e){const n=function(t,e){const n=new Bd([],{},{},"",{},Xu,e,null,t.root,-1,{});return new $d("",new Dd(n,[]))}(t,e),i=new jh([new dd("",{})]),r=new jh({}),s=new jh({}),o=new jh({}),a=new jh(""),l=new jd(i,r,o,a,s,Xu,e,n.root);return l.snapshot=n.root,new Ld(new Dd(l,[]),n)}class jd{constructor(t,e,n,i,r,s,o,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(T(t=>Yu(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(T(t=>Yu(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Nd(t,e="emptyOnly"){const n=t.pathFromRoot;let i=0;if("always"!==e)for(i=n.length-1;i>=1;){const t=n[i],e=n[i-1];if(t.routeConfig&&""===t.routeConfig.path)i--;else{if(e.component)break;i--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(i))}class Bd{constructor(t,e,n,i,r,s,o,a,l,c,h){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=r,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=l,this._lastPathIndex=c,this._resolve=h}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yu(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yu(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class $d extends Ad{constructor(t,e){super(e),this.url=t,zd(this,e)}toString(){return Vd(this._root)}}function zd(t,e){e.value._routerState=t,e.children.forEach(e=>zd(t,e))}function Vd(t){const e=t.children.length>0?` { ${t.children.map(Vd).join(", ")} } `:"";return`${t.value}${e}`}function Gd(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Qu(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Qu(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Qu(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Qu(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function Ud(t,e){var n,i;return Qu(t.params,e.params)&&fd(n=t.url,i=e.url)&&n.every((t,e)=>Qu(t.parameters,i[e].parameters))&&!(!t.parent!=!e.parent)&&(!t.parent||Ud(t.parent,e.parent))}function Hd(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const i=n.value;i._futureSnapshot=e.value;const r=function(t,e,n){return e.children.map(e=>{for(const i of n.children)if(t.shouldReuseRoute(e.value,i.value.snapshot))return Hd(t,e,i);return Hd(t,e)})}(t,e,n);return new Dd(i,r)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return Wd(e,t),t}}const n=new jd(new jh((i=e.value).url),new jh(i.params),new jh(i.queryParams),new jh(i.fragment),new jh(i.data),i.outlet,i.component,i),r=e.children.map(e=>Hd(t,e));return new Dd(n,r)}var i}function Wd(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Wd(t.children[n],e.children[n])}function Xd(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function qd(t){return"object"==typeof t&&null!=t&&t.outlets}function Yd(t,e,n,i,r){let s={};return i&&nd(i,(t,e)=>{s[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new hd(n.root===t?e:Kd(n.root,t,e),s,r)}function Kd(t,e,n){const i={};return nd(t.children,(t,r)=>{i[r]=t===e?n:Kd(t,e,n)}),new ud(t.segments,i)}class Zd{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Xd(n[0]))throw new Error("Root segment cannot have matrix parameters");const i=n.find(qd);if(i&&i!==ed(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Qd{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Jd(t,e,n){if(t||(t=new ud([],{})),0===t.segments.length&&t.hasChildren())return tf(t,e,n);const i=function(t,e,n){let i=0,r=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;const e=t.segments[r],o=n[i];if(qd(o))break;const a=`${o}`,l=i<n.length-1?n[i+1]:null;if(r>0&&void 0===a)break;if(a&&l&&"object"==typeof l&&void 0===l.outlets){if(!sf(a,l,e))return s;i+=2}else{if(!sf(a,{},e))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){const e=new ud(t.segments.slice(0,i.pathIndex),{});return e.children.primary=new ud(t.segments.slice(i.pathIndex),t.children),tf(e,0,r)}return i.match&&0===r.length?new ud(t.segments,{}):i.match&&!t.hasChildren()?ef(t,e,n):i.match?tf(t,0,r):ef(t,e,n)}function tf(t,e,n){if(0===n.length)return new ud(t.segments,{});{const i=function(t){return qd(t[0])?t[0].outlets:{[Xu]:t}}(n),r={};return nd(i,(n,i)=>{"string"==typeof n&&(n=[n]),null!==n&&(r[i]=Jd(t.children[i],e,n))}),nd(t.children,(t,e)=>{void 0===i[e]&&(r[e]=t)}),new ud(t.segments,r)}}function ef(t,e,n){const i=t.segments.slice(0,e);let r=0;for(;r<n.length;){const s=n[r];if(qd(s)){const t=nf(s.outlets);return new ud(i,t)}if(0===r&&Xd(n[0])){i.push(new dd(t.segments[e].path,rf(n[0]))),r++;continue}const o=qd(s)?s.outlets.primary:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Xd(a)?(i.push(new dd(o,rf(a))),r+=2):(i.push(new dd(o,{})),r++)}return new ud(i,{})}function nf(t){const e={};return nd(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=ef(new ud([],{}),0,t))}),e}function rf(t){const e={};return nd(t,(t,n)=>e[n]=`${t}`),e}function sf(t,e,n){return t==n.path&&Qu(e,n.parameters)}class of{constructor(t,e,n,i){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Gd(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const i=Rd(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,i[e],n),delete i[e]}),nd(i,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(i===r)if(i.component){const r=n.getContext(i.outlet);r&&this.deactivateChildRoutes(t,e,r.children)}else this.deactivateChildRoutes(t,e,n);else r&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),i=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:i})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,r=Rd(t);for(const s of Object.keys(r))this.deactivateRouteAndItsChildren(r[s],i);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const i=Rd(e);t.children.forEach(t=>{this.activateRoutes(t,i[t.value.outlet],n),this.forwardEvent(new Hu(t.value.snapshot))}),t.children.length&&this.forwardEvent(new Gu(t.value.snapshot))}activateRoutes(t,e,n){const i=t.value,r=e?e.value:null;if(Gd(i),i===r)if(i.component){const r=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,r.children)}else this.activateChildRoutes(t,e,n);else if(i.component){const e=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const t=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),af(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),r=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=i,e.resolver=r,e.outlet&&e.outlet.activateWith(i,r),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function af(t){Gd(t.value),t.children.forEach(af)}class lf{constructor(t,e){this.routes=t,this.module=e}}function cf(t){return"function"==typeof t}function hf(t){return t instanceof hd}const uf=Symbol("INITIAL_VALUE");function df(){return Yh(t=>function(...t){let e,n;return k(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),U(t,n).lift(new Vh(e))}(t.map(t=>t.pipe(Jh(1),nu(uf)))).pipe(iu((t,e)=>{let n=!1;return e.reduce((t,i,r)=>{if(t!==uf)return t;if(i===uf&&(n=!0),!n){if(!1===i)return i;if(r===e.length-1||hf(i))return i}return t},t)},uf),ou(t=>t!==uf),T(t=>hf(t)?t:!0===t),Jh(1)))}let ff=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&Ks(0,"router-outlet")},directives:function(){return[lp]},encapsulation:2}),t})();function pf(t,e=""){for(let n=0;n<t.length;n++){const i=t[n];gf(i,mf(e,i))}}function gf(t,e){t.children&&pf(t.children,e)}function mf(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function vf(t){const e=t.children&&t.children.map(vf),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Xu&&(n.component=ff),n}function yf(t){return t.outlet||Xu}function _f(t,e){const n=t.filter(t=>yf(t)===e);return n.push(...t.filter(t=>yf(t)!==e)),n}const bf={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function wf(t,e,n){var i;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},bf):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const r=(e.matcher||Zu)(n,t,e);if(!r)return Object.assign({},bf);const s={};nd(r.posParams,(t,e)=>{s[e]=t.path});const o=r.consumed.length>0?Object.assign(Object.assign({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,lastChild:r.consumed.length,parameters:o,positionalParamSegments:null!==(i=r.posParams)&&void 0!==i?i:{}}}function Cf(t,e,n,i,r="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>xf(t,e,n)&&yf(n)!==Xu)}(t,n,i)){const r=new ud(e,function(t,e,n,i){const r={};r.primary=i,i._sourceSegment=t,i._segmentIndexShift=e.length;for(const s of n)if(""===s.path&&yf(s)!==Xu){const n=new ud([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,r[yf(s)]=n}return r}(t,e,i,new ud(n,t.children)));return r._sourceSegment=t,r._segmentIndexShift=e.length,{segmentGroup:r,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>xf(t,e,n))}(t,n,i)){const s=new ud(t.segments,function(t,e,n,i,r,s){const o={};for(const a of i)if(xf(t,n,a)&&!r[yf(a)]){const n=new ud([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===s?t.segments.length:e.length,o[yf(a)]=n}return Object.assign(Object.assign({},r),o)}(t,e,n,i,t.children,r));return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}const s=new ud(t.segments,t.children);return s._sourceSegment=t,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:n}}function xf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Sf(t,e,n,i){return!!(yf(t)===i||i!==Xu&&xf(e,n,t))&&("**"===t.path||wf(e,t,n).matched)}function kf(t,e,n){return 0===e.length&&!t.children[n]}class Tf{constructor(t){this.segmentGroup=t||null}}class Ef{constructor(t){this.urlTree=t}}function Of(t){return new y(e=>e.error(new Tf(t)))}function Pf(t){return new y(e=>e.error(new Ef(t)))}function Af(t){return new y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Mf{constructor(t,e,n,i,r){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=r,this.allowRedirects=!0,this.ngModule=t.get($a)}apply(){const t=Cf(this.urlTree.root,[],[],this.config).segmentGroup,e=new ud(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Xu).pipe(T(t=>this.createUrlTree(If(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(cu(t=>{if(t instanceof Ef)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof Tf)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Xu).pipe(T(e=>this.createUrlTree(If(e),t.queryParams,t.fragment))).pipe(cu(t=>{if(t instanceof Tf)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const i=t.segments.length>0?new ud([],{[Xu]:t}):t;return new hd(i,e,n)}expandSegmentGroup(t,e,n,i){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(T(t=>new ud([],t))):this.expandSegment(t,n,e,n.segments,i,!0)}expandChildren(t,e,n){const i=[];for(const r of Object.keys(n.children))"primary"===r?i.unshift(r):i.push(r);return F(i).pipe(du(i=>{const r=n.children[i],s=_f(e,i);return this.expandSegmentGroup(t,s,r,i).pipe(T(t=>({segment:t,outlet:i})))}),iu((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return i=>i.pipe(t?ou((e,n)=>t(e,n,i)):v,fu(1),n?bu(e):mu(()=>new Uh))}())}expandSegment(t,e,n,i,r,s){return F(n).pipe(du(o=>this.expandSegmentAgainstRoute(t,e,n,o,i,r,s).pipe(cu(t=>{if(t instanceof Tf)return Fh(null);throw t}))),xu(t=>!!t),cu((t,n)=>{if(t instanceof Uh||"EmptyError"===t.name){if(kf(e,i,r))return Fh(new ud([],{}));throw new Tf(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,i,r,s,o){return Sf(i,e,r,s)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(t,e,i,r,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s):Of(e):Of(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,i,s):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,i){const r=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Pf(r):this.lineralizeSegments(n,r).pipe($(n=>{const r=new ud(n,{});return this.expandSegment(t,r,e,n,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,i,r,s){const{matched:o,consumedSegments:a,lastChild:l,positionalParamSegments:c}=wf(e,i,r);if(!o)return Of(e);const h=this.applyRedirectCommands(a,i.redirectTo,c);return i.redirectTo.startsWith("/")?Pf(h):this.lineralizeSegments(i,h).pipe($(i=>this.expandSegment(t,e,n,i.concat(r.slice(l)),s,!1)))}matchSegmentAgainstRoute(t,e,n,i,r){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Fh(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(T(t=>(n._loadedConfig=t,new ud(i,{})))):Fh(new ud(i,{}));const{matched:s,consumedSegments:o,lastChild:a}=wf(e,n,i);if(!s)return Of(e);const l=i.slice(a);return this.getChildConfig(t,n,i).pipe($(t=>{const i=t.module,s=t.routes,{segmentGroup:a,slicedSegments:c}=Cf(e,o,l,s),h=new ud(a.segments,a.children);if(0===c.length&&h.hasChildren())return this.expandChildren(i,s,h).pipe(T(t=>new ud(o,t)));if(0===s.length&&0===c.length)return Fh(new ud(o,{}));const u=yf(n)===r;return this.expandSegment(i,h,s,c,u?Xu:r,!0).pipe(T(t=>new ud(o.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Fh(new lf(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Fh(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe($(n=>n?this.configLoader.load(t.injector,e).pipe(T(t=>(e._loadedConfig=t,t))):function(t){return new y(e=>e.error(Ku(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Fh(new lf([],t))}runCanLoadGuards(t,e,n){const i=e.canLoad;return i&&0!==i.length?Fh(i.map(i=>{const r=t.get(i);let s;if(function(t){return t&&cf(t.canLoad)}(r))s=r.canLoad(e,n);else{if(!cf(r))throw new Error("Invalid CanLoad guard");s=r(e,n)}return id(s)})).pipe(df(),ku(t=>{if(!hf(t))return;const e=Ku(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),T(t=>!0===t)):Fh(!0)}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),0===i.numberOfChildren)return Fh(n);if(i.numberOfChildren>1||!i.children.primary)return Af(t.redirectTo);i=i.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,i){const r=this.createSegmentGroup(t,e.root,n,i);return new hd(r,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return nd(t,(t,i)=>{if("string"==typeof t&&t.startsWith(":")){const r=t.substring(1);n[i]=e[r]}else n[i]=t}),n}createSegmentGroup(t,e,n,i){const r=this.createSegments(t,e.segments,n,i);let s={};return nd(e.children,(e,r)=>{s[r]=this.createSegmentGroup(t,e,n,i)}),new ud(r,s)}createSegments(t,e,n,i){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,i):this.findOrReturn(e,n))}findPosParam(t,e,n){const i=n[e.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return i}findOrReturn(t,e){let n=0;for(const i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}}function If(t){const e={};for(const n of Object.keys(t.children)){const i=If(t.children[n]);(i.segments.length>0||i.hasChildren())&&(e[n]=i)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new ud(t.segments.concat(e.segments),e.children)}return t}(new ud(t.segments,e))}class Df{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Rf{constructor(t,e){this.component=t,this.route=e}}function Lf(t,e,n){const i=t._root;return jf(i,e?e._root:null,n,[i.value])}function Ff(t,e,n){const i=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(i?i.module.injector:n).get(t)}function jf(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=Rd(e);return t.children.forEach(t=>{!function(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){const s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const l=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!fd(t.url,e.url);case"pathParamsOrQueryParamsChange":return!fd(t.url,e.url)||!Qu(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ud(t,e)||!Qu(t.queryParams,e.queryParams);case"paramsChange":default:return!Ud(t,e)}}(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Df(i)):(s.data=o.data,s._resolvedData=o._resolvedData),jf(t,e,s.component?a?a.children:null:n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Rf(a.outlet.component,o))}else o&&Nf(e,a,r),r.canActivateChecks.push(new Df(i)),jf(t,null,s.component?a?a.children:null:n,i,r)}(t,s[t.value.outlet],n,i.concat([t.value]),r),delete s[t.value.outlet]}),nd(s,(t,e)=>Nf(t,n.getContext(e),r)),r}function Nf(t,e,n){const i=Rd(t),r=t.value;nd(i,(t,i)=>{Nf(t,r.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new Rf(r.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,r))}class Bf{}function $f(t){return new y(e=>e.error(t))}class zf{constructor(t,e,n,i,r,s){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=i,this.paramsInheritanceStrategy=r,this.relativeLinkResolution=s}recognize(){const t=Cf(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Xu);if(null===e)return null;const n=new Bd([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Xu,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Dd(n,e),r=new $d(this.url,i);return this.inheritParamsAndData(r._root),r}inheritParamsAndData(t){const e=t.value,n=Nd(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const r of Object.keys(e.children)){const i=e.children[r],s=_f(t,r),o=this.processSegmentGroup(s,i,r);if(null===o)return null;n.push(...o)}const i=Gf(n);return i.sort((t,e)=>t.value.outlet===Xu?-1:e.value.outlet===Xu?1:t.value.outlet.localeCompare(e.value.outlet)),i}processSegment(t,e,n,i){for(const r of t){const t=this.processSegmentAgainstRoute(r,e,n,i);if(null!==t)return t}return kf(e,n,i)?[]:null}processSegmentAgainstRoute(t,e,n,i){if(t.redirectTo||!Sf(t,e,n,i))return null;let r,s=[],o=[];if("**"===t.path){const i=n.length>0?ed(n).parameters:{};r=new Bd(n,i,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wf(t),yf(t),t.component,t,Uf(e),Hf(e)+n.length,Xf(t))}else{const i=wf(e,t,n);if(!i.matched)return null;s=i.consumedSegments,o=n.slice(i.lastChild),r=new Bd(s,i.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Wf(t),yf(t),t.component,t,Uf(e),Hf(e)+s.length,Xf(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:l,slicedSegments:c}=Cf(e,s,o,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&l.hasChildren()){const t=this.processChildren(a,l);return null===t?null:[new Dd(r,t)]}if(0===a.length&&0===c.length)return[new Dd(r,[])];const h=yf(t)===i,u=this.processSegment(a,l,c,h?Xu:i);return null===u?null:[new Dd(r,u)]}}function Vf(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Gf(t){const e=[],n=new Set;for(const i of t){if(!Vf(i)){e.push(i);continue}const t=e.find(t=>i.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...i.children),n.add(t)):e.push(i)}for(const i of n){const t=Gf(i.children);e.push(new Dd(i.value,t))}return e.filter(t=>!n.has(t))}function Uf(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Hf(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function Wf(t){return t.data||{}}function Xf(t){return t.resolve||{}}function qf(t){return Yh(e=>{const n=t(e);return n?F(n).pipe(T(()=>e)):Fh(e)})}class Yf{}class Kf extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Zf=new Wn("ROUTES");class Qf{constructor(t,e,n,i){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=i}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(T(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new lf(td(i.injector.get(Zf,void 0,bt.Self|bt.Optional)).map(vf),i)}),cu(t=>{throw e._loader$=void 0,t}));return e._loader$=new Y(n,()=>new x).pipe(W()),e._loader$}loadModuleFactory(t){return"string"==typeof t?F(this.loader.load(t)):id(t()).pipe($(t=>t instanceof za?Fh(t):F(this.compiler.compileModuleAsync(t))))}}class Jf{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new tp,this.attachRef=null}}class tp{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Jf,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class ep{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function np(t){throw t}function ip(t,e,n){return e.parse("/")}function rp(t,e){return Fh(null)}const sp={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},op={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let ap=(()=>{class t{constructor(t,e,n,i,r,s,o,a){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=a,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new x,this.errorHandler=np,this.malformedUriErrorHandler=ip,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:rp,afterPreactivation:rp},this.urlHandlingStrategy=new ep,this.routeReuseStrategy=new Kf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=r.get($a),this.console=r.get(Il);const l=r.get(Hl);this.isNgZoneEnabled=l instanceof Hl&&Hl.isInAngularZone(),this.resetConfig(a),this.currentUrlTree=new hd(new ud([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Qf(s,o,t=>this.triggerEvent(new $u(t)),t=>this.triggerEvent(new zu(t))),this.routerState=Fd(this.currentUrlTree,this.rootComponentType),this.transitions=new jh({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(ou(t=>0!==t.id),T(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Yh(t=>{let n=!1,i=!1;return Fh(t).pipe(ku(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Yh(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Fh(t).pipe(Yh(t=>{const n=this.transitions.getValue();return e.next(new Mu(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?Wh:Promise.resolve(t)}),function(t,e,n,i){return Yh(r=>function(t,e,n,i,r){return new Mf(t,e,n,i,r).apply()}(t,e,n,r.extractedUrl,i).pipe(T(t=>Object.assign(Object.assign({},r),{urlAfterRedirects:t}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),ku(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,i,r){return $(s=>function(t,e,n,i,r="emptyOnly",s="legacy"){try{const o=new zf(t,e,n,i,r,s).recognize();return null===o?$f(new Bf):Fh(o)}catch(o){return $f(o)}}(t,e,s.urlAfterRedirects,n(s.urlAfterRedirects),i,r).pipe(T(t=>Object.assign(Object.assign({},s),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),ku(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Lu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:i,source:r,restoredState:s,extras:o}=t,a=new Mu(n,this.serializeUrl(i),r,s);e.next(a);const l=Fd(i,this.rootComponentType).snapshot;return Fh(Object.assign(Object.assign({},t),{targetSnapshot:l,urlAfterRedirects:i,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),Wh}),qf(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),ku(t=>{const e=new Fu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),T(t=>Object.assign(Object.assign({},t),{guards:Lf(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return $(n=>{const{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?Fh(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,i){return F(t).pipe($(t=>function(t,e,n,i,r){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?Fh(s.map(s=>{const o=Ff(s,e,r);let a;if(function(t){return t&&cf(t.canDeactivate)}(o))a=id(o.canDeactivate(t,e,n,i));else{if(!cf(o))throw new Error("Invalid CanDeactivate guard");a=id(o(t,e,n,i))}return a.pipe(xu())})).pipe(df()):Fh(!0)}(t.component,t.route,n,e,i)),xu(t=>!0!==t,!0))}(o,i,r,t).pipe($(n=>n&&"boolean"==typeof n?function(t,e,n,i){return F(e).pipe(du(e=>Hh(function(t,e){return null!==t&&e&&e(new Vu(t)),Fh(!0)}(e.route.parent,i),function(t,e){return null!==t&&e&&e(new Uu(t)),Fh(!0)}(e.route,i),function(t,e,n){const i=e[e.length-1],r=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>qh(()=>Fh(e.guards.map(r=>{const s=Ff(r,e.node,n);let o;if(function(t){return t&&cf(t.canActivateChild)}(s))o=id(s.canActivateChild(i,t));else{if(!cf(s))throw new Error("Invalid CanActivateChild guard");o=id(s(i,t))}return o.pipe(xu())})).pipe(df())));return Fh(r).pipe(df())}(t,e.path,n),function(t,e,n){const i=e.routeConfig?e.routeConfig.canActivate:null;return i&&0!==i.length?Fh(i.map(i=>qh(()=>{const r=Ff(i,e,n);let s;if(function(t){return t&&cf(t.canActivate)}(r))s=id(r.canActivate(e,t));else{if(!cf(r))throw new Error("Invalid CanActivate guard");s=id(r(e,t))}return s.pipe(xu())}))).pipe(df()):Fh(!0)}(t,e.route,n))),xu(t=>!0!==t,!0))}(i,s,t,e):Fh(n)),T(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),ku(t=>{if(hf(t.guardsResult)){const e=Ku(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new ju(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),ou(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Du(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),qf(t=>{if(t.guards.canActivateChecks.length)return Fh(t).pipe(ku(t=>{const e=new Nu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Yh(t=>{let n=!1;return Fh(t).pipe((i=this.paramsInheritanceStrategy,r=this.ngModule.injector,$(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Fh(t);let s=0;return F(n).pipe(du(t=>function(t,e,n,i){return function(t,e,n,i){const r=Object.keys(t);if(0===r.length)return Fh({});const s={};return F(r).pipe($(r=>function(t,e,n,i){const r=Ff(t,e,i);return id(r.resolve?r.resolve(e,n):r(e,n))}(t[r],e,n,i).pipe(ku(t=>{s[r]=t}))),fu(1),$(()=>Object.keys(s).length===r.length?Fh(s):Wh))}(t._resolve,t,e,i).pipe(T(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),Nd(t,n).resolve),null)))}(t.route,e,i,r)),ku(()=>s++),fu(1),$(e=>s===n.length?Fh(t):Wh))})),ku({next:()=>n=!0,complete:()=>{if(!n){const n=new Du(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var i,r}),ku(t=>{const e=new Bu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),qf(t=>{const{targetSnapshot:e,id:n,extractedUrl:i,rawUrl:r,extras:{skipLocationChange:s,replaceUrl:o}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:i,rawUrlTree:r,skipLocationChange:!!s,replaceUrl:!!o})}),T(t=>{const e=function(t,e,n){const i=Hd(t,e._root,n?n._root:void 0);return new Ld(i,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),ku(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(s=this.rootContexts,o=this.routeReuseStrategy,a=t=>this.triggerEvent(t),T(t=>(new of(o,t.targetRouterState,t.currentRouterState,a).activate(s),t))),ku({next(){n=!0},complete(){n=!0}}),(r=()=>{if(!n&&!i){this.resetUrlToCurrentUrlTree();const n=new Du(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new Ou(r))),cu(n=>{if(i=!0,(r=n)&&r.ngNavigationCancelingError){const i=hf(n.url);i||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const r=new Du(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(r),i?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const i=new Ru(t.id,this.serializeUrl(t.extractedUrl),n);e.next(i);try{t.resolve(this.errorHandler(n))}catch(s){t.reject(s)}}var r;return Wh}));var r,s,o,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:i}=e,r={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(r.state=t)}this.scheduleNavigation(i,t,n,r)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){pf(t),this.config=t.map(vf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:i,fragment:r,queryParamsHandling:s,preserveFragment:o}=e,a=n||this.routerState.root,l=o?this.currentUrlTree.fragment:r;let c=null;switch(s){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),i);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=i||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,i,r){if(0===n.length)return Yd(e.root,e.root,e,i,r);const s=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Zd(!0,0,t);let e=0,n=!1;const i=t.reduce((t,i,r)=>{if("object"==typeof i&&null!=i){if(i.outlets){const e={};return nd(i.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(i.segmentPath)return[...t,i.segmentPath]}return"string"!=typeof i?[...t,i]:0===r?(i.split("/").forEach((i,r)=>{0==r&&"."===i||(0==r&&""===i?n=!0:".."===i?e++:""!=i&&t.push(i))}),t):[...t,i]},[]);return new Zd(n,e,i)}(n);if(s.toRoot())return Yd(e.root,new ud([],{}),e,i,r);const o=function(t,e,n){if(t.isAbsolute)return new Qd(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Qd(t,t===e.root,0)}const i=Xd(t.commands[0])?0:1;return function(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Error("Invalid number of '../'");r=i.segments.length}return new Qd(i,!1,r-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+i,t.numberOfDoubleDots)}(s,e,t),a=o.processChildren?tf(o.segmentGroup,o.index,s.commands):Jd(o.segmentGroup,o.index,s.commands);return Yd(o.segmentGroup,a,e,i,r)}(a,this.currentUrlTree,t,c,null!=l?l:null)}navigateByUrl(t,e={skipLocationChange:!1}){const n=hf(t)?t:this.parseUrl(t),i=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(i,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(n){e=this.malformedUriErrorHandler(n,this.urlSerializer,t)}return e}isActive(t,e){let n;if(n=!0===e?Object.assign({},sp):!1===e?Object.assign({},op):e,hf(t))return od(this.currentUrlTree,t,n);const i=this.parseUrl(t);return od(this.currentUrlTree,i,n)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const i=t[n];return null!=i&&(e[n]=i),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Iu(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,i,r){if(this.disposed)return Promise.resolve(!1);const s=this.getTransition(),o="imperative"!==e&&"imperative"===(null==s?void 0:s.source),a=(this.lastSuccessfulId===s.id||this.currentNavigation?s.rawUrl:s.urlAfterRedirects).toString()===t.toString();if(o&&a)return Promise.resolve(!0);let l,c,h;r?(l=r.resolve,c=r.reject,h=r.promise):h=new Promise((t,e)=>{l=t,c=e});const u=++this.navigationId;return this.setTransition({id:u,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:i,resolve:l,reject:c,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,i){const r=this.urlSerializer.serialize(t);i=i||{},this.location.isCurrentPathEqualTo(r)||e?this.location.replaceState(r,"",Object.assign(Object.assign({},i),{navigationId:n})):this.location.go(r,"",Object.assign(Object.assign({},i),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(hi(qn),hi(pd),hi(tp),hi(Bc),hi(Ps),hi(pc),hi(Vl),hi(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),lp=(()=>{class t{constructor(t,e,n,i,r){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=r,this.activated=null,this._activatedRoute=null,this.activateEvents=new sl,this.deactivateEvents=new sl,this.name=i||Xu,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),i=this.parentContexts.getOrCreateContext(this.name).children,r=new cp(t,i,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,r),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(Hs(tp),Hs(Ga),Hs(ea),Vn("name"),Hs(Ma))},t.\u0275dir=qt({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class cp{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===jd?this.route:t===tp?this.childContexts:this.parent.get(t,e)}}class hp{}class up{preload(t,e){return e().pipe(cu(()=>Fh(null)))}}class dp{preload(t,e){return Fh(null)}}let fp=(()=>{class t{constructor(t,e,n,i,r){this.router=t,this.injector=i,this.preloadingStrategy=r,this.loader=new Qf(e,n,e=>t.triggerEvent(new $u(e)),e=>t.triggerEvent(new zu(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(ou(t=>t instanceof Iu),du(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get($a);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const i of e)if(i.loadChildren&&!i.canLoad&&i._loadedConfig){const t=i._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else i.loadChildren&&!i.canLoad?n.push(this.preloadConfig(t,i)):i.children&&n.push(this.processRoutes(t,i.children));return F(n).pipe(G(),T(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Fh(e._loadedConfig):this.loader.load(t.injector,e)).pipe($(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(hi(ap),hi(pc),hi(Vl),hi(Ps),hi(hp))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),pp=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Mu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Iu&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Wu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Wu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(hi(ap),hi(nh),hi(void 0))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const gp=new Wn("ROUTER_CONFIGURATION"),mp=new Wn("ROUTER_FORROOT_GUARD"),vp=[Bc,{provide:pd,useClass:gd},{provide:ap,useFactory:function(t,e,n,i,r,s,o,a={},l,c){const h=new ap(null,t,e,n,i,r,s,td(o));return l&&(h.urlHandlingStrategy=l),c&&(h.routeReuseStrategy=c),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(a,h),a.enableTracing&&h.events.subscribe(t=>{var e,n;null===(e=console.group)||void 0===e||e.call(console,`Router Event: ${t.constructor.name}`),console.log(t.toString()),console.log(t),null===(n=console.groupEnd)||void 0===n||n.call(console)}),h},deps:[pd,tp,Bc,Ps,pc,Vl,Zf,gp,[class{},new gi],[Yf,new gi]]},tp,{provide:jd,useFactory:function(t){return t.routerState.root},deps:[ap]},{provide:pc,useClass:vc},fp,dp,up,{provide:gp,useValue:{enableTracing:!1}}];function yp(){return new ac("Router",ap)}let _p=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[vp,xp(e),{provide:mp,useFactory:Cp,deps:[[ap,new gi,new mi]]},{provide:gp,useValue:n||{}},{provide:Rc,useFactory:wp,deps:[kc,[new pi(Fc),new gi],gp]},{provide:pp,useFactory:bp,deps:[ap,nh,gp]},{provide:hp,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:dp},{provide:ac,multi:!0,useFactory:yp},[Sp,{provide:Sl,multi:!0,useFactory:kp,deps:[Sp]},{provide:Ep,useFactory:Tp,deps:[Sp]},{provide:Ml,multi:!0,useExisting:Ep}]]}}static forChild(e){return{ngModule:t,providers:[xp(e)]}}}return t.\u0275fac=function(e){return new(e||t)(hi(mp,8),hi(ap,8))},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({}),t})();function bp(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new pp(t,e,n)}function wp(t,e,n={}){return n.useHash?new Nc(t,e):new jc(t,e)}function Cp(t){return"guarded"}function xp(t){return[{provide:Xn,multi:!0,useValue:t},{provide:Zf,multi:!0,useValue:t}]}let Sp=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new x}appInitializer(){return this.injector.get(Ec,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(ap),i=this.injector.get(gp);return"disabled"===i.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===i.initialNavigation||"enabledBlocking"===i.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Fh(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(gp),n=this.injector.get(fp),i=this.injector.get(pp),r=this.injector.get(ap),s=this.injector.get(dc);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||r.initialNavigation(),n.setUpPreloading(),i.init(),r.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(hi(Ps))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();function kp(t){return t.appInitializer.bind(t)}function Tp(t){return t.bootstrapListener.bind(t)}const Ep=new Wn("Router Initializer");function Op(t,e,n,i){var r,s=arguments.length,o=s<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,n,i);else for(var a=t.length-1;a>=0;a--)(r=t[a])&&(o=(s<3?r(o):s>3?r(e,n,o):r(e,n))||o);return s>3&&o&&Object.defineProperty(e,n,o),o}function Pp(t,e){return function(n,i){e(n,i,t)}}function Ap(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{l(i.next(t))}catch(e){s(e)}}function a(t){try{l(i.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}function Mp(t,e){return new y(n=>{const i=t.length;if(0===i)return void n.complete();const r=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const l=F(t[a]);let c=!1;n.add(l.subscribe({next:t=>{c||(c=!0,o++),r[a]=t},error:t=>n.error(t),complete:()=>{s++,s!==i&&c||(o===i&&n.next(e?e.reduce((t,e,n)=>(t[e]=r[n],t),{}):r),n.complete())}}))}})}let Ip=(()=>{class t{constructor(t,e){this._renderer=t,this._elementRef=e,this.onChange=t=>{},this.onTouched=()=>{}}setProperty(t,e){this._renderer.setProperty(this._elementRef.nativeElement,t,e)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(la),Hs(sa))},t.\u0275dir=qt({type:t}),t})(),Dp=(()=>{class t extends Ip{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=$n(t)))(n||t)}}(),t.\u0275dir=qt({type:t,features:[Ms]}),t})();const Rp=new Wn("NgValueAccessor"),Lp={provide:Rp,useExisting:rt(()=>jp),multi:!0},Fp=new Wn("CompositionEventMode");let jp=(()=>{class t extends Ip{constructor(t,e,n){super(t,e),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=xc()?xc().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this.setProperty("value",null==t?"":t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(la),Hs(sa),Hs(Fp,8))},t.\u0275dir=qt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&no("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[Qo([Lp]),Ms]}),t})();function Np(t){return null==t||0===t.length}function Bp(t){return null!=t&&"number"==typeof t.length}const $p=new Wn("NgValidators"),zp=new Wn("NgAsyncValidators"),Vp=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Gp{static min(t){return function(t){return e=>{if(Np(e.value)||Np(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(Np(e.value)||Np(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return Np(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return Np(t.value)||Vp.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>Np(e.value)||!Bp(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Bp(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Up;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(Np(t.value))return null;const i=t.value;return e.test(i)?null:{pattern:{requiredPattern:n,actualValue:i}}}}(t)}static nullValidator(t){return null}static compose(t){return Kp(t)}static composeAsync(t){return Qp(t)}}function Up(t){return null}function Hp(t){return null!=t}function Wp(t){const e=to(t)?F(t):t;return eo(e),e}function Xp(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function qp(t,e){return e.map(e=>e(t))}function Yp(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Kp(t){if(!t)return null;const e=t.filter(Hp);return 0==e.length?null:function(t){return Xp(qp(t,e))}}function Zp(t){return null!=t?Kp(Yp(t)):null}function Qp(t){if(!t)return null;const e=t.filter(Hp);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(l(e))return Mp(e,null);if(c(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Mp(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return Mp(t=1===t.length&&l(t[0])?t[0]:t,null).pipe(T(t=>e(...t)))}return Mp(t,null)}(qp(t,e).map(Wp)).pipe(T(Xp))}}function Jp(t){return null!=t?Qp(Yp(t)):null}function tg(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function eg(t){return t._rawValidators}function ng(t){return t._rawAsyncValidators}let ig=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Zp(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Jp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t}),t})(),rg=(()=>{class t extends ig{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=$n(t)))(n||t)}}(),t.\u0275dir=qt({type:t,features:[Ms]}),t})();class sg extends ig{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class og{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let ag=(()=>{class t extends og{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(sg,2))},t.\u0275dir=qt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&wo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[Ms]}),t})(),lg=(()=>{class t extends og{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(rg,10))},t.\u0275dir=qt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&wo("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[Ms]}),t})();function cg(t,e){dg(t,e),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&pg(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&pg(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function hg(t,e,n=!0){const i=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(i),e.valueAccessor.registerOnTouched(i)),fg(t,e),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ug(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function dg(t,e){const n=eg(t);null!==e.validator?t.setValidators(tg(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const i=ng(t);null!==e.asyncValidator?t.setAsyncValidators(tg(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]);const r=()=>t.updateValueAndValidity();ug(e._rawValidators,r),ug(e._rawAsyncValidators,r)}function fg(t,e){let n=!1;if(null!==t){if(null!==e.validator){const i=eg(t);if(Array.isArray(i)&&i.length>0){const r=i.filter(t=>t!==e.validator);r.length!==i.length&&(n=!0,t.setValidators(r))}}if(null!==e.asyncValidator){const i=ng(t);if(Array.isArray(i)&&i.length>0){const r=i.filter(t=>t!==e.asyncValidator);r.length!==i.length&&(n=!0,t.setAsyncValidators(r))}}}const i=()=>{};return ug(e._rawValidators,i),ug(e._rawAsyncValidators,i),n}function pg(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function gg(t,e){dg(t,e)}function mg(t,e){t._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)})}function vg(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const yg="VALID",_g="INVALID",bg="PENDING",wg="DISABLED";function Cg(t){return(Tg(t)?t.validators:t)||null}function xg(t){return Array.isArray(t)?Zp(t):t||null}function Sg(t,e){return(Tg(e)?e.asyncValidators:t)||null}function kg(t){return Array.isArray(t)?Jp(t):t||null}function Tg(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class Eg{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=xg(this._rawValidators),this._composedAsyncValidatorFn=kg(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===yg}get invalid(){return this.status===_g}get pending(){return this.status==bg}get disabled(){return this.status===wg}get enabled(){return this.status!==wg}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=xg(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=kg(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=bg,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=wg,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=yg,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==yg&&this.status!==bg||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?wg:yg}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=bg,this._hasOwnPendingAsyncValidator=!0;const e=Wp(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let i=t;return e.forEach(t=>{i=i instanceof Pg?i.controls.hasOwnProperty(t)?i.controls[t]:null:i instanceof Ag&&i.at(t)||null}),i}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new sl,this.statusChanges=new sl}_calculateStatus(){return this._allControlsDisabled()?wg:this.errors?_g:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(bg)?bg:this._anyControlsHaveStatus(_g)?_g:yg}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Tg(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Og extends Eg{constructor(t=null,e,n){super(Cg(e),Sg(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){vg(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){vg(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Pg extends Eg{constructor(t,e,n){super(Cg(e),Sg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Og?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,i)=>{n=e(n,t,i)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ag extends Eg{constructor(t,e,n){super(Cg(e),Sg(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Og?t.value:t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}const Mg={provide:rg,useExisting:rt(()=>Dg)},Ig=(()=>Promise.resolve(null))();let Dg=(()=>{class t extends rg{constructor(t,e){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new sl,this.form=new Pg({},Zp(t),Jp(e))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){Ig.then(()=>{const e=this._findContainer(t.path);t.control=e.registerControl(t.name,t.control),cg(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){Ig.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name),vg(this._directives,t)})}addFormGroup(t){Ig.then(()=>{const e=this._findContainer(t.path),n=new Pg({});gg(n,t),e.registerControl(t.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){Ig.then(()=>{const e=this._findContainer(t.path);e&&e.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,e){Ig.then(()=>{this.form.get(t.path).setValue(e)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,mg(this.form,this._directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return t.\u0275fac=function(e){return new(e||t)(Hs($p,10),Hs(zp,10))},t.\u0275dir=qt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,e){1&t&&no("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qo([Mg]),Ms]}),t})();const Rg={provide:sg,useExisting:rt(()=>Fg)},Lg=(()=>Promise.resolve(null))();let Fg=(()=>{class t extends sg{constructor(t,e,n,i){super(),this.control=new Og,this._registered=!1,this.update=new sl,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,i,r;return Array.isArray(e),e.forEach(t=>{t.constructor===jp?n=t:Object.getPrototypeOf(t.constructor)===Dp?i=t:r=t}),r||i||n||null}(0,i)}ngOnChanges(t){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in t&&this._updateDisabled(t),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?[...this._parent.path,this.name]:[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){cg(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){Lg.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1})})}_updateDisabled(t){const e=t.isDisabled.currentValue,n=""===e||e&&"false"!==e;Lg.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return t.\u0275fac=function(e){return new(e||t)(Hs(rg,9),Hs($p,10),Hs(zp,10),Hs(Rp,10))},t.\u0275dir=qt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Qo([Rg]),Ms,ae]}),t})(),jg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Ng=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({}),t})();const Bg=new Wn("NgModelWithFormControlWarning"),$g={provide:rg,useExisting:rt(()=>zg)};let zg=(()=>{class t extends rg{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new sl,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(fg(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return cg(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){hg(t.control||null,t,!1),vg(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,mg(this.form,this.directives),this.ngSubmit.emit(t),!1}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(hg(e||null,t),n instanceof Og&&(cg(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);gg(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return fg(t,e)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){dg(this.form,this),this._oldForm&&fg(this._oldForm,this)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(Hs($p,10),Hs(zp,10))},t.\u0275dir=qt({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&no("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Qo([$g]),Ms,ae]}),t})(),Vg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[Ng]]}),t})(),Gg=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[Vg]}),t})(),Ug=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Bg,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[Vg]}),t})(),Hg=(()=>{class t{group(t,e=null){const n=this._reduceControls(t);let i,r=null,s=null;return null!=e&&(function(t){return void 0!==t.asyncValidators||void 0!==t.validators||void 0!==t.updateOn}(e)?(r=null!=e.validators?e.validators:null,s=null!=e.asyncValidators?e.asyncValidators:null,i=null!=e.updateOn?e.updateOn:void 0):(r=null!=e.validator?e.validator:null,s=null!=e.asyncValidator?e.asyncValidator:null)),new Pg(n,{asyncValidators:s,updateOn:i,validators:r})}control(t,e,n){return new Og(t,e,n)}array(t,e,n){const i=t.map(t=>this._createControl(t));return new Ag(i,e,n)}_reduceControls(t){const e={};return Object.keys(t).forEach(n=>{e[n]=this._createControl(t[n])}),e}_createControl(t){return t instanceof Og||t instanceof Pg||t instanceof Ag?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:Ug}),t})();n(114),n(3897),n(8520);var Wg=n(7505),Xg=n(1843),qg=n(3730),Yg=n(4378),Kg=n(1558),Zg=(n(6953),n(2322));function Qg(t,e,n,r){return i(n)&&(r=n,n=void 0),r?Qg(t,e,n).pipe(T(t=>l(t)?r(...t):r(t))):new y(i=>{Jg(t,e,function(t){i.next(arguments.length>1?Array.prototype.slice.call(arguments):t)},i,n)})}function Jg(t,e,n,i,r){let s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(t)){const i=t;t.addEventListener(e,n,r),s=()=>i.removeEventListener(e,n,r)}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(t)){const i=t;t.on(e,n),s=()=>i.off(e,n)}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(t)){const i=t;t.addListener(e,n),s=()=>i.removeListener(e,n)}else{if(!t||!t.length)throw new TypeError("Invalid event target");for(let s=0,o=t.length;s<o;s++)Jg(t[s],e,n,i,r)}i.add(s)}function tm(t,e){return n=>n.lift(new em(t,e))}class em{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new nm(t,this.compare,this.keySelector))}}class nm extends p{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(i){return this.destination.error(i)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(i){return this.destination.error(i)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}const im=Wg.i,rm=["*"],sm=["outlet"],om=[[["","slot","top"]],"*"],am=["[slot=top]","*"],lm=t=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(t):"function"==typeof requestAnimationFrame?requestAnimationFrame(t):setTimeout(t);let cm=(()=>{class t{constructor(t,e){this.injector=t,this.el=e,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(t){this.el.nativeElement.value=this.lastValue=null==t?"":t,hm(this.el)}handleChangeEvent(t,e){t===this.el.nativeElement&&(e!==this.lastValue&&(this.lastValue=e,this.onChange(e)),hm(this.el))}_handleBlurEvent(t){t===this.el.nativeElement&&(this.onTouched(),hm(this.el))}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.el.nativeElement.disabled=t}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let t;try{t=this.injector.get(sg)}catch(n){}if(!t)return;t.statusChanges&&(this.statusChanges=t.statusChanges.subscribe(()=>hm(this.el)));const e=t.control;e&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(t=>{if(e[t]){const n=e[t].bind(e);e[t]=(...t)=>{n(...t),hm(this.el)}}})}}return t.\u0275fac=function(t){!function(){throw new Error("invalid")}()},t.\u0275dir=qt({type:t,hostBindings:function(t,e){1&t&&no("ionBlur",function(t){return e._handleBlurEvent(t.target)})}}),t})();const hm=t=>{lm(()=>{const e=t.nativeElement,n=um(e);dm(e,n);const i=e.closest("ion-item");i&&dm(i,n)})},um=t=>{const e=t.classList,n=[];for(let i=0;i<e.length;i++){const t=e.item(i);null!==t&&fm(t,"ng-")&&n.push(`ion-${t.substr(3)}`)}return n},dm=(t,e)=>{const n=t.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(t=>n.remove(t)),e.forEach(t=>n.add(t))},fm=(t,e)=>t.substr(0,e.length)===e;var pm;let gm=(()=>{let t=pm=class extends cm{constructor(t,e){super(t,e)}writeValue(t){this.el.nativeElement.checked=this.lastValue=null!=t&&t,hm(this.el)}_handleIonChange(t){this.handleChangeEvent(t,t.checked)}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ps),Hs(sa))},t.\u0275dir=qt({type:t,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(t,e){1&t&&no("ionChange",function(t){return e._handleIonChange(t.target)})},features:[Qo([{provide:Rp,useExisting:pm,multi:!0}]),Ms]}),t})();var mm;let vm=(()=>{let t=mm=class extends cm{constructor(t,e){super(t,e)}_handleIonChange(t){this.handleChangeEvent(t,t.value)}registerOnChange(t){super.registerOnChange(e=>{t(""===e?null:parseFloat(e))})}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ps),Hs(sa))},t.\u0275dir=qt({type:t,selectors:[["ion-input","type","number"]],hostBindings:function(t,e){1&t&&no("ionChange",function(t){return e._handleIonChange(t.target)})},features:[Qo([{provide:Rp,useExisting:mm,multi:!0}]),Ms]}),t})();var ym;let _m=(()=>{let t=ym=class extends cm{constructor(t,e){super(t,e)}_handleChangeEvent(t){this.handleChangeEvent(t,t.value)}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ps),Hs(sa))},t.\u0275dir=qt({type:t,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(t,e){1&t&&no("ionChange",function(t){return e._handleChangeEvent(t.target)})},features:[Qo([{provide:Rp,useExisting:ym,multi:!0}]),Ms]}),t})();var bm;let wm=(()=>{let t=bm=class extends cm{constructor(t,e){super(t,e)}_handleInputEvent(t){this.handleChangeEvent(t,t.value)}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ps),Hs(sa))},t.\u0275dir=qt({type:t,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(t,e){1&t&&no("ionChange",function(t){return e._handleInputEvent(t.target)})},features:[Qo([{provide:Rp,useExisting:bm,multi:!0}]),Ms]}),t})(),Cm=(()=>{let t=class{constructor(t,e){this.doc=t,this.backButton=new x,this.keyboardDidShow=new x,this.keyboardDidHide=new x,this.pause=new x,this.resume=new x,this.resize=new x,e.run(()=>{let n;this.win=t.defaultView,this.backButton.subscribeWithPriority=function(t,n){return this.subscribe(i=>i.register(t,t=>e.run(()=>n(t))))},Sm(this.pause,t,"pause"),Sm(this.resume,t,"resume"),Sm(this.backButton,t,"ionBackButton"),Sm(this.resize,this.win,"resize"),Sm(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),Sm(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(t=>{n=t}),this.win&&this.win.cordova?t.addEventListener("deviceready",()=>{n("cordova")},{once:!0}):n("dom")})}is(t){return(0,Wg.a)(this.win,t)}platforms(){return(0,Wg.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(t){return xm(this.win.location.href,t)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(t){const e=this.win.navigator;return!!(e&&e.userAgent&&e.userAgent.indexOf(t)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};return t.\u0275fac=function(e){return new(e||t)(hi(Sc),hi(Hl))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)},providedIn:"root"}),t.ngInjectableDef=ut({factory:function(){return new t(hi(Sc),hi(Hl))},token:t,providedIn:"root"}),t=Op([Pp(0,pi(Sc))],t),t})();const xm=(t,e)=>{e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},Sm=(t,e,n)=>{e&&e.addEventListener(n,e=>{t.next(null!=e?e.detail:void 0)})};let km=(()=>{let t=class{constructor(t,e,n,i){this.location=e,this.serializer=n,this.router=i,this.direction=Em,this.animated=Om,this.guessDirection="forward",this.lastNavId=-1,i&&i.events.subscribe(t=>{if(t instanceof Mu){const e=t.restoredState?t.restoredState.navigationId:t.id;this.guessDirection=e<this.lastNavId?"back":"forward",this.guessAnimation=t.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?t.id:e}}),t.backButton.subscribeWithPriority(0,t=>{this.pop(),t()})}navigateForward(t,e={}){return this.setDirection("forward",e.animated,e.animationDirection,e.animation),this.navigate(t,e)}navigateBack(t,e={}){return this.setDirection("back",e.animated,e.animationDirection,e.animation),this.navigate(t,e)}navigateRoot(t,e={}){return this.setDirection("root",e.animated,e.animationDirection,e.animation),this.navigate(t,e)}back(t={animated:!0,animationDirection:"back"}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.location.back()}pop(){return Ap(this,void 0,void 0,function*(){let t=this.topOutlet;for(;t&&!(yield t.pop());)t=t.parentOutlet})}setDirection(t,e,n,i){this.direction=t,this.animated=Tm(t,e,n),this.animationBuilder=i}setTopOutlet(t){this.topOutlet=t}consumeTransition(){let t,e="root";const n=this.animationBuilder;return"auto"===this.direction?(e=this.guessDirection,t=this.guessAnimation):(t=this.animated,e=this.direction),this.direction=Em,this.animated=Om,this.animationBuilder=void 0,{direction:e,animation:t,animationBuilder:n}}navigate(t,e){if(Array.isArray(t))return this.router.navigate(t,e);{const n=this.serializer.parse(t.toString());return void 0!==e.queryParams&&(n.queryParams=Object.assign({},e.queryParams)),void 0!==e.fragment&&(n.fragment=e.fragment),this.router.navigateByUrl(n,e)}}};return t.\u0275fac=function(e){return new(e||t)(hi(Cm),hi(Bc),hi(pd),hi(ap,8))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)},providedIn:"root"}),t.ngInjectableDef=ut({factory:function(){return new t(hi(Cm),hi(Bc),hi(pd),hi(ap,8))},token:t,providedIn:"root"}),t=Op([Pp(3,gi())],t),t})();const Tm=(t,e,n)=>{if(!1!==e)return void 0!==n?n:"forward"===t||"back"===t?t:"root"===t&&!0===e?"forward":void 0},Em="auto",Om=void 0,Pm=(t,e)=>{const n=t.prototype;e.forEach(t=>{Object.defineProperty(n,t,{get(){return this.el[t]},set(e){this.z.runOutsideAngular(()=>this.el[t]=e)}})})},Am=(t,e)=>{const n=t.prototype;e.forEach(t=>{n[t]=function(){const e=arguments;return this.z.runOutsideAngular(()=>this.el[t].apply(this.el,e))}})},Mm=(t,e,n)=>{n.forEach(n=>t[n]=Qg(e,n))};function Im(t){return function(e){return t.inputs&&Pm(e,t.inputs),t.methods&&Am(e,t.methods),e}}let Dm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-badge"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode"]})],t),t})(),Rm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionFocus","ionBlur"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],t),t})(),Lm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],t),t})(),Fm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["mode"]})],t),t})(),jm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode","translucent"]})],t),t})(),Nm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode"]})],t),t})(),Bm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionChange","ionFocus","ionBlur"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-checkbox"]],inputs:{checked:"checked",color:"color",disabled:"disabled",indeterminate:"indeterminate",mode:"mode",name:"name",value:"value"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["checked","color","disabled","indeterminate","mode","name","value"]})],t),t})(),$m=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],t),t})(),zm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],t),t})(),Vm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["fixed"]})],t),t})(),Gm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],t),t})(),Um=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],t),t})(),Hm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],t),t})(),Wm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode","position"]})],t),t})(),Xm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],t),t})(),qm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-list-header"]],inputs:{color:"color",lines:"lines",mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","lines","mode"]})],t),t})(),Ym=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionChange","ionFocus","ionBlur"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-range"]],inputs:{color:"color",debounce:"debounce",disabled:"disabled",dualKnobs:"dualKnobs",max:"max",min:"min",mode:"mode",name:"name",pin:"pin",snaps:"snaps",step:"step",ticks:"ticks",value:"value"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","debounce","disabled","dualKnobs","max","min","mode","name","pin","snaps","step","ticks","value"]})],t),t})(),Km=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-row"]],ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t})(),Zm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionInput","ionChange","ionCancel","ionClear","ionBlur","ionFocus"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-searchbar"]],inputs:{animated:"animated",autocomplete:"autocomplete",autocorrect:"autocorrect",cancelButtonIcon:"cancelButtonIcon",cancelButtonText:"cancelButtonText",clearIcon:"clearIcon",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",mode:"mode",placeholder:"placeholder",searchIcon:"searchIcon",showCancelButton:"showCancelButton",showClearButton:"showClearButton",spellcheck:"spellcheck",type:"type",value:"value"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["animated","autocomplete","autocorrect","cancelButtonIcon","cancelButtonText","clearIcon","color","debounce","disabled","enterkeyhint","inputmode","mode","placeholder","searchIcon","showCancelButton","showClearButton","spellcheck","type","value"],methods:["setFocus","getInputElement"]})],t),t})(),Qm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement,Mm(this,this.el,["ionChange","ionCancel","ionFocus","ionBlur"])}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",compareWith:"compareWith",disabled:"disabled",interface:"interface",interfaceOptions:"interfaceOptions",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",value:"value"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"],methods:["open"]})],t),t})(),Jm=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["disabled","value"]})],t),t})(),tv=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-tab-bar"]],inputs:{color:"color",mode:"mode",selectedTab:"selectedTab",translucent:"translucent"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode","selectedTab","translucent"]})],t),t})(),ev=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-tab-button"]],inputs:{disabled:"disabled",download:"download",href:"href",layout:"layout",mode:"mode",rel:"rel",selected:"selected",tab:"tab",target:"target"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["disabled","download","href","layout","mode","rel","selected","tab","target"]})],t),t})(),nv=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-text"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode"]})],t),t})(),iv=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","size"]})],t),t})(),rv=(()=>{let t=class{constructor(t,e,n){this.z=n,t.detach(),this.el=e.nativeElement}};return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(sa),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:rm,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t=Op([Im({inputs:["color","mode"]})],t),t})(),sv=(()=>{let t=class{get(t,e){const n=av();return n?n.get(t,e):null}getBoolean(t,e){const n=av();return!!n&&n.getBoolean(t,e)}getNumber(t,e){const n=av();return n?n.getNumber(t,e):0}set(t,e){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const n=av();n&&n.set(t,e)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)},providedIn:"root"}),t.ngInjectableDef=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();const ov=new Wn("USERCONFIG"),av=()=>{if("undefined"!=typeof window){const t=window.Ionic;if(t&&t.config)return t.config}return null};class lv{constructor(t={}){this.data=t}get(t){return this.data[t]}}let cv=(()=>{let t=class{constructor(t,e){this.zone=t,this.appRef=e}create(t,e,n){return new hv(t,e,n,this.appRef,this.zone)}};return t.\u0275fac=function(e){return new(e||t)(hi(Hl),hi(dc))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();class hv{constructor(t,e,n,i,r){this.resolver=t,this.injector=e,this.location=n,this.appRef=i,this.zone=r,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(t,e,n,i){return this.zone.run(()=>new Promise(r=>{r(uv(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,t,e,n,i))}))}removeViewFromDom(t,e){return this.zone.run(()=>new Promise(t=>{const n=this.elRefMap.get(e);if(n){n.destroy(),this.elRefMap.delete(e);const t=this.elEventsMap.get(e);t&&(t(),this.elEventsMap.delete(e))}t()}))}}const uv=(t,e,n,i,r,s,o,a,l,c,h)=>{const u=e.resolveComponentFactory(l),d=Ps.create({providers:gv(c),parent:n}),f=i?i.createComponent(u,i.length,d):u.create(d),p=f.instance,g=f.location.nativeElement;if(c&&Object.assign(p,c),h)for(const v of h)g.classList.add(v);const m=fv(t,p,g);return a.appendChild(g),i||r.attachView(f.hostView),f.changeDetectorRef.reattach(),s.set(g,f),o.set(g,m),g},dv=[qg.L,qg.a,qg.b,qg.c,qg.d],fv=(t,e,n)=>t.run(()=>{const t=dv.filter(t=>"function"==typeof e[t]).map(t=>{const i=n=>e[t](n.detail);return n.addEventListener(t,i),()=>n.removeEventListener(t,i)});return()=>t.forEach(t=>t())}),pv=new Wn("NavParamsToken"),gv=t=>[{provide:pv,useValue:t},{provide:lv,useFactory:mv,deps:[pv]}],mv=t=>new lv(t),vv=(t,e)=>((t=t.filter(t=>t.stackId!==e.stackId)).push(e),t),yv=(t,e)=>{const n=t.createUrlTree(["."],{relativeTo:e});return t.serializeUrl(n)},_v=(t,e)=>{if(!t)return;const n=bv(e);for(let i=0;i<n.length;i++){if(i>=t.length)return n[i];if(n[i]!==t[i])return}},bv=t=>t.split("/").map(t=>t.trim()).filter(t=>""!==t),wv=t=>{t&&(t.ref.destroy(),t.unlistenEvents())};class Cv{constructor(t,e,n,i,r,s){this.containerEl=e,this.router=n,this.navCtrl=i,this.zone=r,this.location=s,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==t?bv(t):void 0}createView(t,e){const n=yv(this.router,e),i=t&&t.location&&t.location.nativeElement,r=fv(this.zone,t.instance,i);return{id:this.nextId++,stackId:_v(this.tabsPrefix,n),unlistenEvents:r,element:i,ref:t,url:n}}getExistingView(t){const e=yv(this.router,t),n=this.views.find(t=>t.url===e);return n&&n.ref.changeDetectorRef.reattach(),n}setActive(t){const e=this.navCtrl.consumeTransition();let{direction:n,animation:i,animationBuilder:r}=e;const s=this.activeView,o=((t,e)=>!e||t.stackId!==e.stackId)(t,s);o&&(n="back",i=void 0);const a=this.views.slice();let l;const c=this.router;c.getCurrentNavigation?l=c.getCurrentNavigation():c.navigations&&c.navigations.value&&(l=c.navigations.value),l&&l.extras&&l.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const h=this.views.includes(t),u=this.insertView(t,n);h||t.ref.changeDetectorRef.detectChanges();const d=t.animationBuilder;return void 0!==r||"back"!==n||o||void 0===d||(r=d),s&&(s.animationBuilder=r),this.zone.runOutsideAngular(()=>this.wait(()=>(s&&s.ref.changeDetectorRef.detach(),t.ref.changeDetectorRef.reattach(),this.transition(t,s,i,this.canGoBack(1),!1,r).then(()=>xv(t,u,a,this.location)).then(()=>({enteringView:t,direction:n,animation:i,tabSwitch:o})))))}canGoBack(t,e=this.getActiveStackId()){return this.getStack(e).length>t}pop(t,e=this.getActiveStackId()){return this.zone.run(()=>{const n=this.getStack(e);if(n.length<=t)return Promise.resolve(!1);const i=n[n.length-t-1];let r=i.url;const s=i.savedData;if(s){const t=s.get("primary");t&&t.route&&t.route._routerState&&t.route._routerState.snapshot&&t.route._routerState.snapshot.url&&(r=t.route._routerState.snapshot.url)}const{animationBuilder:o}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(r,Object.assign({},i.savedExtras,{animation:o})).then(()=>!0)})}startBackTransition(){const t=this.activeView;if(t){const e=this.getStack(t.stackId),n=e[e.length-2],i=n.animationBuilder;return this.wait(()=>this.transition(n,t,"back",this.canGoBack(2),!0,i))}return Promise.resolve()}endBackTransition(t){t?(this.skipTransition=!0,this.pop(1)):this.activeView&&Sv(this.activeView,this.views,this.views,this.location)}getLastUrl(t){const e=this.getStack(t);return e.length>0?e[e.length-1]:void 0}getRootUrl(t){const e=this.getStack(t);return e.length>0?e[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(wv),this.activeView=void 0,this.views=[]}getStack(t){return this.views.filter(e=>e.stackId===t)}insertView(t,e){return this.activeView=t,this.views=((t,e,n)=>"root"===n?vv(t,e):"forward"===n?((t,e)=>(t.indexOf(e)>=0?t=t.filter(t=>t.stackId!==e.stackId||t.id<=e.id):t.push(e),t))(t,e):((t,e)=>t.indexOf(e)>=0?t.filter(t=>t.stackId!==e.stackId||t.id<=e.id):vv(t,e))(t,e))(this.views,t,e),this.views.slice()}transition(t,e,n,i,r,s){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(e===t)return Promise.resolve(!1);const o=t?t.element:void 0,a=e?e.element:void 0,l=this.containerEl;return o&&o!==a&&(o.classList.add("ion-page"),o.classList.add("ion-page-invisible"),o.parentElement!==l&&l.appendChild(o),l.commit)?l.commit(o,a,{deepWait:!0,duration:void 0===n?0:void 0,direction:n,showGoBack:i,progressAnimation:r,animationBuilder:s}):Promise.resolve(!1)}wait(t){return Ap(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const e=this.runningTask=t();return e.finally(()=>this.runningTask=void 0),e})}}const xv=(t,e,n,i)=>"function"==typeof requestAnimationFrame?new Promise(r=>{requestAnimationFrame(()=>{Sv(t,e,n,i),r()})}):Promise.resolve(),Sv=(t,e,n,i)=>{n.filter(t=>!e.includes(t)).forEach(wv),e.forEach(e=>{const n=i.path().split("?")[0].split("#")[0];if(e!==t&&e.url!==n){const t=e.element;t.setAttribute("aria-hidden","true"),t.classList.add("ion-page-hidden"),e.ref.changeDetectorRef.detach()}})};let kv=(()=>{let t=class{constructor(t,e,n,i,r,s,o,a,l,c,h,u,d){this.parentContexts=t,this.location=e,this.resolver=n,this.config=s,this.navCtrl=o,this.parentOutlet=d,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new jh(null),this.stackEvents=new sl,this.activateEvents=new sl,this.deactivateEvents=new sl,this.nativeEl=l.nativeElement,this.name=i||Xu,this.tabsPrefix="true"===r?yv(c,u):void 0,this.stackCtrl=new Cv(this.tabsPrefix,this.nativeEl,c,o,h,a),t.onChildOutletCreated(this.name,this)}set animation(t){this.nativeEl.animation=t}set animated(t){this.nativeEl.animated=t}set swipeGesture(t){this._swipeGesture=t,this.nativeEl.swipeHandler=t?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:t=>this.stackCtrl.endBackTransition(t)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const t=this.getContext();t&&t.route&&this.activateWith(t.route,t.resolver||null)}new Promise(t=>(0,Xg.c)(this.nativeEl,t)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(t,e){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const t=this.getContext();this.activatedView.savedData=new Map(t.children.contexts);const e=this.activatedView.savedData.get("primary");if(e&&t.route&&(e.route=Object.assign({},t.route)),this.activatedView.savedExtras={},t.route){const e=t.route.snapshot;this.activatedView.savedExtras.queryParams=e.queryParams,this.activatedView.savedExtras.fragment=e.fragment}}const t=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");let n;this._activatedRoute=t;let i=this.stackCtrl.getExistingView(t);if(i){n=this.activated=i.ref;const e=i.savedData;e&&(this.getContext().children.contexts=e),this.updateActivatedRouteProxy(n.instance,t)}else{const r=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,o=new jh(null),a=this.createActivatedRouteProxy(o,t),l=new Tv(a,s,this.location.injector);n=this.activated=this.location.createComponent(r,this.location.length,l),o.next(n.instance),i=this.stackCtrl.createView(this.activated,t),this.proxyMap.set(n.instance,a),this.currentActivatedRoute$.next({component:n.instance,activatedRoute:t})}this.activatedView=i,this.stackCtrl.setActive(i).then(t=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(n.instance),this.stackEvents.emit(t)})}canGoBack(t=1,e){return this.stackCtrl.canGoBack(t,e)}pop(t=1,e){return this.stackCtrl.pop(t,e)}getLastUrl(t){const e=this.stackCtrl.getLastUrl(t);return e?e.url:void 0}getLastRouteView(t){return this.stackCtrl.getLastUrl(t)}getRootView(t){return this.stackCtrl.getRootUrl(t)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(t,e){const n=new jd;return n._futureSnapshot=e._futureSnapshot,n._routerState=e._routerState,n.snapshot=e.snapshot,n.outlet=e.outlet,n.component=e.component,n._paramMap=this.proxyObservable(t,"paramMap"),n._queryParamMap=this.proxyObservable(t,"queryParamMap"),n.url=this.proxyObservable(t,"url"),n.params=this.proxyObservable(t,"params"),n.queryParams=this.proxyObservable(t,"queryParams"),n.fragment=this.proxyObservable(t,"fragment"),n.data=this.proxyObservable(t,"data"),n}proxyObservable(t,e){return t.pipe(ou(t=>!!t),Yh(t=>this.currentActivatedRoute$.pipe(ou(e=>null!==e&&e.component===t),Yh(t=>t&&t.activatedRoute[e]),tm())))}updateActivatedRouteProxy(t,e){const n=this.proxyMap.get(t);if(!n)throw new Error("Could not find activated route proxy for view");n._futureSnapshot=e._futureSnapshot,n._routerState=e._routerState,n.snapshot=e.snapshot,n.outlet=e.outlet,n.component=e.component,this.currentActivatedRoute$.next({component:t,activatedRoute:e})}};return t.\u0275fac=function(e){return new(e||t)(Hs(tp),Hs(Ga),Hs(ea),Vn("name"),Vn("tabs"),Hs(sv),Hs(km),Hs(Bc),Hs(sa),Hs(ap),Hs(Hl),Hs(jd),Hs(t,12))},t.\u0275dir=qt({type:t,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t=Op([Pp(3,Hn("name")),Pp(4,gi()),Pp(4,Hn("tabs")),Pp(12,mi()),Pp(12,gi())],t),t})();class Tv{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===jd?this.route:t===tp?this.childContexts:this.parent.get(t,e)}}let Ev=(()=>{let t=class{constructor(t){this.navCtrl=t,this.ionTabsWillChange=new sl,this.ionTabsDidChange=new sl}onPageSelected(t){const e=t.enteringView.stackId;t.tabSwitch&&void 0!==e&&(this.tabBar&&(this.tabBar.selectedTab=e),this.ionTabsWillChange.emit({tab:e}),this.ionTabsDidChange.emit({tab:e}))}select(t){const e=this.outlet.getActiveStackId()===t,n=`${this.outlet.tabsPrefix}/${t}`;if(e){const e=this.outlet.getActiveStackId();if(this.outlet.getLastRouteView(e).url===n)return;const i=this.outlet.getRootView(t);return this.navCtrl.navigateRoot(n,Object.assign({},i&&n===i.url&&i.savedExtras,{animated:!0,animationDirection:"back"}))}{const e=this.outlet.getLastRouteView(t);return this.navCtrl.navigateRoot(e&&e.url||n,Object.assign({},e&&e.savedExtras,{animated:!0,animationDirection:"back"}))}}getSelected(){return this.outlet.getActiveStackId()}};return t.\u0275fac=function(e){return new(e||t)(Hs(km))},t.\u0275cmp=Vt({type:t,selectors:[["ion-tabs"]],contentQueries:function(t,e,n){if(1&t&&_l(n,tv,5),2&t){let t;vl(t=bl())&&(e.tabBar=t.first)}},viewQuery:function(t,e){if(1&t&&yl(sm,5,kv),2&t){let t;vl(t=bl())&&(e.outlet=t.first)}},hostBindings:function(t,e){1&t&&no("ionTabButtonClick",function(t){return e.select(t.detail.tab)})},outputs:{ionTabsWillChange:"ionTabsWillChange",ionTabsDidChange:"ionTabsDidChange"},ngContentSelectors:am,decls:5,vars:0,consts:[[1,"tabs-inner"],["tabs","true",3,"stackEvents"],["outlet",""]],template:function(t,e){1&t&&(co(om),ho(0),qs(1,"div",0),qs(2,"ion-router-outlet",1,2),no("stackEvents",function(t){return e.onPageSelected(t)}),Ys(),Ys(),ho(4,1))},directives:[kv],styles:["[_nghost-%COMP%] {\n      display: flex;\n      position: absolute;\n      top: 0;\n      left: 0;\n      right: 0;\n      bottom: 0;\n\n      flex-direction: column;\n\n      width: 100%;\n      height: 100%;\n\n      contain: layout size style;\n      z-index: $z-index-page-container;\n    }\n    .tabs-inner[_ngcontent-%COMP%] {\n      position: relative;\n\n      flex: 1;\n\n      contain: layout size style;\n    }"]}),t})();class Ov{constructor(t){this.ctrl=t}create(t){return this.ctrl.create(t||{})}dismiss(t,e,n){return this.ctrl.dismiss(t,e,n)}getTop(){return this.ctrl.getTop()}}let Pv=(()=>{let t=class extends Ov{constructor(){super(Kg.l)}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)},providedIn:"root"}),t.ngInjectableDef=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Av=(()=>{let t=class{open(t){return Yg.m.open(t)}close(t){return Yg.m.close(t)}toggle(t){return Yg.m.toggle(t)}enable(t,e){return Yg.m.enable(t,e)}swipeGesture(t,e){return Yg.m.swipeGesture(t,e)}isOpen(t){return Yg.m.isOpen(t)}isEnabled(t){return Yg.m.isEnabled(t)}get(t){return Yg.m.get(t)}getOpen(){return Yg.m.getOpen()}getMenus(){return Yg.m.getMenus()}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)},providedIn:"root"}),t.ngInjectableDef=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),Mv=(()=>{let t=class extends Ov{constructor(t,e,n){super(Kg.m),this.angularDelegate=t,this.resolver=e,this.injector=n}create(t){return super.create(Object.assign({},t,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return t.\u0275fac=function(e){return new(e||t)(hi(cv),hi(ea),hi(Ps))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})(),Iv=(()=>{let t=class extends Ov{constructor(t,e,n){super(Kg.c),this.angularDelegate=t,this.resolver=e,this.injector=n}create(t){return super.create(Object.assign({},t,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return t.\u0275fac=function(e){return new(e||t)(hi(cv),hi(ea),hi(Ps))},t.\u0275prov=ut({token:t,factory:function(e){return t.\u0275fac(e)}}),t})();class Dv{shouldDetach(t){return!1}shouldAttach(t){return!1}store(t,e){}retrieve(t){return null}shouldReuseRoute(t,e){if(t.routeConfig!==e.routeConfig)return!1;const n=t.params,i=e.params,r=Object.keys(n),s=Object.keys(i);if(r.length!==s.length)return!1;for(const o of r)if(i[o]!==n[o])return!1;return!0}}const Rv=(t,e,i)=>()=>{const r=e.defaultView;if(r&&"undefined"!=typeof window){(r.Ionic=r.Ionic||{}).config=Object.assign({},t,{_zoneGate:t=>i.run(t)});const s="__zone_symbol__addEventListener"in e.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var t=[];if("undefined"!=typeof window){var e=window;e.customElements&&(!e.Element||e.Element.prototype.closest&&e.Element.prototype.matches&&e.Element.prototype.remove&&e.Element.prototype.getRootNode)||t.push(n.e(6748).then(n.t.bind(n,1255,23))),"function"==typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!e.NodeList||e.NodeList.prototype.forEach)&&e.fetch&&function(){try{var t=new URL("b","http://a");return t.pathname="c%20d","http://a/c%20d"===t.href&&t.searchParams}catch(e){return!1}}()&&"undefined"!=typeof WeakMap||t.push(n.e(2214).then(n.t.bind(n,9227,23)))}return Promise.all(t)}().then(()=>{return t={exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:lm,jmp:t=>i.runOutsideAngular(t),ael(t,e,n,i){t[s](e,n,i)},rel(t,e,n,i){t.removeEventListener(e,n,i)}},"undefined"==typeof window?Promise.resolve():(Zg.C&&Zg.C.supports&&Zg.C.supports("color","var(--c)")?(0,Zg.a)():n.e(1843).then(n.t.bind(n,2463,23)).then(()=>(Zg.p.$cssShim$=Zg.w.__cssshim)?Zg.p.$cssShim$.i():0)).then(()=>(im(),(0,Zg.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[2,"click","onClick"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[1],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),t)));var t})}};var Lv;let Fv=(()=>{let t=Lv=class{static forRoot(t){return{ngModule:Lv,providers:[{provide:ov,useValue:t},{provide:Sl,useFactory:Rv,multi:!0,deps:[ov,Sc,Hl]}]}}};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[cv,Mv,Iv],imports:[[eh]]}),t})();class jv{}class Nv{}class Bv{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),i=n.toLowerCase(),r=t.slice(e+1).trim();this.maybeSetNormalizedName(n,i),this.headers.has(i)?this.headers.get(i).push(r):this.headers.set(i,[r])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const i=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(i,n),this.maybeSetNormalizedName(e,i))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Bv?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Bv;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Bv?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const i=("a"===t.op?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":const r=t.value;if(r){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===r.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class $v{encodeKey(t){return zv(t)}encodeValue(t){return zv(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function zv(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}function Vv(t){return`${t}`}class Gv{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new $v,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const i=t.indexOf("="),[r,s]=-1==i?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,i)),e.decodeValue(t.slice(i+1))],o=n.get(r)||[];o.push(s),n.set(r,o)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const i=t[n];Array.isArray(i)?i.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Gv({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(Vv(t.value)),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(Vv(t.value));-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}class Uv{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}keys(){return this.map.keys()}}function Hv(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Wv(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Xv(t){return"undefined"!=typeof FormData&&t instanceof FormData}class qv{constructor(t,e,n,i){let r;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==n?n:null,r=i):r=n,r&&(this.reportProgress=!!r.reportProgress,this.withCredentials=!!r.withCredentials,r.responseType&&(this.responseType=r.responseType),r.headers&&(this.headers=r.headers),r.context&&(this.context=r.context),r.params&&(this.params=r.params)),this.headers||(this.headers=new Bv),this.context||(this.context=new Uv),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Gv,this.urlWithParams=e}serializeBody(){return null===this.body?null:Hv(this.body)||Wv(this.body)||Xv(this.body)||"string"==typeof this.body?this.body:this.body instanceof Gv?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Xv(this.body)?null:Wv(this.body)?this.body.type||null:Hv(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Gv?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(t={}){var e;const n=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,a=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let l=t.headers||this.headers,c=t.params||this.params;const h=null!==(e=t.context)&&void 0!==e?e:this.context;return void 0!==t.setHeaders&&(l=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),l)),t.setParams&&(c=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),c)),new qv(n,i,s,{params:c,headers:l,context:h,reportProgress:a,responseType:r,withCredentials:o})}}var Yv=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class Kv{constructor(t,e=200,n="OK"){this.headers=t.headers||new Bv,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class Zv extends Kv{constructor(t={}){super(t),this.type=Yv.ResponseHeader}clone(t={}){return new Zv({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Qv extends Kv{constructor(t={}){super(t),this.type=Yv.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new Qv({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class Jv extends Kv{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ty(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let ey=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let i;if(t instanceof qv)i=t;else{let r,s;r=n.headers instanceof Bv?n.headers:new Bv(n.headers),n.params&&(s=n.params instanceof Gv?n.params:new Gv({fromObject:n.params})),i=new qv(t,e,void 0!==n.body?n.body:null,{headers:r,context:n.context,params:s,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const r=Fh(i).pipe(du(t=>this.handler.handle(t)));if(t instanceof qv||"events"===n.observe)return r;const s=r.pipe(ou(t=>t instanceof Qv));switch(n.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return s.pipe(T(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return s.pipe(T(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return s.pipe(T(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return s.pipe(T(t=>t.body))}case"response":return s;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Gv).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ty(n,e))}post(t,e,n={}){return this.request("POST",t,ty(n,e))}put(t,e,n={}){return this.request("PUT",t,ty(n,e))}}return t.\u0275fac=function(e){return new(e||t)(hi(jv))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class ny{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const iy=new Wn("HTTP_INTERCEPTORS");let ry=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const sy=/^\)\]\}',?\n/;let oy=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new y(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const i=t.serializeBody();let r=null;const s=()=>{if(null!==r)return r;const e=1223===n.status?204:n.status,i=n.statusText||"OK",s=new Bv(n.getAllResponseHeaders()),o=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return r=new Zv({headers:s,status:e,statusText:i,url:o}),r},o=()=>{let{headers:i,status:r,statusText:o,url:a}=s(),l=null;204!==r&&(l=void 0===n.response?n.responseText:n.response),0===r&&(r=l?200:0);let c=r>=200&&r<300;if("json"===t.responseType&&"string"==typeof l){const t=l;l=l.replace(sy,"");try{l=""!==l?JSON.parse(l):null}catch(h){l=t,c&&(c=!1,l={error:h,text:l})}}c?(e.next(new Qv({body:l,headers:i,status:r,statusText:o,url:a||void 0})),e.complete()):e.error(new Jv({error:l,headers:i,status:r,statusText:o,url:a||void 0}))},a=t=>{const{url:i}=s(),r=new Jv({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:i||void 0});e.error(r)};let l=!1;const c=i=>{l||(e.next(s()),l=!0);let r={type:Yv.DownloadProgress,loaded:i.loaded};i.lengthComputable&&(r.total=i.total),"text"===t.responseType&&n.responseText&&(r.partialText=n.responseText),e.next(r)},h=t=>{let n={type:Yv.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",o),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==i&&n.upload&&n.upload.addEventListener("progress",h)),n.send(i),e.next({type:Yv.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",o),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==i&&n.upload&&n.upload.removeEventListener("progress",h)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(hi(sh))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const ay=new Wn("XSRF_COOKIE_NAME"),ly=new Wn("XSRF_HEADER_NAME");class cy{}let hy=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=Hc(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(hi(Sc),hi(Al),hi(ay))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),uy=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const i=this.tokenService.getToken();return null===i||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,i)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(hi(cy),hi(ly))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),dy=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(iy,[]);this.chain=t.reduceRight((t,e)=>new ny(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(hi(Nv),hi(Ps))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),fy=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:uy,useClass:ry}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:ay,useValue:e.cookieName}:[],e.headerName?{provide:ly,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[uy,{provide:iy,useExisting:uy,multi:!0},{provide:cy,useClass:hy},{provide:ay,useValue:"XSRF-TOKEN"},{provide:ly,useValue:"X-XSRF-TOKEN"}]}),t})(),py=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[ey,{provide:jv,useClass:dy},oy,{provide:Nv,useExisting:oy}],imports:[[fy.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),gy=(()=>{class t{constructor(){}getServerLink(){return"http://localhost:3000"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),my=(()=>{class t{constructor(t,e){this.http=t,this.serverLink=e}upload(t){const e=new FormData;e.append("file",t);const n=new qv("POST",this.serverLink.getServerLink()+"/api/uploadMotif",e,{reportProgress:!0,responseType:"json"});return this.http.request(n)}payment(){const t=new qv("POST",this.serverLink.getServerLink()+"/api/create-checkout-session",{reportProgress:!0,responseType:"json"});return this.http.request(t)}}return t.\u0275fac=function(e){return new(e||t)(hi(ey),hi(gy))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function vy(t,e){if(1&t){const t=Js();qs(0,"div",4),qs(1,"div",5),Ks(2,"img",6),qs(3,"ion-input",7),no("ngModelChange",function(e){const n=Ae(t).index;return ao().fileNames[n]=e}),Ys(),Ys(),Ys()}if(2&t){const t=e.$implicit,n=e.index,i=ao();yr(3),uo("value",t.name),Ws("ngModel",i.fileNames[n])}}let yy=(()=>{class t{constructor(t,e,n,i,r,s){this.popoverController=t,this.uploadService=e,this.fb=n,this.httpClient=i,this.loadingController=r,this.serverLink=s,this.files=[],this.fileNames=[]}ngOnInit(){}previewImage(t){let e=document.getElementsByClassName("uploadPreview"),n=document.getElementById("uploadImage").files.length;for(let i=0;i<n;i++){let n=new FileReader;t.target&&n.readAsDataURL(document.getElementById("uploadImage").files[i]),console.log(document.getElementById("uploadImage").files),n.onload=function(t){e[i].src=t.target.result}}}closePopover(){this.popoverController.dismiss()}selectFiles(t){console.log("Files Selected"),this.files=t.target.files,console.log(this.files),this.fileNames=[];for(let e=0;e<this.files.length;e++)this.fileNames.push(this.files[e].name.split(".").shift())}uploadFiles(){if(console.log(this.files),void 0!==this.files){const t=new FormData;console.log("Length: "+this.files.length);for(let e=0;e<this.files.length;e++)console.log(this.files[e]),t.append("files",this.files[e],this.fileNames[e]+".svg");this.loadingController.create({message:"Uploading Files To Your Google Drive..."}).then(e=>{e.present().then(()=>{this.httpClient.post(this.serverLink.getServerLink()+"/api/uploadMotif",t,{withCredentials:!0}).subscribe(t=>{console.log(t),e.dismiss().then(),this.closePopover()})})})}}}return t.\u0275fac=function(e){return new(e||t)(Hs(Iv),Hs(my),Hs(Hg),Hs(ey),Hs(Pv),Hs(gy))},t.\u0275cmp=Vt({type:t,selectors:[["app-motif-upload"]],decls:16,vars:1,consts:[["id","menu"],["type","file","id","uploadImage","name","file","accept",".svg","multiple","",3,"change"],["class","blockWraper",4,"ngFor","ngForOf"],["color","medium",3,"click"],[1,"blockWraper"],[1,"imgBlock"],[1,"uploadPreview",2,"width","100px","height","100px"],[3,"value","ngModel","ngModelChange"]],template:function(t,e){1&t&&(qs(0,"ion-content"),Ks(1,"br"),Ks(2,"br"),Ks(3,"br"),qs(4,"ion-card",0),qs(5,"ion-card-header"),Io(6,"Icon import"),Ys(),qs(7,"div"),qs(8,"input",1),no("change",function(t){return e.selectFiles(t),e.previewImage(t)}),Ys(),Ys(),qs(9,"div"),Gs(10,vy,4,2,"div",2),Ys(),qs(11,"ion-item"),qs(12,"ion-button",3),no("click",function(){return e.uploadFiles()}),Io(13,"Upload"),Ys(),qs(14,"ion-button",3),no("click",function(){return e.closePopover()}),Io(15,"Cancel"),Ys(),Ys(),Ys(),Ys()),2&t&&(yr(10),Ws("ngForOf",e.files))},directives:[zm,Lm,jm,Xc,Hm,Rm,Um,wm,ag,Fg],styles:["ion-card-header[_ngcontent-%COMP%]{font-size:xx-large}#menu[_ngcontent-%COMP%]{margin:auto;width:50%;height:50%}button[_ngcontent-%COMP%]{padding:8px;background-color:blue;color:#fff}.imgBlock[_ngcontent-%COMP%]{text-align:center;width:200px;background-color:#fff;border:#3a7be0;padding-bottom:10px;margin-bottom:5px}#motifName[_ngcontent-%COMP%]{font-weight:200;color:#000}"]}),t})(),_y=(()=>{class t{constructor(t,e){this.http=t,this.serverLink=e}getCollections(){console.log("get collections fired!");const t=this.serverLink.getServerLink()+"/api/getCollections";return this.http.get(t,{withCredentials:!0})}createNewCollection(t){const e=this.serverLink.getServerLink()+"/api/newCollection";return console.log(e),this.http.post(e,{collectionName:t},{withCredentials:!0})}}return t.\u0275fac=function(e){return new(e||t)(hi(ey),hi(gy))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function by(t,e){if(1&t){const t=Js();qs(0,"div"),qs(1,"div",21),qs(2,"div",22),Ks(3,"img",23),qs(4,"div",24),qs(5,"ion-button",25),no("click",function(e){return Ae(t),ao(2).CollectionOperations(e)}),Ks(6,"ion-icon",26),Ys(),Ys(),qs(7,"div",27),qs(8,"button",28),no("click",function(){const e=Ae(t).$implicit;return ao(2).loadCollection(e.collectionID)}),Io(9),Ys(),Ys(),Ys(),qs(10,"div",29),qs(11,"div",30),qs(12,"p",31),Io(13),Ys(),Ks(14,"ion-icon",32),Ys(),Ys(),Ys(),Ys()}if(2&t){const t=e.$implicit;yr(3),uo("src",t.collectionThumbnail,Ci),yr(6),Ro(" ",t.collectionName," "),yr(4),Do(t.childPatterns.length)}}function wy(t,e){if(1&t&&(qs(0,"div",19),Gs(1,by,15,3,"div",20),Ys()),2&t){const t=ao();yr(1),Ws("ngForOf",t.collections)}}let Cy=(()=>{class t{constructor(t,e,n,i){this.collectionsService=t,this.router=e,this.loadingController=n,this.popoverController=i,this.collections=[]}ngOnInit(){this.menuController=new Av,this.menuController.enable(!0,"main-content"),this.getCollections(),this.activeComponent="Collections",this.setActive("Collections")}CollectionOperations(t){}setActive(t){this.activeComponent!=t&&(this.activeComponent=t)}uploadFilePopover(){this.popoverController.create({component:yy,translucent:!0,cssClass:"fullscreen"}).then(t=>{t.present().then(t=>t)})}navigateTo(t){this.router.navigate([t])}getCollections(){this.loadingController.create({message:"Fetching collections..."}).then(t=>{t.present().then(e=>{this.collectionsService.getCollections().subscribe(e=>{console.log(e),this.collections=e,t.dismiss().then()})})})}loadCollection(t){console.log(t),this.collectionsService.currentCollectionID=t,this.router.navigate(["pattern"]).then()}}return t.\u0275fac=function(e){return new(e||t)(Hs(_y),Hs(ap),Hs(Pv),Hs(Iv))},t.\u0275cmp=Vt({type:t,selectors:[["app-collections"]],decls:30,vars:1,consts:[[1,"main"],[2,"height","100%"],["size","2"],[1,"sidebar"],[1,"sidebarList","tab-content-side"],[1,"active",3,"click"],["name","folder-open-outline"],[1,"tab-links",3,"click"],["name","grid-outline"],[1,"tab-links"],["name","information-circle-outline"],["name","log-in-outline"],["size","10"],["id","componentCard",2,"overflow-x","hidden"],[2,"font-size","xx-large","padding-top","3%","margin-bottom","1cm"],["name","folder-open-sharp"],["class","collections-menu",4,"ngIf"],["id","addBtn",3,"click"],["name","add-circle-sharp"],[1,"collections-menu"],[4,"ngFor","ngForOf"],[1,"square",2,"border","1px solid gray"],[1,"left"],["alt","motif-image",1,"motifImg",3,"src"],[1,"gear"],["fill","clear",3,"click"],["name","ellipsis-horizontal-sharp",2,"font-size","0.6cm","color","#0d0d0d"],[1,"label"],["id","labelText",3,"click"],[1,"right"],[1,"patterblock",2,"background-color","white"],["id","patternAmount",2,"font-size","20px"],["name","copy-sharp",2,"font-size","0.6cm","background-color","white"]],template:function(t,e){1&t&&(qs(0,"ion-content",0),qs(1,"ion-grid"),qs(2,"ion-row",1),qs(3,"ion-col",2),qs(4,"ion-card"),qs(5,"div",3),qs(6,"h2"),Io(7,"Simply Patterns"),Ys(),qs(8,"ul",4),qs(9,"li",5),no("click",function(){return e.setActive("Collections")}),Ks(10,"ion-icon",6),Io(11," Collections "),Ys(),qs(12,"li",7),no("click",function(){return e.uploadFilePopover()}),Ks(13,"ion-icon",8),qs(14,"span"),Io(15,"My Icons"),Ys(),Ys(),qs(16,"li",9),Ks(17,"ion-icon",10),Io(18," Help "),Ys(),qs(19,"li",9),Ks(20,"ion-icon",11),Io(21," Sign Out "),Ys(),Ys(),Ys(),Ys(),Ys(),qs(22,"ion-col",12),qs(23,"ion-card",13),qs(24,"div",14),Ks(25,"ion-icon",15),Io(26," My Collections "),Ys(),Gs(27,wy,2,1,"div",16),qs(28,"button",17),no("click",function(){return e.navigateTo("newCollection")}),Ks(29,"ion-icon",18),Ys(),Ys(),Ys(),Ys(),Ys(),Ys()),2&t&&(yr(27),Ws("ngIf",e.collections))},directives:[zm,Vm,Km,$m,Lm,Gm,Yc,Xc,Rm],styles:['@import url("https://fonts.googleapis.com/css2?family=Oswald:wght@300&display=swap");ion-card[_ngcontent-%COMP%]{height:100vh}.sidebar[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#000;text-align:center;margin-top:20px;padding-bottom:20px;border-bottom:1px solid #000}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{list-style-type:none;color:#000}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:5px;font-size:20px}.sidebar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding-top:20px;height:50px;cursor:pointer}.active[_ngcontent-%COMP%], li[_ngcontent-%COMP%]:hover{color:#007ddb}ion-card[_ngcontent-%COMP%]{background:#f7f7f9;width:100%;min-height:100vh;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;font-family:Oswald,sans-serif}#componentCard[_ngcontent-%COMP%]{padding:0 50px}.collections-menu[_ngcontent-%COMP%]{margin-bottom:200px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;display:flex;flex-wrap:wrap}.right[_ngcontent-%COMP%]{border-left:1px solid #000;width:20%;display:flex;justify-content:center;align-items:center}.left[_ngcontent-%COMP%], .right[_ngcontent-%COMP%]{height:100%;background-color:#fff}.left[_ngcontent-%COMP%]{width:80%;float:left}.motifImg[_ngcontent-%COMP%]{height:100%}.motifNames[_ngcontent-%COMP%]{width:10px}#patternAmount[_ngcontent-%COMP%]{background-color:#fff;text-align:center}#addCollection[_ngcontent-%COMP%]{font-size:1.2rem;color:gray;transition:transform .5s ease-in;height:200px;width:200px;background:#fff;display:flex;justify-content:center;align-items:center}#addBtn[_ngcontent-%COMP%]{position:fixed;right:30px;bottom:20px;background:none;font-size:50px}#addCollection[_ngcontent-%COMP%]:hover{color:#000}.square[_ngcontent-%COMP%]{height:200px;width:9cm;background:#fff;margin-left:10px;position:relative;margin-top:20px}.label[_ngcontent-%COMP%]{position:absolute;text-align:center;padding:.3cm 0;width:80%;bottom:0}.label[_ngcontent-%COMP%], .label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#f7f7f9}.label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-decoration:none;color:#000;font-size:.5cm;font-weight:500}#labelText[_ngcontent-%COMP%]{background-color:#f7f7f9}.gear[_ngcontent-%COMP%]{background-color:#fff;position:absolute;height:.6cm;top:1%;right:21%}#newCollection[_ngcontent-%COMP%]{float:right;margin-right:50px;font-size:1rem}']}),t})(),xy=(()=>{class t{constructor(t){this.collectionsService=t,this.collectionForm=new Pg({name:new Og("",[Gp.required]),story:new Og("",[Gp.required]),theme:new Og("",[Gp.required])})}ngOnInit(){console.log("neqnewcollection")}processCollectionForm(){console.log(this.collectionForm.value)}newCollection(t){console.log(t)}getColorCodes(){const t=document.getElementById("color");this.colorCodeHex="Color code: "+t.value,console.log(this.colorCodeHex)}}return t.\u0275fac=function(e){return new(e||t)(Hs(_y))},t.\u0275cmp=Vt({type:t,selectors:[["app-collection-creator"]],decls:42,vars:1,consts:[["for","new-collection"],["id","new-collection"],["collectionName",""],["for","story"],["id","story"],["collectionStory",""],["for","themes"],["id","themes","placeholder","Enter comma separated color codes"],["collectionThemes",""],["id","colorPicker"],["for","color"],["type","color","id","color","name","color","value","#73b504"],["color","medium",3,"click"],["id","colorCode"],["expand","block","color","medium","type","button",1,"add-button",3,"click"]],template:function(t,e){if(1&t){const t=Js();qs(0,"ion-content"),qs(1,"ion-card"),qs(2,"ion-card-header"),Io(3,"Collection Creator"),Ys(),qs(4,"ion-card-content"),qs(5,"label",0),Io(6,"Collection name: "),Ys(),Ks(7,"br"),Ks(8,"input",1,2),Ks(10,"br"),qs(11,"label",3),Io(12,"Collection Story: "),Ys(),Ks(13,"br"),Ks(14,"input",4,5),Ks(16,"br"),qs(17,"label",6),Io(18,"Collection Themes: "),Ys(),Ks(19,"br"),Ks(20,"input",7,8),Ks(22,"br"),Ks(23,"br"),Ks(24,"br"),qs(25,"ion-card",9),qs(26,"ion-card-header"),Io(27," Use the color picker to get color codes"),Ys(),qs(28,"ion-card-content"),qs(29,"label",10),Io(30,"Pick a color :"),Ys(),Ks(31,"input",11),Ks(32,"br"),Ks(33,"br"),qs(34,"ion-button",12),no("click",function(){return e.getColorCodes()}),Io(35," get color code "),Ys(),Ks(36,"br"),Ks(37,"br"),qs(38,"p",13),Io(39),Ys(),Ys(),Ys(),qs(40,"ion-button",14),no("click",function(){Ae(t);const n=Us(9);return e.newCollection(n.value),n.value=""}),Io(41," Add Collection "),Ys(),Ys(),Ys(),Ys()}2&t&&(yr(39),Do(e.colorCodeHex))},directives:[zm,Lm,jm,Fm,Rm],styles:["#colorCode[_ngcontent-%COMP%], #hexVal[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-size:large}#new-collection[_ngcontent-%COMP%], #story[_ngcontent-%COMP%], #themes[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid grey;border-radius:4px;box-sizing:border-box}ion-card-header[_ngcontent-%COMP%]{font-size:xx-large}#button-card[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;justify-content:center;align-items:center}"]}),t})();function Sy(t,e,n,i){return new(n||(n=Promise))(function(r,s){function o(t){try{l(i.next(t))}catch(e){s(e)}}function a(t){try{l(i.throw(t))}catch(e){s(e)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(o,a)}l((i=i.apply(t,e||[])).next())})}var ky=n(3249);class Ty{constructor(t,e,n){this.id=e,this.motifURL=t,this.motifName=n,console.log("Constructed: "+this.motifName+" with ID: "+this.id)}getFileContents(t,e){if(t.downloadUrl){const n="https://www"+t.downloadUrl.slice(15);let i=gapi.auth.getToken().access_token,r=new XMLHttpRequest;r.open("GET",n),r.setRequestHeader("Authorization","Bearer "+i),r.onload=()=>{e(r.responseText)},r.onerror=()=>{e(null)},r.send()}else e(null)}getSpecialDownloadURL(t){return new Promise((e,n)=>{gapi.load("client",()=>{gapi.client.load("drive","v2",()=>{gapi.client.drive.files.get({fileId:t}).execute(t=>{this.getFileContents(t,t=>{e(t)})})})})})}cacheSVGInMemory(){return new Promise((t,e)=>{this.getSpecialDownloadURL(this.id).then(e=>{ky.fabric.loadSVGFromString(e,(n,i)=>{this.obj=ky.fabric.util.groupSVGElements(n,i),this.obj.googleDriveID="test ID here",console.log("Cached: "+e),t(this.id)})})})}}class Ey extends u{constructor(t,e){super()}schedule(t,e=0){return this}}class Oy extends Ey{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,i=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(i,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(i,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,i=!1;try{this.work(t)}catch(r){i=!0,n=!!r&&r||new Error(r)}if(i)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,i=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==i&&n.splice(i,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}class Py extends Oy{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}let Ay=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class My extends Ay{constructor(t,e=Ay.now){super(t,()=>My.delegate&&My.delegate!==this?My.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return My.delegate&&My.delegate!==this?My.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}class Iy extends My{}const Dy=new Iy(Py);let Ry=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Fh(this.value);case"E":return t=this.error,new y(e=>e.error(t));case"C":return Xh()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();class Ly extends p{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(Ly.dispatch,this.delay,new Fy(t,this.destination)))}_next(t){this.scheduleMessage(Ry.createNext(t))}_error(t){this.scheduleMessage(Ry.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(Ry.createComplete()),this.unsubscribe()}}class Fy{constructor(t,e){this.notification=t,this.destination=e}}class jy extends x{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new Ny(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,r=n.length;let s;if(this.closed)throw new b;if(this.isStopped||this.hasError?s=u.EMPTY:(this.observers.push(t),s=new w(this,t)),i&&t.add(t=new Ly(t,i)),e)for(let o=0;o<r&&!t.closed;o++)t.next(n[o]);else for(let o=0;o<r&&!t.closed;o++)t.next(n[o].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),s}_getNow(){return(this.scheduler||Dy).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,i=this._events,r=i.length;let s=0;for(;s<r&&!(t-i[s].time<n);)s++;return r>e&&(s=Math.max(s,r-e)),s>0&&i.splice(0,s),i}}class Ny{constructor(t,e){this.time=t,this.value=e}}let By,$y=(()=>{class t{constructor(t,e,n,i){this.router=t,this.http=e,this.loadingController=n,this.serverLink=i,this.subject=new jy(1),this.hasPaid=!1,gapi.load("auth2",()=>{console.log("Gapi created"),this.auth2=gapi.auth2.init({client_id:"838530253471-o3arioj6ta566o6eg8140npcvb7a59tv.apps.googleusercontent.com"})})}getUserDetails(){return this.userDetails}signIn(){return Sy(this,void 0,void 0,function*(){console.log("Test 2"),this.auth2.signIn({scope:"https://www.googleapis.com/auth/drive"}).then(t=>{this.subject.next(t),this.userDetails=t,console.log(t.getId()),this.loadingController.create({message:"Connecting to server..."}).then(e=>{e.present().then(n=>{this.createAccessTokenOnServer(t).subscribe(n=>{this.http.post(this.serverLink.getServerLink()+"/api/getPaymentDetails",{userID:t.getId()},{withCredentials:!0}).subscribe(t=>{console.log(t.status),t.status?(console.log("is success"),this.hasPaid=!0,this.router.navigate(["collections"]).then(()=>{e.dismiss()})):(console.log("is failure"),this.router.navigate(["payment"]).then(()=>{e.dismiss()}))})})})})}).catch(()=>{this.subject.next(null)})})}signOut(){this.auth2.signOut().then(()=>{this.subject.next(null)})}observable(){return this.subject.asObservable()}createAccessTokenOnServer(t){return console.log("createAccessToken fired"),console.log(t.Zb.access_token),this.http.post(this.serverLink.getServerLink()+"/api/createAccessToken",{userLoginResponse:t},{withCredentials:!0})}downloadFile(t,e){if(t.downloadUrl){console.log(t.downloadUrl),console.log(t.downloadUrl.slice(15));const n="https://www"+t.downloadUrl.slice(15);let i=gapi.auth.getToken().access_token;console.log(i);let r=new XMLHttpRequest;r.open("GET",n),r.setRequestHeader("Authorization","Bearer "+i),r.onload=()=>{e(r.responseText)},r.onerror=()=>{e(null)},r.send()}else e(null)}printFile(t){gapi.load("client",()=>{gapi.client.load("drive","v2",()=>{gapi.client.drive.files.get({fileId:t}).execute(t=>{this.downloadFile(t,t=>{console.log(t)}),console.log(t)})})})}}return t.\u0275fac=function(e){return new(e||t)(hi(ap),hi(ey),hi(Pv),hi(gy))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),zy=(()=>{class t{constructor(t,e,n){this.http=t,this.gLoginService=e,this.serverLink=n,this.motifIndexIncValue=0,this.cachedMotifs=[],this.motifsOnCanvas=[]}getMotifs(t){this.cachedMotifs=[];let e=[];return new Promise((n,i)=>{console.log("get motifs fired!"),console.log(t);for(let r in t)if(t.hasOwnProperty(r)){this.cachedMotifs.push(new Ty(t[r].motifLink,t[r].motifID,t[r].motifName));let n=this.cachedMotifs[r].cacheSVGInMemory();e.push(n)}Promise.all(e).then(()=>{n({text:"successfully fetched all motifs"})})})}getAllMotifs(){console.log("get all motifs fired!");const t=this.serverLink.getServerLink()+"/api/getMotifs";return this.http.get(t,{withCredentials:!0})}spawnMotifObject(t,e,n=!1,i=0,r=200,s=0){if(t){let i=t.obj;console.log(t.obj.googleDriveID),i.scaleToHeight(e.height-250).set({left:e.width/15,top:e.height/15}).setCoords(),console.log("Spawn Motif Path"),i.clone(i=>{i.googleDriveID=t.id,i.IDOnCanvas=this.motifIndexIncValue++,i.motifURL=t.motifURL,i.motifName=t.motifName,i.ArrayModSpacing=r,i.ArrayModDirection=s,i.shouldDisplaySeamlessMod=n,this.motifsOnCanvas.push(i),e.add(i).renderAll()})}}spawnMotifObjectsFromSaveState(t,e){if(t){for(let n in t.motifs){let i=t.motifs[n];for(let t in this.cachedMotifs){let n=this.cachedMotifs[t];i.motifID===n.id&&n.obj.clone(t=>{t.set({left:i.left,top:i.top,angle:i.rotation,scaleX:i.scale.scaleX,scaleY:i.scale.scaleY}).setCoords(),t.googleDriveID=i.motifID,t.IDOnCanvas=this.motifIndexIncValue++,t.motifURL=i.motifURL,t.motifName=i.motifName,t.shouldDisplaySeamlessMod=i.shouldDisplaySeamless,t.nrOfArrayObjects=i.nrOfArrayObjects,t.ArrayModDirection=i.ArrayModDirection,t.ArrayModSpacing=i.ArrayModSpacing,t.arrayModifierElements=[],t.shouldDisplaySeamlessMod&&this.addReflectionsToObject(t,e);for(let n=0;n<t.nrOfArrayObjects;n++)this.changeArrayModifierNumber(t,1,t.ArrayModSpacing,e,!1);this.updateArrModOfSelected(t,e),e.add(t)})}}this.motifsOnCanvas=this.getNonSpecialObjects(e),this.renderAllWithSpecial(this.motifsOnCanvas,e)}}purgeContent(){this.cachedMotifs=[]}addReflectionsToObject(t,e){t.reflections=[this.reflectionCreator(t,-e.width,+e.height),this.reflectionCreator(t,-e.width,0),this.reflectionCreator(t,-e.width,-e.height),this.reflectionCreator(t,0,+e.height),this.reflectionCreator(t,0,-e.height),this.reflectionCreator(t,+e.width,+e.height),this.reflectionCreator(t,+e.width,0),this.reflectionCreator(t,+e.width,-e.height)]}reflectionCreator(t,e,n){let i;return t.clone(r=>{r.set("top",t.top+e),r.set("left",t.left+n),r.set("selectable",!1),r.set("evented",!1),r.set("opacity",1),i=r}),i}changeArrayModifierNumber(t,e,n,i,r=!0){if(t.nrOfArrayObjects||(t.nrOfArrayObjects=0,t.arrayModifierElements=[]),!(0==t.nrOfArrayObjects&&e<0)){if(r&&(t.nrOfArrayObjects+=e),e>0){const{y:e,x:r}=this.calculatePositionFromDirection(t,n,t.nrOfArrayObjects),s=this.reflectionCreator(t,e,r);this.addReflectionsToObject(s,i),t.arrayModifierElements.push(s),console.log("Pushed new arr mod obj")}else t.arrayModifierElements.pop();r&&this.renderAllWithSpecial(this.getNonSpecialObjects(i),i)}}calculatePositionFromDirection(t,e,n){const i=e*n,r=this.toRadians(t.ArrayModDirection-180);return{y:i*Math.sin(r),x:i*Math.sin(1.5708-r)}}toRadians(t){return t*(Math.PI/180)}updateArrModOfSelected(t,e){if(t.nrOfArrayObjects)for(let n=0;n<t.nrOfArrayObjects;n++){const{y:i,x:r}=this.calculatePositionFromDirection(t,t.ArrayModSpacing,n+1);this.arrayModUpdater(t,n,i,r,e)}e.renderAll()}arrayModUpdater(t,e,n,i,r){const s=t.arrayModifierElements[e];s.set("top",t.top+n),s.set("left",t.left+i),s.set("scaleX",t.scaleX),s.set("scaleY",t.scaleY),s.rotate(t.angle),s.set("flipX",t.flipX),s.set("flipY",t.flipY),s.reflections&&(this.updateReflectionsOf(s,r),console.log("Has reflections"))}updateReflectionsOf(t,e){null!=t.reflections&&t.reflections.length>0&&(this.reflectionUpdater(t,0,-e.width,+e.height,this.updateReflectionsOf),this.reflectionUpdater(t,1,-e.width,0,this.updateReflectionsOf),this.reflectionUpdater(t,2,-e.width,-e.height,this.updateReflectionsOf),this.reflectionUpdater(t,3,0,+e.height,this.updateReflectionsOf),this.reflectionUpdater(t,4,0,-e.height,this.updateReflectionsOf),this.reflectionUpdater(t,5,+e.width,+e.height,this.updateReflectionsOf),this.reflectionUpdater(t,6,+e.width,0,this.updateReflectionsOf),this.reflectionUpdater(t,7,+e.width,-e.height,this.updateReflectionsOf))}reflectionUpdater(t,e,n,i,r){const s=t.reflections[e];s.set("top",t.top+n),s.set("left",t.left+i),s.set("scaleX",t.scaleX),s.set("scaleY",t.scaleY),s.rotate(t.angle),s.set("flipX",t.flipX),s.set("flipY",t.flipY)}renderAllWithSpecial(t,e){const n=[];for(const r in t)null!=t[r].IDOnCanvas&&n.push(t[r]);const i=[];for(const r in n)n[r].IDOnCanvas>-1&&this.decideRenderOrder(n[r],i,n[r].shouldDisplaySeamlessMod);e._objects=i,e.renderAll()}decideRenderOrder(t,e,n){n&&null!=t.reflections&&e.push(...t.reflections),e.push(t),null==t.arrayModifierElements&&(t.arrayModifierElements=[]);for(let i=0;i<t.arrayModifierElements.length;i++)this.decideRenderOrder(t.arrayModifierElements[i],e,n)}getNonSpecialObjects(t){const e=t.getObjects(),n=[];for(let i=0;i<e.length;i++)e[i].IDOnCanvas>-1&&n.push(e[i]);return n}}return t.\u0275fac=function(e){return new(e||t)(hi(ey),hi($y),hi(gy))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Vy=(()=>{class t{constructor(t,e,n,i){this.http=t,this.loadingController=e,this.motifService=n,this.serverLink=i,this.motifSaveStates=[],this.patternContents={patternName:"",patternID:"",motifs:[]}}getCurrentCollectionJSON(t){return new Promise((e,n)=>{console.log("getCollectionJSON fired! fileID is: "+t),this.http.post(this.serverLink.getServerLink()+"/api/getFileByID",{fileID:t},{withCredentials:!0}).subscribe(t=>{console.log(t),this.currentCollection=t,console.log(this.currentCollection),this.motifService.getMotifs(this.currentCollection.childMotifs).then(()=>{console.log("All motifs loaded"),e(t)})})})}newPattern(t){null!==this.currentCollection&&(this.loadingController.create({message:"Creating Pattern..."}).then(e=>{e.present().then(()=>{this.currentCollection.childPatterns.push({patternName:t,patternID:""}),this.http.post(this.serverLink.getServerLink()+"/api/createNewJSONFile",{patternFolderID:this.currentCollection.patternsFolderID},{withCredentials:!0}).subscribe(n=>{const i=n;console.log(i.id);for(let r=0;r<this.currentCollection.childPatterns.length;r++)if(console.log(this.currentCollection.childPatterns[r]),""===this.currentCollection.childPatterns[r].patternID){this.currentCollection.childPatterns[r].patternID=i.id;const n=this.patternContents={patternName:t,patternID:i.id,motifs:[]};this.http.post(this.serverLink.getServerLink()+"/api/updateFile",{fileID:this.currentCollection.childPatterns[r].patternID,content:JSON.stringify(n),newName:t},{withCredentials:!0}).subscribe(t=>{console.log(t),this.http.post(this.serverLink.getServerLink()+"/api/updateFile",{fileID:this.currentCollection.collectionID,content:JSON.stringify(this.currentCollection)},{withCredentials:!0}).subscribe(t=>{console.log(t),this.selectedPatternID=i.id,e.dismiss().then()})})}})})}),console.log(this.currentCollection))}updateCurrentCollection(){this.http.post(this.serverLink.getServerLink()+"/api/updateFile",{fileID:this.currentCollection.collectionID,content:JSON.stringify(this.currentCollection)},{withCredentials:!0}).subscribe(t=>{console.log(t)})}dataURItoBlob(t){const e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),r=new Uint8Array(i);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return new Blob([i],{type:n})}savePattern(t,e){this.motifSaveStates=[];const n=this.motifService.motifsOnCanvas;for(const r in n)this.motifSaveStates.push({left:n[r].left,top:n[r].top,width:n[r].getScaledWidth(),height:n[r].getScaledHeight(),scale:n[r].getObjectScaling(),rotation:n[r].angle,layer:0,motifID:n[r].googleDriveID,motifName:n[r].motifName,motifURL:n[r].motifURL,shouldDisplaySeamless:n[r].shouldDisplaySeamlessMod,nrOfArrayObjects:n[r].nrOfArrayObjects,ArrayModDirection:n[r].ArrayModDirection,ArrayModSpacing:n[r].ArrayModSpacing});console.log("Contents are:"),console.log(this.patternContents),this.patternContents.motifs=this.motifSaveStates;try{this.loadingController.create({message:"Saving Your Pattern..."}).then(n=>{n.present().then(i=>{const r=new FormData;r.append("files",this.dataURItoBlob(t.toDataURL()),"testName.png"),r.append("patternID",this.patternContents.patternID),r.append("patternContent",JSON.stringify(this.patternContents)),r.append("collectionID",e),this.http.post(this.serverLink.getServerLink()+"/api/savePattern",r,{withCredentials:!0}).subscribe(t=>{console.log(t),n.dismiss().then()})})})}catch(i){console.log(i)}console.log(this.patternContents)}getAndLoadSavedPattern(t,e){console.log("on pattern change"),e.clear(),this.loadingController.create({message:"Loading Pattern..."}).then(n=>{n.present().then(i=>{this.http.post(this.serverLink.getServerLink()+"/api/getFileByID",{fileID:t},{withCredentials:!0}).subscribe(t=>{t&&(this.patternContents=t,console.log(this.patternContents),this.motifService.spawnMotifObjectsFromSaveState(this.patternContents,e)),n.dismiss().then()})})})}checkIfPatternsExistAndSetDefault(){try{return!!this.currentCollection&&(!this.selectedPatternID&&this.currentCollection.childPatterns&&(this.selectedPatternID=this.currentCollection.childPatterns[0].patternID),!0)}catch(t){return!1}}purgeContent(){this.selectedPatternID=void 0,this.motifSaveStates=[],this.currentCollection={}}}return t.\u0275fac=function(e){return new(e||t)(hi(ey),hi(Pv),hi(zy),hi(gy))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();class Gy{constructor(t){this.total=t}call(t,e){return e.subscribe(new Uy(t,this.total))}}class Uy extends p{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){++this.count>this.total&&this.destination.next(t)}}function Hy(t){return e=>e.lift(new Wy(t))}class Wy{constructor(t){this.notifier=t}call(t,e){const n=new Xy(t),i=B(this.notifier,new j(n));return i&&!n.seenValue?(n.add(i),e.subscribe(n)):n}}class Xy extends N{constructor(t){super(t),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}function qy(t){return null!=t&&"false"!=`${t}`}function Yy(t,e=0){return function(t){return!isNaN(parseFloat(t))&&!isNaN(Number(t))}(t)?Number(t):e}function Ky(t){return t instanceof sa?t.nativeElement:t}try{By="undefined"!=typeof Intl&&Intl.v8BreakIterator}catch(SO){By=!1}let Zy,Qy=(()=>{class t{constructor(t){this._platformId=t,this.isBrowser=this._platformId?"browser"===this._platformId:"object"==typeof document&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!(!window.chrome&&!By)&&"undefined"!=typeof CSS&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}}return t.\u0275fac=function(e){return new(e||t)(hi(Al))},t.\u0275prov=ut({factory:function(){return new t(hi(Al))},token:t,providedIn:"root"}),t})(),Jy=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({}),t})();const t_=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function e_(){if(Zy)return Zy;if("object"!=typeof document||!document)return Zy=new Set(t_),Zy;let t=document.createElement("input");return Zy=new Set(t_.filter(e=>(t.setAttribute("type",e),t.type===e))),Zy}let n_,i_,r_,s_;function o_(t){return function(){if(null==n_&&"undefined"!=typeof window)try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>n_=!0}))}finally{n_=n_||!1}return n_}()?t:!!t.capture}function a_(){if("object"!=typeof document||!document)return 0;if(null==i_){const t=document.createElement("div"),e=t.style;t.dir="rtl",e.width="1px",e.overflow="auto",e.visibility="hidden",e.pointerEvents="none",e.position="absolute";const n=document.createElement("div"),i=n.style;i.width="2px",i.height="1px",t.appendChild(n),document.body.appendChild(t),i_=0,0===t.scrollLeft&&(t.scrollLeft=1,i_=0===t.scrollLeft?1:2),t.parentNode.removeChild(t)}return i_}function l_(t){return t.composedPath?t.composedPath()[0]:t.target}const c_=new My(Oy);function h_(t,e=c_){return n=>n.lift(new u_(t,e))}class u_{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new d_(t,this.dueTime,this.scheduler))}}class d_ extends p{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(f_,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function f_(t){t.debouncedNext()}let p_=(()=>{class t{create(t){return"undefined"==typeof MutationObserver?null:new MutationObserver(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})(),g_=(()=>{class t{constructor(t){this._mutationObserverFactory=t,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((t,e)=>this._cleanupObserver(e))}observe(t){const e=Ky(t);return new y(t=>{const n=this._observeElement(e).subscribe(t);return()=>{n.unsubscribe(),this._unobserveElement(e)}})}_observeElement(t){if(this._observedElements.has(t))this._observedElements.get(t).count++;else{const e=new x,n=this._mutationObserverFactory.create(t=>e.next(t));n&&n.observe(t,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(t,{observer:n,stream:e,count:1})}return this._observedElements.get(t).stream}_unobserveElement(t){this._observedElements.has(t)&&(this._observedElements.get(t).count--,this._observedElements.get(t).count||this._cleanupObserver(t))}_cleanupObserver(t){if(this._observedElements.has(t)){const{observer:e,stream:n}=this._observedElements.get(t);e&&e.disconnect(),n.complete(),this._observedElements.delete(t)}}}return t.\u0275fac=function(e){return new(e||t)(hi(p_))},t.\u0275prov=ut({factory:function(){return new t(hi(p_))},token:t,providedIn:"root"}),t})(),m_=(()=>{class t{constructor(t,e,n){this._contentObserver=t,this._elementRef=e,this._ngZone=n,this.event=new sl,this._disabled=!1,this._currentSubscription=null}get disabled(){return this._disabled}set disabled(t){this._disabled=qy(t),this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(t){this._debounce=Yy(t),this._subscribe()}ngAfterContentInit(){this._currentSubscription||this.disabled||this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();const t=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?t.pipe(h_(this.debounce)):t).subscribe(this.event)})}_unsubscribe(){var t;null===(t=this._currentSubscription)||void 0===t||t.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(Hs(g_),Hs(sa),Hs(Hl))},t.\u0275dir=qt({type:t,selectors:[["","cdkObserveContent",""]],inputs:{disabled:["cdkObserveContentDisabled","disabled"],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"]}),t})(),v_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[p_]}),t})(),y_=(()=>{class t{constructor(t){this._platform=t}isDisabled(t){return t.hasAttribute("disabled")}isVisible(t){return function(t){return!!(t.offsetWidth||t.offsetHeight||"function"==typeof t.getClientRects&&t.getClientRects().length)}(t)&&"visible"===getComputedStyle(t).visibility}isTabbable(t){if(!this._platform.isBrowser)return!1;const e=function(t){try{return t.frameElement}catch(SO){return null}}((n=t).ownerDocument&&n.ownerDocument.defaultView||window);var n;if(e){if(-1===b_(e))return!1;if(!this.isVisible(e))return!1}let i=t.nodeName.toLowerCase(),r=b_(t);return t.hasAttribute("contenteditable")?-1!==r:"iframe"!==i&&"object"!==i&&!(this._platform.WEBKIT&&this._platform.IOS&&!function(t){let e=t.nodeName.toLowerCase(),n="input"===e&&t.type;return"text"===n||"password"===n||"select"===e||"textarea"===e}(t))&&("audio"===i?!!t.hasAttribute("controls")&&-1!==r:"video"===i?-1!==r&&(null!==r||this._platform.FIREFOX||t.hasAttribute("controls")):t.tabIndex>=0)}isFocusable(t,e){return function(t){return!function(t){return function(t){return"input"==t.nodeName.toLowerCase()}(t)&&"hidden"==t.type}(t)&&(function(t){let e=t.nodeName.toLowerCase();return"input"===e||"select"===e||"button"===e||"textarea"===e}(t)||function(t){return function(t){return"a"==t.nodeName.toLowerCase()}(t)&&t.hasAttribute("href")}(t)||t.hasAttribute("contenteditable")||__(t))}(t)&&!this.isDisabled(t)&&((null==e?void 0:e.ignoreVisibility)||this.isVisible(t))}}return t.\u0275fac=function(e){return new(e||t)(hi(Qy))},t.\u0275prov=ut({factory:function(){return new t(hi(Qy))},token:t,providedIn:"root"}),t})();function __(t){if(!t.hasAttribute("tabindex")||void 0===t.tabIndex)return!1;let e=t.getAttribute("tabindex");return"-32768"!=e&&!(!e||isNaN(parseInt(e,10)))}function b_(t){if(!__(t))return null;const e=parseInt(t.getAttribute("tabindex")||"",10);return isNaN(e)?-1:e}class w_{constructor(t,e,n,i,r=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=i,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,r||this.attachAnchors()}get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}destroy(){const t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.parentNode&&t.parentNode.removeChild(t)),e&&(e.removeEventListener("focus",this.endAnchorListener),e.parentNode&&e.parentNode.removeChild(e)),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return!!this._hasAttached||(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);for(let n=0;n<e.length;n++)e[n].hasAttribute(`cdk-focus-${t}`)?console.warn(`Found use of deprecated attribute 'cdk-focus-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]):e[n].hasAttribute(`cdk-focus-region-${t}`)&&console.warn(`Found use of deprecated attribute 'cdk-focus-region-${t}', use 'cdkFocusRegion${t}' instead. The deprecated attribute will be removed in 8.0.0.`,e[n]);return"start"==t?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){const e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(e.hasAttribute("cdk-focus-initial")&&console.warn("Found use of deprecated attribute 'cdk-focus-initial', use 'cdkFocusInitial' instead. The deprecated attribute will be removed in 8.0.0",e),!this._checker.isFocusable(e)){const n=this._getFirstTabbableElement(e);return null==n||n.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){const e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){const e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=0;n<e.length;n++){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(t)return t}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children||t.childNodes;for(let n=e.length-1;n>=0;n--){let t=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(t)return t}return null}_createAnchor(){const t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Jh(1)).subscribe(t)}}let C_=(()=>{class t{constructor(t,e,n){this._checker=t,this._ngZone=e,this._document=n}create(t,e=!1){return new w_(t,this._checker,this._ngZone,this._document,e)}}return t.\u0275fac=function(e){return new(e||t)(hi(y_),hi(Hl),hi(Sc))},t.\u0275prov=ut({factory:function(){return new t(hi(y_),hi(Hl),hi(Sc))},token:t,providedIn:"root"}),t})();function x_(t){return 0===t.offsetX&&0===t.offsetY}function S_(t){const e=t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0];return!(!e||-1!==e.identifier||null!=e.radiusX&&1!==e.radiusX||null!=e.radiusY&&1!==e.radiusY)}"undefined"!=typeof Element&&Element;const k_=new Wn("cdk-input-modality-detector-options"),T_={ignoreKeys:[18,17,224,91,16]},E_=o_({passive:!0,capture:!0});let O_=(()=>{class t{constructor(t,e,n,i){this._platform=t,this._mostRecentTarget=null,this._modality=new jh(null),this._lastTouchMs=0,this._onKeydown=t=>{var e,n;(null===(n=null===(e=this._options)||void 0===e?void 0:e.ignoreKeys)||void 0===n?void 0:n.some(e=>e===t.keyCode))||(this._modality.next("keyboard"),this._mostRecentTarget=l_(t))},this._onMousedown=t=>{Date.now()-this._lastTouchMs<650||(this._modality.next(x_(t)?"keyboard":"mouse"),this._mostRecentTarget=l_(t))},this._onTouchstart=t=>{S_(t)?this._modality.next("keyboard"):(this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=l_(t))},this._options=Object.assign(Object.assign({},T_),i),this.modalityDetected=this._modality.pipe(t=>t.lift(new Gy(1))),this.modalityChanged=this.modalityDetected.pipe(tm()),t.isBrowser&&e.runOutsideAngular(()=>{n.addEventListener("keydown",this._onKeydown,E_),n.addEventListener("mousedown",this._onMousedown,E_),n.addEventListener("touchstart",this._onTouchstart,E_)})}get mostRecentModality(){return this._modality.value}ngOnDestroy(){this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,E_),document.removeEventListener("mousedown",this._onMousedown,E_),document.removeEventListener("touchstart",this._onTouchstart,E_))}}return t.\u0275fac=function(e){return new(e||t)(hi(Qy),hi(Hl),hi(Sc),hi(k_,8))},t.\u0275prov=ut({factory:function(){return new t(hi(Qy),hi(Hl),hi(Sc),hi(k_,8))},token:t,providedIn:"root"}),t})();const P_=new Wn("cdk-focus-monitor-default-options"),A_=o_({passive:!0,capture:!0});let M_=(()=>{class t{constructor(t,e,n,i,r){this._ngZone=t,this._platform=e,this._inputModalityDetector=n,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new x,this._rootNodeFocusAndBlurListener=t=>{const e=l_(t),n="focus"===t.type?this._onFocus:this._onBlur;for(let i=e;i;i=i.parentElement)n.call(this,t,i)},this._document=i,this._detectionMode=(null==r?void 0:r.detectionMode)||0}monitor(t,e=!1){const n=Ky(t);if(!this._platform.isBrowser||1!==n.nodeType)return Fh(null);const i=function(t){if(function(){if(null==s_){const t="undefined"!=typeof document?document.head:null;s_=!(!t||!t.createShadowRoot&&!t.attachShadow)}return s_}()){const e=t.getRootNode?t.getRootNode():null;if("undefined"!=typeof ShadowRoot&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}(n)||this._getDocument(),r=this._elementInfo.get(n);if(r)return e&&(r.checkChildren=!0),r.subject;const s={checkChildren:e,subject:new x,rootNode:i};return this._elementInfo.set(n,s),this._registerGlobalListeners(s),s.subject}stopMonitoring(t){const e=Ky(t),n=this._elementInfo.get(e);n&&(n.subject.complete(),this._setClasses(e),this._elementInfo.delete(e),this._removeGlobalListeners(n))}focusVia(t,e,n){const i=Ky(t);i===this._getDocument().activeElement?this._getClosestElementsInfo(i).forEach(([t,n])=>this._originChanged(t,e,n)):(this._setOrigin(e),"function"==typeof i.focus&&i.focus(n))}ngOnDestroy(){this._elementInfo.forEach((t,e)=>this.stopMonitoring(e))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_toggleClass(t,e,n){n?t.classList.add(e):t.classList.remove(e)}_getFocusOrigin(t){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(t)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:"program"}_shouldBeAttributedToTouch(t){return 1===this._detectionMode||!!(null==t?void 0:t.contains(this._inputModalityDetector._mostRecentTarget))}_setClasses(t,e){this._toggleClass(t,"cdk-focused",!!e),this._toggleClass(t,"cdk-touch-focused","touch"===e),this._toggleClass(t,"cdk-keyboard-focused","keyboard"===e),this._toggleClass(t,"cdk-mouse-focused","mouse"===e),this._toggleClass(t,"cdk-program-focused","program"===e)}_setOrigin(t,e=!1){this._ngZone.runOutsideAngular(()=>{this._origin=t,this._originFromTouchInteraction="touch"===t&&e,0===this._detectionMode&&(clearTimeout(this._originTimeoutId),this._originTimeoutId=setTimeout(()=>this._origin=null,this._originFromTouchInteraction?650:1))})}_onFocus(t,e){const n=this._elementInfo.get(e),i=l_(t);n&&(n.checkChildren||e===i)&&this._originChanged(e,this._getFocusOrigin(i),n)}_onBlur(t,e){const n=this._elementInfo.get(e);!n||n.checkChildren&&t.relatedTarget instanceof Node&&e.contains(t.relatedTarget)||(this._setClasses(e),this._emitOrigin(n.subject,null))}_emitOrigin(t,e){this._ngZone.run(()=>t.next(e))}_registerGlobalListeners(t){if(!this._platform.isBrowser)return;const e=t.rootNode,n=this._rootNodeFocusListenerCount.get(e)||0;n||this._ngZone.runOutsideAngular(()=>{e.addEventListener("focus",this._rootNodeFocusAndBlurListener,A_),e.addEventListener("blur",this._rootNodeFocusAndBlurListener,A_)}),this._rootNodeFocusListenerCount.set(e,n+1),1==++this._monitoredElementCount&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Hy(this._stopInputModalityDetector)).subscribe(t=>{this._setOrigin(t,!0)}))}_removeGlobalListeners(t){const e=t.rootNode;if(this._rootNodeFocusListenerCount.has(e)){const t=this._rootNodeFocusListenerCount.get(e);t>1?this._rootNodeFocusListenerCount.set(e,t-1):(e.removeEventListener("focus",this._rootNodeFocusAndBlurListener,A_),e.removeEventListener("blur",this._rootNodeFocusAndBlurListener,A_),this._rootNodeFocusListenerCount.delete(e))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(t,e,n){this._setClasses(t,e),this._emitOrigin(n.subject,e),this._lastFocusOrigin=e}_getClosestElementsInfo(t){const e=[];return this._elementInfo.forEach((n,i)=>{(i===t||n.checkChildren&&i.contains(t))&&e.push([i,n])}),e}}return t.\u0275fac=function(e){return new(e||t)(hi(Hl),hi(Qy),hi(O_),hi(Sc,8),hi(P_,8))},t.\u0275prov=ut({factory:function(){return new t(hi(Hl),hi(Qy),hi(O_),hi(Sc,8),hi(P_,8))},token:t,providedIn:"root"}),t})();const I_="cdk-high-contrast-black-on-white",D_="cdk-high-contrast-white-on-black",R_="cdk-high-contrast-active";let L_=(()=>{class t{constructor(t,e){this._platform=t,this._document=e}getHighContrastMode(){if(!this._platform.isBrowser)return 0;const t=this._document.createElement("div");t.style.backgroundColor="rgb(1,2,3)",t.style.position="absolute",this._document.body.appendChild(t);const e=this._document.defaultView||window,n=e&&e.getComputedStyle?e.getComputedStyle(t):null,i=(n&&n.backgroundColor||"").replace(/ /g,"");switch(this._document.body.removeChild(t),i){case"rgb(0,0,0)":return 2;case"rgb(255,255,255)":return 1}return 0}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){const t=this._document.body.classList;t.remove(R_),t.remove(I_),t.remove(D_),this._hasCheckedHighContrastMode=!0;const e=this.getHighContrastMode();1===e?(t.add(R_),t.add(I_)):2===e&&(t.add(R_),t.add(D_))}}}return t.\u0275fac=function(e){return new(e||t)(hi(Qy),hi(Sc))},t.\u0275prov=ut({factory:function(){return new t(hi(Qy),hi(Sc))},token:t,providedIn:"root"}),t})();const F_=new Wn("cdk-dir-doc",{providedIn:"root",factory:function(){return ui(Sc)}});let j_=(()=>{class t{constructor(t){if(this.value="ltr",this.change=new sl,t){const e=t.documentElement?t.documentElement.dir:null,n=(t.body?t.body.dir:null)||e;this.value="ltr"===n||"rtl"===n?n:"ltr"}}ngOnDestroy(){this.change.complete()}}return t.\u0275fac=function(e){return new(e||t)(hi(F_,8))},t.\u0275prov=ut({factory:function(){return new t(hi(F_,8))},token:t,providedIn:"root"}),t})(),N_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({}),t})();const B_=new ua("12.1.4");class $_{}const z_="*";function V_(t,e){return{type:7,name:t,definitions:e,options:{}}}function G_(t,e=null){return{type:4,styles:e,timings:t}}function U_(t,e=null){return{type:2,steps:t,options:e}}function H_(t){return{type:6,styles:t,offset:null}}function W_(t,e,n){return{type:0,name:t,styles:e,options:n}}function X_(t,e,n=null){return{type:1,expr:t,animation:e,options:n}}function q_(t){Promise.resolve(null).then(t)}class Y_{constructor(t=0,e=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=t+e}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){q_(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this._started=!1}setPosition(t){this._position=this.totalTime?t*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class K_{constructor(t){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=t;let e=0,n=0,i=0;const r=this.players.length;0==r?q_(()=>this._onFinish()):this.players.forEach(t=>{t.onDone(()=>{++e==r&&this._onFinish()}),t.onDestroy(()=>{++n==r&&this._onDestroy()}),t.onStart(()=>{++i==r&&this._onStart()})}),this.totalTime=this.players.reduce((t,e)=>Math.max(t,e.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this.players.forEach(t=>t.init())}onStart(t){this._onStartFns.push(t)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(t=>t()),this._onStartFns=[])}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(t=>t.play())}pause(){this.players.forEach(t=>t.pause())}restart(){this.players.forEach(t=>t.restart())}finish(){this._onFinish(),this.players.forEach(t=>t.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(t=>t.destroy()),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}reset(){this.players.forEach(t=>t.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(t){const e=t*this.totalTime;this.players.forEach(t=>{const n=t.totalTime?Math.min(1,e/t.totalTime):1;t.setPosition(n)})}getPosition(){const t=this.players.reduce((t,e)=>null===t||e.totalTime>t.totalTime?e:t,null);return null!=t?t.getPosition():0}beforeDestroy(){this.players.forEach(t=>{t.beforeDestroy&&t.beforeDestroy()})}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}function Z_(){return"undefined"!=typeof window&&void 0!==window.document}function Q_(){return"undefined"!=typeof process&&"[object process]"==={}.toString.call(process)}function J_(t){switch(t.length){case 0:return new Y_;case 1:return t[0];default:return new K_(t)}}function tb(t,e,n,i,r={},s={}){const o=[],a=[];let l=-1,c=null;if(i.forEach(t=>{const n=t.offset,i=n==l,h=i&&c||{};Object.keys(t).forEach(n=>{let i=n,a=t[n];if("offset"!==n)switch(i=e.normalizePropertyName(i,o),a){case"!":a=r[n];break;case z_:a=s[n];break;default:a=e.normalizeStyleValue(n,i,a,o)}h[i]=a}),i||a.push(h),c=h,l=n}),o.length){const t="\n - ";throw new Error(`Unable to animate due to the following errors:${t}${o.join(t)}`)}return a}function eb(t,e,n,i){switch(e){case"start":t.onStart(()=>i(n&&nb(n,"start",t)));break;case"done":t.onDone(()=>i(n&&nb(n,"done",t)));break;case"destroy":t.onDestroy(()=>i(n&&nb(n,"destroy",t)))}}function nb(t,e,n){const i=n.totalTime,r=ib(t.element,t.triggerName,t.fromState,t.toState,e||t.phaseName,null==i?t.totalTime:i,!!n.disabled),s=t._data;return null!=s&&(r._data=s),r}function ib(t,e,n,i,r="",s=0,o){return{element:t,triggerName:e,fromState:n,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function rb(t,e,n){let i;return t instanceof Map?(i=t.get(e),i||t.set(e,i=n)):(i=t[e],i||(i=t[e]=n)),i}function sb(t){const e=t.indexOf(":");return[t.substring(1,e),t.substr(e+1)]}let ob=(t,e)=>!1,ab=(t,e)=>!1,lb=(t,e,n)=>[];const cb=Q_();(cb||"undefined"!=typeof Element)&&(ob=Z_()?(t,e)=>{for(;e&&e!==document.documentElement;){if(e===t)return!0;e=e.parentNode||e.host}return!1}:(t,e)=>t.contains(e),ab=(()=>{if(cb||Element.prototype.matches)return(t,e)=>t.matches(e);{const t=Element.prototype,e=t.matchesSelector||t.mozMatchesSelector||t.msMatchesSelector||t.oMatchesSelector||t.webkitMatchesSelector;return e?(t,n)=>e.apply(t,[n]):ab}})(),lb=(t,e,n)=>{let i=[];if(n){const n=t.querySelectorAll(e);for(let t=0;t<n.length;t++)i.push(n[t])}else{const n=t.querySelector(e);n&&i.push(n)}return i});let hb=null,ub=!1;function db(t){hb||(hb=("undefined"!=typeof document?document.body:null)||{},ub=!!hb.style&&"WebkitAppearance"in hb.style);let e=!0;return hb.style&&!function(t){return"ebkit"==t.substring(1,6)}(t)&&(e=t in hb.style,!e&&ub)&&(e="Webkit"+t.charAt(0).toUpperCase()+t.substr(1)in hb.style),e}const fb=ab,pb=ob,gb=lb;function mb(t){const e={};return Object.keys(t).forEach(n=>{const i=n.replace(/([a-z])([A-Z])/g,"$1-$2");e[i]=t[n]}),e}let vb=(()=>{class t{validateStyleProperty(t){return db(t)}matchesElement(t,e){return fb(t,e)}containsElement(t,e){return pb(t,e)}query(t,e,n){return gb(t,e,n)}computeStyle(t,e,n){return n||""}animate(t,e,n,i,r,s=[],o){return new Y_(n,i)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})(),yb=(()=>{class t{}return t.NOOP=new vb,t})();const _b="ng-enter",bb="ng-leave",wb="ng-trigger",Cb=".ng-trigger",xb="ng-animating",Sb=".ng-animating";function kb(t){if("number"==typeof t)return t;const e=t.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Tb(parseFloat(e[1]),e[2])}function Tb(t,e){switch(e){case"s":return 1e3*t;default:return t}}function Eb(t,e,n){return t.hasOwnProperty("duration")?t:function(t,e,n){let i,r=0,s="";if("string"==typeof t){const n=t.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===n)return e.push(`The provided timing value "${t}" is invalid.`),{duration:0,delay:0,easing:""};i=Tb(parseFloat(n[1]),n[2]);const o=n[3];null!=o&&(r=Tb(parseFloat(o),n[4]));const a=n[5];a&&(s=a)}else i=t;if(!n){let n=!1,s=e.length;i<0&&(e.push("Duration values below 0 are not allowed for this animation step."),n=!0),r<0&&(e.push("Delay values below 0 are not allowed for this animation step."),n=!0),n&&e.splice(s,0,`The provided timing value "${t}" is invalid.`)}return{duration:i,delay:r,easing:s}}(t,e,n)}function Ob(t,e={}){return Object.keys(t).forEach(n=>{e[n]=t[n]}),e}function Pb(t,e,n={}){if(e)for(let i in t)n[i]=t[i];else Ob(t,n);return n}function Ab(t,e,n){return n?e+":"+n+";":""}function Mb(t){let e="";for(let n=0;n<t.style.length;n++){const i=t.style.item(n);e+=Ab(0,i,t.style.getPropertyValue(i))}for(const n in t.style)t.style.hasOwnProperty(n)&&!n.startsWith("_")&&(e+=Ab(0,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),t.style[n]));t.setAttribute("style",e)}function Ib(t,e,n){t.style&&(Object.keys(e).forEach(i=>{const r=$b(i);n&&!n.hasOwnProperty(i)&&(n[i]=t.style[r]),t.style[r]=e[i]}),Q_()&&Mb(t))}function Db(t,e){t.style&&(Object.keys(e).forEach(e=>{const n=$b(e);t.style[n]=""}),Q_()&&Mb(t))}function Rb(t){return Array.isArray(t)?1==t.length?t[0]:U_(t):t}const Lb=new RegExp("{{\\s*(.+?)\\s*}}","g");function Fb(t){let e=[];if("string"==typeof t){let n;for(;n=Lb.exec(t);)e.push(n[1]);Lb.lastIndex=0}return e}function jb(t,e,n){const i=t.toString(),r=i.replace(Lb,(t,i)=>{let r=e[i];return e.hasOwnProperty(i)||(n.push(`Please provide a value for the animation param ${i}`),r=""),r.toString()});return r==i?t:r}function Nb(t){const e=[];let n=t.next();for(;!n.done;)e.push(n.value),n=t.next();return e}const Bb=/-+([a-z0-9])/g;function $b(t){return t.replace(Bb,(...t)=>t[1].toUpperCase())}function zb(t,e){return 0===t||0===e}function Vb(t,e,n){const i=Object.keys(n);if(i.length&&e.length){let s=e[0],o=[];if(i.forEach(t=>{s.hasOwnProperty(t)||o.push(t),s[t]=n[t]}),o.length)for(var r=1;r<e.length;r++){let n=e[r];o.forEach(function(e){n[e]=Ub(t,e)})}}return e}function Gb(t,e,n){switch(e.type){case 7:return t.visitTrigger(e,n);case 0:return t.visitState(e,n);case 1:return t.visitTransition(e,n);case 2:return t.visitSequence(e,n);case 3:return t.visitGroup(e,n);case 4:return t.visitAnimate(e,n);case 5:return t.visitKeyframes(e,n);case 6:return t.visitStyle(e,n);case 8:return t.visitReference(e,n);case 9:return t.visitAnimateChild(e,n);case 10:return t.visitAnimateRef(e,n);case 11:return t.visitQuery(e,n);case 12:return t.visitStagger(e,n);default:throw new Error(`Unable to resolve animation metadata node #${e.type}`)}}function Ub(t,e){return window.getComputedStyle(t)[e]}const Hb="*";function Wb(t,e){const n=[];return"string"==typeof t?t.split(/\s*,\s*/).forEach(t=>function(t,e,n){if(":"==t[0]){const i=function(t,e){switch(t){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,e)=>parseFloat(e)>parseFloat(t);case":decrement":return(t,e)=>parseFloat(e)<parseFloat(t);default:return e.push(`The transition alias value "${t}" is not supported`),"* => *"}}(t,n);if("function"==typeof i)return void e.push(i);t=i}const i=t.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==i||i.length<4)return n.push(`The provided transition expression "${t}" is not supported`),e;const r=i[1],s=i[2],o=i[3];e.push(Yb(r,o)),"<"!=s[0]||r==Hb&&o==Hb||e.push(Yb(o,r))}(t,n,e)):n.push(t),n}const Xb=new Set(["true","1"]),qb=new Set(["false","0"]);function Yb(t,e){const n=Xb.has(t)||qb.has(t),i=Xb.has(e)||qb.has(e);return(r,s)=>{let o=t==Hb||t==r,a=e==Hb||e==s;return!o&&n&&"boolean"==typeof r&&(o=r?Xb.has(t):qb.has(t)),!a&&i&&"boolean"==typeof s&&(a=s?Xb.has(e):qb.has(e)),o&&a}}const Kb=new RegExp("s*:selfs*,?","g");function Zb(t,e,n){return new Qb(t).build(e,n)}class Qb{constructor(t){this._driver=t}build(t,e){const n=new Jb(e);return this._resetContextStyleTimingState(n),Gb(this,Rb(t),n)}_resetContextStyleTimingState(t){t.currentQuerySelector="",t.collectedStyles={},t.collectedStyles[""]={},t.currentTime=0}visitTrigger(t,e){let n=e.queryCount=0,i=e.depCount=0;const r=[],s=[];return"@"==t.name.charAt(0)&&e.errors.push("animation triggers cannot be prefixed with an `@` sign (e.g. trigger('@foo', [...]))"),t.definitions.forEach(t=>{if(this._resetContextStyleTimingState(e),0==t.type){const n=t,i=n.name;i.toString().split(/\s*,\s*/).forEach(t=>{n.name=t,r.push(this.visitState(n,e))}),n.name=i}else if(1==t.type){const r=this.visitTransition(t,e);n+=r.queryCount,i+=r.depCount,s.push(r)}else e.errors.push("only state() and transition() definitions can sit inside of a trigger()")}),{type:7,name:t.name,states:r,transitions:s,queryCount:n,depCount:i,options:null}}visitState(t,e){const n=this.visitStyle(t.styles,e),i=t.options&&t.options.params||null;if(n.containsDynamicStyles){const r=new Set,s=i||{};if(n.styles.forEach(t=>{if(tw(t)){const e=t;Object.keys(e).forEach(t=>{Fb(e[t]).forEach(t=>{s.hasOwnProperty(t)||r.add(t)})})}}),r.size){const n=Nb(r.values());e.errors.push(`state("${t.name}", ...) must define default values for all the following style substitutions: ${n.join(", ")}`)}}return{type:0,name:t.name,style:n,options:i?{params:i}:null}}visitTransition(t,e){e.queryCount=0,e.depCount=0;const n=Gb(this,Rb(t.animation),e);return{type:1,matchers:Wb(t.expr,e.errors),animation:n,queryCount:e.queryCount,depCount:e.depCount,options:ew(t.options)}}visitSequence(t,e){return{type:2,steps:t.steps.map(t=>Gb(this,t,e)),options:ew(t.options)}}visitGroup(t,e){const n=e.currentTime;let i=0;const r=t.steps.map(t=>{e.currentTime=n;const r=Gb(this,t,e);return i=Math.max(i,e.currentTime),r});return e.currentTime=i,{type:3,steps:r,options:ew(t.options)}}visitAnimate(t,e){const n=function(t,e){let n=null;if(t.hasOwnProperty("duration"))n=t;else if("number"==typeof t)return nw(Eb(t,e).duration,0,"");const i=t;if(i.split(/\s+/).some(t=>"{"==t.charAt(0)&&"{"==t.charAt(1))){const t=nw(0,0,"");return t.dynamic=!0,t.strValue=i,t}return n=n||Eb(i,e),nw(n.duration,n.delay,n.easing)}(t.timings,e.errors);let i;e.currentAnimateTimings=n;let r=t.styles?t.styles:H_({});if(5==r.type)i=this.visitKeyframes(r,e);else{let r=t.styles,s=!1;if(!r){s=!0;const t={};n.easing&&(t.easing=n.easing),r=H_(t)}e.currentTime+=n.duration+n.delay;const o=this.visitStyle(r,e);o.isEmptyStep=s,i=o}return e.currentAnimateTimings=null,{type:4,timings:n,style:i,options:null}}visitStyle(t,e){const n=this._makeStyleAst(t,e);return this._validateStyleAst(n,e),n}_makeStyleAst(t,e){const n=[];Array.isArray(t.styles)?t.styles.forEach(t=>{"string"==typeof t?t==z_?n.push(t):e.errors.push(`The provided style string value ${t} is not allowed.`):n.push(t)}):n.push(t.styles);let i=!1,r=null;return n.forEach(t=>{if(tw(t)){const e=t,n=e.easing;if(n&&(r=n,delete e.easing),!i)for(let t in e)if(e[t].toString().indexOf("{{")>=0){i=!0;break}}}),{type:6,styles:n,easing:r,offset:t.offset,containsDynamicStyles:i,options:null}}_validateStyleAst(t,e){const n=e.currentAnimateTimings;let i=e.currentTime,r=e.currentTime;n&&r>0&&(r-=n.duration+n.delay),t.styles.forEach(t=>{"string"!=typeof t&&Object.keys(t).forEach(n=>{if(!this._driver.validateStyleProperty(n))return void e.errors.push(`The provided animation property "${n}" is not a supported CSS property for animations`);const s=e.collectedStyles[e.currentQuerySelector],o=s[n];let a=!0;o&&(r!=i&&r>=o.startTime&&i<=o.endTime&&(e.errors.push(`The CSS property "${n}" that exists between the times of "${o.startTime}ms" and "${o.endTime}ms" is also being animated in a parallel animation between the times of "${r}ms" and "${i}ms"`),a=!1),r=o.startTime),a&&(s[n]={startTime:r,endTime:i}),e.options&&function(t,e,n){const i=e.params||{},r=Fb(t);r.length&&r.forEach(t=>{i.hasOwnProperty(t)||n.push(`Unable to resolve the local animation param ${t} in the given list of values`)})}(t[n],e.options,e.errors)})})}visitKeyframes(t,e){const n={type:5,styles:[],options:null};if(!e.currentAnimateTimings)return e.errors.push("keyframes() must be placed inside of a call to animate()"),n;let i=0;const r=[];let s=!1,o=!1,a=0;const l=t.steps.map(t=>{const n=this._makeStyleAst(t,e);let l=null!=n.offset?n.offset:function(t){if("string"==typeof t)return null;let e=null;if(Array.isArray(t))t.forEach(t=>{if(tw(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}});else if(tw(t)&&t.hasOwnProperty("offset")){const n=t;e=parseFloat(n.offset),delete n.offset}return e}(n.styles),c=0;return null!=l&&(i++,c=n.offset=l),o=o||c<0||c>1,s=s||c<a,a=c,r.push(c),n});o&&e.errors.push("Please ensure that all keyframe offsets are between 0 and 1"),s&&e.errors.push("Please ensure that all keyframe offsets are in order");const c=t.steps.length;let h=0;i>0&&i<c?e.errors.push("Not all style() steps within the declared keyframes() contain offsets"):0==i&&(h=1/(c-1));const u=c-1,d=e.currentTime,f=e.currentAnimateTimings,p=f.duration;return l.forEach((t,i)=>{const s=h>0?i==u?1:h*i:r[i],o=s*p;e.currentTime=d+f.delay+o,f.duration=o,this._validateStyleAst(t,e),t.offset=s,n.styles.push(t)}),n}visitReference(t,e){return{type:8,animation:Gb(this,Rb(t.animation),e),options:ew(t.options)}}visitAnimateChild(t,e){return e.depCount++,{type:9,options:ew(t.options)}}visitAnimateRef(t,e){return{type:10,animation:this.visitReference(t.animation,e),options:ew(t.options)}}visitQuery(t,e){const n=e.currentQuerySelector,i=t.options||{};e.queryCount++,e.currentQuery=t;const[r,s]=function(t){const e=!!t.split(/\s*,\s*/).find(t=>":self"==t);return e&&(t=t.replace(Kb,"")),[t=t.replace(/@\*/g,Cb).replace(/@\w+/g,t=>".ng-trigger-"+t.substr(1)).replace(/:animating/g,Sb),e]}(t.selector);e.currentQuerySelector=n.length?n+" "+r:r,rb(e.collectedStyles,e.currentQuerySelector,{});const o=Gb(this,Rb(t.animation),e);return e.currentQuery=null,e.currentQuerySelector=n,{type:11,selector:r,limit:i.limit||0,optional:!!i.optional,includeSelf:s,animation:o,originalSelector:t.selector,options:ew(t.options)}}visitStagger(t,e){e.currentQuery||e.errors.push("stagger() can only be used inside of query()");const n="full"===t.timings?{duration:0,delay:0,easing:"full"}:Eb(t.timings,e.errors,!0);return{type:12,animation:Gb(this,Rb(t.animation),e),timings:n,options:null}}}class Jb{constructor(t){this.errors=t,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles={},this.options=null}}function tw(t){return!Array.isArray(t)&&"object"==typeof t}function ew(t){var e;return t?(t=Ob(t)).params&&(t.params=(e=t.params)?Ob(e):null):t={},t}function nw(t,e,n){return{duration:t,delay:e,easing:n}}function iw(t,e,n,i,r,s,o=null,a=!1){return{type:1,element:t,keyframes:e,preStyleProps:n,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}class rw{constructor(){this._map=new Map}consume(t){let e=this._map.get(t);return e?this._map.delete(t):e=[],e}append(t,e){let n=this._map.get(t);n||this._map.set(t,n=[]),n.push(...e)}has(t){return this._map.has(t)}clear(){this._map.clear()}}const sw=new RegExp(":enter","g"),ow=new RegExp(":leave","g");function aw(t,e,n,i,r,s={},o={},a,l,c=[]){return(new lw).buildKeyframes(t,e,n,i,r,s,o,a,l,c)}class lw{buildKeyframes(t,e,n,i,r,s,o,a,l,c=[]){l=l||new rw;const h=new hw(t,e,l,i,r,c,[]);h.options=a,h.currentTimeline.setStyles([s],null,h.errors,a),Gb(this,n,h);const u=h.timelines.filter(t=>t.containsAnimation());if(u.length&&Object.keys(o).length){const t=u[u.length-1];t.allowOnlyTimelineStyles()||t.setStyles([o],null,h.errors,a)}return u.length?u.map(t=>t.buildKeyframes()):[iw(e,[],[],[],0,0,"",!1)]}visitTrigger(t,e){}visitState(t,e){}visitTransition(t,e){}visitAnimateChild(t,e){const n=e.subInstructions.consume(e.element);if(n){const i=e.createSubContext(t.options),r=e.currentTimeline.currentTime,s=this._visitSubInstructions(n,i,i.options);r!=s&&e.transformIntoNewTimeline(s)}e.previousNode=t}visitAnimateRef(t,e){const n=e.createSubContext(t.options);n.transformIntoNewTimeline(),this.visitReference(t.animation,n),e.transformIntoNewTimeline(n.currentTimeline.currentTime),e.previousNode=t}_visitSubInstructions(t,e,n){let i=e.currentTimeline.currentTime;const r=null!=n.duration?kb(n.duration):null,s=null!=n.delay?kb(n.delay):null;return 0!==r&&t.forEach(t=>{const n=e.appendInstructionToTimeline(t,r,s);i=Math.max(i,n.duration+n.delay)}),i}visitReference(t,e){e.updateOptions(t.options,!0),Gb(this,t.animation,e),e.previousNode=t}visitSequence(t,e){const n=e.subContextCount;let i=e;const r=t.options;if(r&&(r.params||r.delay)&&(i=e.createSubContext(r),i.transformIntoNewTimeline(),null!=r.delay)){6==i.previousNode.type&&(i.currentTimeline.snapshotCurrentStyles(),i.previousNode=cw);const t=kb(r.delay);i.delayNextStep(t)}t.steps.length&&(t.steps.forEach(t=>Gb(this,t,i)),i.currentTimeline.applyStylesToKeyframe(),i.subContextCount>n&&i.transformIntoNewTimeline()),e.previousNode=t}visitGroup(t,e){const n=[];let i=e.currentTimeline.currentTime;const r=t.options&&t.options.delay?kb(t.options.delay):0;t.steps.forEach(s=>{const o=e.createSubContext(t.options);r&&o.delayNextStep(r),Gb(this,s,o),i=Math.max(i,o.currentTimeline.currentTime),n.push(o.currentTimeline)}),n.forEach(t=>e.currentTimeline.mergeTimelineCollectedStyles(t)),e.transformIntoNewTimeline(i),e.previousNode=t}_visitTiming(t,e){if(t.dynamic){const n=t.strValue;return Eb(e.params?jb(n,e.params,e.errors):n,e.errors)}return{duration:t.duration,delay:t.delay,easing:t.easing}}visitAnimate(t,e){const n=e.currentAnimateTimings=this._visitTiming(t.timings,e),i=e.currentTimeline;n.delay&&(e.incrementTime(n.delay),i.snapshotCurrentStyles());const r=t.style;5==r.type?this.visitKeyframes(r,e):(e.incrementTime(n.duration),this.visitStyle(r,e),i.applyStylesToKeyframe()),e.currentAnimateTimings=null,e.previousNode=t}visitStyle(t,e){const n=e.currentTimeline,i=e.currentAnimateTimings;!i&&n.getCurrentStyleProperties().length&&n.forwardFrame();const r=i&&i.easing||t.easing;t.isEmptyStep?n.applyEmptyStep(r):n.setStyles(t.styles,r,e.errors,e.options),e.previousNode=t}visitKeyframes(t,e){const n=e.currentAnimateTimings,i=e.currentTimeline.duration,r=n.duration,s=e.createSubContext().currentTimeline;s.easing=n.easing,t.styles.forEach(t=>{s.forwardTime((t.offset||0)*r),s.setStyles(t.styles,t.easing,e.errors,e.options),s.applyStylesToKeyframe()}),e.currentTimeline.mergeTimelineCollectedStyles(s),e.transformIntoNewTimeline(i+r),e.previousNode=t}visitQuery(t,e){const n=e.currentTimeline.currentTime,i=t.options||{},r=i.delay?kb(i.delay):0;r&&(6===e.previousNode.type||0==n&&e.currentTimeline.getCurrentStyleProperties().length)&&(e.currentTimeline.snapshotCurrentStyles(),e.previousNode=cw);let s=n;const o=e.invokeQuery(t.selector,t.originalSelector,t.limit,t.includeSelf,!!i.optional,e.errors);e.currentQueryTotal=o.length;let a=null;o.forEach((n,i)=>{e.currentQueryIndex=i;const o=e.createSubContext(t.options,n);r&&o.delayNextStep(r),n===e.element&&(a=o.currentTimeline),Gb(this,t.animation,o),o.currentTimeline.applyStylesToKeyframe(),s=Math.max(s,o.currentTimeline.currentTime)}),e.currentQueryIndex=0,e.currentQueryTotal=0,e.transformIntoNewTimeline(s),a&&(e.currentTimeline.mergeTimelineCollectedStyles(a),e.currentTimeline.snapshotCurrentStyles()),e.previousNode=t}visitStagger(t,e){const n=e.parentContext,i=e.currentTimeline,r=t.timings,s=Math.abs(r.duration),o=s*(e.currentQueryTotal-1);let a=s*e.currentQueryIndex;switch(r.duration<0?"reverse":r.easing){case"reverse":a=o-a;break;case"full":a=n.currentStaggerTime}const l=e.currentTimeline;a&&l.delayNextStep(a);const c=l.currentTime;Gb(this,t.animation,e),e.previousNode=t,n.currentStaggerTime=i.currentTime-c+(i.startTime-n.currentTimeline.startTime)}}const cw={};class hw{constructor(t,e,n,i,r,s,o,a){this._driver=t,this.element=e,this.subInstructions=n,this._enterClassName=i,this._leaveClassName=r,this.errors=s,this.timelines=o,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=cw,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=a||new uw(this._driver,e,0),o.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(t,e){if(!t)return;const n=t;let i=this.options;null!=n.duration&&(i.duration=kb(n.duration)),null!=n.delay&&(i.delay=kb(n.delay));const r=n.params;if(r){let t=i.params;t||(t=this.options.params={}),Object.keys(r).forEach(n=>{e&&t.hasOwnProperty(n)||(t[n]=jb(r[n],t,this.errors))})}}_copyOptions(){const t={};if(this.options){const e=this.options.params;if(e){const n=t.params={};Object.keys(e).forEach(t=>{n[t]=e[t]})}}return t}createSubContext(t=null,e,n){const i=e||this.element,r=new hw(this._driver,i,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(i,n||0));return r.previousNode=this.previousNode,r.currentAnimateTimings=this.currentAnimateTimings,r.options=this._copyOptions(),r.updateOptions(t),r.currentQueryIndex=this.currentQueryIndex,r.currentQueryTotal=this.currentQueryTotal,r.parentContext=this,this.subContextCount++,r}transformIntoNewTimeline(t){return this.previousNode=cw,this.currentTimeline=this.currentTimeline.fork(this.element,t),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(t,e,n){const i={duration:null!=e?e:t.duration,delay:this.currentTimeline.currentTime+(null!=n?n:0)+t.delay,easing:""},r=new dw(this._driver,t.element,t.keyframes,t.preStyleProps,t.postStyleProps,i,t.stretchStartingKeyframe);return this.timelines.push(r),i}incrementTime(t){this.currentTimeline.forwardTime(this.currentTimeline.duration+t)}delayNextStep(t){t>0&&this.currentTimeline.delayNextStep(t)}invokeQuery(t,e,n,i,r,s){let o=[];if(i&&o.push(this.element),t.length>0){t=(t=t.replace(sw,"."+this._enterClassName)).replace(ow,"."+this._leaveClassName);let e=this._driver.query(this.element,t,1!=n);0!==n&&(e=n<0?e.slice(e.length+n,e.length):e.slice(0,n)),o.push(...e)}return r||0!=o.length||s.push(`\`query("${e}")\` returned zero elements. (Use \`query("${e}", { optional: true })\` if you wish to allow this.)`),o}}class uw{constructor(t,e,n,i){this._driver=t,this.element=e,this.startTime=n,this._elementTimelineStylesLookup=i,this.duration=0,this._previousKeyframe={},this._currentKeyframe={},this._keyframes=new Map,this._styleSummary={},this._pendingStyles={},this._backFill={},this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._localTimelineStyles=Object.create(this._backFill,{}),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(e),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(e,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.getCurrentStyleProperties().length>0;default:return!0}}getCurrentStyleProperties(){return Object.keys(this._currentKeyframe)}get currentTime(){return this.startTime+this.duration}delayNextStep(t){const e=1==this._keyframes.size&&Object.keys(this._pendingStyles).length;this.duration||e?(this.forwardTime(this.currentTime+t),e&&this.snapshotCurrentStyles()):this.startTime+=t}fork(t,e){return this.applyStylesToKeyframe(),new uw(this._driver,t,e||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=Object.create(this._backFill,{}),this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(t){this.applyStylesToKeyframe(),this.duration=t,this._loadKeyframe()}_updateStyle(t,e){this._localTimelineStyles[t]=e,this._globalTimelineStyles[t]=e,this._styleSummary[t]={time:this.currentTime,value:e}}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(t){t&&(this._previousKeyframe.easing=t),Object.keys(this._globalTimelineStyles).forEach(t=>{this._backFill[t]=this._globalTimelineStyles[t]||z_,this._currentKeyframe[t]=z_}),this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(t,e,n,i){e&&(this._previousKeyframe.easing=e);const r=i&&i.params||{},s=function(t,e){const n={};let i;return t.forEach(t=>{"*"===t?(i=i||Object.keys(e),i.forEach(t=>{n[t]=z_})):Pb(t,!1,n)}),n}(t,this._globalTimelineStyles);Object.keys(s).forEach(t=>{const e=jb(s[t],r,n);this._pendingStyles[t]=e,this._localTimelineStyles.hasOwnProperty(t)||(this._backFill[t]=this._globalTimelineStyles.hasOwnProperty(t)?this._globalTimelineStyles[t]:z_),this._updateStyle(t,e)})}applyStylesToKeyframe(){const t=this._pendingStyles,e=Object.keys(t);0!=e.length&&(this._pendingStyles={},e.forEach(e=>{this._currentKeyframe[e]=t[e]}),Object.keys(this._localTimelineStyles).forEach(t=>{this._currentKeyframe.hasOwnProperty(t)||(this._currentKeyframe[t]=this._localTimelineStyles[t])}))}snapshotCurrentStyles(){Object.keys(this._localTimelineStyles).forEach(t=>{const e=this._localTimelineStyles[t];this._pendingStyles[t]=e,this._updateStyle(t,e)})}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const t=[];for(let e in this._currentKeyframe)t.push(e);return t}mergeTimelineCollectedStyles(t){Object.keys(t._styleSummary).forEach(e=>{const n=this._styleSummary[e],i=t._styleSummary[e];(!n||i.time>n.time)&&this._updateStyle(e,i.value)})}buildKeyframes(){this.applyStylesToKeyframe();const t=new Set,e=new Set,n=1===this._keyframes.size&&0===this.duration;let i=[];this._keyframes.forEach((r,s)=>{const o=Pb(r,!0);Object.keys(o).forEach(n=>{const i=o[n];"!"==i?t.add(n):i==z_&&e.add(n)}),n||(o.offset=s/this.duration),i.push(o)});const r=t.size?Nb(t.values()):[],s=e.size?Nb(e.values()):[];if(n){const t=i[0],e=Ob(t);t.offset=0,e.offset=1,i=[t,e]}return iw(this.element,i,r,s,this.duration,this.startTime,this.easing,!1)}}class dw extends uw{constructor(t,e,n,i,r,s,o=!1){super(t,e,s.delay),this.keyframes=n,this.preStyleProps=i,this.postStyleProps=r,this._stretchStartingKeyframe=o,this.timings={duration:s.duration,delay:s.delay,easing:s.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let t=this.keyframes,{delay:e,duration:n,easing:i}=this.timings;if(this._stretchStartingKeyframe&&e){const r=[],s=n+e,o=e/s,a=Pb(t[0],!1);a.offset=0,r.push(a);const l=Pb(t[0],!1);l.offset=fw(o),r.push(l);const c=t.length-1;for(let i=1;i<=c;i++){let o=Pb(t[i],!1);o.offset=fw((e+o.offset*n)/s),r.push(o)}n=s,e=0,i="",t=r}return iw(this.element,t,this.preStyleProps,this.postStyleProps,n,e,i,!0)}}function fw(t,e=3){const n=Math.pow(10,e-1);return Math.round(t*n)/n}class pw{}class gw extends pw{normalizePropertyName(t,e){return $b(t)}normalizeStyleValue(t,e,n,i){let r="";const s=n.toString().trim();if(mw[e]&&0!==n&&"0"!==n)if("number"==typeof n)r="px";else{const e=n.match(/^[+-]?[\d\.]+([a-z]*)$/);e&&0==e[1].length&&i.push(`Please provide a CSS unit value for ${t}:${n}`)}return s+r}}const mw=(()=>function(t){const e={};return t.forEach(t=>e[t]=!0),e}("width,height,minWidth,minHeight,maxWidth,maxHeight,left,top,bottom,right,fontSize,outlineWidth,outlineOffset,paddingTop,paddingLeft,paddingBottom,paddingRight,marginTop,marginLeft,marginBottom,marginRight,borderRadius,borderWidth,borderTopWidth,borderLeftWidth,borderRightWidth,borderBottomWidth,textIndent,perspective".split(",")))();function vw(t,e,n,i,r,s,o,a,l,c,h,u,d){return{type:0,element:t,triggerName:e,isRemovalTransition:r,fromState:n,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:c,postStyleProps:h,totalTime:u,errors:d}}const yw={};class _w{constructor(t,e,n){this._triggerName=t,this.ast=e,this._stateStyles=n}match(t,e,n,i){return function(t,e,n,i,r){return t.some(t=>t(e,n,i,r))}(this.ast.matchers,t,e,n,i)}buildStyles(t,e,n){const i=this._stateStyles["*"],r=this._stateStyles[t],s=i?i.buildStyles(e,n):{};return r?r.buildStyles(e,n):s}build(t,e,n,i,r,s,o,a,l,c){const h=[],u=this.ast.options&&this.ast.options.params||yw,d=this.buildStyles(n,o&&o.params||yw,h),f=a&&a.params||yw,p=this.buildStyles(i,f,h),g=new Set,m=new Map,v=new Map,y="void"===i,_={params:Object.assign(Object.assign({},u),f)},b=c?[]:aw(t,e,this.ast.animation,r,s,d,p,_,l,h);let w=0;if(b.forEach(t=>{w=Math.max(t.duration+t.delay,w)}),h.length)return vw(e,this._triggerName,n,i,y,d,p,[],[],m,v,w,h);b.forEach(t=>{const n=t.element,i=rb(m,n,{});t.preStyleProps.forEach(t=>i[t]=!0);const r=rb(v,n,{});t.postStyleProps.forEach(t=>r[t]=!0),n!==e&&g.add(n)});const C=Nb(g.values());return vw(e,this._triggerName,n,i,y,d,p,b,C,m,v,w)}}class bw{constructor(t,e,n){this.styles=t,this.defaultParams=e,this.normalizer=n}buildStyles(t,e){const n={},i=Ob(this.defaultParams);return Object.keys(t).forEach(e=>{const n=t[e];null!=n&&(i[e]=n)}),this.styles.styles.forEach(t=>{if("string"!=typeof t){const r=t;Object.keys(r).forEach(t=>{let s=r[t];s.length>1&&(s=jb(s,i,e));const o=this.normalizer.normalizePropertyName(t,e);s=this.normalizer.normalizeStyleValue(t,o,s,e),n[o]=s})}}),n}}class ww{constructor(t,e,n){this.name=t,this.ast=e,this._normalizer=n,this.transitionFactories=[],this.states={},e.states.forEach(t=>{this.states[t.name]=new bw(t.style,t.options&&t.options.params||{},n)}),Cw(this.states,"true","1"),Cw(this.states,"false","0"),e.transitions.forEach(e=>{this.transitionFactories.push(new _w(t,e,this.states))}),this.fallbackTransition=new _w(t,{type:1,animation:{type:2,steps:[],options:null},matchers:[(t,e)=>!0],options:null,queryCount:0,depCount:0},this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(t,e,n,i){return this.transitionFactories.find(r=>r.match(t,e,n,i))||null}matchStyles(t,e,n){return this.fallbackTransition.buildStyles(t,e,n)}}function Cw(t,e,n){t.hasOwnProperty(e)?t.hasOwnProperty(n)||(t[n]=t[e]):t.hasOwnProperty(n)&&(t[e]=t[n])}const xw=new rw;class Sw{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._animations={},this._playersById={},this.players=[]}register(t,e){const n=[],i=Zb(this._driver,e,n);if(n.length)throw new Error(`Unable to build the animation due to the following errors: ${n.join("\n")}`);this._animations[t]=i}_buildPlayer(t,e,n){const i=t.element,r=tb(0,this._normalizer,0,t.keyframes,e,n);return this._driver.animate(i,r,t.duration,t.delay,t.easing,[],!0)}create(t,e,n={}){const i=[],r=this._animations[t];let s;const o=new Map;if(r?(s=aw(this._driver,e,r,_b,bb,{},{},n,xw,i),s.forEach(t=>{const e=rb(o,t.element,{});t.postStyleProps.forEach(t=>e[t]=null)})):(i.push("The requested animation doesn't exist or has already been destroyed"),s=[]),i.length)throw new Error(`Unable to create the animation due to the following errors: ${i.join("\n")}`);o.forEach((t,e)=>{Object.keys(t).forEach(n=>{t[n]=this._driver.computeStyle(e,n,z_)})});const a=J_(s.map(t=>{const e=o.get(t.element);return this._buildPlayer(t,{},e)}));return this._playersById[t]=a,a.onDestroy(()=>this.destroy(t)),this.players.push(a),a}destroy(t){const e=this._getPlayer(t);e.destroy(),delete this._playersById[t];const n=this.players.indexOf(e);n>=0&&this.players.splice(n,1)}_getPlayer(t){const e=this._playersById[t];if(!e)throw new Error(`Unable to find the timeline player referenced by ${t}`);return e}listen(t,e,n,i){const r=ib(e,"","","");return eb(this._getPlayer(t),n,r,i),()=>{}}command(t,e,n,i){if("register"==n)return void this.register(t,i[0]);if("create"==n)return void this.create(t,e,i[0]||{});const r=this._getPlayer(t);switch(n){case"play":r.play();break;case"pause":r.pause();break;case"reset":r.reset();break;case"restart":r.restart();break;case"finish":r.finish();break;case"init":r.init();break;case"setPosition":r.setPosition(parseFloat(i[0]));break;case"destroy":this.destroy(t)}}}const kw="ng-animate-queued",Tw="ng-animate-disabled",Ew=".ng-animate-disabled",Ow=[],Pw={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Aw={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0};class Mw{constructor(t,e=""){this.namespaceId=e;const n=t&&t.hasOwnProperty("value");if(this.value=null!=(i=n?t.value:t)?i:null,n){const e=Ob(t);delete e.value,this.options=e}else this.options={};var i;this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(t){const e=t.params;if(e){const t=this.options.params;Object.keys(e).forEach(n=>{null==t[n]&&(t[n]=e[n])})}}}const Iw="void",Dw=new Mw(Iw);class Rw{constructor(t,e,n){this.id=t,this.hostElement=e,this._engine=n,this.players=[],this._triggers={},this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+t,zw(e,this._hostClassName)}listen(t,e,n,i){if(!this._triggers.hasOwnProperty(e))throw new Error(`Unable to listen on the animation trigger event "${n}" because the animation trigger "${e}" doesn't exist!`);if(null==n||0==n.length)throw new Error(`Unable to listen on the animation trigger "${e}" because the provided event is undefined!`);if("start"!=(r=n)&&"done"!=r)throw new Error(`The provided animation trigger event "${n}" for the animation trigger "${e}" is not supported!`);var r;const s=rb(this._elementListeners,t,[]),o={name:e,phase:n,callback:i};s.push(o);const a=rb(this._engine.statesByElement,t,{});return a.hasOwnProperty(e)||(zw(t,wb),zw(t,"ng-trigger-"+e),a[e]=Dw),()=>{this._engine.afterFlush(()=>{const t=s.indexOf(o);t>=0&&s.splice(t,1),this._triggers[e]||delete a[e]})}}register(t,e){return!this._triggers[t]&&(this._triggers[t]=e,!0)}_getTrigger(t){const e=this._triggers[t];if(!e)throw new Error(`The provided animation trigger "${t}" has not been registered!`);return e}trigger(t,e,n,i=!0){const r=this._getTrigger(e),s=new Fw(this.id,e,t);let o=this._engine.statesByElement.get(t);o||(zw(t,wb),zw(t,"ng-trigger-"+e),this._engine.statesByElement.set(t,o={}));let a=o[e];const l=new Mw(n,this.id);if(!(n&&n.hasOwnProperty("value"))&&a&&l.absorbOptions(a.options),o[e]=l,a||(a=Dw),l.value!==Iw&&a.value===l.value){if(!function(t,e){const n=Object.keys(t),i=Object.keys(e);if(n.length!=i.length)return!1;for(let r=0;r<n.length;r++){const i=n[r];if(!e.hasOwnProperty(i)||t[i]!==e[i])return!1}return!0}(a.params,l.params)){const e=[],n=r.matchStyles(a.value,a.params,e),i=r.matchStyles(l.value,l.params,e);e.length?this._engine.reportError(e):this._engine.afterFlush(()=>{Db(t,n),Ib(t,i)})}return}const c=rb(this._engine.playersByElement,t,[]);c.forEach(t=>{t.namespaceId==this.id&&t.triggerName==e&&t.queued&&t.destroy()});let h=r.matchTransition(a.value,l.value,t,l.params),u=!1;if(!h){if(!i)return;h=r.fallbackTransition,u=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:e,transition:h,fromState:a,toState:l,player:s,isFallbackTransition:u}),u||(zw(t,kw),s.onStart(()=>{Vw(t,kw)})),s.onDone(()=>{let e=this.players.indexOf(s);e>=0&&this.players.splice(e,1);const n=this._engine.playersByElement.get(t);if(n){let t=n.indexOf(s);t>=0&&n.splice(t,1)}}),this.players.push(s),c.push(s),s}deregister(t){delete this._triggers[t],this._engine.statesByElement.forEach((e,n)=>{delete e[t]}),this._elementListeners.forEach((e,n)=>{this._elementListeners.set(n,e.filter(e=>e.name!=t))})}clearElementCache(t){this._engine.statesByElement.delete(t),this._elementListeners.delete(t);const e=this._engine.playersByElement.get(t);e&&(e.forEach(t=>t.destroy()),this._engine.playersByElement.delete(t))}_signalRemovalForInnerTriggers(t,e){const n=this._engine.driver.query(t,Cb,!0);n.forEach(t=>{if(t.__ng_removed)return;const n=this._engine.fetchNamespacesByElement(t);n.size?n.forEach(n=>n.triggerLeaveAnimation(t,e,!1,!0)):this.clearElementCache(t)}),this._engine.afterFlushAnimationsDone(()=>n.forEach(t=>this.clearElementCache(t)))}triggerLeaveAnimation(t,e,n,i){const r=this._engine.statesByElement.get(t);if(r){const s=[];if(Object.keys(r).forEach(e=>{if(this._triggers[e]){const n=this.trigger(t,e,Iw,i);n&&s.push(n)}}),s.length)return this._engine.markElementAsRemoved(this.id,t,!0,e),n&&J_(s).onDone(()=>this._engine.processLeaveNode(t)),!0}return!1}prepareLeaveAnimationListeners(t){const e=this._elementListeners.get(t),n=this._engine.statesByElement.get(t);if(e&&n){const i=new Set;e.forEach(e=>{const r=e.name;if(i.has(r))return;i.add(r);const s=this._triggers[r].fallbackTransition,o=n[r]||Dw,a=new Mw(Iw),l=new Fw(this.id,r,t);this._engine.totalQueuedPlayers++,this._queue.push({element:t,triggerName:r,transition:s,fromState:o,toState:a,player:l,isFallbackTransition:!0})})}}removeNode(t,e){const n=this._engine;if(t.childElementCount&&this._signalRemovalForInnerTriggers(t,e),this.triggerLeaveAnimation(t,e,!0))return;let i=!1;if(n.totalAnimations){const e=n.players.length?n.playersByQueriedElement.get(t):[];if(e&&e.length)i=!0;else{let e=t;for(;e=e.parentNode;)if(n.statesByElement.get(e)){i=!0;break}}}if(this.prepareLeaveAnimationListeners(t),i)n.markElementAsRemoved(this.id,t,!1,e);else{const i=t.__ng_removed;i&&i!==Pw||(n.afterFlush(()=>this.clearElementCache(t)),n.destroyInnerAnimations(t),n._onRemovalComplete(t,e))}}insertNode(t,e){zw(t,this._hostClassName)}drainQueuedTransitions(t){const e=[];return this._queue.forEach(n=>{const i=n.player;if(i.destroyed)return;const r=n.element,s=this._elementListeners.get(r);s&&s.forEach(e=>{if(e.name==n.triggerName){const i=ib(r,n.triggerName,n.fromState.value,n.toState.value);i._data=t,eb(n.player,e.phase,i,e.callback)}}),i.markedForDestroy?this._engine.afterFlush(()=>{i.destroy()}):e.push(n)}),this._queue=[],e.sort((t,e)=>{const n=t.transition.ast.depCount,i=e.transition.ast.depCount;return 0==n||0==i?n-i:this._engine.driver.containsElement(t.element,e.element)?1:-1})}destroy(t){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,t)}elementContainsData(t){let e=!1;return this._elementListeners.has(t)&&(e=!0),e=!!this._queue.find(e=>e.element===t)||e,e}}class Lw{constructor(t,e,n){this.bodyNode=t,this.driver=e,this._normalizer=n,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(t,e)=>{}}_onRemovalComplete(t,e){this.onRemovalComplete(t,e)}get queuedPlayers(){const t=[];return this._namespaceList.forEach(e=>{e.players.forEach(e=>{e.queued&&t.push(e)})}),t}createNamespace(t,e){const n=new Rw(t,e,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,e)?this._balanceNamespaceList(n,e):(this.newHostElements.set(e,n),this.collectEnterElement(e)),this._namespaceLookup[t]=n}_balanceNamespaceList(t,e){const n=this._namespaceList.length-1;if(n>=0){let i=!1;for(let r=n;r>=0;r--)if(this.driver.containsElement(this._namespaceList[r].hostElement,e)){this._namespaceList.splice(r+1,0,t),i=!0;break}i||this._namespaceList.splice(0,0,t)}else this._namespaceList.push(t);return this.namespacesByHostElement.set(e,t),t}register(t,e){let n=this._namespaceLookup[t];return n||(n=this.createNamespace(t,e)),n}registerTrigger(t,e,n){let i=this._namespaceLookup[t];i&&i.register(e,n)&&this.totalAnimations++}destroy(t,e){if(!t)return;const n=this._fetchNamespace(t);this.afterFlush(()=>{this.namespacesByHostElement.delete(n.hostElement),delete this._namespaceLookup[t];const e=this._namespaceList.indexOf(n);e>=0&&this._namespaceList.splice(e,1)}),this.afterFlushAnimationsDone(()=>n.destroy(e))}_fetchNamespace(t){return this._namespaceLookup[t]}fetchNamespacesByElement(t){const e=new Set,n=this.statesByElement.get(t);if(n){const t=Object.keys(n);for(let i=0;i<t.length;i++){const r=n[t[i]].namespaceId;if(r){const t=this._fetchNamespace(r);t&&e.add(t)}}}return e}trigger(t,e,n,i){if(jw(e)){const r=this._fetchNamespace(t);if(r)return r.trigger(e,n,i),!0}return!1}insertNode(t,e,n,i){if(!jw(e))return;const r=e.__ng_removed;if(r&&r.setForRemoval){r.setForRemoval=!1,r.setForMove=!0;const t=this.collectedLeaveElements.indexOf(e);t>=0&&this.collectedLeaveElements.splice(t,1)}if(t){const i=this._fetchNamespace(t);i&&i.insertNode(e,n)}i&&this.collectEnterElement(e)}collectEnterElement(t){this.collectedEnterElements.push(t)}markElementAsDisabled(t,e){e?this.disabledNodes.has(t)||(this.disabledNodes.add(t),zw(t,Tw)):this.disabledNodes.has(t)&&(this.disabledNodes.delete(t),Vw(t,Tw))}removeNode(t,e,n,i){if(jw(e)){const r=t?this._fetchNamespace(t):null;if(r?r.removeNode(e,i):this.markElementAsRemoved(t,e,!1,i),n){const n=this.namespacesByHostElement.get(e);n&&n.id!==t&&n.removeNode(e,i)}}else this._onRemovalComplete(e,i)}markElementAsRemoved(t,e,n,i){this.collectedLeaveElements.push(e),e.__ng_removed={namespaceId:t,setForRemoval:i,hasAnimation:n,removedBeforeQueried:!1}}listen(t,e,n,i,r){return jw(e)?this._fetchNamespace(t).listen(e,n,i,r):()=>{}}_buildInstruction(t,e,n,i,r){return t.transition.build(this.driver,t.element,t.fromState.value,t.toState.value,n,i,t.fromState.options,t.toState.options,e,r)}destroyInnerAnimations(t){let e=this.driver.query(t,Cb,!0);e.forEach(t=>this.destroyActiveAnimationsForElement(t)),0!=this.playersByQueriedElement.size&&(e=this.driver.query(t,Sb,!0),e.forEach(t=>this.finishActiveQueriedAnimationOnElement(t)))}destroyActiveAnimationsForElement(t){const e=this.playersByElement.get(t);e&&e.forEach(t=>{t.queued?t.markedForDestroy=!0:t.destroy()})}finishActiveQueriedAnimationOnElement(t){const e=this.playersByQueriedElement.get(t);e&&e.forEach(t=>t.finish())}whenRenderingDone(){return new Promise(t=>{if(this.players.length)return J_(this.players).onDone(()=>t());t()})}processLeaveNode(t){const e=t.__ng_removed;if(e&&e.setForRemoval){if(t.__ng_removed=Pw,e.namespaceId){this.destroyInnerAnimations(t);const n=this._fetchNamespace(e.namespaceId);n&&n.clearElementCache(t)}this._onRemovalComplete(t,e.setForRemoval)}this.driver.matchesElement(t,Ew)&&this.markElementAsDisabled(t,!1),this.driver.query(t,Ew,!0).forEach(t=>{this.markElementAsDisabled(t,!1)})}flush(t=-1){let e=[];if(this.newHostElements.size&&(this.newHostElements.forEach((t,e)=>this._balanceNamespaceList(t,e)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let n=0;n<this.collectedEnterElements.length;n++)zw(this.collectedEnterElements[n],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const n=[];try{e=this._flushAnimations(n,t)}finally{for(let t=0;t<n.length;t++)n[t]()}}else for(let n=0;n<this.collectedLeaveElements.length;n++)this.processLeaveNode(this.collectedLeaveElements[n]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(t=>t()),this._flushFns=[],this._whenQuietFns.length){const t=this._whenQuietFns;this._whenQuietFns=[],e.length?J_(e).onDone(()=>{t.forEach(t=>t())}):t.forEach(t=>t())}}reportError(t){throw new Error(`Unable to process animations due to the following failed trigger transitions\n ${t.join("\n")}`)}_flushAnimations(t,e){const n=new rw,i=[],r=new Map,s=[],o=new Map,a=new Map,l=new Map,c=new Set;this.disabledNodes.forEach(t=>{c.add(t);const e=this.driver.query(t,".ng-animate-queued",!0);for(let n=0;n<e.length;n++)c.add(e[n])});const h=this.bodyNode,u=Array.from(this.statesByElement.keys()),d=$w(u,this.collectedEnterElements),f=new Map;let p=0;d.forEach((t,e)=>{const n=_b+p++;f.set(e,n),t.forEach(t=>zw(t,n))});const g=[],m=new Set,v=new Set;for(let A=0;A<this.collectedLeaveElements.length;A++){const t=this.collectedLeaveElements[A],e=t.__ng_removed;e&&e.setForRemoval&&(g.push(t),m.add(t),e.hasAnimation?this.driver.query(t,".ng-star-inserted",!0).forEach(t=>m.add(t)):v.add(t))}const y=new Map,_=$w(u,Array.from(m));_.forEach((t,e)=>{const n=bb+p++;y.set(e,n),t.forEach(t=>zw(t,n))}),t.push(()=>{d.forEach((t,e)=>{const n=f.get(e);t.forEach(t=>Vw(t,n))}),_.forEach((t,e)=>{const n=y.get(e);t.forEach(t=>Vw(t,n))}),g.forEach(t=>{this.processLeaveNode(t)})});const b=[],w=[];for(let A=this._namespaceList.length-1;A>=0;A--)this._namespaceList[A].drainQueuedTransitions(e).forEach(t=>{const e=t.player,r=t.element;if(b.push(e),this.collectedEnterElements.length){const t=r.__ng_removed;if(t&&t.setForMove)return void e.destroy()}const c=!h||!this.driver.containsElement(h,r),u=y.get(r),d=f.get(r),p=this._buildInstruction(t,n,d,u,c);if(p.errors&&p.errors.length)w.push(p);else{if(c)return e.onStart(()=>Db(r,p.fromStyles)),e.onDestroy(()=>Ib(r,p.toStyles)),void i.push(e);if(t.isFallbackTransition)return e.onStart(()=>Db(r,p.fromStyles)),e.onDestroy(()=>Ib(r,p.toStyles)),void i.push(e);p.timelines.forEach(t=>t.stretchStartingKeyframe=!0),n.append(r,p.timelines),s.push({instruction:p,player:e,element:r}),p.queriedElements.forEach(t=>rb(o,t,[]).push(e)),p.preStyleProps.forEach((t,e)=>{const n=Object.keys(t);if(n.length){let t=a.get(e);t||a.set(e,t=new Set),n.forEach(e=>t.add(e))}}),p.postStyleProps.forEach((t,e)=>{const n=Object.keys(t);let i=l.get(e);i||l.set(e,i=new Set),n.forEach(t=>i.add(t))})}});if(w.length){const t=[];w.forEach(e=>{t.push(`@${e.triggerName} has failed due to:\n`),e.errors.forEach(e=>t.push(`- ${e}\n`))}),b.forEach(t=>t.destroy()),this.reportError(t)}const C=new Map,x=new Map;s.forEach(t=>{const e=t.element;n.has(e)&&(x.set(e,e),this._beforeAnimationBuild(t.player.namespaceId,t.instruction,C))}),i.forEach(t=>{const e=t.element;this._getPreviousPlayers(e,!1,t.namespaceId,t.triggerName,null).forEach(t=>{rb(C,e,[]).push(t),t.destroy()})});const S=g.filter(t=>Hw(t,a,l)),k=new Map;Bw(k,this.driver,v,l,z_).forEach(t=>{Hw(t,a,l)&&S.push(t)});const T=new Map;d.forEach((t,e)=>{Bw(T,this.driver,new Set(t),a,"!")}),S.forEach(t=>{const e=k.get(t),n=T.get(t);k.set(t,Object.assign(Object.assign({},e),n))});const E=[],O=[],P={};s.forEach(t=>{const{element:e,player:s,instruction:o}=t;if(n.has(e)){if(c.has(e))return s.onDestroy(()=>Ib(e,o.toStyles)),s.disabled=!0,s.overrideTotalTime(o.totalTime),void i.push(s);let t=P;if(x.size>1){let n=e;const i=[];for(;n=n.parentNode;){const e=x.get(n);if(e){t=e;break}i.push(n)}i.forEach(e=>x.set(e,t))}const n=this._buildAnimation(s.namespaceId,o,C,r,T,k);if(s.setRealPlayer(n),t===P)E.push(s);else{const e=this.playersByElement.get(t);e&&e.length&&(s.parentPlayer=J_(e)),i.push(s)}}else Db(e,o.fromStyles),s.onDestroy(()=>Ib(e,o.toStyles)),O.push(s),c.has(e)&&i.push(s)}),O.forEach(t=>{const e=r.get(t.element);if(e&&e.length){const n=J_(e);t.setRealPlayer(n)}}),i.forEach(t=>{t.parentPlayer?t.syncPlayerEvents(t.parentPlayer):t.destroy()});for(let A=0;A<g.length;A++){const t=g[A],e=t.__ng_removed;if(Vw(t,bb),e&&e.hasAnimation)continue;let n=[];if(o.size){let e=o.get(t);e&&e.length&&n.push(...e);let i=this.driver.query(t,Sb,!0);for(let t=0;t<i.length;t++){let e=o.get(i[t]);e&&e.length&&n.push(...e)}}const i=n.filter(t=>!t.destroyed);i.length?Gw(this,t,i):this.processLeaveNode(t)}return g.length=0,E.forEach(t=>{this.players.push(t),t.onDone(()=>{t.destroy();const e=this.players.indexOf(t);this.players.splice(e,1)}),t.play()}),E}elementContainsData(t,e){let n=!1;const i=e.__ng_removed;return i&&i.setForRemoval&&(n=!0),this.playersByElement.has(e)&&(n=!0),this.playersByQueriedElement.has(e)&&(n=!0),this.statesByElement.has(e)&&(n=!0),this._fetchNamespace(t).elementContainsData(e)||n}afterFlush(t){this._flushFns.push(t)}afterFlushAnimationsDone(t){this._whenQuietFns.push(t)}_getPreviousPlayers(t,e,n,i,r){let s=[];if(e){const e=this.playersByQueriedElement.get(t);e&&(s=e)}else{const e=this.playersByElement.get(t);if(e){const t=!r||r==Iw;e.forEach(e=>{e.queued||(t||e.triggerName==i)&&s.push(e)})}}return(n||i)&&(s=s.filter(t=>!(n&&n!=t.namespaceId||i&&i!=t.triggerName))),s}_beforeAnimationBuild(t,e,n){const i=e.element,r=e.isRemovalTransition?void 0:t,s=e.isRemovalTransition?void 0:e.triggerName;for(const o of e.timelines){const t=o.element,a=t!==i,l=rb(n,t,[]);this._getPreviousPlayers(t,a,r,s,e.toState).forEach(t=>{const e=t.getRealPlayer();e.beforeDestroy&&e.beforeDestroy(),t.destroy(),l.push(t)})}Db(i,e.fromStyles)}_buildAnimation(t,e,n,i,r,s){const o=e.triggerName,a=e.element,l=[],c=new Set,h=new Set,u=e.timelines.map(e=>{const u=e.element;c.add(u);const d=u.__ng_removed;if(d&&d.removedBeforeQueried)return new Y_(e.duration,e.delay);const f=u!==a,p=function(t){const e=[];return Uw(t,e),e}((n.get(u)||Ow).map(t=>t.getRealPlayer())).filter(t=>!!t.element&&t.element===u),g=r.get(u),m=s.get(u),v=tb(0,this._normalizer,0,e.keyframes,g,m),y=this._buildPlayer(e,v,p);if(e.subTimeline&&i&&h.add(u),f){const e=new Fw(t,o,u);e.setRealPlayer(y),l.push(e)}return y});l.forEach(t=>{rb(this.playersByQueriedElement,t.element,[]).push(t),t.onDone(()=>function(t,e,n){let i;if(t instanceof Map){if(i=t.get(e),i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&t.delete(e)}}else if(i=t[e],i){if(i.length){const t=i.indexOf(n);i.splice(t,1)}0==i.length&&delete t[e]}return i}(this.playersByQueriedElement,t.element,t))}),c.forEach(t=>zw(t,xb));const d=J_(u);return d.onDestroy(()=>{c.forEach(t=>Vw(t,xb)),Ib(a,e.toStyles)}),h.forEach(t=>{rb(i,t,[]).push(d)}),d}_buildPlayer(t,e,n){return e.length>0?this.driver.animate(t.element,e,t.duration,t.delay,t.easing,n):new Y_(t.duration,t.delay)}}class Fw{constructor(t,e,n){this.namespaceId=t,this.triggerName=e,this.element=n,this._player=new Y_,this._containsRealPlayer=!1,this._queuedCallbacks={},this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(t){this._containsRealPlayer||(this._player=t,Object.keys(this._queuedCallbacks).forEach(e=>{this._queuedCallbacks[e].forEach(n=>eb(t,e,void 0,n))}),this._queuedCallbacks={},this._containsRealPlayer=!0,this.overrideTotalTime(t.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(t){this.totalTime=t}syncPlayerEvents(t){const e=this._player;e.triggerCallback&&t.onStart(()=>e.triggerCallback("start")),t.onDone(()=>this.finish()),t.onDestroy(()=>this.destroy())}_queueEvent(t,e){rb(this._queuedCallbacks,t,[]).push(e)}onDone(t){this.queued&&this._queueEvent("done",t),this._player.onDone(t)}onStart(t){this.queued&&this._queueEvent("start",t),this._player.onStart(t)}onDestroy(t){this.queued&&this._queueEvent("destroy",t),this._player.onDestroy(t)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(t){this.queued||this._player.setPosition(t)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(t){const e=this._player;e.triggerCallback&&e.triggerCallback(t)}}function jw(t){return t&&1===t.nodeType}function Nw(t,e){const n=t.style.display;return t.style.display=null!=e?e:"none",n}function Bw(t,e,n,i,r){const s=[];n.forEach(t=>s.push(Nw(t)));const o=[];i.forEach((n,i)=>{const s={};n.forEach(t=>{const n=s[t]=e.computeStyle(i,t,r);n&&0!=n.length||(i.__ng_removed=Aw,o.push(i))}),t.set(i,s)});let a=0;return n.forEach(t=>Nw(t,s[a++])),o}function $w(t,e){const n=new Map;if(t.forEach(t=>n.set(t,[])),0==e.length)return n;const i=new Set(e),r=new Map;function s(t){if(!t)return 1;let e=r.get(t);if(e)return e;const o=t.parentNode;return e=n.has(o)?o:i.has(o)?1:s(o),r.set(t,e),e}return e.forEach(t=>{const e=s(t);1!==e&&n.get(e).push(t)}),n}function zw(t,e){if(t.classList)t.classList.add(e);else{let n=t.$$classes;n||(n=t.$$classes={}),n[e]=!0}}function Vw(t,e){if(t.classList)t.classList.remove(e);else{let n=t.$$classes;n&&delete n[e]}}function Gw(t,e,n){J_(n).onDone(()=>t.processLeaveNode(e))}function Uw(t,e){for(let n=0;n<t.length;n++){const i=t[n];i instanceof K_?Uw(i.players,e):e.push(i)}}function Hw(t,e,n){const i=n.get(t);if(!i)return!1;let r=e.get(t);return r?i.forEach(t=>r.add(t)):e.set(t,i),n.delete(t),!0}class Ww{constructor(t,e,n){this.bodyNode=t,this._driver=e,this._normalizer=n,this._triggerCache={},this.onRemovalComplete=(t,e)=>{},this._transitionEngine=new Lw(t,e,n),this._timelineEngine=new Sw(t,e,n),this._transitionEngine.onRemovalComplete=(t,e)=>this.onRemovalComplete(t,e)}registerTrigger(t,e,n,i,r){const s=t+"-"+i;let o=this._triggerCache[s];if(!o){const t=[],e=Zb(this._driver,r,t);if(t.length)throw new Error(`The animation trigger "${i}" has failed to build due to the following errors:\n - ${t.join("\n - ")}`);o=function(t,e,n){return new ww(t,e,n)}(i,e,this._normalizer),this._triggerCache[s]=o}this._transitionEngine.registerTrigger(e,i,o)}register(t,e){this._transitionEngine.register(t,e)}destroy(t,e){this._transitionEngine.destroy(t,e)}onInsert(t,e,n,i){this._transitionEngine.insertNode(t,e,n,i)}onRemove(t,e,n,i){this._transitionEngine.removeNode(t,e,i||!1,n)}disableAnimations(t,e){this._transitionEngine.markElementAsDisabled(t,e)}process(t,e,n,i){if("@"==n.charAt(0)){const[t,r]=sb(n);this._timelineEngine.command(t,e,r,i)}else this._transitionEngine.trigger(t,e,n,i)}listen(t,e,n,i,r){if("@"==n.charAt(0)){const[t,i]=sb(n);return this._timelineEngine.listen(t,e,i,r)}return this._transitionEngine.listen(t,e,n,i,r)}flush(t=-1){this._transitionEngine.flush(t)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}function Xw(t,e){let n=null,i=null;return Array.isArray(e)&&e.length?(n=Yw(e[0]),e.length>1&&(i=Yw(e[e.length-1]))):e&&(n=Yw(e)),n||i?new qw(t,n,i):null}let qw=(()=>{class t{constructor(e,n,i){this._element=e,this._startStyles=n,this._endStyles=i,this._state=0;let r=t.initialStylesByElement.get(e);r||t.initialStylesByElement.set(e,r={}),this._initialStyles=r}start(){this._state<1&&(this._startStyles&&Ib(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ib(this._element,this._initialStyles),this._endStyles&&(Ib(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(t.initialStylesByElement.delete(this._element),this._startStyles&&(Db(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Db(this._element,this._endStyles),this._endStyles=null),Ib(this._element,this._initialStyles),this._state=3)}}return t.initialStylesByElement=new WeakMap,t})();function Yw(t){let e=null;const n=Object.keys(t);for(let i=0;i<n.length;i++){const r=n[i];Kw(r)&&(e=e||{},e[r]=t[r])}return e}function Kw(t){return"display"===t||"position"===t}const Zw="animation",Qw="animationend";class Jw{constructor(t,e,n,i,r,s,o){this._element=t,this._name=e,this._duration=n,this._delay=i,this._easing=r,this._fillMode=s,this._onDoneFn=o,this._finished=!1,this._destroyed=!1,this._startTime=0,this._position=0,this._eventFn=t=>this._handleCallback(t)}apply(){!function(t,e){const n=sC(t,"").trim();n.length&&(function(t,e){let n=0;for(let i=0;i<t.length;i++)","===t.charAt(i)&&n++}(n),e=`${n}, ${e}`),rC(t,"",e)}(this._element,`${this._duration}ms ${this._easing} ${this._delay}ms 1 normal ${this._fillMode} ${this._name}`),iC(this._element,this._eventFn,!1),this._startTime=Date.now()}pause(){tC(this._element,this._name,"paused")}resume(){tC(this._element,this._name,"running")}setPosition(t){const e=eC(this._element,this._name);this._position=t*this._duration,rC(this._element,"Delay",`-${this._position}ms`,e)}getPosition(){return this._position}_handleCallback(t){const e=t._ngTestManualTimestamp||Date.now(),n=1e3*parseFloat(t.elapsedTime.toFixed(3));t.animationName==this._name&&Math.max(e-this._startTime,0)>=this._delay&&n>=this._duration&&this.finish()}finish(){this._finished||(this._finished=!0,this._onDoneFn(),iC(this._element,this._eventFn,!0))}destroy(){this._destroyed||(this._destroyed=!0,this.finish(),function(t,e){const n=sC(t,"").split(","),i=nC(n,e);i>=0&&(n.splice(i,1),rC(t,"",n.join(",")))}(this._element,this._name))}}function tC(t,e,n){rC(t,"PlayState",n,eC(t,e))}function eC(t,e){const n=sC(t,"");return n.indexOf(",")>0?nC(n.split(","),e):nC([n],e)}function nC(t,e){for(let n=0;n<t.length;n++)if(t[n].indexOf(e)>=0)return n;return-1}function iC(t,e,n){n?t.removeEventListener(Qw,e):t.addEventListener(Qw,e)}function rC(t,e,n,i){const r=Zw+e;if(null!=i){const e=t.style[r];if(e.length){const t=e.split(",");t[i]=n,n=t.join(",")}}t.style[r]=n}function sC(t,e){return t.style[Zw+e]||""}class oC{constructor(t,e,n,i,r,s,o,a){this.element=t,this.keyframes=e,this.animationName=n,this._duration=i,this._delay=r,this._finalStyles=o,this._specialStyles=a,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this.currentSnapshot={},this._state=0,this.easing=s||"linear",this.totalTime=i+r,this._buildStyler()}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}destroy(){this.init(),this._state>=4||(this._state=4,this._styler.destroy(),this._flushStartFns(),this._flushDoneFns(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}_flushDoneFns(){this._onDoneFns.forEach(t=>t()),this._onDoneFns=[]}_flushStartFns(){this._onStartFns.forEach(t=>t()),this._onStartFns=[]}finish(){this.init(),this._state>=3||(this._state=3,this._styler.finish(),this._flushStartFns(),this._specialStyles&&this._specialStyles.finish(),this._flushDoneFns())}setPosition(t){this._styler.setPosition(t)}getPosition(){return this._styler.getPosition()}hasStarted(){return this._state>=2}init(){this._state>=1||(this._state=1,this._styler.apply(),this._delay&&this._styler.pause())}play(){this.init(),this.hasStarted()||(this._flushStartFns(),this._state=2,this._specialStyles&&this._specialStyles.start()),this._styler.resume()}pause(){this.init(),this._styler.pause()}restart(){this.reset(),this.play()}reset(){this._state=0,this._styler.destroy(),this._buildStyler(),this._styler.apply()}_buildStyler(){this._styler=new Jw(this.element,this.animationName,this._duration,this._delay,this.easing,"forwards",()=>this.finish())}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}beforeDestroy(){this.init();const t={};if(this.hasStarted()){const e=this._state>=3;Object.keys(this._finalStyles).forEach(n=>{"offset"!=n&&(t[n]=e?this._finalStyles[n]:Ub(this.element,n))})}this.currentSnapshot=t}}class aC extends Y_{constructor(t,e){super(),this.element=t,this._startingStyles={},this.__initialized=!1,this._styles=mb(e)}init(){!this.__initialized&&this._startingStyles&&(this.__initialized=!0,Object.keys(this._styles).forEach(t=>{this._startingStyles[t]=this.element.style[t]}),super.init())}play(){this._startingStyles&&(this.init(),Object.keys(this._styles).forEach(t=>this.element.style.setProperty(t,this._styles[t])),super.play())}destroy(){this._startingStyles&&(Object.keys(this._startingStyles).forEach(t=>{const e=this._startingStyles[t];e?this.element.style.setProperty(t,e):this.element.style.removeProperty(t)}),this._startingStyles=null,super.destroy())}}class lC{constructor(){this._count=0}validateStyleProperty(t){return db(t)}matchesElement(t,e){return fb(t,e)}containsElement(t,e){return pb(t,e)}query(t,e,n){return gb(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}buildKeyframeElement(t,e,n){n=n.map(t=>mb(t));let i=`@keyframes ${e} {\n`,r="";n.forEach(t=>{r=" ";const e=parseFloat(t.offset);i+=`${r}${100*e}% {\n`,r+=" ",Object.keys(t).forEach(e=>{const n=t[e];switch(e){case"offset":return;case"easing":return void(n&&(i+=`${r}animation-timing-function: ${n};\n`));default:return void(i+=`${r}${e}: ${n};\n`)}}),i+=`${r}}\n`}),i+="}\n";const s=document.createElement("style");return s.textContent=i,s}animate(t,e,n,i,r,s=[],o){const a=s.filter(t=>t instanceof oC),l={};zb(n,i)&&a.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const c=function(t){let e={};return t&&(Array.isArray(t)?t:[t]).forEach(t=>{Object.keys(t).forEach(n=>{"offset"!=n&&"easing"!=n&&(e[n]=t[n])})}),e}(e=Vb(t,e,l));if(0==n)return new aC(t,c);const h="gen_css_kf_"+this._count++,u=this.buildKeyframeElement(t,h,e);(function(t){var e;const n=null===(e=t.getRootNode)||void 0===e?void 0:e.call(t);return"undefined"!=typeof ShadowRoot&&n instanceof ShadowRoot?n:document.head})(t).appendChild(u);const d=Xw(t,e),f=new oC(t,e,h,n,i,r,c,d);return f.onDestroy(()=>{var t;(t=u).parentNode.removeChild(t)}),f}}class cC{constructor(t,e,n,i){this.element=t,this.keyframes=e,this.options=n,this._specialStyles=i,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this.time=0,this.parentPlayer=null,this.currentSnapshot={},this._duration=n.duration,this._delay=n.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(t=>t()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const t=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,t,this.options),this._finalKeyframe=t.length?t[t.length-1]:{},this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_triggerWebAnimation(t,e,n){return t.animate(e,n)}onStart(t){this._onStartFns.push(t)}onDone(t){this._onDoneFns.push(t)}onDestroy(t){this._onDestroyFns.push(t)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(t=>t()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(t=>t()),this._onDestroyFns=[])}setPosition(t){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=t*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const t={};this.hasStarted()&&Object.keys(this._finalKeyframe).forEach(e=>{"offset"!=e&&(t[e]=this._finished?this._finalKeyframe[e]:Ub(this.element,e))}),this.currentSnapshot=t}triggerCallback(t){const e="start"==t?this._onStartFns:this._onDoneFns;e.forEach(t=>t()),e.length=0}}class hC{constructor(){this._isNativeImpl=/\{\s*\[native\s+code\]\s*\}/.test(uC().toString()),this._cssKeyframesDriver=new lC}validateStyleProperty(t){return db(t)}matchesElement(t,e){return fb(t,e)}containsElement(t,e){return pb(t,e)}query(t,e,n){return gb(t,e,n)}computeStyle(t,e,n){return window.getComputedStyle(t)[e]}overrideWebAnimationsSupport(t){this._isNativeImpl=t}animate(t,e,n,i,r,s=[],o){if(!o&&!this._isNativeImpl)return this._cssKeyframesDriver.animate(t,e,n,i,r,s);const a={duration:n,delay:i,fill:0==i?"both":"forwards"};r&&(a.easing=r);const l={},c=s.filter(t=>t instanceof cC);zb(n,i)&&c.forEach(t=>{let e=t.currentSnapshot;Object.keys(e).forEach(t=>l[t]=e[t])});const h=Xw(t,e=Vb(t,e=e.map(t=>Pb(t,!1)),l));return new cC(t,e,a,h)}}function uC(){return Z_()&&Element.prototype.animate||{}}let dC=(()=>{class t extends $_{constructor(t,e){super(),this._nextAnimationId=0,this._renderer=t.createRenderer(e.body,{id:"0",encapsulation:Tt.None,styles:[],data:{animation:[]}})}build(t){const e=this._nextAnimationId.toString();this._nextAnimationId++;const n=Array.isArray(t)?U_(t):t;return gC(this._renderer,null,e,"register",[n]),new fC(e,this._renderer)}}return t.\u0275fac=function(e){return new(e||t)(hi(aa),hi(Sc))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class fC extends class{}{constructor(t,e){super(),this._id=t,this._renderer=e}create(t,e){return new pC(this._id,t,e||{},this._renderer)}}class pC{constructor(t,e,n,i){this.id=t,this.element=e,this._renderer=i,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",n)}_listen(t,e){return this._renderer.listen(this.element,`@@${this.id}:${t}`,e)}_command(t,...e){return gC(this._renderer,this.element,this.id,t,e)}onDone(t){this._listen("done",t)}onStart(t){this._listen("start",t)}onDestroy(t){this._listen("destroy",t)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(t){this._command("setPosition",t)}getPosition(){var t,e;return null!==(e=null===(t=this._renderer.engine.players[+this.id])||void 0===t?void 0:t.getPosition())&&void 0!==e?e:0}}function gC(t,e,n,i,r){return t.setProperty(e,`@@${n}:${i}`,r)}const mC="@",vC="@.disabled";let yC=(()=>{class t{constructor(t,e,n){this.delegate=t,this.engine=e,this._zone=n,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),e.onRemovalComplete=(t,e)=>{e&&e.parentNode(t)&&e.removeChild(t.parentNode,t)}}createRenderer(t,e){const n=this.delegate.createRenderer(t,e);if(!(t&&e&&e.data&&e.data.animation)){let t=this._rendererCache.get(n);return t||(t=new _C("",n,this.engine),this._rendererCache.set(n,t)),t}const i=e.id,r=e.id+"-"+this._currentId;this._currentId++,this.engine.register(r,t);const s=e=>{Array.isArray(e)?e.forEach(s):this.engine.registerTrigger(i,r,t,e.name,e)};return e.data.animation.forEach(s),new bC(this,r,n,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(t,e,n){t>=0&&t<this._microtaskId?this._zone.run(()=>e(n)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(t=>{const[e,n]=t;e(n)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([e,n]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return t.\u0275fac=function(e){return new(e||t)(hi(aa),hi(Ww),hi(Hl))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();class _C{constructor(t,e,n){this.namespaceId=t,this.delegate=e,this.engine=n,this.destroyNode=this.delegate.destroyNode?t=>e.destroyNode(t):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}appendChild(t,e){this.delegate.appendChild(t,e),this.engine.onInsert(this.namespaceId,e,t,!1)}insertBefore(t,e,n,i=!0){this.delegate.insertBefore(t,e,n),this.engine.onInsert(this.namespaceId,e,t,i)}removeChild(t,e,n){this.engine.onRemove(this.namespaceId,e,this.delegate,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,i){this.delegate.setAttribute(t,e,n,i)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,i){this.delegate.setStyle(t,e,n,i)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){e.charAt(0)==mC&&e==vC?this.disableAnimations(t,!!n):this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.delegate.listen(t,e,n)}disableAnimations(t,e){this.engine.disableAnimations(t,e)}}class bC extends _C{constructor(t,e,n,i){super(e,n,i),this.factory=t,this.namespaceId=e}setProperty(t,e,n){e.charAt(0)==mC?"."==e.charAt(1)&&e==vC?this.disableAnimations(t,n=void 0===n||!!n):this.engine.process(this.namespaceId,t,e.substr(1),n):this.delegate.setProperty(t,e,n)}listen(t,e,n){if(e.charAt(0)==mC){const i=function(t){switch(t){case"body":return document.body;case"document":return document;case"window":return window;default:return t}}(t);let r=e.substr(1),s="";return r.charAt(0)!=mC&&([r,s]=function(t){const e=t.indexOf(".");return[t.substring(0,e),t.substr(e+1)]}(r)),this.engine.listen(this.namespaceId,i,r,s,t=>{this.factory.scheduleListenerCallback(t._data||-1,n,t)})}return this.delegate.listen(t,e,n)}}let wC=(()=>{class t extends Ww{constructor(t,e,n){super(t.body,e,n)}ngOnDestroy(){this.flush()}}return t.\u0275fac=function(e){return new(e||t)(hi(Sc),hi(yb),hi(pw))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t})();const CC=new Wn("AnimationModuleType"),xC=[{provide:$_,useClass:dC},{provide:pw,useFactory:function(){return new gw}},{provide:Ww,useClass:wC},{provide:aa,useFactory:function(t,e,n){return new yC(t,e,n)},deps:[xh,Ww,Hl]}],SC=[{provide:yb,useFactory:function(){return"function"==typeof uC()?new hC:new lC}},{provide:CC,useValue:"BrowserAnimations"},...xC],kC=[{provide:yb,useClass:vb},{provide:CC,useValue:"NoopAnimations"},...xC];let TC=(()=>{class t{static withConfig(e){return{ngModule:t,providers:e.disableAnimations?kC:SC}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:SC,imports:[Lh]}),t})();const EC=new ua("12.1.4"),OC=new Wn("mat-sanity-checks",{providedIn:"root",factory:function(){return!0}});let PC,AC=(()=>{class t{constructor(t,e,n){this._hasDoneGlobalChecks=!1,this._document=n,t._applyBodyHighContrastModeCssClasses(),this._sanityChecks=e,this._hasDoneGlobalChecks||(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._checkCdkVersionMatch(),this._hasDoneGlobalChecks=!0)}_getWindow(){const t=this._document.defaultView||window;return"object"==typeof t&&t?t:null}_checksAreEnabled(){return sc()&&!this._isTestEnv()}_isTestEnv(){const t=this._getWindow();return t&&(t.__karma__||t.jasmine)}_checkDoctypeIsDefined(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.doctype)&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")}_checkThemeIsPresent(){if(!this._checksAreEnabled()||!1===this._sanityChecks||!this._sanityChecks.theme||!this._document.body||"function"!=typeof getComputedStyle)return;const t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);const e=getComputedStyle(t);e&&"none"!==e.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}_checkCdkVersionMatch(){this._checksAreEnabled()&&(!0===this._sanityChecks||this._sanityChecks.version)&&EC.full!==B_.full&&console.warn("The Angular Material version ("+EC.full+") does not match the Angular CDK version ("+B_.full+").\nPlease ensure the versions of these two packages exactly match.")}}return t.\u0275fac=function(e){return new(e||t)(hi(L_),hi(OC,8),hi(Sc))},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[N_],N_]}),t})();function MC(t){return class extends t{constructor(...t){super(...t),this._disabled=!1}get disabled(){return this._disabled}set disabled(t){this._disabled=qy(t)}}}function IC(t,e){return class extends t{constructor(...t){super(...t),this.defaultColor=e,this.color=e}get color(){return this._color}set color(t){const e=t||this.defaultColor;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove(`mat-${this._color}`),e&&this._elementRef.nativeElement.classList.add(`mat-${e}`),this._color=e)}}}function DC(t){return class extends t{constructor(...t){super(...t),this._disableRipple=!1}get disableRipple(){return this._disableRipple}set disableRipple(t){this._disableRipple=qy(t)}}}function RC(t,e=0){return class extends t{constructor(...t){super(...t),this._tabIndex=e,this.defaultTabIndex=e}get tabIndex(){return this.disabled?-1:this._tabIndex}set tabIndex(t){this._tabIndex=null!=t?Yy(t):this.defaultTabIndex}}}function LC(t){return class extends t{constructor(...t){super(...t),this.stateChanges=new x,this.errorState=!1}updateErrorState(){const t=this.errorState,e=(this.errorStateMatcher||this._defaultErrorStateMatcher).isErrorState(this.ngControl?this.ngControl.control:null,this._parentFormGroup||this._parentForm);e!==t&&(this.errorState=e,this.stateChanges.next())}}}try{PC="undefined"!=typeof Intl}catch(SO){PC=!1}let FC=(()=>{class t{isErrorState(t,e){return!!(t&&t.invalid&&(t.touched||e&&e.submitted))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({factory:function(){return new t},token:t,providedIn:"root"}),t})();class jC{constructor(t,e,n){this._renderer=t,this.element=e,this.config=n,this.state=3}fadeOut(){this._renderer.fadeOutRipple(this)}}const NC={enterDuration:225,exitDuration:150},BC=o_({passive:!0}),$C=["mousedown","touchstart"],zC=["mouseup","mouseleave","touchend","touchcancel"];class VC{constructor(t,e,n,i){this._target=t,this._ngZone=e,this._isPointerDown=!1,this._activeRipples=new Set,this._pointerUpEventsRegistered=!1,i.isBrowser&&(this._containerElement=Ky(n))}fadeInRipple(t,e,n={}){const i=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),r=Object.assign(Object.assign({},NC),n.animation);n.centered&&(t=i.left+i.width/2,e=i.top+i.height/2);const s=n.radius||function(t,e,n){const i=Math.max(Math.abs(t-n.left),Math.abs(t-n.right)),r=Math.max(Math.abs(e-n.top),Math.abs(e-n.bottom));return Math.sqrt(i*i+r*r)}(t,e,i),o=t-i.left,a=e-i.top,l=r.enterDuration,c=document.createElement("div");c.classList.add("mat-ripple-element"),c.style.left=o-s+"px",c.style.top=a-s+"px",c.style.height=2*s+"px",c.style.width=2*s+"px",null!=n.color&&(c.style.backgroundColor=n.color),c.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(c),window.getComputedStyle(c).getPropertyValue("opacity"),c.style.transform="scale(1)";const h=new jC(this,c,n);return h.state=0,this._activeRipples.add(h),n.persistent||(this._mostRecentTransientRipple=h),this._runTimeoutOutsideZone(()=>{const t=h===this._mostRecentTransientRipple;h.state=1,n.persistent||t&&this._isPointerDown||h.fadeOut()},l),h}fadeOutRipple(t){const e=this._activeRipples.delete(t);if(t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),this._activeRipples.size||(this._containerRect=null),!e)return;const n=t.element,i=Object.assign(Object.assign({},NC),t.config.animation);n.style.transitionDuration=`${i.exitDuration}ms`,n.style.opacity="0",t.state=2,this._runTimeoutOutsideZone(()=>{t.state=3,n.parentNode.removeChild(n)},i.exitDuration)}fadeOutAll(){this._activeRipples.forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._activeRipples.forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){const e=Ky(t);e&&e!==this._triggerElement&&(this._removeTriggerEvents(),this._triggerElement=e,this._registerEvents($C))}handleEvent(t){"mousedown"===t.type?this._onMousedown(t):"touchstart"===t.type?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._registerEvents(zC),this._pointerUpEventsRegistered=!0)}_onMousedown(t){const e=x_(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+800;this._target.rippleDisabled||e||n||(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!S_(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;const e=t.changedTouches;for(let t=0;t<e.length;t++)this.fadeInRipple(e[t].clientX,e[t].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._activeRipples.forEach(t=>{!t.config.persistent&&(1===t.state||t.config.terminateOnPointerUp&&0===t.state)&&t.fadeOut()}))}_runTimeoutOutsideZone(t,e=0){this._ngZone.runOutsideAngular(()=>setTimeout(t,e))}_registerEvents(t){this._ngZone.runOutsideAngular(()=>{t.forEach(t=>{this._triggerElement.addEventListener(t,this,BC)})})}_removeTriggerEvents(){this._triggerElement&&($C.forEach(t=>{this._triggerElement.removeEventListener(t,this,BC)}),this._pointerUpEventsRegistered&&zC.forEach(t=>{this._triggerElement.removeEventListener(t,this,BC)}))}}const GC=new Wn("mat-ripple-global-options");let UC=(()=>{class t{constructor(t,e,n,i,r){this._elementRef=t,this._animationMode=r,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=i||{},this._rippleRenderer=new VC(this,e,t,n)}get disabled(){return this._disabled}set disabled(t){t&&this.fadeOutAllNonPersistent(),this._disabled=t,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(t){this._trigger=t,this._setupTriggerEventsIfEnabled()}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:Object.assign(Object.assign(Object.assign({},this._globalOptions.animation),"NoopAnimations"===this._animationMode?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(t,e=0,n){return"number"==typeof t?this._rippleRenderer.fadeInRipple(t,e,Object.assign(Object.assign({},this.rippleConfig),n)):this._rippleRenderer.fadeInRipple(0,0,Object.assign(Object.assign({},this.rippleConfig),t))}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(Hl),Hs(Qy),Hs(GC,8),Hs(CC,8))},t.\u0275dir=qt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(t,e){2&t&&wo("mat-ripple-unbounded",e.unbounded)},inputs:{radius:["matRippleRadius","radius"],disabled:["matRippleDisabled","disabled"],trigger:["matRippleTrigger","trigger"],color:["matRippleColor","color"],unbounded:["matRippleUnbounded","unbounded"],centered:["matRippleCentered","centered"],animation:["matRippleAnimation","animation"]},exportAs:["matRipple"]}),t})(),HC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[AC,Jy],AC]}),t})();const WC=["mat-button",""],XC=["*"],qC=["mat-button","mat-flat-button","mat-icon-button","mat-raised-button","mat-stroked-button","mat-mini-fab","mat-fab"],YC=IC(MC(DC(class{constructor(t){this._elementRef=t}})));let KC=(()=>{class t extends YC{constructor(t,e,n){super(t),this._focusMonitor=e,this._animationMode=n,this.isRoundButton=this._hasHostAttributes("mat-fab","mat-mini-fab"),this.isIconButton=this._hasHostAttributes("mat-icon-button");for(const i of qC)this._hasHostAttributes(i)&&this._getHostElement().classList.add(i);t.nativeElement.classList.add("mat-button-base"),this.isRoundButton&&(this.color="accent")}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}focus(t,e){t?this._focusMonitor.focusVia(this._getHostElement(),t,e):this._getHostElement().focus(e)}_getHostElement(){return this._elementRef.nativeElement}_isRippleDisabled(){return this.disableRipple||this.disabled}_hasHostAttributes(...t){return t.some(t=>this._getHostElement().hasAttribute(t))}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(M_),Hs(CC,8))},t.\u0275cmp=Vt({type:t,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-icon-button",""],["button","mat-fab",""],["button","mat-mini-fab",""],["button","mat-stroked-button",""],["button","mat-flat-button",""]],viewQuery:function(t,e){if(1&t&&yl(UC,5),2&t){let t;vl(t=bl())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-focus-indicator"],hostVars:5,hostBindings:function(t,e){2&t&&(zs("disabled",e.disabled||null),wo("_mat-animation-noopable","NoopAnimations"===e._animationMode)("mat-button-disabled",e.disabled))},inputs:{disabled:"disabled",disableRipple:"disableRipple",color:"color"},exportAs:["matButton"],features:[Ms],attrs:WC,ngContentSelectors:XC,decls:4,vars:5,consts:[[1,"mat-button-wrapper"],["matRipple","",1,"mat-button-ripple",3,"matRippleDisabled","matRippleCentered","matRippleTrigger"],[1,"mat-button-focus-overlay"]],template:function(t,e){1&t&&(co(),qs(0,"span",0),ho(1),Ys(),Ks(2,"span",1),Ks(3,"span",2)),2&t&&(yr(2),wo("mat-button-ripple-round",e.isRoundButton||e.isIconButton),Ws("matRippleDisabled",e._isRippleDisabled())("matRippleCentered",e.isIconButton)("matRippleTrigger",e._getHostElement()))},directives:[UC],styles:[".mat-button .mat-button-focus-overlay,.mat-icon-button .mat-button-focus-overlay{opacity:0}.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:.04}@media(hover: none){.mat-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay,.mat-stroked-button:hover:not(.mat-button-disabled) .mat-button-focus-overlay{opacity:0}}.mat-button,.mat-icon-button,.mat-stroked-button,.mat-flat-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-button.mat-button-disabled,.mat-icon-button.mat-button-disabled,.mat-stroked-button.mat-button-disabled,.mat-flat-button.mat-button-disabled{cursor:default}.mat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-button.cdk-program-focused .mat-button-focus-overlay,.mat-icon-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-icon-button.cdk-program-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-stroked-button.cdk-program-focused .mat-button-focus-overlay,.mat-flat-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-flat-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-button::-moz-focus-inner,.mat-icon-button::-moz-focus-inner,.mat-stroked-button::-moz-focus-inner,.mat-flat-button::-moz-focus-inner{border:0}.mat-raised-button{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-raised-button::-moz-focus-inner{border:0}.mat-raised-button.mat-button-disabled{cursor:default}.mat-raised-button.cdk-keyboard-focused .mat-button-focus-overlay,.mat-raised-button.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-raised-button::-moz-focus-inner{border:0}._mat-animation-noopable.mat-raised-button{transition:none;animation:none}.mat-stroked-button{border:1px solid currentColor;padding:0 15px;line-height:34px}.mat-stroked-button .mat-button-ripple.mat-ripple,.mat-stroked-button .mat-button-focus-overlay{top:-1px;left:-1px;right:-1px;bottom:-1px}.mat-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:56px;height:56px;padding:0;flex-shrink:0}.mat-fab::-moz-focus-inner{border:0}.mat-fab.mat-button-disabled{cursor:default}.mat-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-fab{transition:none;animation:none}.mat-fab .mat-button-wrapper{padding:16px 0;display:inline-block;line-height:24px}.mat-mini-fab{box-sizing:border-box;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:transparent;display:inline-block;white-space:nowrap;text-decoration:none;vertical-align:baseline;text-align:center;margin:0;min-width:64px;line-height:36px;padding:0 16px;border-radius:4px;overflow:visible;transform:translate3d(0, 0, 0);transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);min-width:0;border-radius:50%;width:40px;height:40px;padding:0;flex-shrink:0}.mat-mini-fab::-moz-focus-inner{border:0}.mat-mini-fab.mat-button-disabled{cursor:default}.mat-mini-fab.cdk-keyboard-focused .mat-button-focus-overlay,.mat-mini-fab.cdk-program-focused .mat-button-focus-overlay{opacity:.12}.mat-mini-fab::-moz-focus-inner{border:0}._mat-animation-noopable.mat-mini-fab{transition:none;animation:none}.mat-mini-fab .mat-button-wrapper{padding:8px 0;display:inline-block;line-height:24px}.mat-icon-button{padding:0;min-width:0;width:40px;height:40px;flex-shrink:0;line-height:40px;border-radius:50%}.mat-icon-button i,.mat-icon-button .mat-icon{line-height:24px}.mat-button-ripple.mat-ripple,.mat-button-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-button-ripple.mat-ripple:not(:empty){transform:translateZ(0)}.mat-button-focus-overlay{opacity:0;transition:opacity 200ms cubic-bezier(0.35, 0, 0.25, 1),background-color 200ms cubic-bezier(0.35, 0, 0.25, 1)}._mat-animation-noopable .mat-button-focus-overlay{transition:none}.mat-button-ripple-round{border-radius:50%;z-index:1}.mat-button .mat-button-wrapper>*,.mat-flat-button .mat-button-wrapper>*,.mat-stroked-button .mat-button-wrapper>*,.mat-raised-button .mat-button-wrapper>*,.mat-icon-button .mat-button-wrapper>*,.mat-fab .mat-button-wrapper>*,.mat-mini-fab .mat-button-wrapper>*{vertical-align:middle}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button{display:inline-flex;justify-content:center;align-items:center;font-size:inherit;width:2.5em;height:2.5em}.cdk-high-contrast-active .mat-button,.cdk-high-contrast-active .mat-flat-button,.cdk-high-contrast-active .mat-raised-button,.cdk-high-contrast-active .mat-icon-button,.cdk-high-contrast-active .mat-fab,.cdk-high-contrast-active .mat-mini-fab{outline:solid 1px}.cdk-high-contrast-active .mat-button-base.cdk-keyboard-focused,.cdk-high-contrast-active .mat-button-base.cdk-program-focused{outline:solid 3px}\n"],encapsulation:2,changeDetection:0}),t})(),ZC=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[HC,AC],AC]}),t})();function QC(t,e){if(1&t){const t=Js();qs(0,"ion-card",8),qs(1,"button",9),no("click",function(){const e=Ae(t).$implicit;return ao(2).motifSelect(e)}),Ks(2,"img",10),qs(3,"ion-card-header"),qs(4,"ion-card-title",11),Io(5),Ys(),Ys(),Ys(),Ys()}if(2&t){const t=e.$implicit,n=ao(2);yr(1),function(t,e,n,i){const r=Pe(),s=Be(2);r.firstUpdatePass&&ko(r,null,s,i);const o=Oe();if(n!==vr&&$s(o,s,n)){const a=r.data[Je()];if(Mo(a,i)&&!So(r,s)){let t=a.classesWithoutHost;null!==t&&(n=nt(t,n||"")),Xs(r,a,o,n,i)}else!function(t,e,n,i,r,s,o,a){r===vr&&(r=Dt);let l=0,c=0,h=0<r.length?r[0]:null,u=0<s.length?s[0]:null;for(;null!==h||null!==u;){const o=l<r.length?r[l+1]:void 0,d=c<s.length?s[c+1]:void 0;let f,p=null;h===u?(l+=2,c+=2,o!==d&&(p=u,f=d)):null===u||null!==h&&h<u?(l+=2,p=h):(c+=2,p=u,f=d),null!==p&&Oo(t,e,n,i,p,f,!0,a),h=l<r.length?r[l]:null,u=c<s.length?s[c]:null}}(r,a,o,o[11],o[s+1],o[s+1]=function(t,e,n){if(null==n||""===n)return Dt;const i=[],r=yi(n);if(Array.isArray(r))for(let s=0;s<r.length;s++)t(i,r[s],!0);else if("object"==typeof r)for(const s in r)r.hasOwnProperty(s)&&t(i,s,r[s]);else"string"==typeof r&&e(i,r);return i}(t,e,n),0,s)}}(ti,Co,n.selectedState(t.motifID),!0),yr(1),uo("src",t.motifLink,Ci),yr(3),Do(t.motifName)}}function JC(t,e){if(1&t&&(qs(0,"div",6),Gs(1,QC,6,4,"ion-card",7),Ys()),2&t){const t=ao();yr(1),Ws("ngForOf",t.motifs.motifDetails)}}let tx=(()=>{class t{constructor(t,e,n){this.popoverController=t,this.motifService=e,this.patternService=n,this.selectedMotifs={motifDetails:[]}}ngOnInit(){this.getMotifs(),console.log(this.patternService.currentCollection)}getMotifs(){this.motifService.getAllMotifs().subscribe(t=>{console.log(t),this.motifs=t})}closePopover(){this.popoverController.dismiss()}motifSelect(t){console.log("adding motif demo");for(let e=0;e<this.selectedMotifs.motifDetails.length;e++)if(this.selectedMotifs.motifDetails[e].motifID==t.motifID)return void this.selectedMotifs.motifDetails.splice(Number(e),1);this.selectedMotifs.motifDetails.push(t)}selectedState(t){if(null!=this.selectedMotifs.motifDetails&&this.selectedMotifs.motifDetails.length>0)for(let e=0;e<this.selectedMotifs.motifDetails.length;e++)if(t==this.selectedMotifs.motifDetails[e].motifID)return"buttonSelected";return"buttonUnselected"}addMotifsToCollection(){if(null==this.patternService.currentCollection.childMotifs||0==this.patternService.currentCollection.childMotifs.length)this.patternService.currentCollection.childMotifs=[],this.patternService.currentCollection.childMotifs.push(...this.selectedMotifs.motifDetails),console.log(this.patternService.currentCollection);else for(let t=0;t<this.selectedMotifs.motifDetails.length;t++){let e=!1;for(let n=0;n<this.patternService.currentCollection.childMotifs.length;n++)if(this.selectedMotifs.motifDetails[t].motifID==this.patternService.currentCollection.childMotifs[n].motifID){e=!0;break}0==e&&this.patternService.currentCollection.childMotifs.push(this.selectedMotifs.motifDetails[t])}console.log(this.patternService.currentCollection),this.patternService.updateCurrentCollection(),this.motifService.getMotifs(this.patternService.currentCollection.childMotifs).then(),this.closePopover()}}return t.\u0275fac=function(e){return new(e||t)(Hs(Iv),Hs(zy),Hs(Vy))},t.\u0275cmp=Vt({type:t,selectors:[["app-motif-catalogue"]],decls:11,vars:1,consts:[["id","menu"],[2,"text-align","center","padding-top","10px"],[1,"collections-menu"],["style","overflow: hidden; text-align: center;",4,"ngIf"],[2,"text-align","center"],["color","medium",3,"click"],[2,"overflow","hidden","text-align","center"],["text-wrap","","style","margin: 20px",4,"ngFor","ngForOf"],["text-wrap","",2,"margin","20px"],["mat-raised-button","",1,"buttonUnselected",3,"click"],[1,"image",3,"src"],[2,"color","black"]],template:function(t,e){1&t&&(Ks(0,"br"),qs(1,"div",0),qs(2,"h1",1),Io(3,"Motif Catalogue"),Ys(),qs(4,"div",2),Gs(5,JC,2,1,"div",3),Ys(),qs(6,"div",4),qs(7,"ion-button",5),no("click",function(){return e.addMotifsToCollection()}),Io(8,"Append Motifs"),Ys(),qs(9,"ion-button",5),no("click",function(){return e.closePopover()}),Io(10," Cancel "),Ys(),Ys(),Ys()),2&t&&(yr(5),Ws("ngIf",e.motifs))},directives:[Yc,Rm,Xc,Lm,KC,jm,Nm],styles:["[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#000;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:grey;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#000}ion-card[_ngcontent-%COMP%]{display:inline-block;flex-direction:column;width:20%!important;height:5cm;margin:5mm!important}ion-card-title[_ngcontent-%COMP%]{margin:0;display:block;overflow:hidden;flex:1;font-size:inherit;text-overflow:ellipsis;white-space:nowrap}.image[_ngcontent-%COMP%]{display:block;margin-left:auto;margin-right:auto;height:4cm;padding:10px;align-self:center}.buttonUnselected[_ngcontent-%COMP%]{border:10px #fff!important}.buttonSelected[_ngcontent-%COMP%], .buttonUnselected[_ngcontent-%COMP%]{height:100%;overflow:hidden;width:100%}.buttonSelected[_ngcontent-%COMP%]{border:10px solid grey!important;padding:10px}#menu[_ngcontent-%COMP%]{width:80%;margin:auto;background-color:#fff;padding:5%;overflow:hidden}"]}),t})(),ex=(()=>{class t{constructor(t){this.popoverController=t}ngOnInit(){}saveNewPattern(t){console.log(t),this.popoverController.dismiss(t).then()}closePopup(){this.popoverController.dismiss().then()}}return t.\u0275fac=function(e){return new(e||t)(Hs(Iv))},t.\u0275cmp=Vt({type:t,selectors:[["app-new-pattern"]],decls:13,vars:0,consts:[[2,"text-align","center","margin","auto"],["type","text",1,"inputField",2,"background-color","darkgrey","color","black","padding","10px","width","50%","margin","auto"],["patternName",""],["color","medium",2,"width","100%",3,"click"]],template:function(t,e){if(1&t){const t=Js();qs(0,"ion-grid"),qs(1,"ion-row"),Ks(2,"br"),qs(3,"h1",0),Io(4,"New Pattern Name:"),Ys(),Ys(),qs(5,"ion-row"),Ks(6,"ion-input",1,2),Ys(),qs(8,"ion-item"),qs(9,"ion-button",3),no("click",function(){Ae(t);const n=Us(7);return e.saveNewPattern(n.value)}),Io(10,"Save"),Ys(),qs(11,"ion-button",3),no("click",function(){return e.closePopup()}),Io(12,"Cancel"),Ys(),Ys(),Ys()}},directives:[Vm,Km,Um,wm,Hm,Rm],styles:["ion-grid[_ngcontent-%COMP%]{padding:5%}ion-grid[_ngcontent-%COMP%], ion-row[_ngcontent-%COMP%]{margin:auto;width:100%}ion-row[_ngcontent-%COMP%]{text-align:center}ion-input[_ngcontent-%COMP%]{font-size:x-large}ion-item[_ngcontent-%COMP%]{padding:0;width:40%;margin:auto}"]}),t})();class nx{constructor(t){this._state=[];for(let e=0;e<t.length;e++)this._state[e]=t[e]}getSavedState(){return this._state}}class ix{constructor(){this._state=[]}setState(t){for(let e=0;e<t.length;e++)this._state[e]=t[e]}saveStateToMemento(){return new nx(this._state)}restoreStateFromMemento(t){let e=t.getSavedState();for(let n=0;n<e.length;n++)this._state[n]=e[n];return this._state}}class rx{constructor(){this._stateArr=[]}addMemento(t){this._stateArr.unshift(t),this._stateArr.length>20&&this._stateArr.pop(),console.log(this._stateArr)}notEmpty(){return 0!=this._stateArr.length}emptyStates(){this._stateArr=[]}getMemento(){return 0!=this._stateArr.length?this._stateArr.shift():void 0}}let sx=(()=>{class t{constructor(t){this.popoverController=t}ngOnInit(){}goTo3DView(){this.popoverController.dismiss()}closePopover(){this.popoverController.dismiss()}copyToClipboard(){let t=document.getElementById("myInput");t.select(),t.setSelectionRange(0,99999),navigator.clipboard.writeText(t.value),alert("Copied the text: "+t.value)}}return t.\u0275fac=function(e){return new(e||t)(Hs(Iv))},t.\u0275cmp=Vt({type:t,selectors:[["app-three-d-link"]],decls:14,vars:1,consts:[["id","menu"],[2,"text-align","center"],["type","text","id","myInput","disabled","",3,"value"],["color","medium",3,"click"]],template:function(t,e){1&t&&(Ks(0,"br"),qs(1,"div",0),qs(2,"div",1),qs(3,"h1"),Io(4,"Copy Image Name"),Ys(),Ks(5,"br"),Ks(6,"input",2),Ys(),qs(7,"div",1),qs(8,"ion-button",3),no("click",function(){return e.closePopover()}),Io(9,"Cancel"),Ys(),qs(10,"ion-button",3),no("click",function(){return e.copyToClipboard()}),Io(11,"Copy Name"),Ys(),qs(12,"ion-button",3),no("click",function(){return e.goTo3DView()}),Io(13,"View in 3D"),Ys(),Ys(),Ys()),2&t&&(yr(6),uo("value",e.imageName))},directives:[Rm],styles:["#menu[_ngcontent-%COMP%]{width:80%;margin:auto;background-color:#fff;padding:5%;overflow:hidden;border:5px solid grey}#myInput[_ngcontent-%COMP%]{width:80%;color:#000;font-size:20px}input[_ngcontent-%COMP%]{height:40px;background-color:#fff}"]}),t})(),ox=(()=>{class t{constructor(){this.stageSource=new x,this.stage$=this.stageSource.asObservable()}sendStage(t){this.stageSource.next(t)}getStage(){return this.stage$}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const ax=["parent"],lx=["menu"];function cx(t,e){if(1&t){const t=Js();qs(0,"ion-card",65),qs(1,"div",66),no("click",function(){const e=Ae(t).$implicit,n=ao(2);return n.motifService.spawnMotifObject(e,n.canvas)}),Ks(2,"img",67),Ks(3,"br"),qs(4,"ion-text",68),Io(5),Ys(),Ys(),Ys()}if(2&t){const t=e.$implicit;yr(2),uo("src",t.motifURL,Ci),yr(3),Ro(" ",t.motifName," ")}}function hx(t,e){if(1&t&&(qs(0,"div",null,63),Gs(2,cx,6,2,"ion-card",64),Ys()),2&t){const t=ao();yr(2),Ws("ngForOf",t.motifService.cachedMotifs)}}function ux(t,e){if(1&t&&(qs(0,"ion-select-option",72),Io(1),Ys()),2&t){const t=e.$implicit;uo("value",t.patternID),yr(1),Do(t.patternName)}}function dx(t,e){if(1&t){const t=Js();qs(0,"ion-item",69),qs(1,"ion-select",70),no("ngModelChange",function(e){return Ae(t),ao().patternService.selectedPatternID=e})("ionChange",function(){Ae(t);const e=ao();return e.patternService.getAndLoadSavedPattern(e.patternService.selectedPatternID,e.canvas),e.emptyState()}),Gs(2,ux,2,2,"ion-select-option",71),Ys(),Ys()}if(2&t){const t=ao();yr(1),Ws("ngModel",t.patternService.selectedPatternID),yr(1),Ws("ngForOf",t.patternService.currentCollection.childPatterns)}}function fx(t,e){if(1&t){const t=Js();qs(0,"div",74),qs(1,"div",75),no("click",function(){const e=Ae(t).$implicit;return ao(2).makeSelected(e.IDOnCanvas)}),qs(2,"div",76),Ks(3,"img",77),Ys(),qs(4,"ion-button",78),no("click",function(){const e=Ae(t).$implicit;return ao(2).moveUp(e.IDOnCanvas)}),Io(5,"MoveUp"),Ys(),qs(6,"ion-button",78),no("click",function(){const e=Ae(t).$implicit;return ao(2).moveDown(e.IDOnCanvas)}),Io(7,"MoveDown"),Ys(),qs(8,"ion-button",78),no("click",function(){const e=Ae(t).$implicit;return ao(2).delete(e.IDOnCanvas)}),Io(9,"Delete"),Ys(),qs(10,"ion-button",78),no("click",function(){const e=Ae(t).$implicit;return ao(2).recenter(e.IDOnCanvas)}),Io(11,"Recenter"),Ys(),Ks(12,"br"),Ys(),Ys()}if(2&t){const t=e.$implicit;zs("data-index",e.index),yr(3),uo("src",t.motifURL,Ci)}}function px(t,e){if(1&t&&(qs(0,"div"),Gs(1,fx,13,2,"div",73),Ys()),2&t){const t=ao();yr(1),Ws("ngForOf",t.motifService.motifsOnCanvas.slice().reverse())}}function gx(t,e){if(1&t){const t=Js();qs(0,"ion-item"),qs(1,"ion-checkbox",79),no("ionChange",function(e){return Ae(t),ao().setSeamlessModifier(e)})("ngModelChange",function(e){return Ae(t),ao().activeObject.shouldDisplaySeamlessMod=e}),Ys(),qs(2,"ion-label"),Io(3," Set Seamless "),Ys(),Ys()}if(2&t){const t=ao();yr(1),Ws("ngModel",t.activeObject.shouldDisplaySeamlessMod)}}function mx(t,e){if(1&t){const t=Js();qs(0,"ion-item"),qs(1,"ion-badge"),Io(2),Ys(),qs(3,"ion-range",80),no("ngModelChange",function(e){return Ae(t),ao().activeObject.ArrayModDirection=e})("ionChange",function(){Ae(t);const e=ao();return e.motifService.updateArrModOfSelected(e.activeObject,e.canvas)}),qs(4,"ion-label",81),Io(5,"0"),Ys(),qs(6,"ion-label",82),Io(7,"359"),Ys(),Ys(),Ys()}if(2&t){const t=ao();yr(2),Do(t.activeObject.ArrayModDirection),yr(1),Ws("ngModel",t.activeObject.ArrayModDirection)}}function vx(t,e){if(1&t){const t=Js();qs(0,"ion-item",36),qs(1,"ion-button",3),no("click",function(){Ae(t);const e=ao();return e.motifService.changeArrayModifierNumber(e.activeObject,1,e.activeObject.ArrayModSpacing,e.canvas)}),Io(2,"Add"),Ys(),qs(3,"ion-button",3),no("click",function(){Ae(t);const e=ao();return e.motifService.changeArrayModifierNumber(e.activeObject,-1,e.activeObject.ArrayModSpacing,e.canvas)}),Io(4,"Remove"),Ys(),Io(5),Ys()}if(2&t){const t=ao();yr(5),Ro(" ",t.activeObject.nrOfArrayObjects," ")}}function yx(t,e){if(1&t){const t=Js();qs(0,"div"),qs(1,"ion-input",83),no("ngModelChange",function(e){return Ae(t),ao().activeObject.ArrayModSpacing=e})("ionChange",function(){Ae(t);const e=ao();return e.motifService.updateArrModOfSelected(e.activeObject,e.canvas)}),Ys(),Ys()}if(2&t){const t=ao();yr(1),Ws("ngModel",t.activeObject.ArrayModSpacing)}}let _x=(()=>{class t{constructor(t,e,n,i,r,s,o,a,l){this.motifService=t,this.route=e,this.patternService=n,this.popoverController=i,this.http=r,this.loadingController=s,this.stageColorService=o,this.collectionService=a,this.serverLink=l,this.items=[{name:"archie"},{name:"jake"},{name:"richard"}],this.values=[],this.searchableMotifs=[],this.canvasWidth=600,this.canvasHeight=600,this.motifSaveStates=[],this.motifsOnCanvas={objects:[]},this.motifObjects=[],this.canvasMotifs=[],this.seamlessClones=[],this.motifCount=0,this.scale=3,this.width=600,this.height=600,this.undoLimit=20,this.pixel=2,this.opacity=1,this.color="white",this.colorOrginal="white",this.background=!1,this.ptn=!1,this.downWidth=null,this.downHeight=null,this.directionSliderValue=0,this.distBetweenArrayModElements=200,this.originator=new ix,this.caretaker=new rx,this.undoClicked=!1,this.pcan=document.getElementById("imgPreview"),this.patternContents={patternName:"",patternID:"",motifs:[]}}onKey(t){const e=t.target.value.toLowerCase();document.querySelector("p.testing"),console.log(e),console.table(this.searchableMotifs),document.getElementById("testing");const n=Array.from(this.parentRef.nativeElement.children);console.log(n.length),requestAnimationFrame(()=>{n.forEach(t=>Sy(this,void 0,void 0,function*(){const n=(yield t.textContent.toLowerCase().indexOf(e))>-1;t.style.display=n?"block":"none"}))})}ngOnInit(){this.canvas=new ky.fabric.Canvas("patternFrame",{preserveObjectStacking:!0}),this.canvas.setHeight(this.width),this.canvas.setWidth(this.height),this.canvas.selection=!1,this.canvas.backgroundColor=null,this.originator=new ix,this.caretaker=new rx,this.loadingController.create({message:"Initializing..."}).then(t=>{t.present().then(e=>{this.patternService.getCurrentCollectionJSON(this.collectionService.currentCollectionID).then(e=>{t.dismiss().then(),e.childPatterns[0]&&this.patternService.getAndLoadSavedPattern(e.childPatterns[0].patternID,this.canvas)})})}),this.canvas.on("selection:created",t=>{this.getSelectedObject()}),this.canvas.on("selection:updated",t=>{this.getSelectedObject()}),this.canvas.on("object:moving",t=>{this.activeObject.shouldDisplaySeamlessMod&&(this.motifService.updateReflectionsOf(this.activeObject,this.canvas),console.log("Moving Reflections")),this.motifService.updateArrModOfSelected(this.activeObject,this.canvas)}),this.canvas.on("object:rotating",t=>{this.activeObject.shouldDisplaySeamlessMod&&(this.motifService.updateReflectionsOf(this.activeObject,this.canvas),console.log("Moving Reflections")),this.motifService.updateArrModOfSelected(this.activeObject,this.canvas)}),this.canvas.on("object:scaling",t=>{this.activeObject.shouldDisplaySeamlessMod&&(this.motifService.updateReflectionsOf(this.activeObject,this.canvas),console.log("Moving Reflections")),this.motifService.updateArrModOfSelected(this.activeObject,this.canvas)}),this.canvas.on("object:rotated",t=>{this.addState(),this.undoClicked=!1}),this.canvas.on("object:scaled",t=>{this.addState(),this.undoClicked=!1}),this.canvas.on("object:removed",t=>{this.addState(),this.undoClicked=!1}),this.canvas.on("object:moving",t=>{let e;1==this.undoClicked&&(e=this.getState(),this.canvas.fire("object:moved"),this.addStateGivenState(e))}),this.canvas.on("object:moved",t=>{let e;1==this.undoClicked?(e=this.getState(),this.addStateGivenState(e)):this.addState(),this.undoClicked=!1});let t="",e=30;for(let n=1;n<e;n++)t=t+"M 0 "+n*(this.canvas.height/e)+"L "+this.canvas.width+" "+n*(this.canvas.width/e)+" ";for(let n=1;n<e;n++)t=t+"M "+n*(this.canvas.width/e)+" 0 L "+n*(this.canvas.width/e)+" "+this.canvas.height+" ";this.path=new ky.fabric.Path(t,{stroke:"black",strokeWidth:2,selectable:!1,evented:!1,name:"grid",opacity:.3}),document.getElementById("patternFrame").addEventListener("change",()=>{this.sendPattern()})}sendPattern(){console.log("in send pattern");const t=document.getElementById("patternFrame");this.stageColorService.sendStage(t.toDataURL()),console.log(this.stageColorService.stage$)}getState(){let t=[],e=this.motifService.getNonSpecialObjects(this.canvas);for(let n=0;n<e.length;n++)e[n].clone(i=>{i.googleDriveID=e[n].googleDriveID,i.motifURL=e[n].motifURL,i.motifName=e[n].motifName,i.IDOnCanvas=e[n].IDOnCanvas,i.hasReflections=!1,t.push(i)});return t}addStateGivenState(t){this.originator.setState(t),this.caretaker.addMemento(this.originator.saveStateToMemento())}addState(){let t=[],e=this.motifService.getNonSpecialObjects(this.canvas);for(let n=0;n<e.length;n++)e[n].clone(i=>{i.googleDriveID=e[n].googleDriveID,i.motifURL=e[n].motifURL,i.motifName=e[n].motifName,i.IDOnCanvas=e[n].IDOnCanvas,i.hasReflections=!1,t.push(i)});this.originator.setState(t),this.caretaker.addMemento(this.originator.saveStateToMemento()),console.log("Saved State "+t)}undo(){if(this.undoClicked=!0,0!=this.caretaker.notEmpty()){const t=this.originator.restoreStateFromMemento(this.caretaker.getMemento());console.log(t),this.motifService.motifsOnCanvas=t,this.canvas.clear(),this.canvas._objects=[];for(let e=0;e<t.length;e++)this.canvas.add(t[e]);this.canvas.renderAll()}}emptyState(){this.caretaker.emptyStates()}collectionCataloguePopover(){this.popoverController.create({component:tx,translucent:!0,cssClass:"fullscreen"}).then(t=>{t.present().then(t=>t)})}uploadFilePopover(){this.popoverController.create({component:yy,translucent:!0,cssClass:"fullscreen"}).then(t=>{t.present().then(t=>t)})}getMotifs(){}contextMenu(t){t.preventDefault(),console.log(t),1==this.canvas.getActiveObjects().length&&(this.menu.nativeElement.style.display="block",this.menu.nativeElement.style.top=t.pageY>600?"600px":t.pageY+"px",this.menu.nativeElement.style.left=t.pageX+"px")}dissapearContext(){this.menu.nativeElement.style.display="none"}stopPropagation(t){t.stopPropagation(t)}newPattern(t){return this.patternService.newPattern(t)}newPatternPopover(){let t;this.popoverController.create({component:ex,translucent:!0,cssClass:"smallScreen"}).then(e=>{t=e,t.present().then(e=>{t.onDidDismiss().then(t=>{console.log(t),void 0!==t.data&&""!==t.data&&this.newPattern(t.data)})})})}openTab(t,e){let n,i;for(i=document.getElementsByClassName("tab-content"),n=0;n<i.length;n++)i[n].style.display="none";document.getElementById(e).style.display="block",document.getElementById(e+"1").setAttribute("color","dark")}openTabSide(t,e){let n,i;for(i=document.getElementsByClassName("tab-content-side"),n=0;n<i.length;n++)i[n].style.display="none";document.getElementById(e).style.display="block",document.getElementById(e+"1").setAttribute("color","dark")}openTabMain(t,e){let n,i;for(this.background=!0,this.canvas.backgroundColor=this.color,document.getElementById("patternFrame").style.backgroundColor=this.color,this.canvas.renderAll(),this.refresh(),i=document.getElementsByClassName("tab-content-main"),n=0;n<i.length;n++)i[n].style.display="none";document.getElementById(e).style.display="block",document.getElementById(e+"1").setAttribute("color","dark")}moveUp(t){this.addState();const e=this.motifService.getNonSpecialObjects(this.canvas);for(let n=0;n<e.length;n++)if(e[n].IDOnCanvas===t){if(e[n+1]){const t=e[n+1];return e[n+1]=e[n],e[n]=t,this.motifService.renderAllWithSpecial(e,this.canvas),void(this.motifService.motifsOnCanvas=e)}console.log("Is upper")}}moveDown(t){this.addState();const e=this.motifService.getNonSpecialObjects(this.canvas);for(let n=0;n<e.length;n++)if(e[n].IDOnCanvas===t){if(e[n-1]){const t=e[n-1];return e[n-1]=e[n],e[n]=t,this.motifService.renderAllWithSpecial(e,this.canvas),void(this.motifService.motifsOnCanvas=e)}console.log("Is Lower")}}getMotifIndex(t){const e=this.motifService.getNonSpecialObjects(this.canvas);for(let n=0;n<e.length;n++)if(e[n].IDOnCanvas===t)return n}makeSelected(t){const e=this.motifService.getNonSpecialObjects(this.canvas),n=this.getMotifIndex(t);this.canvas.setActiveObject(e[n]),this.canvas.renderAll()}delete(t){const e=this.motifService.getNonSpecialObjects(this.canvas),n=this.getMotifIndex(t);this.canvas.remove(e[n]),this.motifService.motifsOnCanvas=this.motifService.getNonSpecialObjects(this.canvas),this.motifService.renderAllWithSpecial(this.canvas._objects,this.canvas)}deleteRightClick(){const t=this.canvas.getActiveObject();null!=t&&(this.canvas.remove(t),this.motifService.motifsOnCanvas=this.motifService.getNonSpecialObjects(this.canvas),this.motifService.renderAllWithSpecial(this.canvas._objects,this.canvas),this.dissapearContext())}flipXRightClick(){this.canvas.getActiveObject().toggle("flipX"),this.canvas.renderAll()}flipYRightClick(){this.canvas.getActiveObject().toggle("flipY"),this.canvas.renderAll()}moveUpRightClick(){const t=this.canvas.getActiveObject();this.moveUp(t.IDOnCanvas)}moveDownRightClick(){const t=this.canvas.getActiveObject();this.moveDown(t.IDOnCanvas)}cloneRightClick(){const t=this.canvas.getActiveObject();null!=t&&t.clone(e=>{e.googleDriveID=t.googleDriveID,e.motifURL=t.motifURL,e.motifName=t.motifName,e.hasReflections=!1,e.IDOnCanvas=this.motifService.motifIndexIncValue++,e.set("left",t.left+50),this.canvas.add(e),this.motifService.motifsOnCanvas.push(e),this.dissapearContext()})}recenterClick(){const t=this.canvas.getActiveObject();this.recenter(t.IDOnCanvas),this.dissapearContext()}recenter(t){const e=this.motifService.getNonSpecialObjects(this.canvas),n=this.getMotifIndex(t);e[n].center(),this.makeSelected(n),this.canvas.fire("object:moving")}listCanvasObjects(){console.log(this.canvas.getObjects())}getSelectedObject(){this.activeObject=this.canvas.getActiveObject(),console.log(this.canvas.getActiveObject().IDOnCanvas)}refresh(){console.log("refresh fired"),this.pcan=document.getElementById("imgPreview"),this.pcan.height=this.height/this.scale,this.pcan.width=this.width/this.scale,this.pcan.src=this.canvas.toDataURL(),this.setPreview(!0)}setDownload(t=!1){console.log("downloading image..."),this.canvasPre=new ky.fabric.Canvas("previewFrame",{preserveObjectStacking:!1}),this.canvasPre.setHeight(this.width*this.pixel),this.canvasPre.setWidth(this.height*this.pixel);for(let e=0;e<this.scale;e++)for(let t=0;t<this.scale;t++){const n=new ky.fabric.Image("imgPreview",{left:t*(this.canvasPre.width/this.scale),top:e*(this.canvasPre.width/this.scale),scaleY:this.pixel/this.scale,scaleX:this.pixel/this.scale,selectable:!1,evented:!1});this.canvasPre.add(n)}t&&setTimeout(()=>{this.setPreview()},50)}setPreview(t=!1){console.log("set preview fired"),this.canvasPre=new ky.fabric.Canvas("previewFrame",{preserveObjectStacking:!1}),this.canvasPre.setHeight(this.height),this.canvasPre.setWidth(this.width);for(let e=0;e<this.scale;e++)for(let t=0;t<this.scale;t++){const n=new ky.fabric.Image("imgPreview",{left:t*(this.canvasPre.width/this.scale),top:e*(this.canvasPre.height/this.scale),scaleY:1/this.scale,scaleX:1/this.scale,selectable:!1,evented:!1});this.canvasPre.add(n)}t&&setTimeout(()=>{this.setPreview()},50),console.log("Preview Generated")}gridOn(){this.canvas.add(this.path)}gridOff(){this.canvas.remove(this.path)}toggleGrid(t){t.detail.checked?this.gridOn():this.gridOff()}toggleBackground(t){t.detail.checked?(console.log("background enabled"),this.background=!0,this.canvas.backgroundColor=this.color,document.getElementById("patternFrame").style.backgroundColor=this.color,this.canvas.renderAll()):(this.background=!1,this.canvas.backgroundColor=null,document.getElementById("patternFrame").style.backgroundColor=null,this.canvas.renderAll()),this.canvas.requestRenderAll(),this.refresh()}changeColor(){if(!0===this.background){const t=document.getElementById("fav_color").value;this.color=t,this.canvas.backgroundColor=this.color,document.getElementById("patternFrame").style.backgroundColor=this.color,this.canvas.renderAll(),this.refresh()}else this.refresh()}setSeamlessModifier(t){!0===t.detail.checked?(this.motifService.addReflectionsToObject(this.activeObject,this.canvas),this.activeObject.shouldDisplaySeamlessMod=!0):(this.activeObject.reflections=[],this.activeObject.shouldDisplaySeamlessMod=!1),this.motifService.renderAllWithSpecial(this.motifService.getNonSpecialObjects(this.canvas),this.canvas)}scaleCanvas3(){this.scale=3,document.getElementById("s3").color="dark",document.getElementById("s6").color="medium",document.getElementById("s9").color="medium",this.refresh()}scaleCanvas6(){this.scale=6,document.getElementById("s3").color="medium",document.getElementById("s6").color="dark",document.getElementById("s9").color="medium",this.refresh()}scaleCanvas9(){this.scale=9,document.getElementById("s3").color="medium",document.getElementById("s6").color="medium",document.getElementById("s9").color="dark",this.refresh()}download(){console.log("downloading"),this.setDownload(),this.canvasPre.getContext();const t=this.canvasPre.toDataURL();this.downloadURI(t,this.ptn?"pattern.png":"frame.png")}downloadURI(t,e){const n=document.createElement("a");n.download=e,n.href=t,document.body.appendChild(n),n.click(),document.body.removeChild(n),this.refresh()}motifLoad(){return new Promise((t,e)=>{this.loadingController.create({message:"Loading Your Motifs..."}).then(e=>{e.present().then(n=>{this.motifService.getAllMotifs().subscribe(()=>{e.dismiss().then(),t("success")})})})})}export1(){console.log("EXPORT LOW RESOLUTION"),this.pixel=1,document.getElementById("e1").color="dark",document.getElementById("e2").color="medium",document.getElementById("e5").color="medium"}export2(){console.log("EXPORT MEDIUM RESOLUTION"),this.pixel=2,document.getElementById("e1").color="medium",document.getElementById("e2").color="dark",document.getElementById("e5").color="medium"}export5(){console.log("EXPORT HIGH RESOLUTION"),this.pixel=5,document.getElementById("e1").color="medium",document.getElementById("e2").color="medium",document.getElementById("e5").color="dark"}frame(){const t=this.scale;this.scale=1,this.ptn=!1,this.download(),this.scale=t}pattern(){this.ptn=!0,this.download()}dataURItoBlob(t){const e=atob(t.split(",")[1]),n=t.split(",")[0].split(":")[1].split(";")[0],i=new ArrayBuffer(e.length),r=new Uint8Array(i);for(let s=0;s<e.length;s++)r[s]=e.charCodeAt(s);return new Blob([i],{type:n})}uploadThumbnail(){try{const t=new FormData;t.append("files",this.dataURItoBlob(this.canvas.toDataURL()),"testName.png"),this.http.post(this.serverLink.getServerLink()+"/api/uploadMotif",t,{withCredentials:!0}).subscribe(t=>{console.log(t)})}catch(t){console.log(t)}}open3DViewer(t){try{const e=new FormData;e.append("files",this.dataURItoBlob(this.canvas.toDataURL()),"canvasPicture.png"),this.http.post(this.serverLink.getServerLink()+"/threeDViewer",e,{withCredentials:!0}).subscribe(e=>{console.log(this.canvas.toDataURL()),this.threeDLinkPopover(t,e.fileName).then(t=>{t.present().then(()=>{t.onDidDismiss().then(()=>{window.open(this.serverLink.getServerLink()+"/threeDViewer","_blank").focus()})})}),console.log(e)})}catch(e){console.log(e)}}threeDLinkPopover(t,e){return this.popoverController.create({component:sx,translucent:!0,cssClass:"smallScreen",componentProps:{imageName:e}})}}return t.\u0275fac=function(e){return new(e||t)(Hs(zy),Hs(jd),Hs(Vy),Hs(Iv),Hs(ey),Hs(Pv),Hs(ox),Hs(_y),Hs(gy))},t.\u0275cmp=Vt({type:t,selectors:[["app-pattern"]],viewQuery:function(t,e){if(1&t&&(yl(ax,5),yl(lx,5)),2&t){let t;vl(t=bl())&&(e.parentRef=t.first),vl(t=bl())&&(e.menu=t.first)}},decls:223,vars:8,consts:[[1,"maxHeight"],["size","3"],["id","leftSidebar"],["color","medium",2,"width","100%",3,"click"],[3,"keyup"],[1,"testing"],["id","","testing",""],[4,"ngIf"],["size","6"],["size","1"],[2,"width","100%"],["size","10"],["class","patternSelect","style","height: 45px",4,"ngIf"],["color","medium",1,"button",2,"width","90%",3,"click"],["size","12","id","WorkArea",1,"tab-content-main"],["color","dark","size","medium","fill","clear","id","WorkArea1",1,"tab-links",3,"click"],[1,"button-text"],["name","image-outline"],["color","medium","size","medium","fill","clear",1,"tab-links",3,"click"],["name","apps-outline"],[2,"overflow-y","scroll"],[1,"frame",3,"contextmenu","click"],["id","patternFrame","width","600px","height","600px"],[1,"customContext",3,"click"],["menu",""],[3,"click"],["size","12","id","Preview",1,"tab-content-main"],["color","dark","size","medium","fill","clear",1,"tab-links",3,"click"],["color","medium","size","medium","fill","clear","id","Preview1",1,"tab-links",3,"click"],[2,"overflow","hidden"],[1,"frame","inv"],["id","imgPreview"],[1,"frame"],["id","previewFrame","width","600px","height","600px"],["id","imgPattern",2,"object-fit","cover","vertical-align","bottom"],["size","3","id","Modifiers",1,"tab-content-side"],[2,"text-align","center"],["color","dark","size","medium","fill","clear","id","Modifiers1",1,"tab-links",3,"click"],["name","invert-mode-outline"],["name","eyedrop-outline"],["name","archive-outline"],["checked","false",3,"ionChange"],[1,"layerNumbers"],[1,"layerBorder"],["size","3","id","Changes",1,"tab-content-side"],["color","medium","size","medium","fill","clear",1,"tab-link",3,"click"],["color","dark","size","medium","fill","clear","id","Changes1",1,"tab-links",3,"click"],["id","pre","color","medium",2,"width","100%",3,"click"],["checked","true",3,"ionChange"],[2,"margin","auto","text-align","center"],["type","color","id","fav_color","name","fav_color","value","#FFFFFF"],["id","col","color","medium",2,"width","100%",3,"click"],["id","s3","color","dark",2,"width","100%",3,"click"],["id","s6","color","medium",2,"width","100%",3,"click"],["id","s9","color","medium",2,"width","100%",3,"click"],["style","text-align: center",4,"ngIf"],["size","3","id","Exports",1,"tab-content-side"],["color","dark","size","medium","fill","clear","id","Exports1",1,"tab-links",3,"click"],["id","e1","color","medium",2,"width","100%",3,"click"],["id","e2","color","dark",2,"width","100%",3,"click"],["id","e5","color","medium",2,"width","100%",3,"click"],["id","patternDown","color","medium",2,"width","100%",3,"click"],["id","frameDown","color","medium",2,"width","100%",3,"click"],["parent",""],["class","squareContainer MotifImage",4,"ngFor","ngForOf"],[1,"squareContainer","MotifImage"],["mat-raised-button","",1,"motifBtn",2,"overflow","hidden",3,"click"],["alt","motif-image",1,"motifImg",3,"src"],[1,"motifNames"],[1,"patternSelect",2,"height","45px"],["interface","popover",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["class","temp",4,"ngFor","ngForOf"],[1,"temp"],[1,"MotifImage2",3,"click"],[1,"layerBlock",2,"background-color","#949494","padding","10px"],["alt","motif-image",1,"layerMotif",3,"src"],["color","medium",3,"click"],["id","seamlessModifier","slot","end",3,"ngModel","ionChange","ngModelChange"],["min","0","max","359","color","medium",3,"ngModel","ngModelChange","ionChange"],["slot","start"],["slot","end"],["color","medium","type","number","value","distBetweenArrayModElements",2,"background-color","grey","margin","auto","color","black",3,"ngModel","ngModelChange","ionChange"]],template:function(t,e){1&t&&(qs(0,"ion-grid"),qs(1,"ion-row",0),qs(2,"ion-col",1),qs(3,"ion-card",2),qs(4,"ion-card-header"),qs(5,"ion-card-title"),Io(6,"Motif Library"),Ys(),Ys(),qs(7,"ion-card-content"),qs(8,"ion-list"),qs(9,"ion-item"),qs(10,"ion-button",3),no("click",function(){return e.uploadFilePopover()}),Io(11,"Import new Motif"),Ys(),Ys(),Ks(12,"br"),qs(13,"ion-item"),qs(14,"ion-button",3),no("click",function(){return e.collectionCataloguePopover()}),Io(15,"Append motifs"),Ys(),Ys(),Ys(),qs(16,"ion-toolbar"),qs(17,"ion-searchbar",4),no("keyup",function(t){return e.onKey(t)}),Ys(),qs(18,"p",5),Io(19),Ys(),Ys(),qs(20,"ion-row",6),Gs(21,hx,3,1,"div",7),Ys(),Ys(),Ys(),Ys(),qs(22,"ion-col",8),qs(23,"ion-row",9),qs(24,"ion-card",10),qs(25,"ion-card-content",10),qs(26,"ion-row"),qs(27,"ion-col",11),Gs(28,dx,3,2,"ion-item",12),Ys(),qs(29,"ion-col"),qs(30,"div"),qs(31,"ion-button",13),no("click",function(){return e.newPatternPopover()}),Io(32," New Pattern "),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),qs(33,"ion-col",14),qs(34,"ion-card"),qs(35,"ion-card-header"),qs(36,"ion-button",15),no("click",function(t){return e.openTabMain(t,"WorkArea")}),qs(37,"ion-label",16),Io(38,"WorkArea"),Ys(),Ks(39,"ion-icon",17),Ys(),qs(40,"ion-button",18),no("click",function(t){return e.openTabMain(t,"Preview")}),qs(41,"ion-label",16),Io(42,"Preview"),Ys(),Ks(43,"ion-icon",19),Ys(),Ys(),qs(44,"ion-card-content",20),Ks(45,"br"),qs(46,"div",21),no("contextmenu",function(t){return e.contextMenu(t)})("click",function(){return e.dissapearContext()}),Ks(47,"canvas",22),Ys(),qs(48,"div",23,24),no("click",function(t){return e.stopPropagation(t)}),qs(50,"ul"),qs(51,"li",25),no("click",function(){return e.cloneRightClick()}),Io(52,"Clone"),Ys(),qs(53,"li",25),no("click",function(){return e.deleteRightClick()}),Io(54,"Delete"),Ys(),qs(55,"li",25),no("click",function(){return e.moveUpRightClick()}),Io(56,"Move Up"),Ys(),qs(57,"li",25),no("click",function(){return e.moveDownRightClick()}),Io(58,"Move Down"),Ys(),qs(59,"li",25),no("click",function(){return e.flipXRightClick()}),Io(60,"FlipX"),Ys(),qs(61,"li",25),no("click",function(){return e.flipYRightClick()}),Io(62,"FlipY"),Ys(),qs(63,"li",25),no("click",function(){return e.recenterClick()}),Io(64,"Recenter"),Ys(),Ys(),Ys(),Ks(65,"br"),Ys(),Ys(),Ys(),qs(66,"ion-col",26),qs(67,"ion-card"),qs(68,"ion-card-header"),qs(69,"ion-button",27),no("click",function(t){return e.openTabMain(t,"WorkArea")}),qs(70,"ion-label",16),Io(71,"WorkArea"),Ys(),Ks(72,"ion-icon",17),Ys(),qs(73,"ion-button",28),no("click",function(t){return e.openTabMain(t,"Preview")}),qs(74,"ion-label",16),Io(75,"Preview"),Ys(),Ks(76,"ion-icon",19),Ys(),Ys(),qs(77,"ion-card-content",29),qs(78,"div",30),Ks(79,"img",31),Ys(),Ks(80,"br"),qs(81,"div",32),Ks(82,"canvas",33),Ys(),Ks(83,"br"),qs(84,"div",30),Ks(85,"img",34),Ys(),Ys(),Ys(),Ys(),Ys(),qs(86,"ion-col",35),qs(87,"ion-card"),qs(88,"div",36),qs(89,"ion-button",37),no("click",function(t){return e.openTabSide(t,"Modifiers")}),qs(90,"ion-label",16),Io(91,"Layers"),Ys(),Ks(92,"ion-icon",38),Ys(),qs(93,"ion-button",18),no("click",function(t){return e.openTabSide(t,"Changes")}),qs(94,"ion-label",16),Io(95,"Modifiers"),Ys(),Ks(96,"ion-icon",39),Ys(),qs(97,"ion-button",18),no("click",function(t){return e.openTabSide(t,"Exports")}),qs(98,"ion-label",16),Io(99,"Exports"),Ys(),Ks(100,"ion-icon",40),Ys(),Ys(),qs(101,"ion-card-content"),qs(102,"div"),qs(103,"ion-list"),qs(104,"ion-list-header"),qs(105,"ion-title",36),Io(106,"Layers"),Ys(),Ys(),Ys(),qs(107,"ion-item"),qs(108,"ion-label"),Io(109,"Show Gridlines"),Ys(),qs(110,"ion-checkbox",41),no("ionChange",function(t){return e.toggleGrid(t)}),Ys(),Ys(),Ks(111,"br"),qs(112,"ion-item"),qs(113,"ion-button",3),no("click",function(){return e.patternService.savePattern(e.canvas,e.collectionService.currentCollectionID)}),Io(114,"Save Frame"),Ys(),Ys(),Ks(115,"br"),qs(116,"ion-item"),qs(117,"ion-button",3),no("click",function(){return e.undo()}),Io(118,"Undo"),Ys(),Ys(),Ks(119,"br"),Ys(),qs(120,"div",42),qs(121,"div",43),qs(122,"ion-label"),Io(123,"Layer"),Ys(),Gs(124,px,2,1,"div",7),Ys(),Ys(),Ys(),Ys(),Ys(),qs(125,"ion-col",44),qs(126,"ion-card"),qs(127,"div",36),qs(128,"ion-button",45),no("click",function(t){return e.openTabSide(t,"Modifiers")}),qs(129,"ion-label",16),Io(130,"Layers"),Ys(),Ks(131,"ion-icon",38),Ys(),qs(132,"ion-button",46),no("click",function(t){return e.openTabSide(t,"Changes")}),qs(133,"ion-label",16),Io(134,"Modifiers"),Ys(),Ks(135,"ion-icon",39),Ys(),qs(136,"ion-button",18),no("click",function(t){return e.openTabSide(t,"Exports")}),qs(137,"ion-label",16),Io(138,"Exports"),Ys(),Ks(139,"ion-icon",40),Ys(),Ys(),qs(140,"ion-card-content"),qs(141,"ion-list"),qs(142,"ion-list-header"),qs(143,"ion-title",36),Io(144,"Modifiers"),Ys(),Ys(),Ys(),qs(145,"ion-item"),qs(146,"ion-button",47),no("click",function(){return e.refresh()}),Io(147,"Refresh Preview"),Ys(),Ys(),qs(148,"ion-item"),qs(149,"ion-label"),Io(150,"Enable Background"),Ys(),qs(151,"ion-checkbox",48),no("ionChange",function(t){return e.toggleBackground(t)}),Ys(),Ys(),qs(152,"form"),qs(153,"ion-item"),qs(154,"ion-label",49),Io(155,"Select a color: "),Ys(),Ks(156,"input",50),Ys(),qs(157,"ion-item"),qs(158,"ion-button",51),no("click",function(){return e.changeColor()}),Io(159,"Change Background Color"),Ys(),Ys(),Ys(),qs(160,"ion-item"),qs(161,"ion-label",49),Io(162,"Select the amount of frames to be in pattern: "),Ys(),Ys(),qs(163,"ion-item"),qs(164,"ion-button",52),no("click",function(){return e.scaleCanvas3()}),Io(165,"3x3"),Ys(),qs(166,"ion-button",53),no("click",function(){return e.scaleCanvas6()}),Io(167,"6x6"),Ys(),qs(168,"ion-button",54),no("click",function(){return e.scaleCanvas9()}),Io(169,"9x9"),Ys(),Ys(),Gs(170,gx,4,1,"ion-item",7),Gs(171,mx,8,2,"ion-item",7),Gs(172,vx,6,1,"ion-item",55),Ks(173,"br"),Gs(174,yx,2,1,"div",7),Ks(175,"br"),Ys(),Ys(),Ys(),qs(176,"ion-col",56),qs(177,"ion-card"),qs(178,"div",36),qs(179,"ion-button",45),no("click",function(t){return e.openTabSide(t,"Modifiers")}),qs(180,"ion-label",16),Io(181,"Layers"),Ys(),Ks(182,"ion-icon",38),Ys(),qs(183,"ion-button",18),no("click",function(t){return e.openTabSide(t,"Changes")}),qs(184,"ion-label",16),Io(185,"Modifiers"),Ys(),Ks(186,"ion-icon",39),Ys(),qs(187,"ion-button",57),no("click",function(t){return e.openTabSide(t,"Exports")}),qs(188,"ion-label",16),Io(189,"Exports"),Ys(),Ks(190,"ion-icon",40),Ys(),Ys(),qs(191,"ion-card-content"),qs(192,"ion-list"),qs(193,"ion-list-header"),qs(194,"ion-title",36),Io(195,"Exports"),Ys(),Ys(),Ys(),qs(196,"ion-item"),qs(197,"ion-label",49),Io(198,"Select Export Dimension options: "),Ys(),Ys(),qs(199,"ion-item"),qs(200,"ion-button",58),no("click",function(){return e.export1()}),Io(201,"600x600"),Ys(),qs(202,"ion-button",59),no("click",function(){return e.export2()}),Io(203,"1200x1200"),Ys(),qs(204,"ion-button",60),no("click",function(){return e.export5()}),Io(205,"3000x3000"),Ys(),Ys(),qs(206,"ion-item"),qs(207,"ion-label",49),Io(208,"Select what to export: "),Ys(),Ys(),qs(209,"ion-item"),qs(210,"ion-button",61),no("click",function(){return e.pattern()}),Io(211,"Pattern"),Ys(),qs(212,"ion-button",62),no("click",function(){return e.frame()}),Io(213,"Frame"),Ys(),Ys(),qs(214,"ion-item"),qs(215,"ion-label",49),Io(216,"Other Export Options: "),Ys(),Ys(),qs(217,"ion-item"),qs(218,"ion-button",3),no("click",function(){return e.sendPattern()}),Io(219,"Extract pattern colors"),Ys(),Ys(),qs(220,"ion-item"),qs(221,"ion-button",3),no("click",function(t){return e.open3DViewer(t)}),Io(222," 3D Viewer "),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys()),2&t&&(yr(19),Do(e.values),yr(2),Ws("ngIf",e.motifService.cachedMotifs),yr(7),Ws("ngIf",e.patternService.checkIfPatternsExistAndSetDefault()),yr(96),Ws("ngIf",e.motifService.motifsOnCanvas),yr(46),Ws("ngIf",e.activeObject),yr(1),Ws("ngIf",e.activeObject),yr(1),Ws("ngIf",e.activeObject),yr(2),Ws("ngIf",e.activeObject))},directives:[Vm,Km,$m,Lm,jm,Nm,Fm,Xm,Hm,Rm,rv,Zm,wm,Yc,Wm,Gm,qm,iv,Bm,gm,jg,lg,Dg,Xc,nv,Qm,_m,ag,Fg,Jm,Dm,Ym,Um,vm],styles:["ion-card[_ngcontent-%COMP%]{height:100%;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#000;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:grey;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#000}ion-content[_ngcontent-%COMP%]{height:100%}.layerMotif[_ngcontent-%COMP%]{height:2cm}ion-grid[_ngcontent-%COMP%]{height:100%;width:100%}#preview[_ngcontent-%COMP%]{position:relative;top:2px;right:2px;width:600px;height:600px;border:1px solid grey;background-color:#d3d3d3;display:none;margin:5px}#patternFrame[_ngcontent-%COMP%]{background-color:#fff}#can[_ngcontent-%COMP%]{width:600px;height:600px;margin:15px}#can[_ngcontent-%COMP%], #container[_ngcontent-%COMP%]{border:3px solid #000;background-color:#fff}#container[_ngcontent-%COMP%]{text-align:center}.customContext[_ngcontent-%COMP%]{position:fixed;background:#111;width:150px;z-index:100000;display:none}.customContext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.customContext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;padding:10px 14px;border-bottom:1px solid #fff;color:gray;width:100%;cursor:pointer;transition:all .2s}.customContext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#111;color:#1e90ff}.maxHeight[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]{height:100%}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0px}ion-card-content[_ngcontent-%COMP%]{padding:1px}ion-card-header[_ngcontent-%COMP%]{font-size:large;text-align:center;border-bottom:1px solid #708090;height:50px}.noIonCardHeader[_ngcontent-%COMP%]{border-bottom:0}ion-item[_ngcontent-%COMP%]{height:40px}.motifBtn[_ngcontent-%COMP%]{width:100%;height:100%;background-color:#fff;padding:5px}.motifImg[_ngcontent-%COMP%]{height:80%;vertical-align:middle}.motifNames[_ngcontent-%COMP%]{width:100%;height:20%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.MotifImage[_ngcontent-%COMP%]{width:45%;height:4cm;text-align:center;margin-top:5px;margin-bottom:10px;margin-left:5px;border:1px solid #000;display:flex;align-items:center;float:left}.row[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e6e5e5 13.5px,#0000 1%) 50%,linear-gradient(#e6e5e5 13.5px,#0000 1%) 50%,#381994;background-size:15px 15px;width:100%}.view[_ngcontent-%COMP%], .workArea[_ngcontent-%COMP%]{width:600px;height:600px;border:1px solid grey;text-align:center;margin:15px}.frame[_ngcontent-%COMP%]{width:608px;height:608px;margin:0 auto;border:4px solid grey}.inv[_ngcontent-%COMP%]{display:none}.layerNumbers[_ngcontent-%COMP%]{border:1px solid grey}.layerBorder[_ngcontent-%COMP%]{padding:5px;text-align:center}@media screen and (max-width:1500px){.button-text[_ngcontent-%COMP%]{display:none}}.motifBtn[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),bx=(()=>{class t{constructor(){}ngOnInit(){this.colorGen()}getRandomIntInclusion(t,e){const n=new Uint32Array(1);window.crypto.getRandomValues(n);let i=n[0]/4294967296;return t=Math.ceil(t),e=Math.floor(e),Math.floor(i*(e-t+1))+t}colorGen(){const t=document.querySelectorAll(".code"),e=document.querySelectorAll(".color"),n="0123456789abcdef",i=["#","#","#","#","#","#"];for(let r=0;r<6;r++)i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,100)%16)],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))];for(let r=0;r<t.length;r++)t[r].innerHTML=i[r],e[r].style.backgroundColor=i[r]}lockColour(t){const e=document.getElementById(t);let n,i;e&&(n=e.previousElementSibling,console.log("color div class: "+n.className),i=e.nextElementSibling,console.log("p class: "+i.className)),"color"===n.className?(n.classList.remove("color"),n.classList.add("stay-color"),n.style.backgroundColor=i.innerHTML,console.log("prev.style.backgroundColor: "+n.style.backgroundColor),i.classList.remove("code"),i.classList.add("new-code"),e.innerHTML="Unlock"):"stay-color"===n.className&&(n.classList.remove("stay-color"),n.classList.add("color"),n.style.backgroundColor=i.innerHTML,i.classList.remove("new-code"),i.classList.add("code"),e.innerHTML="Lock")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-color-palette"]],decls:35,vars:0,consts:[[1,"wrapper"],[1,"contentBox"],[1,"colorBox"],[1,"color"],["id","lock1","color","medium",3,"click"],[1,"code"],["id","lock2","color","medium",3,"click"],["id","lock3","color","medium",3,"click"],["id","lock4","color","medium",3,"click"],["id","lock5","color","medium",3,"click"],[1,"actions"],["id","gen-btn","color","medium",3,"click"]],template:function(t,e){1&t&&(qs(0,"ion-content",0),qs(1,"ion-card",1),qs(2,"ion-card",2),Ks(3,"div",3),qs(4,"ion-button",4),no("click",function(){return e.lockColour("lock1")}),Io(5,"Lock"),Ys(),qs(6,"p",5),Io(7,"#4cae3a"),Ys(),Ys(),qs(8,"ion-card",2),Ks(9,"div",3),qs(10,"ion-button",6),no("click",function(){return e.lockColour("lock2")}),Io(11,"Lock"),Ys(),qs(12,"p",5),Io(13,"#4cae3a"),Ys(),Ys(),qs(14,"ion-card",2),Ks(15,"div",3),qs(16,"ion-button",7),no("click",function(){return e.lockColour("lock3")}),Io(17,"Lock"),Ys(),qs(18,"p",5),Io(19,"#4cae3a"),Ys(),Ys(),qs(20,"ion-card",2),Ks(21,"div",3),qs(22,"ion-button",8),no("click",function(){return e.lockColour("lock4")}),Io(23,"Lock"),Ys(),qs(24,"p",5),Io(25,"#4cae3a"),Ys(),Ys(),qs(26,"ion-card",2),Ks(27,"div",3),qs(28,"ion-button",9),no("click",function(){return e.lockColour("lock5")}),Io(29,"Lock"),Ys(),qs(30,"p",5),Io(31,"#4cae3a"),Ys(),Ys(),Ys(),qs(32,"ion-card",10),qs(33,"ion-button",11),no("click",function(){return e.colorGen()}),Io(34,"Generate"),Ys(),Ys(),Ys())},directives:[zm,Lm,Rm],styles:[".contentBox[_ngcontent-%COMP%]{width:100%;height:70vh;display:flex;justify-content:space-evenly;align-items:center}.contentBox[_ngcontent-%COMP%]   .colorBox[_ngcontent-%COMP%]{width:15%;height:70%;box-shadow:0 10px 25px -10px #0000004d;display:flex;flex-direction:column;justify-content:space-between;align-items:center}.contentBox[_ngcontent-%COMP%]   .colorBox[_ngcontent-%COMP%]   .color[_ngcontent-%COMP%]{width:100%;height:70%;border-radius:10px 10px 0 0}.stay-color[_ngcontent-%COMP%]{width:100%;height:80%;border-radius:10px 10px 0 0}.contentBox[_ngcontent-%COMP%]   .colorBox[_ngcontent-%COMP%]   .code[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:30px}.actions[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;justify-content:center;align-items:center}"]}),t})(),wx=(()=>{class t{constructor(){}ngOnInit(){document.getElementById("canvasExtractor").onclick=()=>{null!=this&&this.canvasColour()}}canvasColour(){this.colourList=[];const t=document.getElementById("canvasExtractor"),e=t.getContext("2d").getImageData(0,0,t.width,t.height).data;let n,i,r=1;for(n=0,i=e.length;n<i;n+=4){const t=this.rgbToHexFunction("rgb("+e[n]+","+e[n+1]+","+e[n+2]+")");t in this.colourList?this.colourList[t]++:this.colourList[t]=1}const s=Object.keys(this.colourList);s.sort();const o=[];let a="";console.log("before loop");let l=0;for(n=0;n<s.length;n++)if(console.log("in loop"),!o.includes(this.colourList[s[n]])&&a!=s[n].charAt(1)){o.push(this.colourList[s[n]]);const t=document.querySelector("#it"+l),e=document.querySelector("#hex"+l);console.log(s[n]),t.style.backgroundColor=s[n],e.style.backgroundColor="#ffffff",e.innerHTML=s[n],a=s[n].charAt(1),l++,r=1}return r}rgbToHexFunction(t){const e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function n(t){return("0"+parseInt(t,10).toString(16)).slice(-2)}return"#"+n(e[1])+n(e[2])+n(e[3])}import(){const t=document.getElementById("canvasExtractor"),e=t.getContext("2d");let n=new Image;const i=document.getElementById("cc-upload-file"),r=new FileReader;return i.click(),i.addEventListener("change",()=>{const t=i.files[0];if(t)try{r.readAsDataURL(t)}catch(e){console.log(e.message)}}),r.addEventListener("load",()=>{n=new Image,n.src=r.result,n.onload=()=>{if(n.width>512){const t=512/n.width;n.width=512,n.height=n.height*t}if(n.height>512){const t=512/n.height;n.height=512,n.width=n.width*t}t.width=n.width,t.height=n.height,e.drawImage(n,0,0,n.width,n.height),t.removeAttribute("data-caman-id")}},!1),document.getElementById("reload").style.visibility="visible",null}reloadPage(){const t=document.getElementById("canvasExtractor");t.getContext("2d").clearRect(0,0,t.width,t.height);for(let e=0;e<20;e++){const t=document.querySelector("#it"+e);t.style.backgroundColor="",t.innerHTML=""}this.colourList=[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-canvas-colours"]],decls:58,vars:0,consts:[[2,"height","100%"],["id","canvasExtractor","height","350","width","512",2,"border","1px dashed #818181"],["color","medium","id","reload","hidden","",3,"click"],["color","medium",3,"click"],["type","file","id","cc-upload-file","accept","image/*"],[1,"grid-container"],["id","it0",1,"grid-item"],["id","hex0"],["id","it1",1,"grid-item"],["id","hex1"],["id","it2",1,"grid-item"],["id","hex2"],["id","it3",1,"grid-item"],["id","hex3"],["id","it4",1,"grid-item"],["id","hex4"],["id","it5",1,"grid-item"],["id","hex5"],["id","it6",1,"grid-item"],["id","hex6"],["id","it7",1,"grid-item"],["id","hex7"],["id","it8",1,"grid-item"],["id","hex8"],["id","it9",1,"grid-item"],["id","hex9"],["id","it10",1,"grid-item"],["id","hex10"],["id","it11",1,"grid-item"],["id","hex11"],["id","it12",1,"grid-item"],["id","hex12"],["id","it13",1,"grid-item"],["id","hex13"],["id","it14",1,"grid-item"],["id","hex14"],["id","it15",1,"grid-item"],["id","hex15"],["id","it16",1,"grid-item"],["id","hex16"],["id","it17",1,"grid-item"],["id","hex17"],["id","it18",1,"grid-item"],["id","hex18"],["id","it19",1,"grid-item"],["id","hex19"]],template:function(t,e){1&t&&(qs(0,"ion-content",0),qs(1,"ion-card"),qs(2,"ion-card-header"),Io(3," Upload an image "),Ys(),qs(4,"ion-card-content"),Ks(5,"canvas",1),Ks(6,"br"),Ks(7,"br"),qs(8,"ion-button",2),no("click",function(){return e.reloadPage()}),Io(9," clear "),Ys(),qs(10,"ion-button",3),no("click",function(){return e.import()}),Io(11,"Import"),Ys(),Ks(12,"input",4),Ys(),Ys(),qs(13,"ion-card"),qs(14,"ion-card-header"),Io(15," Tap on pattern to extract colours "),Ys(),qs(16,"ion-card-content"),qs(17,"ion-grid",5),qs(18,"ion-row",6),Ks(19,"p",7),Ys(),qs(20,"ion-row",8),Ks(21,"p",9),Ys(),qs(22,"ion-row",10),Ks(23,"p",11),Ys(),qs(24,"ion-row",12),Ks(25,"p",13),Ys(),qs(26,"ion-row",14),Ks(27,"p",15),Ys(),qs(28,"ion-row",16),Ks(29,"p",17),Ys(),qs(30,"ion-row",18),Ks(31,"p",19),Ys(),qs(32,"ion-row",20),Ks(33,"p",21),Ys(),qs(34,"ion-row",22),Ks(35,"p",23),Ys(),qs(36,"ion-row",24),Ks(37,"p",25),Ys(),qs(38,"ion-row",26),Ks(39,"p",27),Ys(),qs(40,"ion-row",28),Ks(41,"p",29),Ys(),qs(42,"ion-row",30),Ks(43,"p",31),Ys(),qs(44,"ion-row",32),Ks(45,"p",33),Ys(),qs(46,"ion-row",34),Ks(47,"p",35),Ys(),qs(48,"ion-row",36),Ks(49,"p",37),Ys(),qs(50,"ion-row",38),Ks(51,"p",39),Ys(),qs(52,"ion-row",40),Ks(53,"p",41),Ys(),qs(54,"ion-row",42),Ks(55,"p",43),Ys(),qs(56,"ion-row",44),Ks(57,"p",45),Ys(),Ys(),Ys(),Ys(),Ys())},directives:[zm,Lm,jm,Fm,Rm,Vm,Km],styles:[".grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto}.grid-item[_ngcontent-%COMP%]{padding:5%;text-align:center}#cc-upload-file[_ngcontent-%COMP%]{opacity:0}p[_ngcontent-%COMP%]{background-color:#fff}"]}),t})();var Cx=Math.PI/180;const xx="undefined"!=typeof global?global:"undefined"!=typeof window?window:"undefined"!=typeof WorkerGlobalScope?self:{},Sx={_global:xx,version:"8.1.3",isBrowser:"undefined"!=typeof window&&("[object Window]"==={}.toString.call(window)||"[object global]"==={}.toString.call(window)),isUnminified:/param/.test((function(t){}).toString()),dblClickWindow:400,getAngle:t=>Sx.angleDeg?t*Cx:t,enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,pixelRatio:"undefined"!=typeof window&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging:()=>Sx.DD.isDragging,isDragReady:()=>!!Sx.DD.node,document:xx.document,_injectGlobal(t){xx.Konva=t}},kx=t=>{Sx[t.prototype.getClassName()]=t};Sx._injectGlobal(Sx);class Tx{constructor(t=[1,0,0,1,0,0]){this.dirty=!1,this.m=t&&t.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new Tx(this.m)}copyInto(t){t.m[0]=this.m[0],t.m[1]=this.m[1],t.m[2]=this.m[2],t.m[3]=this.m[3],t.m[4]=this.m[4],t.m[5]=this.m[5]}point(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}}translate(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this}scale(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this}rotate(t){var e=Math.cos(t),n=Math.sin(t),i=this.m[1]*e+this.m[3]*n,r=this.m[0]*-n+this.m[2]*e,s=this.m[1]*-n+this.m[3]*e;return this.m[0]=this.m[0]*e+this.m[2]*n,this.m[1]=i,this.m[2]=r,this.m[3]=s,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(t,e){var n=this.m[1]+this.m[3]*e,i=this.m[2]+this.m[0]*t,r=this.m[3]+this.m[1]*t;return this.m[0]=this.m[0]+this.m[2]*e,this.m[1]=n,this.m[2]=i,this.m[3]=r,this}multiply(t){var e=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],r=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],s=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=this.m[0]*t.m[0]+this.m[2]*t.m[1],this.m[1]=e,this.m[2]=n,this.m[3]=i,this.m[4]=r,this.m[5]=s,this}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=-this.m[1]*t,n=-this.m[2]*t,i=this.m[0]*t,r=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),s=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=this.m[3]*t,this.m[1]=e,this.m[2]=n,this.m[3]=i,this.m[4]=r,this.m[5]=s,this}getMatrix(){return this.m}setAbsolutePosition(t,e){var n=this.m[0],i=this.m[1],r=this.m[2],s=this.m[4],o=(n*(e-this.m[5])-i*(t-s))/(n*this.m[3]-i*r);return this.translate((t-s-r*o)/n,o)}decompose(){var t=this.m[0],e=this.m[1],n=this.m[2],i=this.m[3],r=t*i-e*n;let s={x:this.m[4],y:this.m[5],rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(0!=t||0!=e){var o=Math.sqrt(t*t+e*e);s.rotation=e>0?Math.acos(t/o):-Math.acos(t/o),s.scaleX=o,s.scaleY=r/o,s.skewX=(t*n+e*i)/r,s.skewY=0}else if(0!=n||0!=i){var a=Math.sqrt(n*n+i*i);s.rotation=Math.PI/2-(i>0?Math.acos(-n/a):-Math.acos(n/a)),s.scaleX=r/a,s.scaleY=a,s.skewX=0,s.skewY=(t*n+e*i)/r}return s.rotation=Rx._getRotation(s.rotation),s}}var Ex=Math.PI/180,Ox=180/Math.PI,Px="Konva error: ",Ax={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},Mx=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ix=[];const Dx="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||function(t){setTimeout(t,60)},Rx={_isElement:t=>!(!t||1!=t.nodeType),_isFunction:t=>!!(t&&t.constructor&&t.call&&t.apply),_isPlainObject:t=>!!t&&t.constructor===Object,_isArray:t=>"[object Array]"===Object.prototype.toString.call(t),_isNumber:t=>"[object Number]"===Object.prototype.toString.call(t)&&!isNaN(t)&&isFinite(t),_isString:t=>"[object String]"===Object.prototype.toString.call(t),_isBoolean:t=>"[object Boolean]"===Object.prototype.toString.call(t),isObject:t=>t instanceof Object,isValidSelector(t){if("string"!=typeof t)return!1;var e=t[0];return"#"===e||"."===e||e===e.toUpperCase()},_sign:t=>0===t||t>0?1:-1,requestAnimFrame(t){Ix.push(t),1===Ix.length&&Dx(function(){const t=Ix;Ix=[],t.forEach(function(t){t()})})},createCanvasElement(){var t=document.createElement("canvas");try{t.style=t.style||{}}catch(e){}return t},createImageElement:()=>document.createElement("img"),_isInDocument(t){for(;t=t.parentNode;)if(t==document)return!0;return!1},_urlToImage(t,e){var n=Rx.createImageElement();n.onload=function(){e(n)},n.src=t},_rgbToHex:(t,e,n)=>((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1),_hexToRgb(t){t=t.replace("#","");var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t="0"+t;return"#"+t},getRGB(t){var e;return t in Ax?{r:(e=Ax[t])[0],g:e[1],b:e[2]}:"#"===t[0]?this._hexToRgb(t.substring(1)):"rgb("===t.substr(0,4)?(e=Mx.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA:t=>Rx._namedColorToRBA(t=t||"black")||Rx._hex3ColorToRGBA(t)||Rx._hex6ColorToRGBA(t)||Rx._rgbColorToRGBA(t)||Rx._rgbaColorToRGBA(t)||Rx._hslColorToRGBA(t),_namedColorToRBA(t){var e=Ax[t.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(t){if(0===t.indexOf("rgb(")){var e=(t=t.match(/rgb\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(t){if(0===t.indexOf("rgba(")){var e=(t=t.match(/rgba\(([^)]+)\)/)[1]).split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(t){if("#"===t[0]&&7===t.length)return{r:parseInt(t.slice(1,3),16),g:parseInt(t.slice(3,5),16),b:parseInt(t.slice(5,7),16),a:1}},_hex3ColorToRGBA(t){if("#"===t[0]&&4===t.length)return{r:parseInt(t[1]+t[1],16),g:parseInt(t[2]+t[2],16),b:parseInt(t[3]+t[3],16),a:1}},_hslColorToRGBA(t){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(t)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(t),i=Number(n[0])/360,r=Number(n[1])/100,s=Number(n[2])/100;let o,a,l;if(0===r)return l=255*s,{r:Math.round(l),g:Math.round(l),b:Math.round(l),a:1};o=s<.5?s*(1+r):s+r-s*r;const c=2*s-o,h=[0,0,0];for(let t=0;t<3;t++)a=i+1/3*-(t-1),a<0&&a++,a>1&&a--,l=6*a<1?c+6*(o-c)*a:2*a<1?o:3*a<2?c+(o-c)*(2/3-a)*6:c,h[t]=255*l;return{r:Math.round(h[0]),g:Math.round(h[1]),b:Math.round(h[2]),a:1}}},haveIntersection:(t,e)=>!(e.x>t.x+t.width||e.x+e.width<t.x||e.y>t.y+t.height||e.y+e.height<t.y),cloneObject(t){var e={};for(var n in t)e[n]=this._isPlainObject(t[n])?this.cloneObject(t[n]):this._isArray(t[n])?this.cloneArray(t[n]):t[n];return e},cloneArray:t=>t.slice(0),degToRad:t=>t*Ex,radToDeg:t=>t*Ox,_degToRad:t=>(Rx.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),Rx.degToRad(t)),_radToDeg:t=>(Rx.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),Rx.radToDeg(t)),_getRotation:t=>Sx.angleDeg?Rx.radToDeg(t):t,_capitalize:t=>t.charAt(0).toUpperCase()+t.slice(1),throw(t){throw new Error(Px+t)},error(t){console.error(Px+t)},warn(t){Sx.showWarnings&&console.warn("Konva warning: "+t)},each(t,e){for(var n in t)e(n,t[n])},_inRange:(t,e,n)=>e<=t&&t<n,_getProjectionToSegment(t,e,n,i,r,s){var o,a,l,c=(t-n)*(t-n)+(e-i)*(e-i);if(0==c)o=t,a=e,l=(r-n)*(r-n)+(s-i)*(s-i);else{var h=((r-t)*(n-t)+(s-e)*(i-e))/c;h<0?(o=t,a=e,l=(t-r)*(t-r)+(e-s)*(e-s)):h>1?(o=n,a=i,l=(n-r)*(n-r)+(i-s)*(i-s)):l=((o=t+h*(n-t))-r)*(o-r)+((a=e+h*(i-e))-s)*(a-s)}return[o,a,l]},_getProjectionToLine(t,e,n){var i=Rx.cloneObject(t),r=Number.MAX_VALUE;return e.forEach(function(s,o){if(n||o!==e.length-1){var a=e[(o+1)%e.length],l=Rx._getProjectionToSegment(s.x,s.y,a.x,a.y,t.x,t.y),c=l[1],h=l[2];h<r&&(i.x=l[0],i.y=c,r=h)}}),i},_prepareArrayForTween(t,e,n){var i,r=[],s=[];if(t.length>e.length){var o=e;e=t,t=o}for(i=0;i<t.length;i+=2)r.push({x:t[i],y:t[i+1]});for(i=0;i<e.length;i+=2)s.push({x:e[i],y:e[i+1]});var a=[];return s.forEach(function(t){var e=Rx._getProjectionToLine(t,r,n);a.push(e.x),a.push(e.y)}),a},_prepareToStringify(t){var e;for(var n in t.visitedByCircularReferenceRemoval=!0,t)if(t.hasOwnProperty(n)&&t[n]&&"object"==typeof t[n])if(e=Object.getOwnPropertyDescriptor(t,n),t[n].visitedByCircularReferenceRemoval||Rx._isElement(t[n])){if(!e.configurable)return null;delete t[n]}else if(null===Rx._prepareToStringify(t[n])){if(!e.configurable)return null;delete t[n]}return delete t.visitedByCircularReferenceRemoval,t},_assign(t,e){for(var n in e)t[n]=e[n];return t},_getFirstPointerId:t=>t.touches?t.changedTouches[0].identifier:999};function Lx(t){return Rx._isString(t)?'"'+t+'"':"[object Number]"===Object.prototype.toString.call(t)||Rx._isBoolean(t)?t:Object.prototype.toString.call(t)}function Fx(t){return t>255?255:t<0?0:Math.round(t)}function jx(){if(Sx.isUnminified)return function(t,e){return Rx._isNumber(t)||Rx.warn(Lx(t)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),t}}function Nx(t){if(Sx.isUnminified)return function(e,n){let i=Rx._isNumber(e),r=Rx._isArray(e)&&e.length==t;return i||r||Rx.warn(Lx(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+t+")"),e}}function Bx(){if(Sx.isUnminified)return function(t,e){return Rx._isNumber(t)||"auto"===t||Rx.warn(Lx(t)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),t}}function $x(){if(Sx.isUnminified)return function(t,e){return Rx._isString(t)||Rx.warn(Lx(t)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),t}}function zx(){if(Sx.isUnminified)return function(t,e){const n=Rx._isString(t),i="[object CanvasGradient]"===Object.prototype.toString.call(t)||t&&t.addColorStop;return n||i||Rx.warn(Lx(t)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),t}}function Vx(){if(Sx.isUnminified)return function(t,e){return!0===t||!1===t||Rx.warn(Lx(t)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),t}}var Gx="get",Ux="set";const Hx={addGetterSetter(t,e,n,i,r){Hx.addGetter(t,e,n),Hx.addSetter(t,e,i,r),Hx.addOverloadedGetterSetter(t,e)},addGetter(t,e,n){var i=Gx+Rx._capitalize(e);t.prototype[i]=t.prototype[i]||function(){var t=this.attrs[e];return void 0===t?n:t}},addSetter(t,e,n,i){var r=Ux+Rx._capitalize(e);t.prototype[r]||Hx.overWriteSetter(t,e,n,i)},overWriteSetter(t,e,n,i){var r=Ux+Rx._capitalize(e);t.prototype[r]=function(t){return n&&null!=t&&(t=n.call(this,t,e)),this._setAttr(e,t),i&&i.call(this),this}},addComponentsGetterSetter(t,e,n,i,r){var s,o,a=n.length,l=Rx._capitalize,c=Gx+l(e),h=Ux+l(e);t.prototype[c]=function(){var t={};for(s=0;s<a;s++)t[o=n[s]]=this.getAttr(e+l(o));return t};var u=function(t){if(Sx.isUnminified)return function(e,n){return Rx.isObject(e)||Rx.warn(Lx(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+t),e}}(n);t.prototype[h]=function(t){var n,s=this.attrs[e];for(n in i&&(t=i.call(this,t)),u&&u.call(this,t,e),t)t.hasOwnProperty(n)&&this._setAttr(e+l(n),t[n]);return this._fireChangeEvent(e,s,t),r&&r.call(this),this},Hx.addOverloadedGetterSetter(t,e)},addOverloadedGetterSetter(t,e){var n=Rx._capitalize(e),i=Ux+n,r=Gx+n;t.prototype[e]=function(){return arguments.length?(this[i](arguments[0]),this):this[r]()}},addDeprecatedGetterSetter(t,e,n,i){Rx.error("Adding deprecated "+e);var r=Gx+Rx._capitalize(e),s=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";t.prototype[r]=function(){Rx.error(s);var t=this.attrs[e];return void 0===t?n:t},Hx.addSetter(t,e,i,function(){Rx.error(s)}),Hx.addOverloadedGetterSetter(t,e)},backCompat(t,e){Rx.each(e,function(e,n){var i=t.prototype[n],r=Gx+Rx._capitalize(e),s=Ux+Rx._capitalize(e);function o(){i.apply(this,arguments),Rx.error('"'+e+'" method is deprecated and will be removed soon. Use ""'+n+'" instead.')}t.prototype[e]=o,t.prototype[r]=o,t.prototype[s]=o})},afterSetFilter(){this._filterUpToDate=!1}};function Wx(t){var e,n,i=[],r=t.length,s=Rx;for(e=0;e<r;e++)s._isNumber(n=t[e])?n=Math.round(1e3*n)/1e3:s._isString(n)||(n+=""),i.push(n);return i}var Xx,qx=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];class Yx{constructor(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Sx.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(t){t.fillEnabled()&&this._fill(t)}_fill(t){}strokeShape(t){t.hasStroke()&&this._stroke(t)}_stroke(t){}fillStrokeShape(t){t.attrs.fillAfterStrokeEnabled?(this.strokeShape(t),this.fillShape(t)):(this.fillShape(t),this.strokeShape(t))}getTrace(t,e){var n,i,r,s,o=this.traceArr,a=o.length,l="";for(n=0;n<a;n++)(r=(i=o[n]).method)?(s=i.args,l+=r,t?l+="()":Rx._isArray(s[0])?l+="(["+s.join(",")+"])":(e&&(s=s.map(t=>"number"==typeof t?Math.floor(t):t)),l+="("+s.join(",")+")")):(l+=i.property,t||(l+="="+i.val)),l+=";";return l}clearTrace(){this.traceArr=[]}_trace(t){var e=this.traceArr;e.push(t),e.length>=100&&e.shift()}reset(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)}getCanvas(){return this.canvas}clear(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth()/e.pixelRatio,e.getHeight()/e.pixelRatio)}_applyLineCap(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)}_applyOpacity(t){var e=t.getAbsoluteOpacity();1!==e&&this.setAttr("globalAlpha",e)}_applyLineJoin(t){var e=t.attrs.lineJoin;e&&this.setAttr("lineJoin",e)}setAttr(t,e){this._context[t]=e}arc(t,e,n,i,r,s){this._context.arc(t,e,n,i,r,s)}arcTo(t,e,n,i,r){this._context.arcTo(t,e,n,i,r)}beginPath(){this._context.beginPath()}bezierCurveTo(t,e,n,i,r,s){this._context.bezierCurveTo(t,e,n,i,r,s)}clearRect(t,e,n,i){this._context.clearRect(t,e,n,i)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(t,e){var n=arguments;return 2===n.length?this._context.createImageData(t,e):1===n.length?this._context.createImageData(t):void 0}createLinearGradient(t,e,n,i){return this._context.createLinearGradient(t,e,n,i)}createPattern(t,e){return this._context.createPattern(t,e)}createRadialGradient(t,e,n,i,r,s){return this._context.createRadialGradient(t,e,n,i,r,s)}drawImage(t,e,n,i,r,s,o,a,l){var c=arguments,h=this._context;3===c.length?h.drawImage(t,e,n):5===c.length?h.drawImage(t,e,n,i,r):9===c.length&&h.drawImage(t,e,n,i,r,s,o,a,l)}ellipse(t,e,n,i,r,s,o,a){this._context.ellipse(t,e,n,i,r,s,o,a)}isPointInPath(t,e){return this._context.isPointInPath(t,e)}fill(t){t?this._context.fill(t):this._context.fill()}fillRect(t,e,n,i){this._context.fillRect(t,e,n,i)}strokeRect(t,e,n,i){this._context.strokeRect(t,e,n,i)}fillText(t,e,n,i){i?this._context.fillText(t,e,n,i):this._context.fillText(t,e,n)}measureText(t){return this._context.measureText(t)}getImageData(t,e,n,i){return this._context.getImageData(t,e,n,i)}lineTo(t,e){this._context.lineTo(t,e)}moveTo(t,e){this._context.moveTo(t,e)}rect(t,e,n,i){this._context.rect(t,e,n,i)}putImageData(t,e,n){this._context.putImageData(t,e,n)}quadraticCurveTo(t,e,n,i){this._context.quadraticCurveTo(t,e,n,i)}restore(){this._context.restore()}rotate(t){this._context.rotate(t)}save(){this._context.save()}scale(t,e){this._context.scale(t,e)}setLineDash(t){this._context.setLineDash?this._context.setLineDash(t):"mozDash"in this._context?this._context.mozDash=t:"webkitLineDash"in this._context&&(this._context.webkitLineDash=t)}getLineDash(){return this._context.getLineDash()}setTransform(t,e,n,i,r,s){this._context.setTransform(t,e,n,i,r,s)}stroke(t){t?this._context.stroke(t):this._context.stroke()}strokeText(t,e,n,i){this._context.strokeText(t,e,n,i)}transform(t,e,n,i,r,s){this._context.transform(t,e,n,i,r,s)}translate(t,e){this._context.translate(t,e)}_enableTrace(){var t,e,n=this,i=qx.length,r=this.setAttr,s=function(t){var i,r=n[t];n[t]=function(){return e=Wx(Array.prototype.slice.call(arguments,0)),i=r.apply(n,arguments),n._trace({method:t,args:e}),i}};for(t=0;t<i;t++)s(qx[t]);n.setAttr=function(){r.apply(n,arguments);var t=arguments[0],e=arguments[1];"shadowOffsetX"!==t&&"shadowOffsetY"!==t&&"shadowBlur"!==t||(e/=this.canvas.getPixelRatio()),n._trace({property:t,val:e})}}_applyGlobalCompositeOperation(t){const e=t.attrs.globalCompositeOperation;!e||"source-over"===e||this.setAttr("globalCompositeOperation",e)}}["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"].forEach(function(t){Object.defineProperty(Yx.prototype,t,{get(){return this._context[t]},set(e){this._context[t]=e}})});class Kx extends Yx{_fillColor(t){var e=t.fill();this.setAttr("fillStyle",e),t._fillFunc(this)}_fillPattern(t){this.setAttr("fillStyle",t._getFillPattern()),t._fillFunc(this)}_fillLinearGradient(t){var e=t._getLinearGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fillRadialGradient(t){var e=t._getRadialGradient();e&&(this.setAttr("fillStyle",e),t._fillFunc(this))}_fill(t){var e=t.fill(),n=t.getFillPriority();if(e&&"color"===n)this._fillColor(t);else{var i=t.getFillPatternImage();if(i&&"pattern"===n)this._fillPattern(t);else{var r=t.getFillLinearGradientColorStops();if(r&&"linear-gradient"===n)this._fillLinearGradient(t);else{var s=t.getFillRadialGradientColorStops();s&&"radial-gradient"===n?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):r?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)}}}}_strokeLinearGradient(t){var e=t.getStrokeLinearGradientStartPoint(),n=t.getStrokeLinearGradientEndPoint(),i=t.getStrokeLinearGradientColorStops(),r=this.createLinearGradient(e.x,e.y,n.x,n.y);if(i){for(var s=0;s<i.length;s+=2)r.addColorStop(i[s],i[s+1]);this.setAttr("strokeStyle",r)}}_stroke(t){var e=t.dash(),n=t.getStrokeScaleEnabled();if(t.hasStroke()){if(!n){this.save();var i=this.getCanvas().getPixelRatio();this.setTransform(i,0,0,i,0,0)}this._applyLineCap(t),e&&t.dashEnabled()&&(this.setLineDash(e),this.setAttr("lineDashOffset",t.dashOffset())),this.setAttr("lineWidth",t.strokeWidth()),t.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)"),t.getStrokeLinearGradientColorStops()?this._strokeLinearGradient(t):this.setAttr("strokeStyle",t.stroke()),t._strokeFunc(this),n||this.restore()}}_applyShadow(t){var e,n,i,r=null!==(e=t.getShadowRGBA())&&void 0!==e?e:"black",s=null!==(n=t.getShadowBlur())&&void 0!==n?n:5,o=null!==(i=t.getShadowOffset())&&void 0!==i?i:{x:0,y:0},a=t.getAbsoluteScale(),l=this.canvas.getPixelRatio(),c=a.x*l,h=a.y*l;this.setAttr("shadowColor",r),this.setAttr("shadowBlur",s*Math.min(Math.abs(c),Math.abs(h))),this.setAttr("shadowOffsetX",o.x*c),this.setAttr("shadowOffsetY",o.y*h)}}class Zx extends Yx{_fill(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()}strokeShape(t){t.hasHitStroke()&&this._stroke(t)}_stroke(t){if(t.hasHitStroke()){var e=t.getStrokeScaleEnabled();if(!e){this.save();var n=this.getCanvas().getPixelRatio();this.setTransform(n,0,0,n,0,0)}this._applyLineCap(t);var i=t.hitStrokeWidth(),r="auto"===i?t.strokeWidth():i;this.setAttr("lineWidth",r),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this),e||this.restore()}}}let Qx=(()=>{class t{constructor(t){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var e=(t||{}).pixelRatio||Sx.pixelRatio||function(){if(Xx)return Xx;var t=Rx.createCanvasElement().getContext("2d");return Xx=(Sx._global.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}();this.pixelRatio=e,this._canvas=Rx.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(t){var e=this.pixelRatio;this.pixelRatio=t,this.setSize(this.getWidth()/e,this.getHeight()/e)}setWidth(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}setHeight(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px";var e=this.pixelRatio;this.getContext()._context.scale(e,e)}getWidth(){return this.width}getHeight(){return this.height}setSize(t,e){this.setWidth(t||0),this.setHeight(e||0)}toDataURL(t,e){try{return this._canvas.toDataURL(t,e)}catch(n){try{return this._canvas.toDataURL()}catch(i){return Rx.error("Unable to get data URL. "+i.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}return Hx.addGetterSetter(t,"pixelRatio",void 0,jx()),t})();class Jx extends Qx{constructor(t={width:0,height:0}){super(t),this.context=new Kx(this),this.setSize(t.width,t.height)}}class tS extends Qx{constructor(t={width:0,height:0}){super(t),this.hitCanvas=!0,this.context=new Zx(this),this.setSize(t.width,t.height)}}const eS={get isDragging(){var t=!1;return eS._dragElements.forEach(e=>{"dragging"===e.dragStatus&&(t=!0)}),t},justDragged:!1,get node(){var t;return eS._dragElements.forEach(e=>{t=e.node}),t},_dragElements:new Map,_drag(t){const e=[];eS._dragElements.forEach((n,i)=>{const{node:r}=n,s=r.getStage();s.setPointersPositions(t),void 0===n.pointerId&&(n.pointerId=Rx._getFirstPointerId(t));const o=s._changedPointerPositions.find(t=>t.id===n.pointerId);if(o){if("dragging"!==n.dragStatus){var a=r.dragDistance();if(Math.max(Math.abs(o.x-n.startPointerPos.x),Math.abs(o.y-n.startPointerPos.y))<a)return;if(r.startDrag({evt:t}),!r.isDragging())return}r._setDragPosition(t,n),e.push(r)}}),e.forEach(e=>{e.fire("dragmove",{type:"dragmove",target:e,evt:t},!0)})},_endDragBefore(t){eS._dragElements.forEach(e=>{const{node:n}=e,i=n.getStage();if(t&&i.setPointersPositions(t),!i._changedPointerPositions.find(t=>t.id===e.pointerId))return;"dragging"!==e.dragStatus&&"stopped"!==e.dragStatus||(eS.justDragged=!0,Sx._mouseListenClick=!1,Sx._touchListenClick=!1,Sx._pointerListenClick=!1,e.dragStatus="stopped");const r=e.node.getLayer()||e.node instanceof Sx.Stage&&e.node;r&&r.batchDraw()})},_endDragAfter(t){eS._dragElements.forEach((e,n)=>{"stopped"===e.dragStatus&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:t},!0),"dragging"!==e.dragStatus&&eS._dragElements.delete(n)})}};Sx.isBrowser&&(window.addEventListener("mouseup",eS._endDragBefore,!0),window.addEventListener("touchend",eS._endDragBefore,!0),window.addEventListener("mousemove",eS._drag),window.addEventListener("touchmove",eS._drag),window.addEventListener("mouseup",eS._endDragAfter,!1),window.addEventListener("touchend",eS._endDragAfter,!1));var nS="absoluteOpacity",iS="allEventListeners",rS="absoluteTransform",sS="absoluteScale",oS="canvas",aS="listening",lS="mouseenter",cS="mouseleave",hS="Shape",uS=" ",dS="stage",fS="transform",pS="visible",gS=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(uS);let mS=1;class vS{constructor(t){this._id=mS++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(t),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(t){t!==fS&&t!==rS||!this._cache.get(t)?t?this._cache.delete(t):this._cache.clear():this._cache.get(t).dirty=!0}_getCache(t,e){var n=this._cache.get(t);return(void 0===n||(t===fS||t===rS)&&!0===n.dirty)&&(n=e.call(this),this._cache.set(t,n)),n}_calculate(t,e,n){if(!this._attachedDepsListeners.get(t)){const n=e.map(t=>t+"Change.konva").join(uS);this.on(n,()=>{this._clearCache(t)}),this._attachedDepsListeners.set(t,!0)}return this._getCache(t,n)}_getCanvasCache(){return this._cache.get(oS)}_clearSelfAndDescendantCache(t){this._clearCache(t),t===rS&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(oS),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(t){var e=t||{},n={};void 0!==e.x&&void 0!==e.y&&void 0!==e.width&&void 0!==e.height||(n=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var i=Math.ceil(e.width||n.width),r=Math.ceil(e.height||n.height),s=e.pixelRatio,o=void 0===e.x?n.x:e.x,a=void 0===e.y?n.y:e.y,l=e.offset||0,c=e.drawBorder||!1,h=e.hitCanvasPixelRatio||1;if(i&&r){o-=l,a-=l;var u=new Jx({pixelRatio:s,width:i+=2*l,height:r+=2*l}),d=new Jx({pixelRatio:s,width:0,height:0}),f=new tS({pixelRatio:h,width:i,height:r}),p=u.getContext(),g=f.getContext();return f.isCache=!0,u.isCache=!0,this._cache.delete(oS),this._filterUpToDate=!1,!1===e.imageSmoothingEnabled&&(u.getContext()._context.imageSmoothingEnabled=!1,d.getContext()._context.imageSmoothingEnabled=!1),p.save(),g.save(),p.translate(-o,-a),g.translate(-o,-a),this._isUnderCache=!0,this._clearSelfAndDescendantCache(nS),this._clearSelfAndDescendantCache(sS),this.drawScene(u,this),this.drawHit(f,this),this._isUnderCache=!1,p.restore(),g.restore(),c&&(p.save(),p.beginPath(),p.rect(0,0,i,r),p.closePath(),p.setAttr("strokeStyle","red"),p.setAttr("lineWidth",5),p.stroke(),p.restore()),this._cache.set(oS,{scene:u,filter:d,hit:f,x:o,y:a}),this._requestDraw(),this}Rx.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.")}isCached(){return this._cache.has(oS)}getClientRect(t){throw new Error('abstract "getClientRect" method call')}_transformedRect(t,e){var n,i,r,s,o=[{x:t.x,y:t.y},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height},{x:t.x,y:t.y+t.height}],a=this.getAbsoluteTransform(e);return o.forEach(function(t){var e=a.point(t);void 0===n&&(n=r=e.x,i=s=e.y),n=Math.min(n,e.x),i=Math.min(i,e.y),r=Math.max(r,e.x),s=Math.max(s,e.y)}),{x:n,y:i,width:r-n,height:s-i}}_drawCachedSceneCanvas(t){t.save(),t._applyOpacity(this),t._applyGlobalCompositeOperation(this);const e=this._getCanvasCache();t.translate(e.x,e.y);var n=this._getCachedSceneCanvas(),i=n.pixelRatio;t.drawImage(n._canvas,0,0,n.width/i,n.height/i),t.restore()}_drawCachedHitCanvas(t){var e=this._getCanvasCache(),n=e.hit;t.save(),t.translate(e.x,e.y),t.drawImage(n._canvas,0,0,n.width/n.pixelRatio,n.height/n.pixelRatio),t.restore()}_getCachedSceneCanvas(){var t,e,n,i,r=this.filters(),s=this._getCanvasCache(),o=s.scene,a=s.filter,l=a.getContext();if(r){if(!this._filterUpToDate){var c=o.pixelRatio;a.setSize(o.width/o.pixelRatio,o.height/o.pixelRatio);try{for(t=r.length,l.clear(),l.drawImage(o._canvas,0,0,o.getWidth()/c,o.getHeight()/c),e=l.getImageData(0,0,a.getWidth(),a.getHeight()),n=0;n<t;n++)"function"==typeof(i=r[n])?(i.call(this,e),l.putImageData(e,0,0)):Rx.error("Filter should be type of function, but got "+typeof i+" instead. Please check correct filters")}catch(h){Rx.error("Unable to apply filter. "+h.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return a}return o}on(t,e){if(this._cache&&this._cache.delete(iS),3===arguments.length)return this._delegate.apply(this,arguments);var n,i,r,s,o=t.split(uS),a=o.length;for(n=0;n<a;n++)s=(i=o[n].split("."))[1]||"",this.eventListeners[r=i[0]]||(this.eventListeners[r]=[]),this.eventListeners[r].push({name:s,handler:e});return this}off(t,e){var n,i,r,s,o,a=(t||"").split(uS),l=a.length;if(this._cache&&this._cache.delete(iS),!t)for(i in this.eventListeners)this._off(i);for(n=0;n<l;n++)if(o=(r=a[n].split("."))[1],s=r[0])this.eventListeners[s]&&this._off(s,o,e);else for(i in this.eventListeners)this._off(i,o,e);return this}dispatchEvent(t){return this.fire(t.type,{target:this,type:t.type,evt:t}),this}addEventListener(t,e){return this.on(t,function(t){e.call(this,t.evt)}),this}removeEventListener(t){return this.off(t),this}_delegate(t,e,n){var i=this;this.on(t,function(t){for(var r=t.target.findAncestors(e,!0,i),s=0;s<r.length;s++)(t=Rx.cloneObject(t)).currentTarget=r[s],n.call(r[s],t)})}remove(){return this.isDragging()&&this.stopDrag(),eS._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(rS),this._clearSelfAndDescendantCache(nS),this._clearSelfAndDescendantCache(sS),this._clearSelfAndDescendantCache(dS),this._clearSelfAndDescendantCache(pS),this._clearSelfAndDescendantCache(aS)}_remove(){this._clearCaches();var t=this.getParent();t&&t.children&&(t.children.splice(this.index,1),t._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(t){var e="get"+Rx._capitalize(t);return Rx._isFunction(this[e])?this[e]():this.attrs[t]}getAncestors(){for(var t=this.getParent(),e=[];t;)e.push(t),t=t.getParent();return e}getAttrs(){return this.attrs||{}}setAttrs(t){return this._batchTransformChanges(()=>{var e,n;if(!t)return this;for(e in t)"children"!==e&&(n="set"+Rx._capitalize(e),Rx._isFunction(this[n])?this[n](t[e]):this._setAttr(e,t[e]))}),this}isListening(){return this._getCache(aS,this._isListening)}_isListening(t){if(!this.listening())return!1;const e=this.getParent();return!e||e===t||this===t||e._isListening(t)}isVisible(){return this._getCache(pS,this._isVisible)}_isVisible(t){if(!this.visible())return!1;const e=this.getParent();return!e||e===t||this===t||e._isVisible(t)}shouldDrawHit(t,e=!1){if(t)return this._isVisible(t)&&this._isListening(t);var n=this.getLayer(),i=!1;eS._dragElements.forEach(t=>{"dragging"===t.dragStatus&&("Stage"===t.node.nodeType||t.node.getLayer()===n)&&(i=!0)});var r=!e&&!Sx.hitOnDragEnabled&&i;return this.isListening()&&this.isVisible()&&!r}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var t,e,n,i,r=this.getDepth(),s=this,o=0;return"Stage"!==s.nodeType&&function a(l){for(t=[],e=l.length,n=0;n<e;n++)o++,(i=l[n]).nodeType!==hS&&(t=t.concat(i.getChildren().slice())),i._id===s._id&&(n=e);t.length>0&&t[0].getDepth()<=r&&a(t)}(s.getStage().getChildren()),o}getDepth(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t}_batchTransformChanges(t){this._batchingTransformChange=!0,t(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(fS),this._clearSelfAndDescendantCache(rS)),this._needClearTransformCache=!1}setPosition(t){return this._batchTransformChanges(()=>{this.x(t.x),this.y(t.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var t=this.getStage().getPointerPosition();if(!t)return null;var e=this.getAbsoluteTransform().copy();return e.invert(),e.point(t)}getAbsolutePosition(t){let e=!1,n=this.parent;for(;n;){if(n.isCached()){e=!0;break}n=n.parent}e&&!t&&(t=!0);var i=this.getAbsoluteTransform(t).getMatrix(),r=new Tx,s=this.offset();return r.m=i.slice(),r.translate(s.x,s.y),r.getTranslation()}setAbsolutePosition(t){var e=this._clearTransform();this.attrs.x=e.x,this.attrs.y=e.y,delete e.x,delete e.y,this._clearCache(fS);var n=this._getAbsoluteTransform().copy();return n.invert(),n.translate(t.x,t.y),t={x:this.attrs.x+n.getTranslation().x,y:this.attrs.y+n.getTranslation().y},this._setTransform(e),this.setPosition({x:t.x,y:t.y}),this._clearCache(fS),this._clearSelfAndDescendantCache(rS),this}_setTransform(t){var e;for(e in t)this.attrs[e]=t[e]}_clearTransform(){var t={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,t}move(t){var e=t.x,n=t.y,i=this.x(),r=this.y();return void 0!==e&&(i+=e),void 0!==n&&(r+=n),this.setPosition({x:i,y:r}),this}_eachAncestorReverse(t,e){var n,i,r=[],s=this.getParent();if(!e||e._id!==this._id){for(r.unshift(this);s&&(!e||s._id!==e._id);)r.unshift(s),s=s.parent;for(n=r.length,i=0;i<n;i++)t(r[i])}}rotate(t){return this.rotation(this.rotation()+t),this}moveToTop(){return this.parent?(this.parent.children.splice(this.index,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):(Rx.warn("Node has no parent. moveToTop function is ignored."),!1)}moveUp(){if(!this.parent)return Rx.warn("Node has no parent. moveUp function is ignored."),!1;var t=this.index;return t<this.parent.getChildren().length-1&&(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0)}moveDown(){if(!this.parent)return Rx.warn("Node has no parent. moveDown function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0)}moveToBottom(){if(!this.parent)return Rx.warn("Node has no parent. moveToBottom function is ignored."),!1;var t=this.index;return t>0&&(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0)}setZIndex(t){return this.parent?((t<0||t>=this.parent.children.length)&&Rx.warn("Unexpected value "+t+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+"."),this.parent.children.splice(this.index,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this):(Rx.warn("Node has no parent. zIndex parameter is ignored."),this)}getAbsoluteOpacity(){return this._getCache(nS,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var t=this.opacity(),e=this.getParent();return e&&!e._isUnderCache&&(t*=e.getAbsoluteOpacity()),t}moveTo(t){return this.getParent()!==t&&(this._remove(),t.add(this)),this}toObject(){var t,e,n,i,r={},s=this.getAttrs();for(t in r.attrs={},s)Rx.isObject(e=s[t])&&!Rx._isPlainObject(e)&&!Rx._isArray(e)||(n="function"==typeof this[t]&&this[t],delete s[t],i=n?n.call(this):null,s[t]=e,i!==e&&(r.attrs[t]=e));return r.className=this.getClassName(),Rx._prepareToStringify(r)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(t,e,n){var i=[];e&&this._isMatch(t)&&i.push(this);for(var r=this.parent;r;){if(r===n)return i;r._isMatch(t)&&i.push(r),r=r.parent}return i}isAncestorOf(t){return!1}findAncestor(t,e,n){return this.findAncestors(t,e,n)[0]}_isMatch(t){if(!t)return!1;if("function"==typeof t)return t(this);var e,n,i=t.replace(/ /g,"").split(","),r=i.length;for(e=0;e<r;e++)if(Rx.isValidSelector(n=i[e])||(Rx.warn('Selector "'+n+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),Rx.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),Rx.warn("Konva is awesome, right?")),"#"===n.charAt(0)){if(this.id()===n.slice(1))return!0}else if("."===n.charAt(0)){if(this.hasName(n.slice(1)))return!0}else if(this.className===n||this.nodeType===n)return!0;return!1}getLayer(){var t=this.getParent();return t?t.getLayer():null}getStage(){return this._getCache(dS,this._getStage)}_getStage(){var t=this.getParent();return t?t.getStage():void 0}fire(t,e={},n){return e.target=e.target||this,n?this._fireAndBubble(t,e):this._fire(t,e),this}getAbsoluteTransform(t){return t?this._getAbsoluteTransform(t):this._getCache(rS,this._getAbsoluteTransform)}_getAbsoluteTransform(t){var e;if(t)return e=new Tx,this._eachAncestorReverse(function(t){var n=t.transformsEnabled();"all"===n?e.multiply(t.getTransform()):"position"===n&&e.translate(t.x()-t.offsetX(),t.y()-t.offsetY())},t),e;e=this._cache.get(rS)||new Tx,this.parent?this.parent.getAbsoluteTransform().copyInto(e):e.reset();var n=this.transformsEnabled();return"all"===n?e.multiply(this.getTransform()):"position"===n&&e.translate((this.attrs.x||0)-(this.attrs.offsetX||0),(this.attrs.y||0)-(this.attrs.offsetY||0)),e.dirty=!1,e}getAbsoluteScale(t){for(var e=this;e;)e._isUnderCache&&(t=e),e=e.getParent();const n=this.getAbsoluteTransform(t).decompose();return{x:n.scaleX,y:n.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(fS,this._getTransform)}_getTransform(){var t,e,n=this._cache.get(fS)||new Tx;n.reset();var i=this.x(),r=this.y(),s=Sx.getAngle(this.rotation()),o=null!==(t=this.attrs.scaleX)&&void 0!==t?t:1,a=null!==(e=this.attrs.scaleY)&&void 0!==e?e:1,l=this.attrs.skewX||0,c=this.attrs.skewY||0,h=this.attrs.offsetX||0,u=this.attrs.offsetY||0;return 0===i&&0===r||n.translate(i,r),0!==s&&n.rotate(s),0===l&&0===c||n.skew(l,c),1===o&&1===a||n.scale(o,a),0===h&&0===u||n.translate(-1*h,-1*u),n.dirty=!1,n}clone(t){var e,n,i,r,s,o=Rx.cloneObject(this.attrs);for(e in t)o[e]=t[e];var a=new this.constructor(o);for(e in this.eventListeners)for(i=(n=this.eventListeners[e]).length,r=0;r<i;r++)(s=n[r]).name.indexOf("konva")<0&&(a.eventListeners[e]||(a.eventListeners[e]=[]),a.eventListeners[e].push(s));return a}_toKonvaCanvas(t){t=t||{};var e=this.getClientRect(),n=this.getStage(),i=void 0!==t.x?t.x:e.x,r=void 0!==t.y?t.y:e.y,s=t.pixelRatio||1,o=new Jx({width:t.width||e.width||(n?n.width():0),height:t.height||e.height||(n?n.height():0),pixelRatio:s}),a=o.getContext();return a.save(),(i||r)&&a.translate(-1*i,-1*r),this.drawScene(o),a.restore(),o}toCanvas(t){return this._toKonvaCanvas(t)._canvas}toDataURL(t){var e=(t=t||{}).mimeType||null,n=t.quality||null,i=this._toKonvaCanvas(t).toDataURL(e,n);return t.callback&&t.callback(i),i}toImage(t){if(!t||!t.callback)throw"callback required for toImage method config argument";var e=t.callback;delete t.callback,Rx._urlToImage(this.toDataURL(t),function(t){e(t)})}setSize(t){return this.width(t.width),this.height(t.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Sx.dragDistance}_off(t,e,n){var i,r,s=this.eventListeners[t];for(i=0;i<s.length;i++)if(!("konva"===(r=s[i].name)&&"konva"!==e||e&&r!==e||n&&n!==s[i].handler)){if(s.splice(i,1),0===s.length){delete this.eventListeners[t];break}i--}}_fireChangeEvent(t,e,n){this._fire(t+"Change",{oldVal:e,newVal:n})}addName(t){if(!this.hasName(t)){var e=this.name();this.name(e?e+" "+t:t)}return this}hasName(t){if(!t)return!1;const e=this.name();return!!e&&-1!==(e||"").split(/\s/g).indexOf(t)}removeName(t){var e=(this.name()||"").split(/\s/g),n=e.indexOf(t);return-1!==n&&(e.splice(n,1),this.name(e.join(" "))),this}setAttr(t,e){var n=this["set"+Rx._capitalize(t)];return Rx._isFunction(n)?n.call(this,e):this._setAttr(t,e),this}_requestDraw(){if(Sx.autoDrawEnabled){const t=this.getLayer()||this.getStage();null==t||t.batchDraw()}}_setAttr(t,e){var n=this.attrs[t];(n!==e||Rx.isObject(e))&&(null==e?delete this.attrs[t]:this.attrs[t]=e,this._shouldFireChangeEvents&&this._fireChangeEvent(t,n,e),this._requestDraw())}_setComponentAttr(t,e,n){var i;void 0!==n&&((i=this.attrs[t])||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=n,this._fireChangeEvent(t,i,n))}_fireAndBubble(t,e,n){if(e&&this.nodeType===hS&&(e.target=this),t!==lS&&t!==cS||!(n&&(this===n||this.isAncestorOf&&this.isAncestorOf(n))||"Stage"===this.nodeType&&!n)){this._fire(t,e);var i=(t===lS||t===cS)&&n&&n.isAncestorOf&&n.isAncestorOf(this)&&!n.isAncestorOf(this.parent);(e&&!e.cancelBubble||!e)&&this.parent&&this.parent.isListening()&&!i&&(n&&n.parent?this._fireAndBubble.call(this.parent,t,e,n):this._fireAndBubble.call(this.parent,t,e))}}_getProtoListeners(t){let e=this._cache.get(iS);if(!e){e={};let t=Object.getPrototypeOf(this);for(;t;)if(t.eventListeners){for(var n in t.eventListeners)e[n]=t.eventListeners[n].concat(e[n]||[]);t=Object.getPrototypeOf(t)}else t=Object.getPrototypeOf(t);this._cache.set(iS,e)}return e[t]}_fire(t,e){(e=e||{}).currentTarget=this,e.type=t;const n=this._getProtoListeners(t);if(n)for(var i=0;i<n.length;i++)n[i].handler.call(this,e);const r=this.eventListeners[t];if(r)for(i=0;i<r.length;i++)r[i].handler.call(this,e)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(t){var e=t?t.pointerId:void 0,n=this.getStage(),i=this.getAbsolutePosition(),r=n._getPointerById(e)||n._changedPointerPositions[0]||i;eS._dragElements.set(this._id,{node:this,startPointerPos:r,offset:{x:r.x-i.x,y:r.y-i.y},dragStatus:"ready",pointerId:e})}startDrag(t,e=!0){eS._dragElements.has(this._id)||this._createDragElement(t),eS._dragElements.get(this._id).dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:t&&t.evt},e)}_setDragPosition(t,e){const n=this.getStage()._getPointerById(e.pointerId);if(n){var i={x:n.x-e.offset.x,y:n.y-e.offset.y},r=this.dragBoundFunc();if(void 0!==r){const e=r.call(this,i,t);e?i=e:Rx.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}this._lastPos&&this._lastPos.x===i.x&&this._lastPos.y===i.y||(this.setAbsolutePosition(i),this._requestDraw()),this._lastPos=i}}stopDrag(t){const e=eS._dragElements.get(this._id);e&&(e.dragStatus="stopped"),eS._endDragBefore(t),eS._endDragAfter(t)}setDraggable(t){this._setAttr("draggable",t),this._dragChange()}isDragging(){const t=eS._dragElements.get(this._id);return!!t&&"dragging"===t.dragStatus}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(t){if((void 0===t.evt.button||Sx.dragButtons.indexOf(t.evt.button)>=0)&&!this.isDragging()){var e=!1;eS._dragElements.forEach(t=>{this.isAncestorOf(t.node)&&(e=!0)}),e||this._createDragElement(t)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{if(this._dragCleanup(),!this.getStage())return;const t=eS._dragElements.get(this._id),e=t&&"ready"===t.dragStatus;t&&"dragging"===t.dragStatus?this.stopDrag():e&&eS._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(t={x:0,y:0}){const e=this.getStage();if(!e)return!1;const n={x:-t.x,y:-t.y,width:e.width()+t.x,height:e.height()+t.y};return Rx.haveIntersection(n,this.getClientRect())}static create(t,e){return Rx._isString(t)&&(t=JSON.parse(t)),this._createNode(t,e)}static _createNode(t,e){var n,i,r,s=vS.prototype.getClassName.call(t),o=t.children;if(e&&(t.attrs.container=e),Sx[s]||(Rx.warn('Can not find a node with class name "'+s+'". Fallback to "Shape".'),s="Shape"),n=new(0,Sx[s])(t.attrs),o)for(i=o.length,r=0;r<i;r++)n.add(vS._createNode(o[r]));return n}}vS.prototype.nodeType="Node",vS.prototype._attrsAffectingSize=[],vS.prototype.eventListeners={},vS.prototype.on.call(vS.prototype,gS,function(){this._batchingTransformChange?this._needClearTransformCache=!0:(this._clearCache(fS),this._clearSelfAndDescendantCache(rS))}),vS.prototype.on.call(vS.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(pS)}),vS.prototype.on.call(vS.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(aS)}),vS.prototype.on.call(vS.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(nS)});const yS=Hx.addGetterSetter;yS(vS,"zIndex"),yS(vS,"absolutePosition"),yS(vS,"position"),yS(vS,"x",0,jx()),yS(vS,"y",0,jx()),yS(vS,"globalCompositeOperation","source-over",$x()),yS(vS,"opacity",1,jx()),yS(vS,"name","",$x()),yS(vS,"id","",$x()),yS(vS,"rotation",0,jx()),Hx.addComponentsGetterSetter(vS,"scale",["x","y"]),yS(vS,"scaleX",1,jx()),yS(vS,"scaleY",1,jx()),Hx.addComponentsGetterSetter(vS,"skew",["x","y"]),yS(vS,"skewX",0,jx()),yS(vS,"skewY",0,jx()),Hx.addComponentsGetterSetter(vS,"offset",["x","y"]),yS(vS,"offsetX",0,jx()),yS(vS,"offsetY",0,jx()),yS(vS,"dragDistance",null,jx()),yS(vS,"width",0,jx()),yS(vS,"height",0,jx()),yS(vS,"listening",!0,Vx()),yS(vS,"preventDefault",!0,Vx()),yS(vS,"filters",null,function(t){return this._filterUpToDate=!1,t}),yS(vS,"visible",!0,Vx()),yS(vS,"transformsEnabled","all",$x()),yS(vS,"size"),yS(vS,"dragBoundFunc"),yS(vS,"draggable",!1,Vx()),Hx.backCompat(vS,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});let _S=(()=>{class t extends vS{constructor(){super(...arguments),this.children=[]}getChildren(t){if(!t)return this.children||[];var e=[];return(this.children||[]).forEach(function(n){t(n)&&e.push(n)}),e}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(t=>{t.parent=null,t.index=0,t.destroy()}),this.children=[],this._requestDraw(),this}add(...t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}var n=t[0];return n.getParent()?(n.moveTo(this),this):(this._validateAdd(n),n.index=this.getChildren().length,n.parent=this,n._clearCaches(),this.getChildren().push(n),this._fire("add",{child:n}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(t){return this._generalFind(t,!1)}findOne(t){var e=this._generalFind(t,!0);return e.length>0?e[0]:void 0}_generalFind(t,e){var n=[];return this._descendants(i=>{const r=i._isMatch(t);return r&&n.push(i),!(!r||!e)}),n}_descendants(t){let e=!1;const n=this.getChildren();for(const i of n){if(e=t(i),e)return!0;if(i.hasChildren()&&(e=i._descendants(t),e))return!0}return!1}toObject(){var t=vS.prototype.toObject.call(this);return t.children=[],this.getChildren().forEach(e=>{t.children.push(e.toObject())}),t}isAncestorOf(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1}clone(t){var e=vS.prototype.clone.call(this,t);return this.getChildren().forEach(function(t){e.add(t.clone())}),e}getAllIntersections(t){var e=[];return this.find("Shape").forEach(function(n){n.isVisible()&&n.intersects(t)&&e.push(n)}),e}_clearSelfAndDescendantCache(t){var e;super._clearSelfAndDescendantCache(t),this.isCached()||null===(e=this.children)||void 0===e||e.forEach(function(e){e._clearSelfAndDescendantCache(t)})}_setChildrenIndices(){var t;null===(t=this.children)||void 0===t||t.forEach(function(t,e){t.index=e}),this._requestDraw()}drawScene(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas(),r=i&&i.getContext(),s=this._getCanvasCache(),o=s&&s.scene,a=i&&i.isCache;if(!this.isVisible()&&!a)return this;if(o){r.save();var l=this.getAbsoluteTransform(e).getMatrix();r.transform(l[0],l[1],l[2],l[3],l[4],l[5]),this._drawCachedSceneCanvas(r),r.restore()}else this._drawChildren("drawScene",i,e);return this}drawHit(t,e){if(!this.shouldDrawHit(e))return this;var n=this.getLayer(),i=t||n&&n.hitCanvas,r=i&&i.getContext(),s=this._getCanvasCache();if(s&&s.hit){r.save();var o=this.getAbsoluteTransform(e).getMatrix();r.transform(o[0],o[1],o[2],o[3],o[4],o[5]),this._drawCachedHitCanvas(r),r.restore()}else this._drawChildren("drawHit",i,e);return this}_drawChildren(t,e,n){var i,r=e&&e.getContext(),s=this.clipWidth(),o=this.clipHeight(),a=this.clipFunc(),l=s&&o||a;const c=n===this;if(l){r.save();var h=this.getAbsoluteTransform(n),u=h.getMatrix();if(r.transform(u[0],u[1],u[2],u[3],u[4],u[5]),r.beginPath(),a)a.call(this,r,this);else{var d=this.clipX(),f=this.clipY();r.rect(d,f,s,o)}r.clip(),u=h.copy().invert().getMatrix(),r.transform(u[0],u[1],u[2],u[3],u[4],u[5])}var p=!c&&"source-over"!==this.globalCompositeOperation()&&"drawScene"===t;p&&(r.save(),r._applyGlobalCompositeOperation(this)),null===(i=this.children)||void 0===i||i.forEach(function(i){i[t](e,n)}),p&&r.restore(),l&&r.restore()}getClientRect(t){var e,n,i,r,s,o,a=(t=t||{}).skipTransform,l=t.relativeTo,c=this;null===(e=this.children)||void 0===e||e.forEach(function(e){if(e.visible()){var o=e.getClientRect({relativeTo:c,skipShadow:t.skipShadow,skipStroke:t.skipStroke});0===o.width&&0===o.height||(void 0===n?(n=o.x,i=o.y,r=o.x+o.width,s=o.y+o.height):(n=Math.min(n,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x+o.width),s=Math.max(s,o.y+o.height)))}});for(var h=this.find("Shape"),u=!1,d=0;d<h.length;d++)if(h[d]._isVisible(this)){u=!0;break}return o=u&&void 0!==n?{x:n,y:i,width:r-n,height:s-i}:{x:0,y:0,width:0,height:0},a?o:this._transformedRect(o,l)}}return Hx.addComponentsGetterSetter(t,"clip",["x","y","width","height"]),Hx.addGetterSetter(t,"clipX",void 0,jx()),Hx.addGetterSetter(t,"clipY",void 0,jx()),Hx.addGetterSetter(t,"clipWidth",void 0,jx()),Hx.addGetterSetter(t,"clipHeight",void 0,jx()),t})();Hx.addGetterSetter(_S,"clipFunc");const bS=new Map,wS=void 0!==Sx._global.PointerEvent;function CS(t){return bS.get(t)}function xS(t){return{evt:t,pointerId:t.pointerId}}function SS(t,e){return bS.get(t)===e}function kS(t,e){TS(t),e.getStage()&&(bS.set(t,e),wS&&e._fire("gotpointercapture",xS(new PointerEvent("gotpointercapture"))))}function TS(t,e){const n=bS.get(t);n&&(n.getStage(),bS.delete(t),wS&&n._fire("lostpointercapture",xS(new PointerEvent("lostpointercapture"))))}var ES="mouseleave",OS="mouseover",PS="mouseenter",AS="mousemove",MS="mousedown",IS="mouseup",DS="pointermove",RS="pointerdown",LS="pointerup",FS="pointercancel",jS="pointerout",NS="pointerleave",BS="pointerover",$S="pointerenter",zS="contextmenu",VS="touchstart",GS="touchend",US="touchmove",HS="touchcancel",WS="wheel",XS=[[PS,"_pointerenter"],[MS,"_pointerdown"],[AS,"_pointermove"],[IS,"_pointerup"],[ES,"_pointerleave"],[VS,"_pointerdown"],[US,"_pointermove"],[GS,"_pointerup"],[HS,"_pointercancel"],[OS,"_pointerover"],[WS,"_wheel"],[zS,"_contextmenu"],[RS,"_pointerdown"],[DS,"_pointermove"],[LS,"_pointerup"],[FS,"_pointercancel"],["lostpointercapture","_lostpointercapture"]];const qS={mouse:{[jS]:"mouseout",[NS]:ES,[BS]:OS,[$S]:PS,[DS]:AS,[RS]:MS,[LS]:IS,[FS]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[jS]:"touchout",[NS]:"touchleave",[BS]:"touchover",[$S]:"touchenter",[DS]:US,[RS]:VS,[LS]:GS,[FS]:HS,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[jS]:jS,[NS]:NS,[BS]:BS,[$S]:$S,[DS]:DS,[RS]:RS,[LS]:LS,[FS]:FS,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},YS=t=>t.indexOf("pointer")>=0?"pointer":t.indexOf("touch")>=0?"touch":"mouse",KS=t=>{const e=YS(t);return"pointer"===e?Sx.pointerEventsEnabled&&qS.pointer:"touch"===e?qS.touch:"mouse"===e?qS.mouse:void 0};function ZS(t={}){return(t.clipFunc||t.clipWidth||t.clipHeight)&&Rx.warn("Stage does not support clipping. Please use clip for Layers or Groups."),t}const QS=[];class JS extends _S{constructor(t){super(ZS(t)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),QS.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{ZS(this.attrs)}),this._checkVisibility()}_validateAdd(t){const e="Layer"===t.getType(),n="FastLayer"===t.getType();e||n||Rx.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const t=this.visible()?"":"none";this.content.style.display=t}setContainer(t){if("string"==typeof t){if("."===t.charAt(0)){var e=t.slice(1);t=document.getElementsByClassName(e)[0]}else{var n;n="#"!==t.charAt(0)?t:t.slice(1),t=document.getElementById(n)}if(!t)throw"Can not find container in document with id "+n}return this._setAttr("container",t),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),t.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var t,e=this.children,n=e.length;for(t=0;t<n;t++)e[t].clear();return this}clone(t){return t||(t={}),t.container="undefined"!=typeof document&&document.createElement("div"),_S.prototype.clone.call(this,t)}destroy(){super.destroy();var t=this.content;t&&Rx._isInDocument(t)&&this.container().removeChild(t);var e=QS.indexOf(this);return e>-1&&QS.splice(e,1),this}getPointerPosition(){const t=this._pointerPositions[0]||this._changedPointerPositions[0];return t?{x:t.x,y:t.y}:(Rx.warn("Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);"),null)}_getPointerById(t){return this._pointerPositions.find(e=>e.id===t)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(t){(t=t||{}).x=t.x||0,t.y=t.y||0,t.width=t.width||this.width(),t.height=t.height||this.height();var e=new Jx({width:t.width,height:t.height,pixelRatio:t.pixelRatio||1}),n=e.getContext()._context,i=this.children;return(t.x||t.y)&&n.translate(-1*t.x,-1*t.y),i.forEach(function(e){if(e.isVisible()){var i=e._toKonvaCanvas(t);n.drawImage(i._canvas,t.x,t.y,i.getWidth()/i.getPixelRatio(),i.getHeight()/i.getPixelRatio())}}),e}getIntersection(t){if(!t)return null;var e,n=this.children;for(e=n.length-1;e>=0;e--){const i=n[e].getIntersection(t);if(i)return i}return null}_resizeDOM(){var t=this.width(),e=this.height();this.content&&(this.content.style.width=t+"px",this.content.style.height=e+"px"),this.bufferCanvas.setSize(t,e),this.bufferHitCanvas.setSize(t,e),this.children.forEach(n=>{n.setSize({width:t,height:e}),n.draw()})}add(t,...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}super.add(t);var i=this.children.length;return i>5&&Rx.warn("The stage has "+i+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),t.setSize({width:this.width(),height:this.height()}),t.draw(),Sx.isBrowser&&this.content.appendChild(t.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(t){return SS(t,this)}setPointerCapture(t){kS(t,this)}releaseCapture(t){TS(t)}getLayers(){return this.children}_bindContentEvents(){Sx.isBrowser&&XS.forEach(([t,e])=>{this.content.addEventListener(t,t=>{this[e](t)})})}_pointerenter(t){this.setPointersPositions(t);const e=KS(t.type);this._fire(e.pointerenter,{evt:t,target:this,currentTarget:this})}_pointerover(t){this.setPointersPositions(t);const e=KS(t.type);this._fire(e.pointerover,{evt:t,target:this,currentTarget:this})}_getTargetShape(t){let e=this[t+"targetShape"];return e&&!e.getStage()&&(e=null),e}_pointerleave(t){const e=KS(t.type),n=YS(t.type);if(e){this.setPointersPositions(t);var i=this._getTargetShape(n),r=!eS.isDragging||Sx.hitOnDragEnabled;i&&r?(i._fireAndBubble(e.pointerout,{evt:t}),i._fireAndBubble(e.pointerleave,{evt:t}),this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this[n+"targetShape"]=null):r&&(this._fire(e.pointerleave,{evt:t,target:this,currentTarget:this}),this._fire(e.pointerout,{evt:t,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(t){const e=KS(t.type),n=YS(t.type);if(e){this.setPointersPositions(t);var i=!1;this._changedPointerPositions.forEach(r=>{var s=this.getIntersection(r);if(eS.justDragged=!1,Sx["_"+n+"ListenClick"]=!0,!s||!s.isListening())return;Sx.capturePointerEventsEnabled&&s.setPointerCapture(r.id),this[n+"ClickStartShape"]=s,s._fireAndBubble(e.pointerdown,{evt:t,pointerId:r.id}),i=!0;const o=t.type.indexOf("touch")>=0;s.preventDefault()&&t.cancelable&&o&&t.preventDefault()}),i||this._fire(e.pointerdown,{evt:t,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(t){const e=KS(t.type),n=YS(t.type);if(!e)return;if(eS.isDragging&&eS.node.preventDefault()&&t.cancelable&&t.preventDefault(),this.setPointersPositions(t),eS.isDragging&&!Sx.hitOnDragEnabled)return;var i={};let r=!1;var s=this._getTargetShape(n);this._changedPointerPositions.forEach(o=>{const a=CS(o.id)||this.getIntersection(o),l=o.id,c={evt:t,pointerId:l};var h=s!==a;if(h&&s&&(s._fireAndBubble(e.pointerout,c,a),s._fireAndBubble(e.pointerleave,c,a)),a){if(i[a._id])return;i[a._id]=!0}a&&a.isListening()?(r=!0,h&&(a._fireAndBubble(e.pointerover,c,s),a._fireAndBubble(e.pointerenter,c,s),this[n+"targetShape"]=a),a._fireAndBubble(e.pointermove,c)):s&&(this._fire(e.pointerover,{evt:t,target:this,currentTarget:this,pointerId:l}),this[n+"targetShape"]=null)}),r||this._fire(e.pointermove,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(t){const e=KS(t.type),n=YS(t.type);if(!e)return;this.setPointersPositions(t);const i=this[n+"ClickStartShape"],r=this[n+"ClickEndShape"];var s={};let o=!1;this._changedPointerPositions.forEach(a=>{const l=CS(a.id)||this.getIntersection(a);if(l){if(l.releaseCapture(a.id),s[l._id])return;s[l._id]=!0}const c=a.id,h={evt:t,pointerId:c};let u=!1;Sx["_"+n+"InDblClickWindow"]?(u=!0,clearTimeout(this[n+"DblTimeout"])):eS.justDragged||(Sx["_"+n+"InDblClickWindow"]=!0,clearTimeout(this[n+"DblTimeout"])),this[n+"DblTimeout"]=setTimeout(function(){Sx["_"+n+"InDblClickWindow"]=!1},Sx.dblClickWindow),l&&l.isListening()?(o=!0,this[n+"ClickEndShape"]=l,l._fireAndBubble(e.pointerup,h),Sx["_"+n+"ListenClick"]&&i&&i===l&&(l._fireAndBubble(e.pointerclick,h),u&&r&&r===l&&l._fireAndBubble(e.pointerdblclick,h))):(this[n+"ClickEndShape"]=null,Sx["_"+n+"ListenClick"]&&this._fire(e.pointerclick,{evt:t,target:this,currentTarget:this,pointerId:c}),u&&this._fire(e.pointerdblclick,{evt:t,target:this,currentTarget:this,pointerId:c}))}),o||this._fire(e.pointerup,{evt:t,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),Sx["_"+n+"ListenClick"]=!1,t.cancelable&&t.preventDefault()}_contextmenu(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(zS,{evt:t}):this._fire(zS,{evt:t,target:this,currentTarget:this})}_wheel(t){this.setPointersPositions(t);var e=this.getIntersection(this.getPointerPosition());e&&e.isListening()?e._fireAndBubble(WS,{evt:t}):this._fire(WS,{evt:t,target:this,currentTarget:this})}_pointercancel(t){this.setPointersPositions(t);const e=CS(t.pointerId)||this.getIntersection(this.getPointerPosition());e&&e._fireAndBubble(LS,xS(t)),TS(t.pointerId)}_lostpointercapture(t){TS(t.pointerId)}setPointersPositions(t){var e=this._getContentPosition(),n=null,i=null;void 0!==(t=t||window.event).touches?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(t.touches,t=>{this._pointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})}),Array.prototype.forEach.call(t.changedTouches||t.touches,t=>{this._changedPointerPositions.push({id:t.identifier,x:(t.clientX-e.left)/e.scaleX,y:(t.clientY-e.top)/e.scaleY})})):(this.pointerPos={x:n=(t.clientX-e.left)/e.scaleX,y:i=(t.clientY-e.top)/e.scaleY},this._pointerPositions=[{x:n,y:i,id:Rx._getFirstPointerId(t)}],this._changedPointerPositions=[{x:n,y:i,id:Rx._getFirstPointerId(t)}])}_setPointerPosition(t){Rx.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(t)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var t=this.content.getBoundingClientRect();return{top:t.top,left:t.left,scaleX:t.width/this.content.clientWidth||1,scaleY:t.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Jx({width:this.width(),height:this.height()}),this.bufferHitCanvas=new tS({pixelRatio:1,width:this.width(),height:this.height()}),Sx.isBrowser){var t=this.container();if(!t)throw"Stage has no container. A container is required.";t.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),t.appendChild(this.content),this._resizeDOM()}}cache(){return Rx.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(t){t.batchDraw()}),this}}JS.prototype.nodeType="Stage",kx(JS),Hx.addGetterSetter(JS,"container");var tk="hasShadow",ek="shadowRGBA",nk="patternImage",ik="linearGradient",rk="radialGradient";let sk;function ok(){return sk||(sk=Rx.createCanvasElement().getContext("2d"),sk)}const ak={};class lk extends vS{constructor(t){let e;for(super(t);e=Rx.getRandomColor(),!e||e in ak;);this.colorKey=e,ak[e]=this}getContext(){return Rx.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return Rx.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(tk,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&0!==this.shadowOpacity()&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(nk,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){const t=ok().createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(t&&t.setTransform){const e=new Tx;e.translate(this.fillPatternX(),this.fillPatternY()),e.rotate(Sx.getAngle(this.fillPatternRotation())),e.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),e.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const n=e.getMatrix();t.setTransform({a:n[0],b:n[1],c:n[2],d:n[3],e:n[4],f:n[5]})}return t}}_getLinearGradient(){return this._getCache(ik,this.__getLinearGradient)}__getLinearGradient(){var t=this.fillLinearGradientColorStops();if(t){for(var e=ok(),n=this.fillLinearGradientStartPoint(),i=this.fillLinearGradientEndPoint(),r=e.createLinearGradient(n.x,n.y,i.x,i.y),s=0;s<t.length;s+=2)r.addColorStop(t[s],t[s+1]);return r}}_getRadialGradient(){return this._getCache(rk,this.__getRadialGradient)}__getRadialGradient(){var t=this.fillRadialGradientColorStops();if(t){for(var e=ok(),n=this.fillRadialGradientStartPoint(),i=this.fillRadialGradientEndPoint(),r=e.createRadialGradient(n.x,n.y,this.fillRadialGradientStartRadius(),i.x,i.y,this.fillRadialGradientEndRadius()),s=0;s<t.length;s+=2)r.addColorStop(t[s],t[s+1]);return r}}getShadowRGBA(){return this._getCache(ek,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var t=Rx.colorToRGBA(this.shadowColor());return"rgba("+t.r+","+t.g+","+t.b+","+t.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!(!this.stroke()&&!this.strokeLinearGradientColorStops()))}hasHitStroke(){const t=this.hitStrokeWidth();return"auto"===t?this.hasStroke():this.strokeEnabled()&&!!t}intersects(t){var e=this.getStage().bufferHitCanvas;return e.getContext().clear(),this.drawHit(e,null,!0),e.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data[3]>0}destroy(){return vS.prototype.destroy.call(this),delete ak[this.colorKey],delete this.colorKey,this}_useBufferCanvas(t){var e;if(!this.getStage())return!1;if(null!==(e=this.attrs.perfectDrawEnabled)&&void 0!==e&&!e)return!1;const n=t||this.hasFill(),i=this.hasStroke(),r=1!==this.getAbsoluteOpacity();if(n&&i&&r)return!0;const s=this.hasShadow(),o=this.shadowForStrokeEnabled();return!!(n&&i&&s&&o)}setStrokeHitEnabled(t){Rx.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),this.hitStrokeWidth(t?"auto":0)}getStrokeHitEnabled(){return 0!==this.hitStrokeWidth()}getSelfRect(){var t=this.size();return{x:this._centroid?-t.width/2:0,y:this._centroid?-t.height/2:0,width:t.width,height:t.height}}getClientRect(t={}){const e=t.skipTransform,n=t.relativeTo,i=this.getSelfRect(),r=!t.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,s=i.width+r,o=i.height+r,a=!t.skipShadow&&this.hasShadow(),l=a?this.shadowOffsetX():0,c=a?this.shadowOffsetY():0,h=s+Math.abs(l),u=o+Math.abs(c),d=a&&this.shadowBlur()||0,f=h+2*d,p=u+2*d;let g=0;Math.round(r/2)!==r/2&&(g=1);const m={width:f+g,height:p+g,x:-Math.round(r/2+d)+Math.min(l,0)+i.x,y:-Math.round(r/2+d)+Math.min(c,0)+i.y};return e?m:this._transformedRect(m,n)}drawScene(t,e){var n,i,r=this.getLayer(),s=t||r.getCanvas(),o=s.getContext(),a=this._getCanvasCache(),l=this.getSceneFunc(),c=this.hasShadow(),h=s.isCache,u=e===this;if(!this.isVisible()&&!u)return this;if(a){o.save();var d=this.getAbsoluteTransform(e).getMatrix();return o.transform(d[0],d[1],d[2],d[3],d[4],d[5]),this._drawCachedSceneCanvas(o),o.restore(),this}if(!l)return this;if(o.save(),this._useBufferCanvas()&&!h){(i=(n=this.getStage().bufferCanvas).getContext()).clear(),i.save(),i._applyLineJoin(this);var f=this.getAbsoluteTransform(e).getMatrix();i.transform(f[0],f[1],f[2],f[3],f[4],f[5]),l.call(this,i,this),i.restore();var p=n.pixelRatio;c&&o._applyShadow(this),o._applyOpacity(this),o._applyGlobalCompositeOperation(this),o.drawImage(n._canvas,0,0,n.width/p,n.height/p)}else o._applyLineJoin(this),u||(f=this.getAbsoluteTransform(e).getMatrix(),o.transform(f[0],f[1],f[2],f[3],f[4],f[5]),o._applyOpacity(this),o._applyGlobalCompositeOperation(this)),c&&o._applyShadow(this),l.call(this,o,this);return o.restore(),this}drawHit(t,e,n=!1){if(!this.shouldDrawHit(e,n))return this;var i=this.getLayer(),r=t||i.hitCanvas,s=r&&r.getContext(),o=this.hitFunc()||this.sceneFunc(),a=this._getCanvasCache(),l=a&&a.hit;if(this.colorKey||Rx.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),l){s.save();var c=this.getAbsoluteTransform(e).getMatrix();return s.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(s),s.restore(),this}if(!o)return this;if(s.save(),s._applyLineJoin(this),this!==e){var h=this.getAbsoluteTransform(e).getMatrix();s.transform(h[0],h[1],h[2],h[3],h[4],h[5])}return o.call(this,s,this),s.restore(),this}drawHitFromCache(t=0){var e,n,i,r,s,o=this._getCanvasCache(),a=this._getCachedSceneCanvas(),l=o.hit,c=l.getContext(),h=l.getWidth(),u=l.getHeight();c.clear(),c.drawImage(a._canvas,0,0,h,u);try{for(i=(n=(e=c.getImageData(0,0,h,u)).data).length,r=Rx._hexToRgb(this.colorKey),s=0;s<i;s+=4)n[s+3]>t?(n[s]=r.r,n[s+1]=r.g,n[s+2]=r.b,n[s+3]=255):n[s+3]=0;c.putImageData(e,0,0)}catch(d){Rx.error("Unable to draw hit graph from cached scene canvas. "+d.message)}return this}hasPointerCapture(t){return SS(t,this)}setPointerCapture(t){kS(t,this)}releaseCapture(t){TS(t)}}lk.prototype._fillFunc=function(t){t.fill()},lk.prototype._strokeFunc=function(t){t.stroke()},lk.prototype._fillFuncHit=function(t){t.fill()},lk.prototype._strokeFuncHit=function(t){t.stroke()},lk.prototype._centroid=!1,lk.prototype.nodeType="Shape",kx(lk),lk.prototype.eventListeners={},lk.prototype.on.call(lk.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(tk)}),lk.prototype.on.call(lk.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",function(){this._clearCache(ek)}),lk.prototype.on.call(lk.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",function(){this._clearCache(nk)}),lk.prototype.on.call(lk.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",function(){this._clearCache(ik)}),lk.prototype.on.call(lk.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",function(){this._clearCache(rk)}),Hx.addGetterSetter(lk,"stroke",void 0,zx()),Hx.addGetterSetter(lk,"strokeWidth",2,jx()),Hx.addGetterSetter(lk,"fillAfterStrokeEnabled",!1),Hx.addGetterSetter(lk,"hitStrokeWidth","auto",Bx()),Hx.addGetterSetter(lk,"strokeHitEnabled",!0,Vx()),Hx.addGetterSetter(lk,"perfectDrawEnabled",!0,Vx()),Hx.addGetterSetter(lk,"shadowForStrokeEnabled",!0,Vx()),Hx.addGetterSetter(lk,"lineJoin"),Hx.addGetterSetter(lk,"lineCap"),Hx.addGetterSetter(lk,"sceneFunc"),Hx.addGetterSetter(lk,"hitFunc"),Hx.addGetterSetter(lk,"dash"),Hx.addGetterSetter(lk,"dashOffset",0,jx()),Hx.addGetterSetter(lk,"shadowColor",void 0,$x()),Hx.addGetterSetter(lk,"shadowBlur",0,jx()),Hx.addGetterSetter(lk,"shadowOpacity",1,jx()),Hx.addComponentsGetterSetter(lk,"shadowOffset",["x","y"]),Hx.addGetterSetter(lk,"shadowOffsetX",0,jx()),Hx.addGetterSetter(lk,"shadowOffsetY",0,jx()),Hx.addGetterSetter(lk,"fillPatternImage"),Hx.addGetterSetter(lk,"fill",void 0,zx()),Hx.addGetterSetter(lk,"fillPatternX",0,jx()),Hx.addGetterSetter(lk,"fillPatternY",0,jx()),Hx.addGetterSetter(lk,"fillLinearGradientColorStops"),Hx.addGetterSetter(lk,"strokeLinearGradientColorStops"),Hx.addGetterSetter(lk,"fillRadialGradientStartRadius",0),Hx.addGetterSetter(lk,"fillRadialGradientEndRadius",0),Hx.addGetterSetter(lk,"fillRadialGradientColorStops"),Hx.addGetterSetter(lk,"fillPatternRepeat","repeat"),Hx.addGetterSetter(lk,"fillEnabled",!0),Hx.addGetterSetter(lk,"strokeEnabled",!0),Hx.addGetterSetter(lk,"shadowEnabled",!0),Hx.addGetterSetter(lk,"dashEnabled",!0),Hx.addGetterSetter(lk,"strokeScaleEnabled",!0),Hx.addGetterSetter(lk,"fillPriority","color"),Hx.addComponentsGetterSetter(lk,"fillPatternOffset",["x","y"]),Hx.addGetterSetter(lk,"fillPatternOffsetX",0,jx()),Hx.addGetterSetter(lk,"fillPatternOffsetY",0,jx()),Hx.addComponentsGetterSetter(lk,"fillPatternScale",["x","y"]),Hx.addGetterSetter(lk,"fillPatternScaleX",1,jx()),Hx.addGetterSetter(lk,"fillPatternScaleY",1,jx()),Hx.addComponentsGetterSetter(lk,"fillLinearGradientStartPoint",["x","y"]),Hx.addComponentsGetterSetter(lk,"strokeLinearGradientStartPoint",["x","y"]),Hx.addGetterSetter(lk,"fillLinearGradientStartPointX",0),Hx.addGetterSetter(lk,"strokeLinearGradientStartPointX",0),Hx.addGetterSetter(lk,"fillLinearGradientStartPointY",0),Hx.addGetterSetter(lk,"strokeLinearGradientStartPointY",0),Hx.addComponentsGetterSetter(lk,"fillLinearGradientEndPoint",["x","y"]),Hx.addComponentsGetterSetter(lk,"strokeLinearGradientEndPoint",["x","y"]),Hx.addGetterSetter(lk,"fillLinearGradientEndPointX",0),Hx.addGetterSetter(lk,"strokeLinearGradientEndPointX",0),Hx.addGetterSetter(lk,"fillLinearGradientEndPointY",0),Hx.addGetterSetter(lk,"strokeLinearGradientEndPointY",0),Hx.addComponentsGetterSetter(lk,"fillRadialGradientStartPoint",["x","y"]),Hx.addGetterSetter(lk,"fillRadialGradientStartPointX",0),Hx.addGetterSetter(lk,"fillRadialGradientStartPointY",0),Hx.addComponentsGetterSetter(lk,"fillRadialGradientEndPoint",["x","y"]),Hx.addGetterSetter(lk,"fillRadialGradientEndPointX",0),Hx.addGetterSetter(lk,"fillRadialGradientEndPointY",0),Hx.addGetterSetter(lk,"fillPatternRotation",0),Hx.backCompat(lk,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var ck=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],hk=ck.length;class uk extends _S{constructor(t){super(t),this.canvas=new Jx,this.hitCanvas=new tS({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this}setZIndex(t){super.setZIndex(t);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),t<e.children.length-1?e.content.insertBefore(this.getNativeCanvasElement(),e.children[t+1].getCanvas()._canvas):e.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){vS.prototype.moveToTop.call(this);var t=this.getStage();return t&&t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){if(!vS.prototype.moveUp.call(this))return!1;var t=this.getStage();return!(!t||!t.content||(t.content.removeChild(this.getNativeCanvasElement()),this.index<t.children.length-1?t.content.insertBefore(this.getNativeCanvasElement(),t.children[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getNativeCanvasElement()),0))}moveDown(){if(vS.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(vS.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.children;t.content&&(t.content.removeChild(this.getNativeCanvasElement()),t.content.insertBefore(this.getNativeCanvasElement(),e[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var t=this.getNativeCanvasElement();return vS.prototype.remove.call(this),t&&t.parentNode&&Rx._isInDocument(t)&&t.parentNode.removeChild(t),this}getStage(){return this.parent}setSize({width:t,height:e}){return this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e),this._setSmoothEnabled(),this}_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Rx.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(t){return(t=t||{}).width=t.width||this.getWidth(),t.height=t.height||this.getHeight(),t.x=void 0!==t.x?t.x:this.x(),t.y=void 0!==t.y?t.y:this.y(),vS.prototype._toKonvaCanvas.call(this,t)}_checkVisibility(){const t=this.visible();this.canvas._canvas.style.display=t?"block":"none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){Rx.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){Rx.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,Rx.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(t){if(!this.isListening()||!this.isVisible())return null;for(var e=1,n=!1;;){for(let i=0;i<hk;i++){const r=ck[i],s=this._getIntersection({x:t.x+r.x*e,y:t.y+r.y*e}),o=s.shape;if(o)return o;if(n=!!s.antialiased,!s.antialiased)break}if(!n)return null;e+=1}}_getIntersection(t){const e=this.hitCanvas.pixelRatio,n=this.hitCanvas.context.getImageData(Math.round(t.x*e),Math.round(t.y*e),1,1).data,i=n[3];if(255===i){const t=Rx._rgbToHex(n[0],n[1],n[2]),e=ak["#"+t];return e?{shape:e}:{antialiased:!0}}return i>0?{antialiased:!0}:{}}drawScene(t,e){var n=this.getLayer(),i=t||n&&n.getCanvas();return this._fire("beforeDraw",{node:this}),this.clearBeforeDraw()&&i.getContext().clear(),_S.prototype.drawScene.call(this,i,e),this._fire("draw",{node:this}),this}drawHit(t,e){var n=this.getLayer(),i=t||n&&n.hitCanvas;return n&&n.clearBeforeDraw()&&n.getHitCanvas().getContext().clear(),_S.prototype.drawHit.call(this,i,e),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(t){Rx.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(t)}getHitGraphEnabled(t){return Rx.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(this.parent&&this.parent.content){var t=this.parent;this.hitCanvas._canvas.parentNode?t.content.removeChild(this.hitCanvas._canvas):t.content.appendChild(this.hitCanvas._canvas)}}}uk.prototype.nodeType="Layer",kx(uk),Hx.addGetterSetter(uk,"imageSmoothingEnabled",!0),Hx.addGetterSetter(uk,"clearBeforeDraw",!0),Hx.addGetterSetter(uk,"hitGraphEnabled",!0,Vx());class dk extends uk{constructor(t){super(t),this.listening(!1),Rx.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}dk.prototype.nodeType="FastLayer",kx(dk);class fk extends _S{_validateAdd(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Rx.throw("You may only add groups and shapes to groups.")}}fk.prototype.nodeType="Group",kx(fk);var pk=xx.performance&&xx.performance.now?function(){return xx.performance.now()}:function(){return(new Date).getTime()};let gk=(()=>{class t{constructor(e,n){this.id=t.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:pk(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(t){return this.layers=t?t.length>0?t:[t]:[],this}getLayers(){return this.layers}addLayer(t){var e,n=this.layers,i=n.length;for(e=0;e<i;e++)if(n[e]._id===t._id)return!1;return this.layers.push(t),!0}isRunning(){var e,n=t.animations,i=n.length;for(e=0;e<i;e++)if(n[e].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=pk(),t._addAnimation(this),this}stop(){return t._removeAnimation(this),this}_updateFrameObject(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(t){this.animations.push(t),this._handleAnimation()}static _removeAnimation(t){var e,n=t.id,i=this.animations,r=i.length;for(e=0;e<r;e++)if(i[e].id===n){this.animations.splice(e,1);break}}static _runFrames(){var t,e,n,i,r,s,o,a,l={},c=this.animations;for(i=0;i<c.length;i++)if(e=(t=c[i]).layers,n=t.func,t._updateFrameObject(pk()),s=e.length,!n||!1!==n.call(t,t.frame))for(r=0;r<s;r++)void 0!==(o=e[r])._id&&(l[o._id]=o);for(a in l)l.hasOwnProperty(a)&&l[a].batchDraw()}static _animationLoop(){var e=t;e.animations.length?(e._runFrames(),Rx.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,Rx.requestAnimFrame(this._animationLoop))}}return t.animations=[],t.animIdCounter=0,t.animRunning=!1,t})();var mk={node:1,duration:1,easing:1,onFinish:1,yoyo:1},vk=0,yk=["fill","stroke","shadowColor"];class _k{constructor(t,e,n,i,r,s,o){this.prop=t,this.propFunc=e,this.begin=i,this._pos=i,this.duration=s,this._change=0,this.prevPos=0,this.yoyo=o,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=n,this._change=r-this.begin,this.pause()}fire(t){var e=this[t];e&&e()}setTime(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():t<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())}getTime(){return this._time}setPosition(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t}getPosition(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)}play(){this.state=2,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=3,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var t=this.getTimer()-this._startTime;2===this.state?this.setTime(t):3===this.state&&this.setTime(this.duration-t)}pause(){this.state=1,this.fire("onPause")}getTimer(){return(new Date).getTime()}}let bk=(()=>{class t{constructor(e){var n,i,r=this,s=e.node,o=s._id,a=e.easing||wk.Linear,l=!!e.yoyo;n=void 0===e.duration?.3:0===e.duration?.001:e.duration,this.node=s,this._id=vk++;var c=s.getLayer()||(s instanceof Sx.Stage?s.getLayers():null);for(i in c||Rx.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new gk(function(){r.tween.onEnterFrame()},c),this.tween=new _k(i,function(t){r._tweenFunc(t)},a,0,1,1e3*n,l),this._addListeners(),t.attrs[o]||(t.attrs[o]={}),t.attrs[o][this._id]||(t.attrs[o][this._id]={}),t.tweens[o]||(t.tweens[o]={}),e)void 0===mk[i]&&this._addAttr(i,e[i]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var i,r,s,o,a,l,c,h,u=this.node,d=u._id;if((s=t.tweens[d][e])&&delete t.attrs[d][s][e],i=u.getAttr(e),Rx._isArray(n))if(r=[],a=Math.max(n.length,i.length),"points"===e&&n.length!==i.length&&(n.length>i.length?(c=i,i=Rx._prepareArrayForTween(i,n,u.closed())):(l=n,n=Rx._prepareArrayForTween(n,i,u.closed()))),0===e.indexOf("fill"))for(o=0;o<a;o++)if(o%2==0)r.push(n[o]-i[o]);else{var f=Rx.colorToRGBA(i[o]);h=Rx.colorToRGBA(n[o]),i[o]=f,r.push({r:h.r-f.r,g:h.g-f.g,b:h.b-f.b,a:h.a-f.a})}else for(o=0;o<a;o++)r.push(n[o]-i[o]);else-1!==yk.indexOf(e)?(i=Rx.colorToRGBA(i),r={r:(h=Rx.colorToRGBA(n)).r-i.r,g:h.g-i.g,b:h.b-i.b,a:h.a-i.a}):r=n-i;t.attrs[d][this._id][e]={start:i,diff:r,end:n,trueEnd:l,trueStart:c},t.tweens[d][e]=this._id}_tweenFunc(e){var n,i,r,s,o,a,l,c,h=this.node,u=t.attrs[h._id][this._id];for(n in u){if(s=(i=u[n]).diff,c=i.end,Rx._isArray(r=i.start))if(o=[],l=Math.max(r.length,c.length),0===n.indexOf("fill"))for(a=0;a<l;a++)o.push(a%2==0?(r[a]||0)+s[a]*e:"rgba("+Math.round(r[a].r+s[a].r*e)+","+Math.round(r[a].g+s[a].g*e)+","+Math.round(r[a].b+s[a].b*e)+","+(r[a].a+s[a].a*e)+")");else for(a=0;a<l;a++)o.push((r[a]||0)+s[a]*e);else o=-1!==yk.indexOf(n)?"rgba("+Math.round(r.r+s.r*e)+","+Math.round(r.g+s.g*e)+","+Math.round(r.b+s.b*e)+","+(r.a+s.a*e)+")":r+s*e;h.setAttr(n,o)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=t.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=t.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(t){return this.tween.seek(1e3*t),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e,n=this.node._id,i=this._id,r=t.tweens[n];for(e in this.pause(),r)delete t.tweens[n][e];delete t.attrs[n][i]}}return t.attrs={},t.tweens={},t})();vS.prototype.to=function(t){var e=t.onFinish;t.node=this,t.onFinish=function(){this.destroy(),e&&e()},new bk(t).play()};const wk={BackEaseIn(t,e,n,i){var r=1.70158;return n*(t/=i)*t*((r+1)*t-r)+e},BackEaseOut(t,e,n,i){var r=1.70158;return n*((t=t/i-1)*t*((r+1)*t+r)+1)+e},BackEaseInOut(t,e,n,i){var r=1.70158;return(t/=i/2)<1?n/2*(t*t*((1+(r*=1.525))*t-r))+e:n/2*((t-=2)*t*((1+(r*=1.525))*t+r)+2)+e},ElasticEaseIn(t,e,n,i,r,s){var o=0;return 0===t?e:1==(t/=i)?e+n:(s||(s=.3*i),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),-r*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)+e)},ElasticEaseOut(t,e,n,i,r,s){var o=0;return 0===t?e:1==(t/=i)?e+n:(s||(s=.3*i),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),r*Math.pow(2,-10*t)*Math.sin((t*i-o)*(2*Math.PI)/s)+n+e)},ElasticEaseInOut(t,e,n,i,r,s){var o=0;return 0===t?e:2==(t/=i/2)?e+n:(s||(s=i*(.3*1.5)),!r||r<Math.abs(n)?(r=n,o=s/4):o=s/(2*Math.PI)*Math.asin(n/r),t<1?r*Math.pow(2,10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)*-.5+e:r*Math.pow(2,-10*(t-=1))*Math.sin((t*i-o)*(2*Math.PI)/s)*.5+n+e)},BounceEaseOut:(t,e,n,i)=>(t/=i)<1/2.75?n*(7.5625*t*t)+e:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e,BounceEaseIn:(t,e,n,i)=>n-wk.BounceEaseOut(i-t,0,n,i)+e,BounceEaseInOut:(t,e,n,i)=>t<i/2?.5*wk.BounceEaseIn(2*t,0,n,i)+e:.5*wk.BounceEaseOut(2*t-i,0,n,i)+.5*n+e,EaseIn:(t,e,n,i)=>n*(t/=i)*t+e,EaseOut:(t,e,n,i)=>-n*(t/=i)*(t-2)+e,EaseInOut:(t,e,n,i)=>(t/=i/2)<1?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e,StrongEaseIn:(t,e,n,i)=>n*(t/=i)*t*t*t*t+e,StrongEaseOut:(t,e,n,i)=>n*((t=t/i-1)*t*t*t*t+1)+e,StrongEaseInOut:(t,e,n,i)=>(t/=i/2)<1?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e,Linear:(t,e,n,i)=>n*t/i+e},Ck=Rx._assign(Sx,{Util:Rx,Transform:Tx,Node:vS,Container:_S,Stage:JS,stages:QS,Layer:uk,FastLayer:dk,Group:fk,DD:eS,Shape:lk,shapes:ak,Animation:gk,Tween:bk,Easings:wk,Context:Yx,Canvas:Qx});class xk extends lk{_sceneFunc(t){var e=Sx.getAngle(this.angle()),n=this.clockwise();t.beginPath(),t.arc(0,0,this.outerRadius(),0,e,n),t.arc(0,0,this.innerRadius(),e,0,!n),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}function Sk(t,e,n,i,r,s,o){var a=Math.sqrt(Math.pow(n-t,2)+Math.pow(i-e,2)),l=Math.sqrt(Math.pow(r-n,2)+Math.pow(s-i,2)),c=o*a/(a+l),h=o*l/(a+l);return[n-c*(r-t),i-c*(s-e),n+h*(r-t),i+h*(s-e)]}function kk(t,e){var n,i,r=t.length,s=[];for(n=2;n<r-2;n+=2)i=Sk(t[n-2],t[n-1],t[n],t[n+1],t[n+2],t[n+3],e),isNaN(i[0])||(s.push(i[0]),s.push(i[1]),s.push(t[n]),s.push(t[n+1]),s.push(i[2]),s.push(i[3]));return s}xk.prototype._centroid=!0,xk.prototype.className="Arc",xk.prototype._attrsAffectingSize=["innerRadius","outerRadius"],kx(xk),Hx.addGetterSetter(xk,"innerRadius",0,jx()),Hx.addGetterSetter(xk,"outerRadius",0,jx()),Hx.addGetterSetter(xk,"angle",0,jx()),Hx.addGetterSetter(xk,"clockwise",!1,Vx());class Tk extends lk{constructor(t){super(t),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(t){var e,n,i,r=this.points(),s=r.length,o=this.tension(),a=this.closed(),l=this.bezier();if(s){if(t.beginPath(),t.moveTo(r[0],r[1]),0!==o&&s>4){for(n=(e=this.getTensionPoints()).length,i=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i<n-2;)t.bezierCurveTo(e[i++],e[i++],e[i++],e[i++],e[i++],e[i++]);a||t.quadraticCurveTo(e[n-2],e[n-1],r[s-2],r[s-1])}else if(l)for(i=2;i<s;)t.bezierCurveTo(r[i++],r[i++],r[i++],r[i++],r[i++],r[i++]);else for(i=2;i<s;i+=2)t.lineTo(r[i],r[i+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():kk(this.points(),this.tension())}_getTensionPointsClosed(){var t=this.points(),e=t.length,n=this.tension(),i=Sk(t[e-2],t[e-1],t[0],t[1],t[2],t[3],n),r=Sk(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],n),s=kk(t,n);return[i[2],i[3]].concat(s).concat([r[0],r[1],t[e-2],t[e-1],r[2],r[3],i[0],i[1],t[0],t[1]])}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var t=this.points();if(t.length<4)return{x:t[0]||0,y:t[1]||0,width:0,height:0};for(var e,n,i=(t=0!==this.tension()?[t[0],t[1],...this._getTensionPoints(),t[t.length-2],t[t.length-1]]:this.points())[0],r=t[0],s=t[1],o=t[1],a=0;a<t.length/2;a++)e=t[2*a],n=t[2*a+1],i=Math.min(i,e),r=Math.max(r,e),s=Math.min(s,n),o=Math.max(o,n);return{x:i,y:s,width:r-i,height:o-s}}}Tk.prototype.className="Line",Tk.prototype._attrsAffectingSize=["points","bezier","tension"],kx(Tk),Hx.addGetterSetter(Tk,"closed",!1),Hx.addGetterSetter(Tk,"bezier",!1),Hx.addGetterSetter(Tk,"tension",0,jx()),Hx.addGetterSetter(Tk,"points",[],function(){if(Sx.isUnminified)return function(t,e){return Rx._isArray(t)?t.forEach(function(t){Rx._isNumber(t)||Rx.warn('"'+e+'" attribute has non numeric element '+t+". Make sure that all elements are numbers.")}):Rx.warn(Lx(t)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),t}}());class Ek extends lk{constructor(t){super(t),this.dataArray=[],this.pathLength=0,this.dataArray=Ek.parsePathData(this.data()),this.pathLength=0;for(var e=0;e<this.dataArray.length;++e)this.pathLength+=this.dataArray[e].pathLength;this.on("dataChange.konva",function(){this.dataArray=Ek.parsePathData(this.data()),this.pathLength=0;for(var t=0;t<this.dataArray.length;++t)this.pathLength+=this.dataArray[t].pathLength})}_sceneFunc(t){var e=this.dataArray;t.beginPath();for(var n=!1,i=0;i<e.length;i++){var r=e[i].points;switch(e[i].command){case"L":t.lineTo(r[0],r[1]);break;case"M":t.moveTo(r[0],r[1]);break;case"C":t.bezierCurveTo(r[0],r[1],r[2],r[3],r[4],r[5]);break;case"Q":t.quadraticCurveTo(r[0],r[1],r[2],r[3]);break;case"A":var s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],h=r[5],u=r[6],d=r[7],f=a>l?a:l,p=a>l?1:a/l,g=a>l?l/a:1;t.translate(s,o),t.rotate(u),t.scale(p,g),t.arc(0,0,f,c,c+h,1-d),t.scale(1/p,1/g),t.rotate(-u),t.translate(-s,-o);break;case"z":n=!0,t.closePath()}}n||this.hasFill()?t.fillStrokeShape(this):t.strokeShape(this)}getSelfRect(){var t=[];this.dataArray.forEach(function(e){if("A"===e.command){var n=e.points[4],i=e.points[5],r=e.points[4]+i,s=Math.PI/180;if(Math.abs(n-r)<s&&(s=Math.abs(n-r)),i<0)for(let i=n-s;i>r;i-=s){const n=Ek.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],i,0);t.push(n.x,n.y)}else for(let i=n+s;i<r;i+=s){const n=Ek.getPointOnEllipticalArc(e.points[0],e.points[1],e.points[2],e.points[3],i,0);t.push(n.x,n.y)}}else if("C"===e.command)for(let o=0;o<=1;o+=.01){const n=Ek.getPointOnCubicBezier(o,e.start.x,e.start.y,e.points[0],e.points[1],e.points[2],e.points[3],e.points[4],e.points[5]);t.push(n.x,n.y)}else t=t.concat(e.points)});for(var e,n,i=t[0],r=t[0],s=t[1],o=t[1],a=0;a<t.length/2;a++)e=t[2*a],n=t[2*a+1],isNaN(e)||(i=Math.min(i,e),r=Math.max(r,e)),isNaN(n)||(s=Math.min(s,n),o=Math.max(o,n));return{x:Math.round(i),y:Math.round(s),width:Math.round(r-i),height:Math.round(o-s)}}getLength(){return this.pathLength}getPointAtLength(t){var e,n=0,i=this.dataArray.length;if(!i)return null;for(;n<i&&t>this.dataArray[n].pathLength;)t-=this.dataArray[n].pathLength,++n;if(n===i)return{x:(e=this.dataArray[n-1].points.slice(-2))[0],y:e[1]};if(t<.01)return{x:(e=this.dataArray[n].points.slice(0,2))[0],y:e[1]};var r=this.dataArray[n],s=r.points;switch(r.command){case"L":return Ek.getPointOnLine(t,r.start.x,r.start.y,s[0],s[1]);case"C":return Ek.getPointOnCubicBezier(t/r.pathLength,r.start.x,r.start.y,s[0],s[1],s[2],s[3],s[4],s[5]);case"Q":return Ek.getPointOnQuadraticBezier(t/r.pathLength,r.start.x,r.start.y,s[0],s[1],s[2],s[3]);case"A":var o=s[4];return Ek.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],o+=s[5]*t/r.pathLength,s[6])}return null}static getLineLength(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}static getPointOnLine(t,e,n,i,r,s,o){void 0===s&&(s=e),void 0===o&&(o=n);var a=(r-n)/(i-e+1e-8),l=Math.sqrt(t*t/(1+a*a));i<e&&(l*=-1);var c,h=a*l;if(i===e)c={x:s,y:o+h};else if((o-n)/(s-e+1e-8)===a)c={x:s+l,y:o+h};else{var u,d,f=this.getLineLength(e,n,i,r),p=(s-e)*(i-e)+(o-n)*(r-n),g=this.getLineLength(s,o,u=e+(p/=f*f)*(i-e),d=n+p*(r-n)),m=Math.sqrt(t*t-g*g);l=Math.sqrt(m*m/(1+a*a)),i<e&&(l*=-1),c={x:u+l,y:d+(h=a*l)}}return c}static getPointOnCubicBezier(t,e,n,i,r,s,o,a,l){function c(t){return t*t*t}function h(t){return 3*t*t*(1-t)}function u(t){return 3*t*(1-t)*(1-t)}function d(t){return(1-t)*(1-t)*(1-t)}return{x:a*c(t)+s*h(t)+i*u(t)+e*d(t),y:l*c(t)+o*h(t)+r*u(t)+n*d(t)}}static getPointOnQuadraticBezier(t,e,n,i,r,s,o){function a(t){return t*t}function l(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}return{x:s*a(t)+i*l(t)+e*c(t),y:o*a(t)+r*l(t)+n*c(t)}}static getPointOnEllipticalArc(t,e,n,i,r,s){var o=Math.cos(s),a=Math.sin(s),l=n*Math.cos(r),c=i*Math.sin(r);return{x:t+(l*o-c*a),y:e+(l*a+c*o)}}static parsePathData(t){if(!t)return[];var e=t,n=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var i=0;i<n.length;i++)e=e.replace(new RegExp(n[i],"g"),"|"+n[i]);var r,s=e.split("|"),o=[],a=[],l=0,c=0,h=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi;for(i=1;i<s.length;i++){var u=s[i],d=u.charAt(0);for(u=u.slice(1),a.length=0;r=h.exec(u);)a.push(r[0]);for(var f=[],p=0,g=a.length;p<g;p++)if("00"!==a[p]){var m=parseFloat(a[p]);isNaN(m)?f.push(0):f.push(m)}else f.push(0,0);for(;f.length>0&&!isNaN(f[0]);){var v,y,_,b,w,C,x,S,k,T,E=null,O=[],P=l,A=c;switch(d){case"l":l+=f.shift(),c+=f.shift(),E="L",O.push(l,c);break;case"L":l=f.shift(),c=f.shift(),O.push(l,c);break;case"m":var M=f.shift(),I=f.shift();if(l+=M,c+=I,E="M",o.length>2&&"z"===o[o.length-1].command)for(var D=o.length-2;D>=0;D--)if("M"===o[D].command){l=o[D].points[0]+M,c=o[D].points[1]+I;break}O.push(l,c),d="l";break;case"M":l=f.shift(),c=f.shift(),E="M",O.push(l,c),d="L";break;case"h":l+=f.shift(),E="L",O.push(l,c);break;case"H":l=f.shift(),E="L",O.push(l,c);break;case"v":c+=f.shift(),E="L",O.push(l,c);break;case"V":c=f.shift(),E="L",O.push(l,c);break;case"C":O.push(f.shift(),f.shift(),f.shift(),f.shift()),l=f.shift(),c=f.shift(),O.push(l,c);break;case"c":O.push(l+f.shift(),c+f.shift(),l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),E="C",O.push(l,c);break;case"S":y=l,_=c,"C"===(v=o[o.length-1]).command&&(y=l+(l-v.points[2]),_=c+(c-v.points[3])),O.push(y,_,f.shift(),f.shift()),l=f.shift(),c=f.shift(),E="C",O.push(l,c);break;case"s":y=l,_=c,"C"===(v=o[o.length-1]).command&&(y=l+(l-v.points[2]),_=c+(c-v.points[3])),O.push(y,_,l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),E="C",O.push(l,c);break;case"Q":O.push(f.shift(),f.shift()),l=f.shift(),c=f.shift(),O.push(l,c);break;case"q":O.push(l+f.shift(),c+f.shift()),l+=f.shift(),c+=f.shift(),E="Q",O.push(l,c);break;case"T":y=l,_=c,"Q"===(v=o[o.length-1]).command&&(y=l+(l-v.points[0]),_=c+(c-v.points[1])),l=f.shift(),c=f.shift(),E="Q",O.push(y,_,l,c);break;case"t":y=l,_=c,"Q"===(v=o[o.length-1]).command&&(y=l+(l-v.points[0]),_=c+(c-v.points[1])),l+=f.shift(),c+=f.shift(),E="Q",O.push(y,_,l,c);break;case"A":b=f.shift(),w=f.shift(),C=f.shift(),x=f.shift(),S=f.shift(),k=l,T=c,l=f.shift(),c=f.shift(),E="A",O=this.convertEndpointToCenterParameterization(k,T,l,c,x,S,b,w,C);break;case"a":b=f.shift(),w=f.shift(),C=f.shift(),x=f.shift(),S=f.shift(),k=l,T=c,l+=f.shift(),c+=f.shift(),E="A",O=this.convertEndpointToCenterParameterization(k,T,l,c,x,S,b,w,C)}o.push({command:E||d,points:O,start:{x:P,y:A},pathLength:this.calcLength(P,A,E||d,O)})}"z"!==d&&"Z"!==d||o.push({command:"z",points:[],start:void 0,pathLength:0})}return o}static calcLength(t,e,n,i){var r,s,o,a,l=Ek;switch(n){case"L":return l.getLineLength(t,e,i[0],i[1]);case"C":for(r=0,s=l.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),a=.01;a<=1;a+=.01)o=l.getPointOnCubicBezier(a,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case"Q":for(r=0,s=l.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),a=.01;a<=1;a+=.01)o=l.getPointOnQuadraticBezier(a,t,e,i[0],i[1],i[2],i[3]),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case"A":r=0;var c=i[4],h=i[5],u=i[4]+h,d=Math.PI/180;if(Math.abs(c-u)<d&&(d=Math.abs(c-u)),s=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],c,0),h<0)for(a=c-d;a>u;a-=d)o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(a=c+d;a<u;a+=d)o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=l.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=l.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),r+l.getLineLength(s.x,s.y,o.x,o.y)}return 0}static convertEndpointToCenterParameterization(t,e,n,i,r,s,o,a,l){var c=l*(Math.PI/180),h=Math.cos(c)*(t-n)/2+Math.sin(c)*(e-i)/2,u=-1*Math.sin(c)*(t-n)/2+Math.cos(c)*(e-i)/2,d=h*h/(o*o)+u*u/(a*a);d>1&&(o*=Math.sqrt(d),a*=Math.sqrt(d));var f=Math.sqrt((o*o*(a*a)-o*o*(u*u)-a*a*(h*h))/(o*o*(u*u)+a*a*(h*h)));r===s&&(f*=-1),isNaN(f)&&(f=0);var p=f*o*u/a,g=f*-a*h/o,m=(t+n)/2+Math.cos(c)*p-Math.sin(c)*g,v=(e+i)/2+Math.sin(c)*p+Math.cos(c)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},_=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},b=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(_(t,e))},w=b([1,0],[(h-p)/o,(u-g)/a]),C=[(h-p)/o,(u-g)/a],x=[(-1*h-p)/o,(-1*u-g)/a],S=b(C,x);return _(C,x)<=-1&&(S=Math.PI),_(C,x)>=1&&(S=0),0===s&&S>0&&(S-=2*Math.PI),1===s&&S<0&&(S+=2*Math.PI),[m,v,o,a,w,S,c,s]}}Ek.prototype.className="Path",Ek.prototype._attrsAffectingSize=["data"],kx(Ek),Hx.addGetterSetter(Ek,"data");class Ok extends Tk{_sceneFunc(t){super._sceneFunc(t);var e=2*Math.PI,n=this.points(),i=n,r=0!==this.tension()&&n.length>4;r&&(i=this.getTensionPoints());var s,o,a=this.pointerLength(),l=n.length;if(r){const t=[i[i.length-4],i[i.length-3],i[i.length-2],i[i.length-1],n[l-2],n[l-1]],e=Ek.calcLength(i[i.length-4],i[i.length-3],"C",t),r=Ek.getPointOnQuadraticBezier(Math.min(1,1-a/e),t[0],t[1],t[2],t[3],t[4],t[5]);s=n[l-2]-r.x,o=n[l-1]-r.y}else s=n[l-2]-n[l-4],o=n[l-1]-n[l-3];var c=(Math.atan2(o,s)+e)%e,h=this.pointerWidth();this.pointerAtEnding()&&(t.save(),t.beginPath(),t.translate(n[l-2],n[l-1]),t.rotate(c),t.moveTo(0,0),t.lineTo(-a,h/2),t.lineTo(-a,-h/2),t.closePath(),t.restore()),this.pointerAtBeginning()&&(t.save(),t.translate(n[0],n[1]),r?(s=(i[0]+i[2])/2-n[0],o=(i[1]+i[3])/2-n[1]):(s=n[2]-n[0],o=n[3]-n[1]),t.rotate((Math.atan2(-o,-s)+e)%e),t.moveTo(0,0),t.lineTo(-a,h/2),t.lineTo(-a,-h/2),t.closePath(),t.restore());var u=this.dashEnabled();u&&(this.attrs.dashEnabled=!1,t.setLineDash([])),t.fillStrokeShape(this),u&&(this.attrs.dashEnabled=!0)}getSelfRect(){const t=super.getSelfRect(),e=this.pointerWidth()/2;return{x:t.x-e,y:t.y-e,width:t.width+2*e,height:t.height+2*e}}}Ok.prototype.className="Arrow",kx(Ok),Hx.addGetterSetter(Ok,"pointerLength",10,jx()),Hx.addGetterSetter(Ok,"pointerWidth",10,jx()),Hx.addGetterSetter(Ok,"pointerAtBeginning",!1),Hx.addGetterSetter(Ok,"pointerAtEnding",!0);class Pk extends lk{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.attrs.radius||0,0,2*Math.PI,!1),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius()!==t/2&&this.radius(t/2)}setHeight(t){this.radius()!==t/2&&this.radius(t/2)}}Pk.prototype._centroid=!0,Pk.prototype.className="Circle",Pk.prototype._attrsAffectingSize=["radius"],kx(Pk),Hx.addGetterSetter(Pk,"radius",0,jx());class Ak extends lk{_sceneFunc(t){var e=this.radiusX(),n=this.radiusY();t.beginPath(),t.save(),e!==n&&t.scale(1,n/e),t.arc(0,0,e,0,2*Math.PI,!1),t.restore(),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radiusX()}getHeight(){return 2*this.radiusY()}setWidth(t){this.radiusX(t/2)}setHeight(t){this.radiusY(t/2)}}Ak.prototype.className="Ellipse",Ak.prototype._centroid=!0,Ak.prototype._attrsAffectingSize=["radiusX","radiusY"],kx(Ak),Hx.addComponentsGetterSetter(Ak,"radius",["x","y"]),Hx.addGetterSetter(Ak,"radiusX",0,jx()),Hx.addGetterSetter(Ak,"radiusY",0,jx());class Mk extends lk{constructor(t){super(t),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const t=this.image();t&&t.complete||t&&4===t.readyState||t&&t.addEventListener&&t.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(t){const e=this.getWidth(),n=this.getHeight(),i=this.attrs.image;let r;if(i){const t=this.attrs.cropWidth,s=this.attrs.cropHeight;r=t&&s?[i,this.cropX(),this.cropY(),t,s,0,0,e,n]:[i,0,0,e,n]}(this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)),i&&t.drawImage.apply(t,r)}_hitFunc(t){var e=this.width(),n=this.height();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}getWidth(){var t,e;return null!==(t=this.attrs.width)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.width}getHeight(){var t,e;return null!==(t=this.attrs.height)&&void 0!==t?t:null===(e=this.image())||void 0===e?void 0:e.height}static fromURL(t,e){var n=Rx.createImageElement();n.onload=function(){var t=new Mk({image:n});e(t)},n.crossOrigin="Anonymous",n.src=t}}Mk.prototype.className="Image",kx(Mk),Hx.addGetterSetter(Mk,"image"),Hx.addComponentsGetterSetter(Mk,"crop",["x","y","width","height"]),Hx.addGetterSetter(Mk,"cropX",0,jx()),Hx.addGetterSetter(Mk,"cropY",0,jx()),Hx.addGetterSetter(Mk,"cropWidth",0,jx()),Hx.addGetterSetter(Mk,"cropHeight",0,jx());var Ik=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],Dk="up",Rk="right",Lk="down",Fk="left",jk=Ik.length;class Nk extends fk{constructor(t){super(t),this.on("add.konva",function(t){this._addListeners(t.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(t){var e,n=this,i=function(){n._sync()};for(e=0;e<jk;e++)t.on(Ik[e]+"Change.konva",i)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var t,e,n,i,r,s,o,a=this.getText(),l=this.getTag();if(a&&l){switch(t=a.width(),e=a.height(),n=l.pointerDirection(),i=l.pointerWidth(),o=l.pointerHeight(),r=0,s=0,n){case Dk:r=t/2,s=-1*o;break;case Rk:r=t+i,s=e/2;break;case Lk:r=t/2,s=e+o;break;case Fk:r=-1*i,s=e/2}l.setAttrs({x:-1*r,y:-1*s,width:t,height:e}),a.setAttrs({x:-1*r,y:-1*s})}}}Nk.prototype.className="Label",kx(Nk);class Bk extends lk{_sceneFunc(t){var e=this.width(),n=this.height(),i=this.pointerDirection(),r=this.pointerWidth(),s=this.pointerHeight(),o=this.cornerRadius();let a=0,l=0,c=0,h=0;"number"==typeof o?a=l=c=h=Math.min(o,e/2,n/2):(a=Math.min(o[0]||0,e/2,n/2),l=Math.min(o[1]||0,e/2,n/2),h=Math.min(o[2]||0,e/2,n/2),c=Math.min(o[3]||0,e/2,n/2)),t.beginPath(),t.moveTo(a,0),i===Dk&&(t.lineTo((e-r)/2,0),t.lineTo(e/2,-1*s),t.lineTo((e+r)/2,0)),t.lineTo(e-l,0),t.arc(e-l,l,l,3*Math.PI/2,0,!1),i===Rk&&(t.lineTo(e,(n-s)/2),t.lineTo(e+r,n/2),t.lineTo(e,(n+s)/2)),t.lineTo(e,n-h),t.arc(e-h,n-h,h,0,Math.PI/2,!1),i===Lk&&(t.lineTo((e+r)/2,n),t.lineTo(e/2,n+s),t.lineTo((e-r)/2,n)),t.lineTo(c,n),t.arc(c,n-c,c,Math.PI/2,Math.PI,!1),i===Fk&&(t.lineTo(0,(n+s)/2),t.lineTo(-1*r,n/2),t.lineTo(0,(n-s)/2)),t.lineTo(0,a),t.arc(a,a,a,Math.PI,3*Math.PI/2,!1),t.closePath(),t.fillStrokeShape(this)}getSelfRect(){var t=0,e=0,n=this.pointerWidth(),i=this.pointerHeight(),r=this.pointerDirection(),s=this.width(),o=this.height();return r===Dk?(e-=i,o+=i):r===Lk?o+=i:r===Fk?(t-=1.5*n,s+=n):r===Rk&&(s+=1.5*n),{x:t,y:e,width:s,height:o}}}Bk.prototype.className="Tag",kx(Bk),Hx.addGetterSetter(Bk,"pointerDirection","none"),Hx.addGetterSetter(Bk,"pointerWidth",0,jx()),Hx.addGetterSetter(Bk,"pointerHeight",0,jx()),Hx.addGetterSetter(Bk,"cornerRadius",0,Nx(4));class $k extends lk{_sceneFunc(t){var e=this.cornerRadius(),n=this.width(),i=this.height();if(t.beginPath(),e){let r=0,s=0,o=0,a=0;"number"==typeof e?r=s=o=a=Math.min(e,n/2,i/2):(r=Math.min(e[0]||0,n/2,i/2),s=Math.min(e[1]||0,n/2,i/2),a=Math.min(e[2]||0,n/2,i/2),o=Math.min(e[3]||0,n/2,i/2)),t.moveTo(r,0),t.lineTo(n-s,0),t.arc(n-s,s,s,3*Math.PI/2,0,!1),t.lineTo(n,i-a),t.arc(n-a,i-a,a,0,Math.PI/2,!1),t.lineTo(o,i),t.arc(o,i-o,o,Math.PI/2,Math.PI,!1),t.lineTo(0,r),t.arc(r,r,r,Math.PI,3*Math.PI/2,!1)}else t.rect(0,0,n,i);t.closePath(),t.fillStrokeShape(this)}}$k.prototype.className="Rect",kx($k),Hx.addGetterSetter($k,"cornerRadius",0,Nx(4));class zk extends lk{_sceneFunc(t){const e=this._getPoints();t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var n=1;n<e.length;n++)t.lineTo(e[n].x,e[n].y);t.closePath(),t.fillStrokeShape(this)}_getPoints(){const t=this.attrs.sides,e=this.attrs.radius||0,n=[];for(var i=0;i<t;i++)n.push({x:e*Math.sin(2*i*Math.PI/t),y:-1*e*Math.cos(2*i*Math.PI/t)});return n}getSelfRect(){const t=this._getPoints();var e=t[0].x,n=t[0].y,i=t[0].x,r=t[0].y;return t.forEach(t=>{e=Math.min(e,t.x),n=Math.max(n,t.x),i=Math.min(i,t.y),r=Math.max(r,t.y)}),{x:e,y:i,width:n-e,height:r-i}}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}zk.prototype.className="RegularPolygon",zk.prototype._centroid=!0,zk.prototype._attrsAffectingSize=["radius"],kx(zk),Hx.addGetterSetter(zk,"radius",0,jx()),Hx.addGetterSetter(zk,"sides",0,jx());var Vk=2*Math.PI;class Gk extends lk{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.innerRadius(),0,Vk,!1),t.moveTo(this.outerRadius(),0),t.arc(0,0,this.outerRadius(),Vk,0,!0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}Gk.prototype.className="Ring",Gk.prototype._centroid=!0,Gk.prototype._attrsAffectingSize=["innerRadius","outerRadius"],kx(Gk),Hx.addGetterSetter(Gk,"innerRadius",0,jx()),Hx.addGetterSetter(Gk,"outerRadius",0,jx());class Uk extends lk{constructor(t){super(t),this._updated=!0,this.anim=new gk(()=>{var t=this._updated;return this._updated=!1,t}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())})}_sceneFunc(t){var e=this.animation(),n=this.frameIndex(),i=4*n,r=this.animations()[e],s=this.frameOffsets(),o=r[i+0],a=r[i+1],l=r[i+2],c=r[i+3],h=this.image();if((this.hasFill()||this.hasStroke())&&(t.beginPath(),t.rect(0,0,l,c),t.closePath(),t.fillStrokeShape(this)),h)if(s){var u=s[e],d=2*n;t.drawImage(h,o,a,l,c,u[d+0],u[d+1],l,c)}else t.drawImage(h,o,a,l,c,0,0,l,c)}_hitFunc(t){var e=this.animation(),n=this.frameIndex(),i=4*n,r=this.animations()[e],s=this.frameOffsets(),o=r[i+2],a=r[i+3];if(t.beginPath(),s){var l=s[e],c=2*n;t.rect(l[c+0],l[c+1],o,a)}else t.rect(0,0,o,a);t.closePath(),t.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var t=this.frameIndex(),e=this.animation(),n=this.animations();this.frameIndex(t<n[e].length/4-1?t+1:0)}}Uk.prototype.className="Sprite",kx(Uk),Hx.addGetterSetter(Uk,"animation"),Hx.addGetterSetter(Uk,"animations"),Hx.addGetterSetter(Uk,"frameOffsets"),Hx.addGetterSetter(Uk,"image"),Hx.addGetterSetter(Uk,"frameIndex",0,jx()),Hx.addGetterSetter(Uk,"frameRate",17,jx()),Hx.backCompat(Uk,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class Hk extends lk{_sceneFunc(t){var e=this.innerRadius(),n=this.outerRadius(),i=this.numPoints();t.beginPath(),t.moveTo(0,0-n);for(var r=1;r<2*i;r++){var s=r%2==0?n:e,o=s*Math.sin(r*Math.PI/i),a=-1*s*Math.cos(r*Math.PI/i);t.lineTo(o,a)}t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.outerRadius()}getHeight(){return 2*this.outerRadius()}setWidth(t){this.outerRadius(t/2)}setHeight(t){this.outerRadius(t/2)}}function Wk(t){return Array.from(t)}Hk.prototype.className="Star",Hk.prototype._centroid=!0,Hk.prototype._attrsAffectingSize=["innerRadius","outerRadius"],kx(Hk),Hx.addGetterSetter(Hk,"numPoints",5,jx()),Hx.addGetterSetter(Hk,"innerRadius",0,jx()),Hx.addGetterSetter(Hk,"outerRadius",0,jx());var Xk,qk="auto",Yk="justify",Kk="left",Zk="middle",Qk="normal",Jk=" ",tT=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],eT=tT.length;function nT(){return Xk||(Xk=Rx.createCanvasElement().getContext("2d"))}class iT extends lk{constructor(t){super(function(t){return(t=t||{}).fillLinearGradientColorStops||t.fillRadialGradientColorStops||t.fillPatternImage||(t.fill=t.fill||"black"),t}(t)),this._partialTextX=0,this._partialTextY=0;for(var e=0;e<eT;e++)this.on(tT[e]+"Change.konva",this._setTextData);this._setTextData()}_sceneFunc(t){var e=this.textArr,n=e.length;if(this.text()){var i,r=this.padding(),s=this.fontSize(),o=this.lineHeight()*s,a=this.verticalAlign(),l=0,c=this.align(),h=this.getWidth(),u=this.letterSpacing(),d=this.fill(),f=this.textDecoration(),p=-1!==f.indexOf("underline"),g=-1!==f.indexOf("line-through"),m=0,v=(m=o/2,0),y=0;for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",Zk),t.setAttr("textAlign",Kk),a===Zk?l=(this.getHeight()-n*o-2*r)/2:"bottom"===a&&(l=this.getHeight()-n*o-2*r),t.translate(r,l+r),i=0;i<n;i++){v=0,y=0;var _,b,w,C=e[i],x=C.text,S=C.width,k=i!==n-1;if(t.save(),"right"===c?v+=h-S-2*r:"center"===c&&(v+=(h-S-2*r)/2),p&&(t.save(),t.beginPath(),t.moveTo(v,m+y+Math.round(s/2)),b=0==(_=x.split(" ").length-1),w=c===Yk&&k&&!b?h-2*r:S,t.lineTo(v+Math.round(w),m+y+Math.round(s/2)),t.lineWidth=s/15,t.strokeStyle=d,t.stroke(),t.restore()),g&&(t.save(),t.beginPath(),t.moveTo(v,m+y),b=0==(_=x.split(" ").length-1),w=c===Yk&&k&&!b?h-2*r:S,t.lineTo(v+Math.round(w),m+y),t.lineWidth=s/15,t.strokeStyle=d,t.stroke(),t.restore()),0!==u||c===Yk){_=x.split(" ").length-1;for(var T=Wk(x),E=0;E<T.length;E++){var O=T[E];" "===O&&i!==n-1&&c===Yk&&(v+=(h-2*r-S)/_),this._partialTextX=v,this._partialTextY=m+y,this._partialText=O,t.fillStrokeShape(this),v+=this.measureSize(O).width+u}}else this._partialTextX=v,this._partialTextY=m+y,this._partialText=x,t.fillStrokeShape(this);t.restore(),n>1&&(m+=o)}}}_hitFunc(t){var e=this.getWidth(),n=this.getHeight();t.beginPath(),t.rect(0,0,e,n),t.closePath(),t.fillStrokeShape(this)}setText(t){var e=Rx._isString(t)?t:null==t?"":t+"";return this._setAttr("text",e),this}getWidth(){return this.attrs.width===qk||void 0===this.attrs.width?this.getTextWidth()+2*this.padding():this.attrs.width}getHeight(){return this.attrs.height===qk||void 0===this.attrs.height?this.fontSize()*this.textArr.length*this.lineHeight()+2*this.padding():this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return Rx.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(t){var e,n=nT(),i=this.fontSize();return n.save(),n.font=this._getContextFont(),e=n.measureText(t),n.restore(),{width:e.width,height:i}}_getContextFont(){return this.fontStyle()+Jk+this.fontVariant()+Jk+(this.fontSize()+"px ")+this.fontFamily().split(",").map(t=>{const e=(t=t.trim()).indexOf(" ")>=0,n=t.indexOf('"')>=0||t.indexOf("'")>=0;return e&&!n&&(t=`"${t}"`),t}).join(", ")}_addTextLine(t){this.align()===Yk&&(t=t.trim());var e=this._getTextWidth(t);return this.textArr.push({text:t,width:e})}_getTextWidth(t){var e=this.letterSpacing(),n=t.length;return nT().measureText(t).width+(n?e*(n-1):0)}_setTextData(){var t=this.text().split("\n"),e=+this.fontSize(),n=0,i=this.lineHeight()*e,r=this.attrs.width,s=this.attrs.height,o=r!==qk&&void 0!==r,a=s!==qk&&void 0!==s,l=this.padding(),c=r-2*l,h=s-2*l,u=0,d=this.wrap(),f="none"!==d,p="char"!==d&&f,g=this.ellipsis();this.textArr=[],nT().font=this._getContextFont();for(var m=g?this._getTextWidth("\u2026"):0,v=0,y=t.length;v<y;++v){var _=t[v],b=this._getTextWidth(_);if(o&&b>c)for(;_.length>0;){for(var w=0,C=_.length,x="",S=0;w<C;){var k=w+C>>>1,T=_.slice(0,k+1),E=this._getTextWidth(T)+m;E<=c?(w=k+1,x=T,S=E):C=k}if(!x)break;if(p){var O,P=_[x.length];(O=(P===Jk||"-"===P)&&S<=c?x.length:Math.max(x.lastIndexOf(Jk),x.lastIndexOf("-"))+1)>0&&(x=x.slice(0,w=O),S=this._getTextWidth(x))}if(x=x.trimRight(),this._addTextLine(x),n=Math.max(n,S),u+=i,!f||a&&u+i>h){var A=this.textArr[this.textArr.length-1];A&&g&&(this._getTextWidth(A.text+"\u2026")<c||(A.text=A.text.slice(0,A.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(A.text+"\u2026"));break}if((_=(_=_.slice(w)).trimLeft()).length>0&&(b=this._getTextWidth(_))<=c){this._addTextLine(_),u+=i,n=Math.max(n,b);break}}else this._addTextLine(_),u+=i,n=Math.max(n,b);if(a&&u+i>h)break}this.textHeight=e,this.textWidth=n}getStrokeScaleEnabled(){return!0}}iT.prototype._fillFunc=function(t){t.fillText(this._partialText,this._partialTextX,this._partialTextY)},iT.prototype._strokeFunc=function(t){t.strokeText(this._partialText,this._partialTextX,this._partialTextY)},iT.prototype.className="Text",iT.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"],kx(iT),Hx.overWriteSetter(iT,"width",Bx()),Hx.overWriteSetter(iT,"height",Bx()),Hx.addGetterSetter(iT,"fontFamily","Arial"),Hx.addGetterSetter(iT,"fontSize",12,jx()),Hx.addGetterSetter(iT,"fontStyle",Qk),Hx.addGetterSetter(iT,"fontVariant",Qk),Hx.addGetterSetter(iT,"padding",0,jx()),Hx.addGetterSetter(iT,"align",Kk),Hx.addGetterSetter(iT,"verticalAlign","top"),Hx.addGetterSetter(iT,"lineHeight",1,jx()),Hx.addGetterSetter(iT,"wrap","word"),Hx.addGetterSetter(iT,"ellipsis",!1,Vx()),Hx.addGetterSetter(iT,"letterSpacing",0,jx()),Hx.addGetterSetter(iT,"text","",$x()),Hx.addGetterSetter(iT,"textDecoration","");var rT="normal";function sT(t){t.fillText(this.partialText,0,0)}function oT(t){t.strokeText(this.partialText,0,0)}class aT extends lk{constructor(t){super(t),this.dummyCanvas=Rx.createCanvasElement(),this.dataArray=[],this.dataArray=Ek.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=Ek.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva",this._setTextData),this._setTextData()}_sceneFunc(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",this.textBaseline()),t.setAttr("textAlign","left"),t.save();var e=this.textDecoration(),n=this.fill(),i=this.fontSize(),r=this.glyphInfo;"underline"===e&&t.beginPath();for(var s=0;s<r.length;s++){t.save();var o=r[s].p0;t.translate(o.x,o.y),t.rotate(r[s].rotation),this.partialText=r[s].text,t.fillStrokeShape(this),"underline"===e&&(0===s&&t.moveTo(0,i/2+1),t.lineTo(i,i/2+1)),t.restore()}"underline"===e&&(t.strokeStyle=n,t.lineWidth=i/20,t.stroke()),t.restore()}_hitFunc(t){t.beginPath();var e=this.glyphInfo;if(e.length>=1){var n=e[0].p0;t.moveTo(n.x,n.y)}for(var i=0;i<e.length;i++){var r=e[i].p1;t.lineTo(r.x,r.y)}t.setAttr("lineWidth",this.fontSize()),t.setAttr("strokeStyle",this.colorKey),t.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return Rx.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(t){return iT.prototype.setText.call(this,t)}_getContextFont(){return iT.prototype._getContextFont.call(this)}_getTextSize(t){var e=this.dummyCanvas.getContext("2d");e.save(),e.font=this._getContextFont();var n=e.measureText(t);return e.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var t=this,e=this._getTextSize(this.attrs.text),n=this.letterSpacing(),i=this.align(),r=this.kerningFunc();this.textWidth=e.width,this.textHeight=e.height;var s=Math.max(this.textWidth+((this.attrs.text||"").length-1)*n,0);this.glyphInfo=[];for(var o=0,a=0;a<t.dataArray.length;a++)t.dataArray[a].pathLength>0&&(o+=t.dataArray[a].pathLength);var l=0;"center"===i&&(l=Math.max(0,o/2-s/2)),"right"===i&&(l=Math.max(0,o-s));for(var c,h,u,d=Wk(this.text()),f=this.text().split(" ").length-1,p=-1,g=0,m=function(){g=0;for(var e=t.dataArray,n=p+1;n<e.length;n++){if(e[n].pathLength>0)return p=n,e[n];"M"===e[n].command&&(c={x:e[n].points[0],y:e[n].points[1]})}return{}},v=function(e){var r=t._getTextSize(e).width+n;" "===e&&"justify"===i&&(r+=(o-s)/f);var a=0,l=0;for(h=void 0;Math.abs(r-a)/r>.01&&l<20;){l++;for(var d=a;void 0===u;)(u=m())&&d+u.pathLength<r&&(d+=u.pathLength,u=void 0);if(u==={}||void 0===c)return;var p=!1;switch(u.command){case"L":Ek.getLineLength(c.x,c.y,u.points[0],u.points[1])>r?h=Ek.getPointOnLine(r,c.x,c.y,u.points[0],u.points[1],c.x,c.y):u=void 0;break;case"A":var v=u.points[5],y=u.points[4]+v;0===g?g=u.points[4]+1e-8:r>a?g+=Math.PI/180*v/Math.abs(v):g-=Math.PI/360*v/Math.abs(v),(v<0&&g<y||v>=0&&g>y)&&(g=y,p=!0),h=Ek.getPointOnEllipticalArc(u.points[0],u.points[1],u.points[2],u.points[3],g,u.points[6]);break;case"C":0===g?g=r>u.pathLength?1e-8:r/u.pathLength:r>a?g+=(r-a)/u.pathLength/2:g=Math.max(g-(a-r)/u.pathLength/2,0),g>1&&(g=1,p=!0),h=Ek.getPointOnCubicBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3],u.points[4],u.points[5]);break;case"Q":0===g?g=r/u.pathLength:r>a?g+=(r-a)/u.pathLength:g-=(a-r)/u.pathLength,g>1&&(g=1,p=!0),h=Ek.getPointOnQuadraticBezier(g,u.start.x,u.start.y,u.points[0],u.points[1],u.points[2],u.points[3])}void 0!==h&&(a=Ek.getLineLength(c.x,c.y,h.x,h.y)),p&&(p=!1,u=void 0)}},y=l/(t._getTextSize("C").width+n)-1,_=0;_<y&&(v("C"),void 0!==c&&void 0!==h);_++)c=h;for(var b=0;b<d.length&&(v(d[b]),void 0!==c&&void 0!==h);b++){var w=Ek.getLineLength(c.x,c.y,h.x,h.y),C=0;if(r)try{C=r(d[b-1],d[b])*this.fontSize()}catch(k){C=0}c.x+=C,h.x+=C,this.textWidth+=C;var x=Ek.getPointOnLine(C+w/2,c.x,c.y,h.x,h.y),S=Math.atan2(h.y-c.y,h.x-c.x);this.glyphInfo.push({transposeX:x.x,transposeY:x.y,text:d[b],rotation:S,p0:c,p1:h}),c=h}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var t=[];this.glyphInfo.forEach(function(e){t.push(e.p0.x),t.push(e.p0.y),t.push(e.p1.x),t.push(e.p1.y)});for(var e,n,i=t[0]||0,r=t[0]||0,s=t[1]||0,o=t[1]||0,a=0;a<t.length/2;a++)e=t[2*a],n=t[2*a+1],i=Math.min(i,e),r=Math.max(r,e),s=Math.min(s,n),o=Math.max(o,n);var l=this.fontSize();return{x:i-l/2,y:s-l/2,width:r-i+l,height:o-s+l}}}aT.prototype._fillFunc=sT,aT.prototype._strokeFunc=oT,aT.prototype._fillFuncHit=sT,aT.prototype._strokeFuncHit=oT,aT.prototype.className="TextPath",aT.prototype._attrsAffectingSize=["text","fontSize","data"],kx(aT),Hx.addGetterSetter(aT,"data"),Hx.addGetterSetter(aT,"fontFamily","Arial"),Hx.addGetterSetter(aT,"fontSize",12,jx()),Hx.addGetterSetter(aT,"fontStyle",rT),Hx.addGetterSetter(aT,"align","left"),Hx.addGetterSetter(aT,"letterSpacing",0,jx()),Hx.addGetterSetter(aT,"textBaseline","middle"),Hx.addGetterSetter(aT,"fontVariant",rT),Hx.addGetterSetter(aT,"text",""),Hx.addGetterSetter(aT,"textDecoration",null),Hx.addGetterSetter(aT,"kerningFunc",null);var lT=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(t=>t+".tr-konva").join(" "),cT="nodesRect",hT=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"].map(t=>t+".tr-konva").join(" "),uT={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const dT="ontouchstart"in Sx._global;var fT=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"];function pT(t,e,n){const i=n.x+(t.x-n.x)*Math.cos(e)-(t.y-n.y)*Math.sin(e),r=n.y+(t.x-n.x)*Math.sin(e)+(t.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},t),{rotation:t.rotation+e,x:i,y:r})}class gT extends fk{constructor(t){super(t),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(lT,this.update),this.getNode()&&this.update()}attachTo(t){return this.setNode(t),this}setNode(t){return Rx.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([t])}getNode(){return this._nodes&&this._nodes[0]}setNodes(t=[]){return this._nodes&&this._nodes.length&&this.detach(),this._nodes=t,1===t.length&&this.useSingleNodeRotation()?this.rotation(t[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(t=>{const e=t._attrsAffectingSize.map(t=>t+"Change.tr-konva").join(" "),n=()=>{1===this.nodes().length&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),this._transforming||this.isDragging()||this.update()};t.on(e,n),t.on(hT,n),t.on("absoluteTransformChange.tr-konva",n),t.on("xChange.tr-konva yChange.tr-konva",n),this._proxyDrag(t)}),this._resetTransformCache(),!!this.findOne(".top-left")&&this.update(),this}_proxyDrag(t){let e;t.on("dragstart.tr-konva",n=>{e=t.getAbsolutePosition(),this.isDragging()||t===this.findOne(".back")||this.startDrag(n,!1)}),t.on("dragmove.tr-konva",n=>{if(!e)return;const i=t.getAbsolutePosition(),r=i.x-e.x,s=i.y-e.y;this.nodes().forEach(e=>{if(e===t)return;if(e.isDragging())return;const i=e.getAbsolutePosition();e.setAbsolutePosition({x:i.x+r,y:i.y+s}),e.startDrag(n)}),e=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(t=>{t.off(".tr-konva")}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(cT),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(cT,this.__getNodeRect)}__getNodeShape(t,e=this.rotation(),n){var i=t.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),r=t.getAbsoluteScale(n),s=t.getAbsolutePosition(n),o=i.x*r.x-t.offsetX()*r.x,a=i.y*r.y-t.offsetY()*r.y;const l=(Sx.getAngle(t.getAbsoluteRotation())+2*Math.PI)%(2*Math.PI);return pT({x:s.x+o*Math.cos(l)+a*Math.sin(-l),y:s.y+a*Math.cos(l)+o*Math.sin(l),width:i.width*r.x,height:i.height*r.y,rotation:l},-Sx.getAngle(e),{x:0,y:0})}__getNodeRect(){if(!this.getNode())return{x:-1e8,y:-1e8,width:0,height:0,rotation:0};const t=[];this.nodes().map(e=>{const n=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var i=[{x:n.x,y:n.y},{x:n.x+n.width,y:n.y},{x:n.x+n.width,y:n.y+n.height},{x:n.x,y:n.y+n.height}],r=e.getAbsoluteTransform();i.forEach(function(e){var n=r.point(e);t.push(n)})});const e=new Tx;var n,i,r,s;e.rotate(-Sx.getAngle(this.rotation())),t.forEach(function(t){var o=e.point(t);void 0===n&&(n=r=o.x,i=s=o.y),n=Math.min(n,o.x),i=Math.min(i,o.y),r=Math.max(r,o.x),s=Math.max(s,o.y)}),e.invert();const o=e.point({x:n,y:i});return{x:o.x,y:o.y,width:r-n,height:s-i,rotation:Sx.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),fT.forEach((function(t){this._createAnchor(t)}).bind(this)),this._createAnchor("rotater")}_createAnchor(t){var e=new $k({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:t+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:dT?10:"auto"}),n=this;e.on("mousedown touchstart",function(t){n._handleMouseDown(t)}),e.on("dragstart",t=>{e.stopDrag(),t.cancelBubble=!0}),e.on("dragend",t=>{t.cancelBubble=!0}),e.on("mouseenter",()=>{var n=Sx.getAngle(this.rotation()),i=function(t,e){if("rotater"===t)return"crosshair";e+=Rx.degToRad(uT[t]||0);var n=(Rx.radToDeg(e)%360+360)%360;return Rx._inRange(n,337.5,360)||Rx._inRange(n,0,22.5)?"ns-resize":Rx._inRange(n,22.5,67.5)?"nesw-resize":Rx._inRange(n,67.5,112.5)?"ew-resize":Rx._inRange(n,112.5,157.5)?"nwse-resize":Rx._inRange(n,157.5,202.5)?"ns-resize":Rx._inRange(n,202.5,247.5)?"nesw-resize":Rx._inRange(n,247.5,292.5)?"ew-resize":Rx._inRange(n,292.5,337.5)?"nwse-resize":(Rx.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}(t,n);e.getStage().content&&(e.getStage().content.style.cursor=i),this._cursorChange=!0}),e.on("mouseout",()=>{e.getStage().content&&(e.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(e)}_createBack(){var t=new lk({name:"back",width:0,height:0,draggable:!0,sceneFunc(t){var e=this.getParent(),n=e.padding();t.beginPath(),t.rect(-n,-n,this.width()+2*n,this.height()+2*n),t.moveTo(this.width()/2,-n),e.rotateEnabled()&&t.lineTo(this.width()/2,-e.rotateAnchorOffset()*Rx._sign(this.height())-n),t.fillStrokeShape(this)},hitFunc:(t,e)=>{if(this.shouldOverdrawWholeArea()){var n=this.padding();t.beginPath(),t.rect(-n,-n,e.width()+2*n,e.height()+2*n),t.fillStrokeShape(e)}}});this.add(t),this._proxyDrag(t),t.on("dragstart",t=>{t.cancelBubble=!0}),t.on("dragmove",t=>{t.cancelBubble=!0}),t.on("dragend",t=>{t.cancelBubble=!0}),this.on("dragmove",t=>{this.update()})}_handleMouseDown(t){this._movingAnchorName=t.target.name().split(" ")[0];var e=this._getNodeRect(),n=e.width,i=e.height,r=Math.sqrt(Math.pow(n,2)+Math.pow(i,2));this.sin=Math.abs(i/r),this.cos=Math.abs(n/r),"undefined"!=typeof window&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var s=t.target.getAbsolutePosition(),o=t.target.getStage().getPointerPosition();this._anchorDragOffset={x:o.x-s.x,y:o.y-s.y},this._fire("transformstart",{evt:t,target:this.getNode()}),this._nodes.forEach(e=>{e._fire("transformstart",{evt:t,target:e})})}_handleMouseMove(t){var e,n,i,r=this.findOne("."+this._movingAnchorName),s=r.getStage();s.setPointersPositions(t);const o=s.getPointerPosition();var a={x:o.x-this._anchorDragOffset.x,y:o.y-this._anchorDragOffset.y};const l=r.getAbsolutePosition();r.setAbsolutePosition(a);const c=r.getAbsolutePosition();if(l.x!==c.x||l.y!==c.y)if("rotater"!==this._movingAnchorName){var h=this.keepRatio()||t.shiftKey,u=this.centeredScaling()||t.altKey;if("top-left"===this._movingAnchorName){if(h){var d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};i=Math.sqrt(Math.pow(d.x-r.x(),2)+Math.pow(d.y-r.y(),2));var f=this.findOne(".top-left").x()>d.x?-1:1,p=this.findOne(".top-left").y()>d.y?-1:1;e=i*this.cos*f,n=i*this.sin*p,this.findOne(".top-left").x(d.x-e),this.findOne(".top-left").y(d.y-n)}}else if("top-center"===this._movingAnchorName)this.findOne(".top-left").y(r.y());else if("top-right"===this._movingAnchorName){h&&(d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()},i=Math.sqrt(Math.pow(r.x()-d.x,2)+Math.pow(d.y-r.y(),2)),f=this.findOne(".top-right").x()<d.x?-1:1,p=this.findOne(".top-right").y()>d.y?-1:1,e=i*this.cos*f,n=i*this.sin*p,this.findOne(".top-right").x(d.x+e),this.findOne(".top-right").y(d.y-n));var g=r.position();this.findOne(".top-left").y(g.y),this.findOne(".bottom-right").x(g.x)}else"middle-left"===this._movingAnchorName?this.findOne(".top-left").x(r.x()):"middle-right"===this._movingAnchorName?this.findOne(".bottom-right").x(r.x()):"bottom-left"===this._movingAnchorName?(h&&(d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()},i=Math.sqrt(Math.pow(d.x-r.x(),2)+Math.pow(r.y()-d.y,2)),f=d.x<r.x()?-1:1,p=r.y()<d.y?-1:1,n=i*this.sin*p,r.x(d.x-(e=i*this.cos*f)),r.y(d.y+n)),g=r.position(),this.findOne(".top-left").x(g.x),this.findOne(".bottom-right").y(g.y)):"bottom-center"===this._movingAnchorName?this.findOne(".bottom-right").y(r.y()):"bottom-right"===this._movingAnchorName?h&&(d=u?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()},i=Math.sqrt(Math.pow(r.x()-d.x,2)+Math.pow(r.y()-d.y,2)),f=this.findOne(".bottom-right").x()<d.x?-1:1,p=this.findOne(".bottom-right").y()<d.y?-1:1,e=i*this.cos*f,n=i*this.sin*p,this.findOne(".bottom-right").x(d.x+e),this.findOne(".bottom-right").y(d.y+n)):console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));if(u=this.centeredScaling()||t.altKey){var m=this.findOne(".top-left"),v=this.findOne(".bottom-right"),y=m.x(),_=m.y(),b=this.getWidth()-v.x(),w=this.getHeight()-v.y();v.move({x:-y,y:-_}),m.move({x:b,y:w})}var C=this.findOne(".top-left").getAbsolutePosition();e=C.x,n=C.y;var x=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),S=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:e,y:n,width:x,height:S,rotation:Sx.getAngle(this.rotation())},t)}else{var k=this._getNodeRect();e=r.x()-k.width/2,n=-r.y()+k.height/2;let i=Math.atan2(-n,e)+Math.PI/2;k.height<0&&(i-=Math.PI);const s=Sx.getAngle(this.rotation())+i,o=Sx.getAngle(this.rotationSnapTolerance()),a=function(t,e){return pT(t,e,function(t){return{x:t.x+t.width/2*Math.cos(t.rotation)+t.height/2*Math.sin(-t.rotation),y:t.y+t.height/2*Math.cos(t.rotation)+t.width/2*Math.sin(t.rotation)}}(t))}(k,function(t,e,n){let i=e;for(let r=0;r<t.length;r++){const s=Sx.getAngle(t[r]),o=Math.abs(s-e)%(2*Math.PI);Math.min(o,2*Math.PI-o)<n&&(i=s)}return i}(this.rotationSnaps(),s,o)-k.rotation);this._fitNodesInto(a,t)}}_handleMouseUp(t){this._removeEvents(t)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(t){if(this._transforming){this._transforming=!1,"undefined"!=typeof window&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var e=this.getNode();this._fire("transformend",{evt:t,target:e}),e&&this._nodes.forEach(e=>{e._fire("transformend",{evt:t,target:e})}),this._movingAnchorName=null}}_fitNodesInto(t,e){var n=this._getNodeRect();if(Rx._inRange(t.width,2*-this.padding()-1,1))return void this.update();if(Rx._inRange(t.height,2*-this.padding()-1,1))return void this.update();const i=this.flipEnabled();var r=new Tx;if(r.rotate(Sx.getAngle(this.rotation())),this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("left")>=0){const e=r.point({x:2*-this.padding(),y:0});if(t.x+=e.x,t.y+=e.y,t.width+=2*this.padding(),this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,!i)return void this.update()}else if(this._movingAnchorName&&t.width<0&&this._movingAnchorName.indexOf("right")>=0){const e=r.point({x:2*this.padding(),y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.width+=2*this.padding(),!i)return void this.update()}if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("top")>=0){const e=r.point({x:0,y:2*-this.padding()});if(t.x+=e.x,t.y+=e.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!i)return void this.update()}else if(this._movingAnchorName&&t.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const e=r.point({x:0,y:2*this.padding()});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=e.x,this._anchorDragOffset.y-=e.y,t.height+=2*this.padding(),!i)return void this.update()}if(this.boundBoxFunc()){const e=this.boundBoxFunc()(n,t);e?t=e:Rx.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const s=1e7,o=new Tx;o.translate(n.x,n.y),o.rotate(n.rotation),o.scale(n.width/s,n.height/s);const a=new Tx;a.translate(t.x,t.y),a.rotate(t.rotation),a.scale(t.width/s,t.height/s);const l=a.multiply(o.invert());this._nodes.forEach(t=>{var n;const i=t.getParent().getAbsoluteTransform(),r=t.getTransform().copy();r.translate(t.offsetX(),t.offsetY());const s=new Tx;s.multiply(i.copy().invert()).multiply(l).multiply(i).multiply(r);const o=s.decompose();t.setAttrs(o),this._fire("transform",{evt:e,target:t}),t._fire("transform",{evt:e,target:t}),null===(n=t.getLayer())||void 0===n||n.batchDraw()}),this.rotation(Rx._getRotation(t.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(t,e){this.findOne(t).setAttrs(e)}update(){var t,e=this._getNodeRect();this.rotation(Rx._getRotation(e.rotation));var n=e.width,i=e.height,r=this.enabledAnchors(),s=this.resizeEnabled(),o=this.padding(),a=this.anchorSize();this.find("._anchor").forEach(t=>{t.setAttrs({width:a,height:a,offsetX:a/2,offsetY:a/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:a/2+o,offsetY:a/2+o,visible:s&&r.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:n/2,y:0,offsetY:a/2+o,visible:s&&r.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:n,y:0,offsetX:a/2-o,offsetY:a/2+o,visible:s&&r.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:i/2,offsetX:a/2+o,visible:s&&r.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:n,y:i/2,offsetX:a/2-o,visible:s&&r.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:i,offsetX:a/2+o,offsetY:a/2-o,visible:s&&r.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:n/2,y:i,offsetY:a/2-o,visible:s&&r.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:n,y:i,offsetX:a/2-o,offsetY:a/2-o,visible:s&&r.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:n/2,y:-this.rotateAnchorOffset()*Rx._sign(i)-o,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:n,height:i,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),null===(t=this.getLayer())||void 0===t||t.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var t=this.findOne("."+this._movingAnchorName);t&&t.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),fk.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return vS.prototype.toObject.call(this)}}gT.prototype.className="Transformer",kx(gT),Hx.addGetterSetter(gT,"enabledAnchors",fT,function(t){return t instanceof Array||Rx.warn("enabledAnchors value should be an array"),t instanceof Array&&t.forEach(function(t){-1===fT.indexOf(t)&&Rx.warn("Unknown anchor name: "+t+". Available names are: "+fT.join(", "))}),t||[]}),Hx.addGetterSetter(gT,"flipEnabled",!0,Vx()),Hx.addGetterSetter(gT,"resizeEnabled",!0),Hx.addGetterSetter(gT,"anchorSize",10,jx()),Hx.addGetterSetter(gT,"rotateEnabled",!0),Hx.addGetterSetter(gT,"rotationSnaps",[]),Hx.addGetterSetter(gT,"rotateAnchorOffset",50,jx()),Hx.addGetterSetter(gT,"rotationSnapTolerance",5,jx()),Hx.addGetterSetter(gT,"borderEnabled",!0),Hx.addGetterSetter(gT,"anchorStroke","rgb(0, 161, 255)"),Hx.addGetterSetter(gT,"anchorStrokeWidth",1,jx()),Hx.addGetterSetter(gT,"anchorFill","white"),Hx.addGetterSetter(gT,"anchorCornerRadius",0,jx()),Hx.addGetterSetter(gT,"borderStroke","rgb(0, 161, 255)"),Hx.addGetterSetter(gT,"borderStrokeWidth",1,jx()),Hx.addGetterSetter(gT,"borderDash"),Hx.addGetterSetter(gT,"keepRatio",!0),Hx.addGetterSetter(gT,"centeredScaling",!1),Hx.addGetterSetter(gT,"ignoreStroke",!1),Hx.addGetterSetter(gT,"padding",0,jx()),Hx.addGetterSetter(gT,"node"),Hx.addGetterSetter(gT,"nodes"),Hx.addGetterSetter(gT,"boundBoxFunc"),Hx.addGetterSetter(gT,"shouldOverdrawWholeArea",!1),Hx.addGetterSetter(gT,"useSingleNodeRotation",!0),Hx.backCompat(gT,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class mT extends lk{_sceneFunc(t){t.beginPath(),t.arc(0,0,this.radius(),0,Sx.getAngle(this.angle()),this.clockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}getWidth(){return 2*this.radius()}getHeight(){return 2*this.radius()}setWidth(t){this.radius(t/2)}setHeight(t){this.radius(t/2)}}function vT(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}mT.prototype.className="Wedge",mT.prototype._centroid=!0,mT.prototype._attrsAffectingSize=["radius"],kx(mT),Hx.addGetterSetter(mT,"radius",0,jx()),Hx.addGetterSetter(mT,"angle",0,jx()),Hx.addGetterSetter(mT,"clockwise",!1),Hx.backCompat(mT,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});var yT=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],_T=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function bT(t,e,n,i,r){var s=n-e,o=r-i;return 0===s?i+o/2:0===o?i:o*((t-e)/s)+i}function wT(t,e,n){var i=4*(n*t.width+e),r=[];return r.push(t.data[i++],t.data[i++],t.data[i++],t.data[i++]),r}function CT(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}Hx.addGetterSetter(vS,"blurRadius",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"brightness",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"contrast",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"embossStrength",.5,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"embossWhiteLevel",.5,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"embossDirection","top-left",null,Hx.afterSetFilter),Hx.addGetterSetter(vS,"embossBlend",!1,null,Hx.afterSetFilter),Hx.addGetterSetter(vS,"enhance",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"hue",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"saturation",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"luminance",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"hue",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"saturation",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"value",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"kaleidoscopePower",2,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"kaleidoscopeAngle",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"threshold",0,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"noise",.2,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"pixelSize",8,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"levels",.5,jx(),Hx.afterSetFilter),Hx.addGetterSetter(vS,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Hx.addGetterSetter(vS,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Hx.addGetterSetter(vS,"blue",0,Fx,Hx.afterSetFilter),Hx.addGetterSetter(vS,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Hx.addGetterSetter(vS,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:t<0?0:Math.round(t)}),Hx.addGetterSetter(vS,"blue",0,Fx,Hx.afterSetFilter),Hx.addGetterSetter(vS,"alpha",1,function(t){return this._filterUpToDate=!1,t>1?1:t<0?0:t}),Hx.addGetterSetter(vS,"threshold",.5,jx(),Hx.afterSetFilter);const xT=Ck.Util._assign(Ck,{Arc:xk,Arrow:Ok,Circle:Pk,Ellipse:Ak,Image:Mk,Label:Nk,Tag:Bk,Line:Tk,Path:Ek,Rect:$k,RegularPolygon:zk,Ring:Gk,Sprite:Uk,Star:Hk,Text:iT,TextPath:aT,Transformer:gT,Wedge:mT,Filters:{Blur:function(t){var e=Math.round(this.blurRadius());e>0&&function(t,e){var n,i,r,s,o,a,l,c,h,u,d,f,p,g,m,v,y,_,b,w,C,x,S,k,T=t.data,E=t.width,O=t.height,P=e+e+1,A=E-1,M=O-1,I=e+1,D=I*(I+1)/2,R=new vT,L=null,F=R,j=null,N=null,B=yT[e],$=_T[e];for(r=1;r<P;r++)F=F.next=new vT,r===I&&(L=F);for(F.next=R,l=a=0,i=0;i<O;i++){for(v=y=_=b=c=h=u=d=0,f=I*(w=T[a]),p=I*(C=T[a+1]),g=I*(x=T[a+2]),m=I*(S=T[a+3]),c+=D*w,h+=D*C,u+=D*x,d+=D*S,F=R,r=0;r<I;r++)F.r=w,F.g=C,F.b=x,F.a=S,F=F.next;for(r=1;r<I;r++)c+=(F.r=w=T[s=a+((A<r?A:r)<<2)])*(k=I-r),h+=(F.g=C=T[s+1])*k,u+=(F.b=x=T[s+2])*k,d+=(F.a=S=T[s+3])*k,v+=w,y+=C,_+=x,b+=S,F=F.next;for(j=R,N=L,n=0;n<E;n++)T[a+3]=S=d*B>>$,0!==S?(T[a]=(c*B>>$)*(S=255/S),T[a+1]=(h*B>>$)*S,T[a+2]=(u*B>>$)*S):T[a]=T[a+1]=T[a+2]=0,c-=f,h-=p,u-=g,d-=m,f-=j.r,p-=j.g,g-=j.b,m-=j.a,s=l+((s=n+e+1)<A?s:A)<<2,c+=v+=j.r=T[s],h+=y+=j.g=T[s+1],u+=_+=j.b=T[s+2],d+=b+=j.a=T[s+3],j=j.next,f+=w=N.r,p+=C=N.g,g+=x=N.b,m+=S=N.a,v-=w,y-=C,_-=x,b-=S,N=N.next,a+=4;l+=E}for(n=0;n<E;n++){for(y=_=b=v=h=u=d=c=0,f=I*(w=T[a=n<<2]),p=I*(C=T[a+1]),g=I*(x=T[a+2]),m=I*(S=T[a+3]),c+=D*w,h+=D*C,u+=D*x,d+=D*S,F=R,r=0;r<I;r++)F.r=w,F.g=C,F.b=x,F.a=S,F=F.next;for(o=E,r=1;r<=e;r++)c+=(F.r=w=T[a=o+n<<2])*(k=I-r),h+=(F.g=C=T[a+1])*k,u+=(F.b=x=T[a+2])*k,d+=(F.a=S=T[a+3])*k,v+=w,y+=C,_+=x,b+=S,F=F.next,r<M&&(o+=E);for(a=n,j=R,N=L,i=0;i<O;i++)T[3+(s=a<<2)]=S=d*B>>$,S>0?(T[s]=(c*B>>$)*(S=255/S),T[s+1]=(h*B>>$)*S,T[s+2]=(u*B>>$)*S):T[s]=T[s+1]=T[s+2]=0,c-=f,h-=p,u-=g,d-=m,f-=j.r,p-=j.g,g-=j.b,m-=j.a,s=n+((s=i+I)<M?s:M)*E<<2,c+=v+=j.r=T[s],h+=y+=j.g=T[s+1],u+=_+=j.b=T[s+2],d+=b+=j.a=T[s+3],j=j.next,f+=w=N.r,p+=C=N.g,g+=x=N.b,m+=S=N.a,v-=w,y-=C,_-=x,b-=S,N=N.next,a+=E}}(t,e)},Brighten:function(t){var e,n=255*this.brightness(),i=t.data,r=i.length;for(e=0;e<r;e+=4)i[e]+=n,i[e+1]+=n,i[e+2]+=n},Contrast:function(t){var e,n=Math.pow((this.contrast()+100)/100,2),i=t.data,r=i.length,s=150,o=150,a=150;for(e=0;e<r;e+=4)s=i[e],o=i[e+1],a=i[e+2],s/=255,s-=.5,s*=n,s+=.5,o/=255,o-=.5,o*=n,o+=.5,a/=255,a-=.5,a*=n,a+=.5,o=(o*=255)<0?0:o>255?255:o,a=(a*=255)<0?0:a>255?255:a,i[e]=s=(s*=255)<0?0:s>255?255:s,i[e+1]=o,i[e+2]=a},Emboss:function(t){var e=10*this.embossStrength(),n=255*this.embossWhiteLevel(),i=this.embossDirection(),r=this.embossBlend(),s=0,o=0,a=t.data,l=t.width,c=t.height,h=4*l,u=c;switch(i){case"top-left":s=-1,o=-1;break;case"top":s=-1,o=0;break;case"top-right":s=-1,o=1;break;case"right":s=0,o=1;break;case"bottom-right":s=1,o=1;break;case"bottom":s=1,o=0;break;case"bottom-left":s=1,o=-1;break;case"left":s=0,o=-1;break;default:Rx.error("Unknown emboss direction: "+i)}do{var d=(u-1)*h,f=s;u+f<1&&(f=0),u+f>c&&(f=0);var p=(u-1+f)*l*4,g=l;do{var m=d+4*(g-1),v=o;g+v<1&&(v=0),g+v>l&&(v=0);var y=p+4*(g-1+v),_=a[m+1]-a[y+1],b=a[m+2]-a[y+2],w=a[m]-a[y],C=w>0?w:-w;if((_>0?_:-_)>C&&(w=_),(b>0?b:-b)>C&&(w=b),w*=e,r){var x=a[m]+w,S=a[m+1]+w,k=a[m+2]+w;a[m]=x>255?255:x<0?0:x,a[m+1]=S>255?255:S<0?0:S,a[m+2]=k>255?255:k<0?0:k}else{var T=n-w;T<0?T=0:T>255&&(T=255),a[m]=a[m+1]=a[m+2]=T}}while(--g)}while(--u)},Enhance:function(t){var e,n,i,r,s=t.data,o=s.length,a=s[0],l=a,c=s[1],h=c,u=s[2],d=u,f=this.enhance();if(0!==f){for(r=0;r<o;r+=4)(e=s[r+0])<a?a=e:e>l&&(l=e),(n=s[r+1])<c?c=n:n>h&&(h=n),(i=s[r+2])<u?u=i:i>d&&(d=i);var p,g,m,v,y,_,b,w,C;for(l===a&&(l=255,a=0),h===c&&(h=255,c=0),d===u&&(d=255,u=0),f>0?(g=l+f*(255-l),m=a-f*(a-0),y=h+f*(255-h),_=c-f*(c-0),w=d+f*(255-d),C=u-f*(u-0)):(g=l+f*(l-(p=.5*(l+a))),m=a+f*(a-p),y=h+f*(h-(v=.5*(h+c))),_=c+f*(c-v),w=d+f*(d-(b=.5*(d+u))),C=u+f*(u-b)),r=0;r<o;r+=4)s[r+0]=bT(s[r+0],a,l,m,g),s[r+1]=bT(s[r+1],c,h,_,y),s[r+2]=bT(s[r+2],u,d,C,w)}},Grayscale:function(t){var e,n,i=t.data,r=i.length;for(e=0;e<r;e+=4)i[e]=n=.34*i[e]+.5*i[e+1]+.16*i[e+2],i[e+1]=n,i[e+2]=n},HSL:function(t){var e,n,i,r,s,o=t.data,a=o.length,l=Math.pow(2,this.saturation()),c=Math.abs(this.hue()+360)%360,h=127*this.luminance(),u=1*l*Math.cos(c*Math.PI/180),d=1*l*Math.sin(c*Math.PI/180),f=.299+.701*u+.167*d,p=.587-.587*u+.33*d,g=.114-.114*u-.497*d,m=.299-.299*u-.328*d,v=.587+.413*u+.035*d,y=.114-.114*u+.293*d,_=.299-.3*u+1.25*d,b=.587-.586*u-1.05*d,w=.114+.886*u-.2*d;for(e=0;e<a;e+=4)s=o[e+3],o[e+0]=f*(n=o[e+0])+p*(i=o[e+1])+g*(r=o[e+2])+h,o[e+1]=m*n+v*i+y*r+h,o[e+2]=_*n+b*i+w*r+h,o[e+3]=s},HSV:function(t){var e,n,i,r,s,o=t.data,a=o.length,l=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),h=Math.abs(this.hue()+360)%360,u=l*c*Math.cos(h*Math.PI/180),d=l*c*Math.sin(h*Math.PI/180),f=.299*l+.701*u+.167*d,p=.587*l-.587*u+.33*d,g=.114*l-.114*u-.497*d,m=.299*l-.299*u-.328*d,v=.587*l+.413*u+.035*d,y=.114*l-.114*u+.293*d,_=.299*l-.3*u+1.25*d,b=.587*l-.586*u-1.05*d,w=.114*l+.886*u-.2*d;for(e=0;e<a;e+=4)s=o[e+3],o[e+0]=f*(n=o[e+0])+p*(i=o[e+1])+g*(r=o[e+2]),o[e+1]=m*n+v*i+y*r,o[e+2]=_*n+b*i+w*r,o[e+3]=s},Invert:function(t){var e,n=t.data,i=n.length;for(e=0;e<i;e+=4)n[e]=255-n[e],n[e+1]=255-n[e+1],n[e+2]=255-n[e+2]},Kaleidoscope:function(t){var e,n,i,r,s,o,a,l,c,h=t.width,u=t.height,d=Math.round(this.kaleidoscopePower()),f=Math.round(this.kaleidoscopeAngle()),p=Math.floor(h*(f%360)/360);if(!(d<1)){var g=Rx.createCanvasElement();g.width=h,g.height=u;var m=g.getContext("2d").getImageData(0,0,h,u);!function(t,e,n){var i,r,s,o,a=t.data,l=e.data,c=t.width,h=t.height,u=n.polarCenterX||c/2,d=n.polarCenterY||h/2,f=0,p=0,g=0,m=0,v=Math.sqrt(u*u+d*d);r=c-u,s=h-d,v=(o=Math.sqrt(r*r+s*s))>v?o:v;var y,_,b,w,C=h,x=c,S=360/x*Math.PI/180;for(_=0;_<x;_+=1)for(b=Math.sin(_*S),w=Math.cos(_*S),y=0;y<C;y+=1)r=Math.floor(u+v*y/C*w),f=a[0+(i=4*((s=Math.floor(d+v*y/C*b))*c+r))],p=a[i+1],g=a[i+2],m=a[i+3],l[0+(i=4*(_+y*c))]=f,l[i+1]=p,l[i+2]=g,l[i+3]=m}(t,m,{polarCenterX:h/2,polarCenterY:u/2});for(var v=h/Math.pow(2,d);v<=8;)v*=2,d-=1;var y=v=Math.ceil(v),_=0,b=y,w=1;for(p+v>h&&(_=y,b=0,w=-1),n=0;n<u;n+=1)for(e=_;e!==b;e+=w)i=Math.round(e+p)%h,s=m.data[1+(l=4*(h*n+i))],o=m.data[l+2],a=m.data[l+3],m.data[0+(c=4*(h*n+e))]=m.data[l+0],m.data[c+1]=s,m.data[c+2]=o,m.data[c+3]=a;for(n=0;n<u;n+=1)for(y=Math.floor(v),r=0;r<d;r+=1){for(e=0;e<y+1;e+=1)s=m.data[1+(l=4*(h*n+e))],o=m.data[l+2],a=m.data[l+3],m.data[0+(c=4*(h*n+2*y-e-1))]=m.data[l+0],m.data[c+1]=s,m.data[c+2]=o,m.data[c+3]=a;y*=2}!function(t,e,n){var i,r,s,o,a,l,c=t.data,h=e.data,u=t.width,d=t.height,f=n.polarCenterX||u/2,p=n.polarCenterY||d/2,g=0,m=0,v=0,y=0,_=Math.sqrt(f*f+p*p);r=u-f,s=d-p,_=(l=Math.sqrt(r*r+s*s))>_?l:_;var b,w,C,x=d,S=u,k=n.polarRotation||0;for(r=0;r<u;r+=1)for(s=0;s<d;s+=1)o=r-f,a=s-p,b=Math.sqrt(o*o+a*a)*x/_,w=(w=(180*Math.atan2(a,o)/Math.PI+360+k)%360)*S/360,C=Math.floor(w),g=c[0+(i=4*(Math.floor(b)*u+C))],m=c[i+1],v=c[i+2],y=c[i+3],h[0+(i=4*(s*u+r))]=g,h[i+1]=m,h[i+2]=v,h[i+3]=y}(m,t,{polarRotation:0})}},Mask:function(t){var e=function(t,e){var n=wT(t,0,0),i=wT(t,t.width-1,0),r=wT(t,0,t.height-1),s=wT(t,t.width-1,t.height-1),o=e||10;if(CT(n,i)<o&&CT(i,s)<o&&CT(s,r)<o&&CT(r,n)<o){for(var a=function(t){for(var e=[0,0,0],n=0;n<t.length;n++)e[0]+=t[n][0],e[1]+=t[n][1],e[2]+=t[n][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}([i,n,s,r]),l=[],c=0;c<t.width*t.height;c++){var h=CT(a,[t.data[4*c],t.data[4*c+1],t.data[4*c+2]]);l[c]=h<o?0:255}return l}}(t,this.threshold());return e&&function(t,e){for(var n=0;n<t.width*t.height;n++)t.data[4*n+3]=e[n]}(t,e=function(t,e,n){for(var i=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-s,p=l+d-s;f>=0&&f<n&&p>=0&&p<e&&(h+=t[f*e+p]*i[u*r+d])}o[c]=h}return o}(e=function(t,e,n){for(var i=[1,1,1,1,1,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-s,p=l+d-s;f>=0&&f<n&&p>=0&&p<e&&(h+=t[f*e+p]*i[u*r+d])}o[c]=h>=1020?255:0}return o}(e=function(t,e,n){for(var i=[1,1,1,1,0,1,1,1,1],r=Math.round(Math.sqrt(i.length)),s=Math.floor(r/2),o=[],a=0;a<n;a++)for(var l=0;l<e;l++){for(var c=a*e+l,h=0,u=0;u<r;u++)for(var d=0;d<r;d++){var f=a+u-s,p=l+d-s;f>=0&&f<n&&p>=0&&p<e&&(h+=t[f*e+p]*i[u*r+d])}o[c]=2040===h?255:0}return o}(e,t.width,t.height),t.width,t.height),t.width,t.height)),t},Noise:function(t){var e,n=255*this.noise(),i=t.data,r=i.length,s=n/2;for(e=0;e<r;e+=4)i[e+0]+=s-2*s*Math.random(),i[e+1]+=s-2*s*Math.random(),i[e+2]+=s-2*s*Math.random()},Pixelate:function(t){var e,n,i,r,s,o,a,l,c,h,u,d,f,p,g=Math.ceil(this.pixelSize()),m=t.width,v=t.height,y=Math.ceil(m/g),_=Math.ceil(v/g),b=t.data;if(g<=0)Rx.error("pixelSize value can not be <= 0");else for(d=0;d<y;d+=1)for(f=0;f<_;f+=1){for(r=0,s=0,o=0,a=0,c=(l=d*g)+g,u=(h=f*g)+g,p=0,e=l;e<c;e+=1)if(!(e>=m))for(n=h;n<u;n+=1)n>=v||(r+=b[0+(i=4*(m*n+e))],s+=b[i+1],o+=b[i+2],a+=b[i+3],p+=1);for(r/=p,s/=p,o/=p,a/=p,e=l;e<c;e+=1)if(!(e>=m))for(n=h;n<u;n+=1)n>=v||(b[0+(i=4*(m*n+e))]=r,b[i+1]=s,b[i+2]=o,b[i+3]=a)}},Posterize:function(t){var e,n=Math.round(254*this.levels())+1,i=t.data,r=i.length,s=255/n;for(e=0;e<r;e+=1)i[e]=Math.floor(i[e]/s)*s},RGB:function(t){var e,n,i=t.data,r=i.length,s=this.red(),o=this.green(),a=this.blue();for(e=0;e<r;e+=4)i[e]=(n=(.34*i[e]+.5*i[e+1]+.16*i[e+2])/255)*s,i[e+1]=n*o,i[e+2]=n*a,i[e+3]=i[e+3]},RGBA:function(t){var e,n,i=t.data,r=i.length,s=this.red(),o=this.green(),a=this.blue(),l=this.alpha();for(e=0;e<r;e+=4)i[e]=s*l+i[e]*(n=1-l),i[e+1]=o*l+i[e+1]*n,i[e+2]=a*l+i[e+2]*n},Sepia:function(t){var e,n,i,r,s=t.data,o=s.length;for(e=0;e<o;e+=4)n=s[e+0],i=s[e+1],r=s[e+2],s[e+0]=Math.min(255,.393*n+.769*i+.189*r),s[e+1]=Math.min(255,.349*n+.686*i+.168*r),s[e+2]=Math.min(255,.272*n+.534*i+.131*r)},Solarize:function(t){var e=t.data,n=t.width,i=4*n,r=t.height;do{var s=(r-1)*i,o=n;do{var a=s+4*(o-1),l=e[a],c=e[a+1],h=e[a+2];l>127&&(l=255-l),c>127&&(c=255-c),h>127&&(h=255-h),e[a]=l,e[a+1]=c,e[a+2]=h}while(--o)}while(--r)},Threshold:function(t){var e,n=255*this.threshold(),i=t.data,r=i.length;for(e=0;e<r;e+=1)i[e]=i[e]<n?0:255}}});class ST{constructor(t){this.durationSelector=t}call(t,e){return e.subscribe(new kT(t,this.durationSelector))}}class kT extends N{constructor(t,e){super(t),this.durationSelector=e,this.hasValue=!1}_next(t){if(this.value=t,this.hasValue=!0,!this.throttled){let n;try{const{durationSelector:e}=this;n=e(t)}catch(e){return this.destination.error(e)}const i=B(n,new j(this));!i||i.closed?this.clearThrottle():this.add(this.throttled=i)}}clearThrottle(){const{value:t,hasValue:e,throttled:n}=this;n&&(this.remove(n),this.throttled=void 0,n.unsubscribe()),e&&(this.value=void 0,this.hasValue=!1,this.destination.next(t))}notifyNext(){this.clearThrottle()}notifyComplete(){this.clearThrottle()}}function TT(t){return!l(t)&&t-parseFloat(t)+1>=0}function ET(t){const{index:e,period:n,subscriber:i}=t;if(i.next(e),!i.closed){if(-1===n)return i.complete();t.index=e+1,this.schedule(t,n)}}function OT(t,e=c_){return n=()=>function(t=0,e,n){let i=-1;return TT(e)?i=Number(e)<1?1:Number(e):k(e)&&(n=e),k(n)||(n=c_),new y(e=>{const r=TT(t)?t:+t-n.now();return n.schedule(ET,r,{index:0,period:i,subscriber:e})})}(t,e),function(t){return t.lift(new ST(n))};var n}let PT=(()=>{class t{constructor(t,e,n){this._ngZone=t,this._platform=e,this._scrolled=new x,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=n}register(t){this.scrollContainers.has(t)||this.scrollContainers.set(t,t.elementScrolled().subscribe(()=>this._scrolled.next(t)))}deregister(t){const e=this.scrollContainers.get(t);e&&(e.unsubscribe(),this.scrollContainers.delete(t))}scrolled(t=20){return this._platform.isBrowser?new y(e=>{this._globalSubscription||this._addGlobalListener();const n=t>0?this._scrolled.pipe(OT(t)).subscribe(e):this._scrolled.subscribe(e);return this._scrolledCount++,()=>{n.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):Fh()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((t,e)=>this.deregister(e)),this._scrolled.complete()}ancestorScrolled(t,e){const n=this.getAncestorScrollContainers(t);return this.scrolled(e).pipe(ou(t=>!t||n.indexOf(t)>-1))}getAncestorScrollContainers(t){const e=[];return this.scrollContainers.forEach((n,i)=>{this._scrollableContainsElement(i,t)&&e.push(i)}),e}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(t,e){let n=Ky(e),i=t.getElementRef().nativeElement;do{if(n==i)return!0}while(n=n.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>Qg(this._getWindow().document,"scroll").subscribe(()=>this._scrolled.next()))}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}}return t.\u0275fac=function(e){return new(e||t)(hi(Hl),hi(Qy),hi(Sc,8))},t.\u0275prov=ut({factory:function(){return new t(hi(Hl),hi(Qy),hi(Sc,8))},token:t,providedIn:"root"}),t})(),AT=(()=>{class t{constructor(t,e,n,i){this.elementRef=t,this.scrollDispatcher=e,this.ngZone=n,this.dir=i,this._destroyed=new x,this._elementScrolled=new y(t=>this.ngZone.runOutsideAngular(()=>Qg(this.elementRef.nativeElement,"scroll").pipe(Hy(this._destroyed)).subscribe(t)))}ngOnInit(){this.scrollDispatcher.register(this)}ngOnDestroy(){this.scrollDispatcher.deregister(this),this._destroyed.next(),this._destroyed.complete()}elementScrolled(){return this._elementScrolled}getElementRef(){return this.elementRef}scrollTo(t){const e=this.elementRef.nativeElement,n=this.dir&&"rtl"==this.dir.value;null==t.left&&(t.left=n?t.end:t.start),null==t.right&&(t.right=n?t.start:t.end),null!=t.bottom&&(t.top=e.scrollHeight-e.clientHeight-t.bottom),n&&0!=a_()?(null!=t.left&&(t.right=e.scrollWidth-e.clientWidth-t.left),2==a_()?t.left=t.right:1==a_()&&(t.left=t.right?-t.right:t.right)):null!=t.right&&(t.left=e.scrollWidth-e.clientWidth-t.right),this._applyScrollToOptions(t)}_applyScrollToOptions(t){const e=this.elementRef.nativeElement;!function(){if(null==r_){if("object"!=typeof document||!document||"function"!=typeof Element||!Element)return r_=!1,r_;if("scrollBehavior"in document.documentElement.style)r_=!0;else{const t=Element.prototype.scrollTo;r_=!!t&&!/\{\s*\[native code\]\s*\}/.test(t.toString())}}return r_}()?(null!=t.top&&(e.scrollTop=t.top),null!=t.left&&(e.scrollLeft=t.left)):e.scrollTo(t)}measureScrollOffset(t){const e="left",n="right",i=this.elementRef.nativeElement;if("top"==t)return i.scrollTop;if("bottom"==t)return i.scrollHeight-i.clientHeight-i.scrollTop;const r=this.dir&&"rtl"==this.dir.value;return"start"==t?t=r?n:e:"end"==t&&(t=r?e:n),r&&2==a_()?t==e?i.scrollWidth-i.clientWidth-i.scrollLeft:i.scrollLeft:r&&1==a_()?t==e?i.scrollLeft+i.scrollWidth-i.clientWidth:-i.scrollLeft:t==e?i.scrollLeft:i.scrollWidth-i.clientWidth-i.scrollLeft}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(PT),Hs(Hl),Hs(j_,8))},t.\u0275dir=qt({type:t,selectors:[["","cdk-scrollable",""],["","cdkScrollable",""]]}),t})(),MT=(()=>{class t{constructor(t,e,n){this._platform=t,this._change=new x,this._changeListener=t=>{this._change.next(t)},this._document=n,e.runOutsideAngular(()=>{if(t.isBrowser){const t=this._getWindow();t.addEventListener("resize",this._changeListener),t.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){const t=this._getWindow();t.removeEventListener("resize",this._changeListener),t.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();const t={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),t}getViewportRect(){const t=this.getViewportScrollPosition(),{width:e,height:n}=this.getViewportSize();return{top:t.top,left:t.left,bottom:t.top+n,right:t.left+e,height:n,width:e}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};const t=this._document,e=this._getWindow(),n=t.documentElement,i=n.getBoundingClientRect();return{top:-i.top||t.body.scrollTop||e.scrollY||n.scrollTop||0,left:-i.left||t.body.scrollLeft||e.scrollX||n.scrollLeft||0}}change(t=20){return t>0?this._change.pipe(OT(t)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){const t=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:t.innerWidth,height:t.innerHeight}:{width:0,height:0}}}return t.\u0275fac=function(e){return new(e||t)(hi(Qy),hi(Hl),hi(Sc,8))},t.\u0275prov=ut({factory:function(){return new t(hi(Qy),hi(Hl),hi(Sc,8))},token:t,providedIn:"root"}),t})(),IT=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({}),t})();function DT(t){return e=>e.lift(new RT(t))}class RT{constructor(t){this.value=t}call(t,e){return e.subscribe(new LT(t,this.value))}}class LT extends p{constructor(t,e){super(t),this.value=e}_next(t){this.destination.next(this.value)}}const FT=["*"];function jT(t,e){if(1&t){const t=Js();qs(0,"div",2),no("click",function(){return Ae(t),ao()._onBackdropClicked()}),Ys()}2&t&&wo("mat-drawer-shown",ao()._isShowingBackdrop())}function NT(t,e){1&t&&(qs(0,"mat-drawer-content"),ho(1,2),Ys())}const BT=[[["mat-drawer"]],[["mat-drawer-content"]],"*"],$T=["mat-drawer","mat-drawer-content","*"];function zT(t,e){if(1&t){const t=Js();qs(0,"div",2),no("click",function(){return Ae(t),ao()._onBackdropClicked()}),Ys()}2&t&&wo("mat-drawer-shown",ao()._isShowingBackdrop())}function VT(t,e){1&t&&(qs(0,"mat-sidenav-content",3),ho(1,2),Ys())}const GT=[[["mat-sidenav"]],[["mat-sidenav-content"]],"*"],UT=["mat-sidenav","mat-sidenav-content","*"],HT=".mat-drawer-container{position:relative;z-index:1;box-sizing:border-box;-webkit-overflow-scrolling:touch;display:block;overflow:hidden}.mat-drawer-container[fullscreen]{top:0;left:0;right:0;bottom:0;position:absolute}.mat-drawer-container[fullscreen].mat-drawer-container-has-open{overflow:hidden}.mat-drawer-container.mat-drawer-container-explicit-backdrop .mat-drawer-side{z-index:3}.mat-drawer-container.ng-animate-disabled .mat-drawer-backdrop,.mat-drawer-container.ng-animate-disabled .mat-drawer-content,.ng-animate-disabled .mat-drawer-container .mat-drawer-backdrop,.ng-animate-disabled .mat-drawer-container .mat-drawer-content{transition:none}.mat-drawer-backdrop{top:0;left:0;right:0;bottom:0;position:absolute;display:block;z-index:3;visibility:hidden}.mat-drawer-backdrop.mat-drawer-shown{visibility:visible}.mat-drawer-transition .mat-drawer-backdrop{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:background-color,visibility}.cdk-high-contrast-active .mat-drawer-backdrop{opacity:.5}.mat-drawer-content{position:relative;z-index:1;display:block;height:100%;overflow:auto}.mat-drawer-transition .mat-drawer-content{transition-duration:400ms;transition-timing-function:cubic-bezier(0.25, 0.8, 0.25, 1);transition-property:transform,margin-left,margin-right}.mat-drawer{position:relative;z-index:4;display:block;position:absolute;top:0;bottom:0;z-index:3;outline:0;box-sizing:border-box;overflow-y:auto;transform:translate3d(-100%, 0, 0)}.cdk-high-contrast-active .mat-drawer,.cdk-high-contrast-active [dir=rtl] .mat-drawer.mat-drawer-end{border-right:solid 1px currentColor}.cdk-high-contrast-active [dir=rtl] .mat-drawer,.cdk-high-contrast-active .mat-drawer.mat-drawer-end{border-left:solid 1px currentColor;border-right:none}.mat-drawer.mat-drawer-side{z-index:2}.mat-drawer.mat-drawer-end{right:0;transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer{transform:translate3d(100%, 0, 0)}[dir=rtl] .mat-drawer.mat-drawer-end{left:0;right:auto;transform:translate3d(-100%, 0, 0)}.mat-drawer-inner-container{width:100%;height:100%;overflow:auto;-webkit-overflow-scrolling:touch}.mat-sidenav-fixed{position:fixed}\n",WT={transformDrawer:V_("transform",[W_("open, open-instant",H_({transform:"none",visibility:"visible"})),W_("void",H_({"box-shadow":"none",visibility:"hidden"})),X_("void => open-instant",G_("0ms")),X_("void <=> open, open-instant => void",G_("400ms cubic-bezier(0.25, 0.8, 0.25, 1)"))])},XT=new Wn("MAT_DRAWER_DEFAULT_AUTOSIZE",{providedIn:"root",factory:function(){return!1}}),qT=new Wn("MAT_DRAWER_CONTAINER");let YT=(()=>{class t extends AT{constructor(t,e,n,i,r){super(n,i,r),this._changeDetectorRef=t,this._container=e}ngAfterContentInit(){this._container._contentMarginChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})}}return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(rt(()=>ZT)),Hs(sa),Hs(PT),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["mat-drawer-content"]],hostAttrs:[1,"mat-drawer-content"],hostVars:4,hostBindings:function(t,e){2&t&&bo("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Ms],ngContentSelectors:FT,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t})(),KT=(()=>{class t{constructor(t,e,n,i,r,s,o){this._elementRef=t,this._focusTrapFactory=e,this._focusMonitor=n,this._platform=i,this._ngZone=r,this._doc=s,this._container=o,this._elementFocusedBeforeDrawerWasOpened=null,this._enableAnimations=!1,this._position="start",this._mode="over",this._disableClose=!1,this._opened=!1,this._animationStarted=new x,this._animationEnd=new x,this._animationState="void",this.openedChange=new sl(!0),this._openedStream=this.openedChange.pipe(ou(t=>t),T(()=>{})),this.openedStart=this._animationStarted.pipe(ou(t=>t.fromState!==t.toState&&0===t.toState.indexOf("open")),DT(void 0)),this._closedStream=this.openedChange.pipe(ou(t=>!t),T(()=>{})),this.closedStart=this._animationStarted.pipe(ou(t=>t.fromState!==t.toState&&"void"===t.toState),DT(void 0)),this._destroyed=new x,this.onPositionChanged=new sl,this._modeChanged=new x,this.openedChange.subscribe(t=>{t?(this._doc&&(this._elementFocusedBeforeDrawerWasOpened=this._doc.activeElement),this._takeFocus()):this._isFocusWithinDrawer()&&this._restoreFocus()}),this._ngZone.runOutsideAngular(()=>{Qg(this._elementRef.nativeElement,"keydown").pipe(ou(t=>27===t.keyCode&&!this.disableClose&&!function(t,...e){return e.length?e.some(e=>t[e]):t.altKey||t.shiftKey||t.ctrlKey||t.metaKey}(t)),Hy(this._destroyed)).subscribe(t=>this._ngZone.run(()=>{this.close(),t.stopPropagation(),t.preventDefault()}))}),this._animationEnd.pipe(tm((t,e)=>t.fromState===e.fromState&&t.toState===e.toState)).subscribe(t=>{const{fromState:e,toState:n}=t;(0===n.indexOf("open")&&"void"===e||"void"===n&&0===e.indexOf("open"))&&this.openedChange.emit(this._opened)})}get position(){return this._position}set position(t){(t="end"===t?"end":"start")!=this._position&&(this._position=t,this.onPositionChanged.emit())}get mode(){return this._mode}set mode(t){this._mode=t,this._updateFocusTrapState(),this._modeChanged.next()}get disableClose(){return this._disableClose}set disableClose(t){this._disableClose=qy(t)}get autoFocus(){const t=this._autoFocus;return null==t?"side"!==this.mode:t}set autoFocus(t){this._autoFocus=qy(t)}get opened(){return this._opened}set opened(t){this.toggle(qy(t))}_takeFocus(){this.autoFocus&&this._focusTrap&&this._focusTrap.focusInitialElementWhenReady().then(t=>{t||"function"!=typeof this._elementRef.nativeElement.focus||this._elementRef.nativeElement.focus()})}_restoreFocus(){this.autoFocus&&(this._elementFocusedBeforeDrawerWasOpened?this._focusMonitor.focusVia(this._elementFocusedBeforeDrawerWasOpened,this._openedVia):this._elementRef.nativeElement.blur(),this._elementFocusedBeforeDrawerWasOpened=null,this._openedVia=null)}_isFocusWithinDrawer(){var t;const e=null===(t=this._doc)||void 0===t?void 0:t.activeElement;return!!e&&this._elementRef.nativeElement.contains(e)}ngAfterContentInit(){this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._updateFocusTrapState()}ngAfterContentChecked(){this._platform.isBrowser&&(this._enableAnimations=!0)}ngOnDestroy(){this._focusTrap&&this._focusTrap.destroy(),this._animationStarted.complete(),this._animationEnd.complete(),this._modeChanged.complete(),this._destroyed.next(),this._destroyed.complete()}open(t){return this.toggle(!0,t)}close(){return this.toggle(!1)}_closeViaBackdropClick(){return this._setOpen(!1,!0)}toggle(t=!this.opened,e){return this._setOpen(t,!t&&this._isFocusWithinDrawer(),e)}_setOpen(t,e,n="program"){return this._opened=t,t?(this._animationState=this._enableAnimations?"open":"open-instant",this._openedVia=n):(this._animationState="void",e&&this._restoreFocus()),this._updateFocusTrapState(),new Promise(t=>{this.openedChange.pipe(Jh(1)).subscribe(e=>t(e?"open":"close"))})}_getWidth(){return this._elementRef.nativeElement&&this._elementRef.nativeElement.offsetWidth||0}_updateFocusTrapState(){this._focusTrap&&(this._focusTrap.enabled=this.opened&&"side"!==this.mode)}_animationStartListener(t){this._animationStarted.next(t)}_animationDoneListener(t){this._animationEnd.next(t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(C_),Hs(M_),Hs(Qy),Hs(Hl),Hs(Sc,8),Hs(qT,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-drawer"]],hostAttrs:["tabIndex","-1",1,"mat-drawer"],hostVars:12,hostBindings:function(t,e){1&t&&io("@transform.start",function(t){return e._animationStartListener(t)})("@transform.done",function(t){return e._animationDoneListener(t)}),2&t&&(zs("align",null),Fo("@transform",e._animationState),wo("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened))},inputs:{position:"position",mode:"mode",disableClose:"disableClose",autoFocus:"autoFocus",opened:"opened"},outputs:{openedChange:"openedChange",_openedStream:"opened",openedStart:"openedStart",_closedStream:"closed",closedStart:"closedStart",onPositionChanged:"positionChanged"},exportAs:["matDrawer"],ngContentSelectors:FT,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(co(),qs(0,"div",0),ho(1),Ys())},directives:[AT],encapsulation:2,data:{animation:[WT.transformDrawer]},changeDetection:0}),t})(),ZT=(()=>{class t{constructor(t,e,n,i,r,s=!1,o){this._dir=t,this._element=e,this._ngZone=n,this._changeDetectorRef=i,this._animationMode=o,this._drawers=new al,this.backdropClick=new sl,this._destroyed=new x,this._doCheckSubject=new x,this._contentMargins={left:null,right:null},this._contentMarginChanges=new x,t&&t.change.pipe(Hy(this._destroyed)).subscribe(()=>{this._validateDrawers(),this.updateContentMargins()}),r.change().pipe(Hy(this._destroyed)).subscribe(()=>this.updateContentMargins()),this._autosize=s}get start(){return this._start}get end(){return this._end}get autosize(){return this._autosize}set autosize(t){this._autosize=qy(t)}get hasBackdrop(){return null==this._backdropOverride?!this._start||"side"!==this._start.mode||!this._end||"side"!==this._end.mode:this._backdropOverride}set hasBackdrop(t){this._backdropOverride=null==t?null:qy(t)}get scrollable(){return this._userContent||this._content}ngAfterContentInit(){this._allDrawers.changes.pipe(nu(this._allDrawers),Hy(this._destroyed)).subscribe(t=>{this._drawers.reset(t.filter(t=>!t._container||t._container===this)),this._drawers.notifyOnChanges()}),this._drawers.changes.pipe(nu(null)).subscribe(()=>{this._validateDrawers(),this._drawers.forEach(t=>{this._watchDrawerToggle(t),this._watchDrawerPosition(t),this._watchDrawerMode(t)}),(!this._drawers.length||this._isDrawerOpen(this._start)||this._isDrawerOpen(this._end))&&this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),this._ngZone.runOutsideAngular(()=>{this._doCheckSubject.pipe(h_(10),Hy(this._destroyed)).subscribe(()=>this.updateContentMargins())})}ngOnDestroy(){this._contentMarginChanges.complete(),this._doCheckSubject.complete(),this._drawers.destroy(),this._destroyed.next(),this._destroyed.complete()}open(){this._drawers.forEach(t=>t.open())}close(){this._drawers.forEach(t=>t.close())}updateContentMargins(){let t=0,e=0;if(this._left&&this._left.opened)if("side"==this._left.mode)t+=this._left._getWidth();else if("push"==this._left.mode){const n=this._left._getWidth();t+=n,e-=n}if(this._right&&this._right.opened)if("side"==this._right.mode)e+=this._right._getWidth();else if("push"==this._right.mode){const n=this._right._getWidth();e+=n,t-=n}t=t||null,e=e||null,t===this._contentMargins.left&&e===this._contentMargins.right||(this._contentMargins={left:t,right:e},this._ngZone.run(()=>this._contentMarginChanges.next(this._contentMargins)))}ngDoCheck(){this._autosize&&this._isPushed()&&this._ngZone.runOutsideAngular(()=>this._doCheckSubject.next())}_watchDrawerToggle(t){t._animationStarted.pipe(ou(t=>t.fromState!==t.toState),Hy(this._drawers.changes)).subscribe(t=>{"open-instant"!==t.toState&&"NoopAnimations"!==this._animationMode&&this._element.nativeElement.classList.add("mat-drawer-transition"),this.updateContentMargins(),this._changeDetectorRef.markForCheck()}),"side"!==t.mode&&t.openedChange.pipe(Hy(this._drawers.changes)).subscribe(()=>this._setContainerClass(t.opened))}_watchDrawerPosition(t){t&&t.onPositionChanged.pipe(Hy(this._drawers.changes)).subscribe(()=>{this._ngZone.onMicrotaskEmpty.pipe(Jh(1)).subscribe(()=>{this._validateDrawers()})})}_watchDrawerMode(t){t&&t._modeChanged.pipe(Hy(H(this._drawers.changes,this._destroyed))).subscribe(()=>{this.updateContentMargins(),this._changeDetectorRef.markForCheck()})}_setContainerClass(t){const e=this._element.nativeElement.classList,n="mat-drawer-container-has-open";t?e.add(n):e.remove(n)}_validateDrawers(){this._start=this._end=null,this._drawers.forEach(t=>{"end"==t.position?this._end=t:this._start=t}),this._right=this._left=null,this._dir&&"rtl"===this._dir.value?(this._left=this._end,this._right=this._start):(this._left=this._start,this._right=this._end)}_isPushed(){return this._isDrawerOpen(this._start)&&"over"!=this._start.mode||this._isDrawerOpen(this._end)&&"over"!=this._end.mode}_onBackdropClicked(){this.backdropClick.emit(),this._closeModalDrawersViaBackdrop()}_closeModalDrawersViaBackdrop(){[this._start,this._end].filter(t=>t&&!t.disableClose&&this._canHaveBackdrop(t)).forEach(t=>t._closeViaBackdropClick())}_isShowingBackdrop(){return this._isDrawerOpen(this._start)&&this._canHaveBackdrop(this._start)||this._isDrawerOpen(this._end)&&this._canHaveBackdrop(this._end)}_canHaveBackdrop(t){return"side"!==t.mode||!!this._backdropOverride}_isDrawerOpen(t){return null!=t&&t.opened}}return t.\u0275fac=function(e){return new(e||t)(Hs(j_,8),Hs(sa),Hs(Hl),Hs(Ma),Hs(MT),Hs(XT),Hs(CC,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-drawer-container"]],contentQueries:function(t,e,n){if(1&t&&(_l(n,YT,5),_l(n,KT,5)),2&t){let t;vl(t=bl())&&(e._content=t.first),vl(t=bl())&&(e._allDrawers=t)}},viewQuery:function(t,e){if(1&t&&yl(YT,5),2&t){let t;vl(t=bl())&&(e._userContent=t.first)}},hostAttrs:[1,"mat-drawer-container"],hostVars:2,hostBindings:function(t,e){2&t&&wo("mat-drawer-container-explicit-backdrop",e._backdropOverride)},inputs:{autosize:"autosize",hasBackdrop:"hasBackdrop"},outputs:{backdropClick:"backdropClick"},exportAs:["matDrawerContainer"],features:[Qo([{provide:qT,useExisting:t}])],ngContentSelectors:$T,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],[4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"]],template:function(t,e){1&t&&(co(BT),Gs(0,jT,1,2,"div",0),ho(1),ho(2,1),Gs(3,NT,2,0,"mat-drawer-content",1)),2&t&&(Ws("ngIf",e.hasBackdrop),yr(3),Ws("ngIf",!e._content))},directives:[Yc,YT],styles:[HT],encapsulation:2,changeDetection:0}),t})(),QT=(()=>{class t extends YT{constructor(t,e,n,i,r){super(t,e,n,i,r)}}return t.\u0275fac=function(e){return new(e||t)(Hs(Ma),Hs(rt(()=>tE)),Hs(sa),Hs(PT),Hs(Hl))},t.\u0275cmp=Vt({type:t,selectors:[["mat-sidenav-content"]],hostAttrs:[1,"mat-drawer-content","mat-sidenav-content"],hostVars:4,hostBindings:function(t,e){2&t&&bo("margin-left",e._container._contentMargins.left,"px")("margin-right",e._container._contentMargins.right,"px")},features:[Ms],ngContentSelectors:FT,decls:1,vars:0,template:function(t,e){1&t&&(co(),ho(0))},encapsulation:2,changeDetection:0}),t})(),JT=(()=>{class t extends KT{constructor(){super(...arguments),this._fixedInViewport=!1,this._fixedTopGap=0,this._fixedBottomGap=0}get fixedInViewport(){return this._fixedInViewport}set fixedInViewport(t){this._fixedInViewport=qy(t)}get fixedTopGap(){return this._fixedTopGap}set fixedTopGap(t){this._fixedTopGap=Yy(t)}get fixedBottomGap(){return this._fixedBottomGap}set fixedBottomGap(t){this._fixedBottomGap=Yy(t)}}return t.\u0275fac=function(){let e;return function(n){return(e||(e=$n(t)))(n||t)}}(),t.\u0275cmp=Vt({type:t,selectors:[["mat-sidenav"]],hostAttrs:["tabIndex","-1",1,"mat-drawer","mat-sidenav"],hostVars:17,hostBindings:function(t,e){2&t&&(zs("align",null),bo("top",e.fixedInViewport?e.fixedTopGap:null,"px")("bottom",e.fixedInViewport?e.fixedBottomGap:null,"px"),wo("mat-drawer-end","end"===e.position)("mat-drawer-over","over"===e.mode)("mat-drawer-push","push"===e.mode)("mat-drawer-side","side"===e.mode)("mat-drawer-opened",e.opened)("mat-sidenav-fixed",e.fixedInViewport))},inputs:{fixedInViewport:"fixedInViewport",fixedTopGap:"fixedTopGap",fixedBottomGap:"fixedBottomGap"},exportAs:["matSidenav"],features:[Ms],ngContentSelectors:FT,decls:2,vars:0,consts:[["cdkScrollable","",1,"mat-drawer-inner-container"]],template:function(t,e){1&t&&(co(),qs(0,"div",0),ho(1),Ys())},directives:[AT],encapsulation:2,data:{animation:[WT.transformDrawer]},changeDetection:0}),t})(),tE=(()=>{class t extends ZT{}return t.\u0275fac=function(){let e;return function(n){return(e||(e=$n(t)))(n||t)}}(),t.\u0275cmp=Vt({type:t,selectors:[["mat-sidenav-container"]],contentQueries:function(t,e,n){if(1&t&&(_l(n,QT,5),_l(n,JT,5)),2&t){let t;vl(t=bl())&&(e._content=t.first),vl(t=bl())&&(e._allDrawers=t)}},hostAttrs:[1,"mat-drawer-container","mat-sidenav-container"],hostVars:2,hostBindings:function(t,e){2&t&&wo("mat-drawer-container-explicit-backdrop",e._backdropOverride)},exportAs:["matSidenavContainer"],features:[Qo([{provide:qT,useExisting:t}]),Ms],ngContentSelectors:UT,decls:4,vars:2,consts:[["class","mat-drawer-backdrop",3,"mat-drawer-shown","click",4,"ngIf"],["cdkScrollable","",4,"ngIf"],[1,"mat-drawer-backdrop",3,"click"],["cdkScrollable",""]],template:function(t,e){1&t&&(co(GT),Gs(0,zT,1,2,"div",0),ho(1),ho(2,1),Gs(3,VT,2,0,"mat-sidenav-content",1)),2&t&&(Ws("ngIf",e.hasBackdrop),yr(3),Ws("ngIf",!e._content))},directives:[Yc,QT,AT],styles:[HT],encapsulation:2,changeDetection:0}),t})(),eE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[eh,AC,Jy,IT],IT,AC]}),t})();const nE=["underline"],iE=["connectionContainer"],rE=["inputContainer"],sE=["label"];function oE(t,e){1&t&&(Zs(0),qs(1,"div",14),Ks(2,"div",15),Ks(3,"div",16),Ks(4,"div",17),Ys(),qs(5,"div",18),Ks(6,"div",15),Ks(7,"div",16),Ks(8,"div",17),Ys(),Qs())}function aE(t,e){1&t&&(qs(0,"div",19),ho(1,1),Ys())}function lE(t,e){if(1&t&&(Zs(0),ho(1,2),qs(2,"span"),Io(3),Ys(),Qs()),2&t){const t=ao(2);yr(3),Do(t._control.placeholder)}}function cE(t,e){1&t&&ho(0,3,["*ngSwitchCase","true"])}function hE(t,e){1&t&&(qs(0,"span",23),Io(1," *"),Ys())}function uE(t,e){if(1&t){const t=Js();qs(0,"label",20,21),no("cdkObserveContent",function(){return Ae(t),ao().updateOutlineGap()}),Gs(2,lE,4,1,"ng-container",12),Gs(3,cE,1,0,"ng-content",12),Gs(4,hE,2,0,"span",22),Ys()}if(2&t){const t=ao();wo("mat-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-form-field-empty",t._control.empty&&!t._shouldAlwaysFloat())("mat-accent","accent"==t.color)("mat-warn","warn"==t.color),Ws("cdkObserveContentDisabled","outline"!=t.appearance)("id",t._labelId)("ngSwitch",t._hasLabel()),zs("for",t._control.id)("aria-owns",t._control.id),yr(2),Ws("ngSwitchCase",!1),yr(1),Ws("ngSwitchCase",!0),yr(1),Ws("ngIf",!t.hideRequiredMarker&&t._control.required&&!t._control.disabled)}}function dE(t,e){1&t&&(qs(0,"div",24),ho(1,4),Ys())}function fE(t,e){if(1&t&&(qs(0,"div",25,26),Ks(2,"span",27),Ys()),2&t){const t=ao();yr(2),wo("mat-accent","accent"==t.color)("mat-warn","warn"==t.color)}}function pE(t,e){1&t&&(qs(0,"div"),ho(1,5),Ys()),2&t&&Ws("@transitionMessages",ao()._subscriptAnimationState)}function gE(t,e){if(1&t&&(qs(0,"div",31),Io(1),Ys()),2&t){const t=ao(2);Ws("id",t._hintLabelId),yr(1),Do(t.hintLabel)}}function mE(t,e){if(1&t&&(qs(0,"div",28),Gs(1,gE,2,2,"div",29),ho(2,6),Ks(3,"div",30),ho(4,7),Ys()),2&t){const t=ao();Ws("@transitionMessages",t._subscriptAnimationState),yr(1),Ws("ngIf",t.hintLabel)}}const vE=["*",[["","matPrefix",""]],[["mat-placeholder"]],[["mat-label"]],[["","matSuffix",""]],[["mat-error"]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],yE=["*","[matPrefix]","mat-placeholder","mat-label","[matSuffix]","mat-error","mat-hint:not([align='end'])","mat-hint[align='end']"],_E=new Wn("MatError"),bE={transitionMessages:V_("transitionMessages",[W_("enter",H_({opacity:1,transform:"translateY(0%)"})),X_("void => enter",[H_({opacity:0,transform:"translateY(-5px)"}),G_("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])};let wE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t}),t})();const CE=new Wn("MatHint");let xE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["mat-label"]]}),t})(),SE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=qt({type:t,selectors:[["mat-placeholder"]]}),t})();const kE=new Wn("MatPrefix"),TE=new Wn("MatSuffix");let EE=0;const OE=IC(class{constructor(t){this._elementRef=t}},"primary"),PE=new Wn("MAT_FORM_FIELD_DEFAULT_OPTIONS"),AE=new Wn("MatFormField");let ME=(()=>{class t extends OE{constructor(t,e,n,i,r,s,o,a){super(t),this._changeDetectorRef=e,this._dir=i,this._defaults=r,this._platform=s,this._ngZone=o,this._outlineGapCalculationNeededImmediately=!1,this._outlineGapCalculationNeededOnStable=!1,this._destroyed=new x,this._showAlwaysAnimate=!1,this._subscriptAnimationState="",this._hintLabel="",this._hintLabelId="mat-hint-"+EE++,this._labelId="mat-form-field-label-"+EE++,this.floatLabel=this._getDefaultFloatLabelState(),this._animationsEnabled="NoopAnimations"!==a,this.appearance=r&&r.appearance?r.appearance:"legacy",this._hideRequiredMarker=!(!r||null==r.hideRequiredMarker)&&r.hideRequiredMarker}get appearance(){return this._appearance}set appearance(t){const e=this._appearance;this._appearance=t||this._defaults&&this._defaults.appearance||"legacy","outline"===this._appearance&&e!==t&&(this._outlineGapCalculationNeededOnStable=!0)}get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(t){this._hideRequiredMarker=qy(t)}_shouldAlwaysFloat(){return"always"===this.floatLabel&&!this._showAlwaysAnimate}_canLabelFloat(){return"never"!==this.floatLabel}get hintLabel(){return this._hintLabel}set hintLabel(t){this._hintLabel=t,this._processHints()}get floatLabel(){return"legacy"!==this.appearance&&"never"===this._floatLabel?"auto":this._floatLabel}set floatLabel(t){t!==this._floatLabel&&(this._floatLabel=t||this._getDefaultFloatLabelState(),this._changeDetectorRef.markForCheck())}get _control(){return this._explicitFormFieldControl||this._controlNonStatic||this._controlStatic}set _control(t){this._explicitFormFieldControl=t}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._connectionContainerRef||this._elementRef}ngAfterContentInit(){this._validateControlChild();const t=this._control;t.controlType&&this._elementRef.nativeElement.classList.add(`mat-form-field-type-${t.controlType}`),t.stateChanges.pipe(nu(null)).subscribe(()=>{this._validatePlaceholders(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),t.ngControl&&t.ngControl.valueChanges&&t.ngControl.valueChanges.pipe(Hy(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck()),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Hy(this._destroyed)).subscribe(()=>{this._outlineGapCalculationNeededOnStable&&this.updateOutlineGap()})}),H(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._outlineGapCalculationNeededOnStable=!0,this._changeDetectorRef.markForCheck()}),this._hintChildren.changes.pipe(nu(null)).subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.pipe(nu(null)).subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._dir&&this._dir.change.pipe(Hy(this._destroyed)).subscribe(()=>{"function"==typeof requestAnimationFrame?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>this.updateOutlineGap())}):this.updateOutlineGap()})}ngAfterContentChecked(){this._validateControlChild(),this._outlineGapCalculationNeededImmediately&&this.updateOutlineGap()}ngAfterViewInit(){this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_shouldForward(t){const e=this._control?this._control.ngControl:null;return e&&e[t]}_hasPlaceholder(){return!!(this._control&&this._control.placeholder||this._placeholderChild)}_hasLabel(){return!(!this._labelChildNonStatic&&!this._labelChildStatic)}_shouldLabelFloat(){return this._canLabelFloat()&&(this._control&&this._control.shouldLabelFloat||this._shouldAlwaysFloat())}_hideControlPlaceholder(){return"legacy"===this.appearance&&!this._hasLabel()||this._hasLabel()&&!this._shouldLabelFloat()}_hasFloatingLabel(){return this._hasLabel()||"legacy"===this.appearance&&this._hasPlaceholder()}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_animateAndLockLabel(){this._hasFloatingLabel()&&this._canLabelFloat()&&(this._animationsEnabled&&this._label&&(this._showAlwaysAnimate=!0,Qg(this._label.nativeElement,"transitionend").pipe(Jh(1)).subscribe(()=>{this._showAlwaysAnimate=!1})),this.floatLabel="always",this._changeDetectorRef.markForCheck())}_validatePlaceholders(){}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){}_getDefaultFloatLabelState(){return this._defaults&&this._defaults.floatLabel||"auto"}_syncDescribedByIds(){if(this._control){let t=[];if(this._control.userAriaDescribedBy&&"string"==typeof this._control.userAriaDescribedBy&&t.push(...this._control.userAriaDescribedBy.split(" ")),"hint"===this._getDisplayedMessages()){const e=this._hintChildren?this._hintChildren.find(t=>"start"===t.align):null,n=this._hintChildren?this._hintChildren.find(t=>"end"===t.align):null;e?t.push(e.id):this._hintLabel&&t.push(this._hintLabelId),n&&t.push(n.id)}else this._errorChildren&&t.push(...this._errorChildren.map(t=>t.id));this._control.setDescribedByIds(t)}}_validateControlChild(){}updateOutlineGap(){const t=this._label?this._label.nativeElement:null;if("outline"!==this.appearance||!t||!t.children.length||!t.textContent.trim())return;if(!this._platform.isBrowser)return;if(!this._isAttachedToDOM())return void(this._outlineGapCalculationNeededImmediately=!0);let e=0,n=0;const i=this._connectionContainerRef.nativeElement,r=i.querySelectorAll(".mat-form-field-outline-start"),s=i.querySelectorAll(".mat-form-field-outline-gap");if(this._label&&this._label.nativeElement.children.length){const r=i.getBoundingClientRect();if(0===r.width&&0===r.height)return this._outlineGapCalculationNeededOnStable=!0,void(this._outlineGapCalculationNeededImmediately=!1);const s=this._getStartEnd(r),o=t.children,a=this._getStartEnd(o[0].getBoundingClientRect());let l=0;for(let t=0;t<o.length;t++)l+=o[t].offsetWidth;e=Math.abs(a-s)-5,n=l>0?.75*l+10:0}for(let o=0;o<r.length;o++)r[o].style.width=`${e}px`;for(let o=0;o<s.length;o++)s[o].style.width=`${n}px`;this._outlineGapCalculationNeededOnStable=this._outlineGapCalculationNeededImmediately=!1}_getStartEnd(t){return this._dir&&"rtl"===this._dir.value?t.right:t.left}_isAttachedToDOM(){const t=this._elementRef.nativeElement;if(t.getRootNode){const e=t.getRootNode();return e&&e!==t}return document.documentElement.contains(t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(Ma),Hs(sa),Hs(j_,8),Hs(PE,8),Hs(Qy),Hs(Hl),Hs(CC,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-form-field"]],contentQueries:function(t,e,n){if(1&t&&(_l(n,wE,5),_l(n,wE,7),_l(n,xE,5),_l(n,xE,7),_l(n,SE,5),_l(n,_E,5),_l(n,CE,5),_l(n,kE,5),_l(n,TE,5)),2&t){let t;vl(t=bl())&&(e._controlNonStatic=t.first),vl(t=bl())&&(e._controlStatic=t.first),vl(t=bl())&&(e._labelChildNonStatic=t.first),vl(t=bl())&&(e._labelChildStatic=t.first),vl(t=bl())&&(e._placeholderChild=t.first),vl(t=bl())&&(e._errorChildren=t),vl(t=bl())&&(e._hintChildren=t),vl(t=bl())&&(e._prefixChildren=t),vl(t=bl())&&(e._suffixChildren=t)}},viewQuery:function(t,e){if(1&t&&(yl(nE,5),yl(iE,7),yl(rE,5),yl(sE,5)),2&t){let t;vl(t=bl())&&(e.underlineRef=t.first),vl(t=bl())&&(e._connectionContainerRef=t.first),vl(t=bl())&&(e._inputContainerRef=t.first),vl(t=bl())&&(e._label=t.first)}},hostAttrs:[1,"mat-form-field"],hostVars:40,hostBindings:function(t,e){2&t&&wo("mat-form-field-appearance-standard","standard"==e.appearance)("mat-form-field-appearance-fill","fill"==e.appearance)("mat-form-field-appearance-outline","outline"==e.appearance)("mat-form-field-appearance-legacy","legacy"==e.appearance)("mat-form-field-invalid",e._control.errorState)("mat-form-field-can-float",e._canLabelFloat())("mat-form-field-should-float",e._shouldLabelFloat())("mat-form-field-has-label",e._hasFloatingLabel())("mat-form-field-hide-placeholder",e._hideControlPlaceholder())("mat-form-field-disabled",e._control.disabled)("mat-form-field-autofilled",e._control.autofilled)("mat-focused",e._control.focused)("ng-untouched",e._shouldForward("untouched"))("ng-touched",e._shouldForward("touched"))("ng-pristine",e._shouldForward("pristine"))("ng-dirty",e._shouldForward("dirty"))("ng-valid",e._shouldForward("valid"))("ng-invalid",e._shouldForward("invalid"))("ng-pending",e._shouldForward("pending"))("_mat-animation-noopable",!e._animationsEnabled)},inputs:{color:"color",floatLabel:"floatLabel",appearance:"appearance",hideRequiredMarker:"hideRequiredMarker",hintLabel:"hintLabel"},exportAs:["matFormField"],features:[Qo([{provide:AE,useExisting:t}]),Ms],ngContentSelectors:yE,decls:15,vars:8,consts:[[1,"mat-form-field-wrapper"],[1,"mat-form-field-flex",3,"click"],["connectionContainer",""],[4,"ngIf"],["class","mat-form-field-prefix",4,"ngIf"],[1,"mat-form-field-infix"],["inputContainer",""],[1,"mat-form-field-label-wrapper"],["class","mat-form-field-label",3,"cdkObserveContentDisabled","id","mat-empty","mat-form-field-empty","mat-accent","mat-warn","ngSwitch","cdkObserveContent",4,"ngIf"],["class","mat-form-field-suffix",4,"ngIf"],["class","mat-form-field-underline",4,"ngIf"],[1,"mat-form-field-subscript-wrapper",3,"ngSwitch"],[4,"ngSwitchCase"],["class","mat-form-field-hint-wrapper",4,"ngSwitchCase"],[1,"mat-form-field-outline"],[1,"mat-form-field-outline-start"],[1,"mat-form-field-outline-gap"],[1,"mat-form-field-outline-end"],[1,"mat-form-field-outline","mat-form-field-outline-thick"],[1,"mat-form-field-prefix"],[1,"mat-form-field-label",3,"cdkObserveContentDisabled","id","ngSwitch","cdkObserveContent"],["label",""],["class","mat-placeholder-required mat-form-field-required-marker","aria-hidden","true",4,"ngIf"],["aria-hidden","true",1,"mat-placeholder-required","mat-form-field-required-marker"],[1,"mat-form-field-suffix"],[1,"mat-form-field-underline"],["underline",""],[1,"mat-form-field-ripple"],[1,"mat-form-field-hint-wrapper"],["class","mat-hint",3,"id",4,"ngIf"],[1,"mat-form-field-hint-spacer"],[1,"mat-hint",3,"id"]],template:function(t,e){1&t&&(co(vE),qs(0,"div",0),qs(1,"div",1,2),no("click",function(t){return e._control.onContainerClick&&e._control.onContainerClick(t)}),Gs(3,oE,9,0,"ng-container",3),Gs(4,aE,2,0,"div",4),qs(5,"div",5,6),ho(7),qs(8,"span",7),Gs(9,uE,5,16,"label",8),Ys(),Ys(),Gs(10,dE,2,0,"div",9),Ys(),Gs(11,fE,3,4,"div",10),qs(12,"div",11),Gs(13,pE,2,1,"div",12),Gs(14,mE,5,2,"div",13),Ys(),Ys()),2&t&&(yr(3),Ws("ngIf","outline"==e.appearance),yr(1),Ws("ngIf",e._prefixChildren.length),yr(5),Ws("ngIf",e._hasFloatingLabel()),yr(1),Ws("ngIf",e._suffixChildren.length),yr(1),Ws("ngIf","outline"!=e.appearance),yr(1),Ws("ngSwitch",e._getDisplayedMessages()),yr(1),Ws("ngSwitchCase","error"),yr(1),Ws("ngSwitchCase","hint"))},directives:[Yc,Jc,th,m_],styles:[".mat-form-field{display:inline-block;position:relative;text-align:left}[dir=rtl] .mat-form-field{text-align:right}.mat-form-field-wrapper{position:relative}.mat-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-form-field-prefix,.mat-form-field-suffix{white-space:nowrap;flex:none;position:relative}.mat-form-field-infix{display:block;position:relative;flex:auto;min-width:0;width:180px}.cdk-high-contrast-active .mat-form-field-infix{border-image:linear-gradient(transparent, transparent)}.mat-form-field-label-wrapper{position:absolute;left:0;box-sizing:content-box;width:100%;height:100%;overflow:hidden;pointer-events:none}[dir=rtl] .mat-form-field-label-wrapper{left:auto;right:0}.mat-form-field-label{position:absolute;left:0;font:inherit;pointer-events:none;width:100%;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;transform-origin:0 0;transition:transform 400ms cubic-bezier(0.25, 0.8, 0.25, 1),color 400ms cubic-bezier(0.25, 0.8, 0.25, 1),width 400ms cubic-bezier(0.25, 0.8, 0.25, 1);display:none}[dir=rtl] .mat-form-field-label{transform-origin:100% 0;left:auto;right:0}.mat-form-field-empty.mat-form-field-label,.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-label{display:block}.mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-form-field-autofill-control:-webkit-autofill+.mat-form-field-label-wrapper .mat-form-field-label{display:block;transition:none}.mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:none}.mat-form-field-can-float .mat-input-server:focus+.mat-form-field-label-wrapper .mat-form-field-label,.mat-form-field-can-float .mat-input-server[placeholder]:not(:placeholder-shown)+.mat-form-field-label-wrapper .mat-form-field-label{display:block}.mat-form-field-label:not(.mat-form-field-empty){transition:none}.mat-form-field-underline{position:absolute;width:100%;pointer-events:none;transform:scale3d(1, 1.0001, 1)}.mat-form-field-ripple{position:absolute;left:0;width:100%;transform-origin:50%;transform:scaleX(0.5);opacity:0;transition:background-color 300ms cubic-bezier(0.55, 0, 0.55, 0.2)}.mat-form-field.mat-focused .mat-form-field-ripple,.mat-form-field.mat-form-field-invalid .mat-form-field-ripple{opacity:1;transform:none;transition:transform 300ms cubic-bezier(0.25, 0.8, 0.25, 1),opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1),background-color 300ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-subscript-wrapper{position:absolute;box-sizing:border-box;width:100%;overflow:hidden}.mat-form-field-subscript-wrapper .mat-icon,.mat-form-field-label-wrapper .mat-icon{width:1em;height:1em;font-size:inherit;vertical-align:baseline}.mat-form-field-hint-wrapper{display:flex}.mat-form-field-hint-spacer{flex:1 0 1em}.mat-error{display:block}.mat-form-field-control-wrapper{position:relative}.mat-form-field-hint-end{order:1}.mat-form-field._mat-animation-noopable .mat-form-field-label,.mat-form-field._mat-animation-noopable .mat-form-field-ripple{transition:none}\n",'.mat-form-field-appearance-fill .mat-form-field-flex{border-radius:4px 4px 0 0;padding:.75em .75em 0 .75em}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-flex{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-form-field-flex{outline:dashed 3px}.mat-form-field-appearance-fill .mat-form-field-underline::before{content:"";display:block;position:absolute;bottom:0;height:1px;width:100%}.mat-form-field-appearance-fill .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-form-field-ripple{height:0}.mat-form-field-appearance-fill:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-fill._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}.mat-form-field-appearance-fill .mat-form-field-subscript-wrapper{padding:0 1em}\n','.mat-input-element{font:inherit;background:transparent;color:currentColor;border:none;outline:none;padding:0;margin:0;width:100%;max-width:100%;vertical-align:bottom;text-align:inherit;box-sizing:content-box}.mat-input-element:-moz-ui-invalid{box-shadow:none}.mat-input-element::-ms-clear,.mat-input-element::-ms-reveal{display:none}.mat-input-element,.mat-input-element::-webkit-search-cancel-button,.mat-input-element::-webkit-search-decoration,.mat-input-element::-webkit-search-results-button,.mat-input-element::-webkit-search-results-decoration{-webkit-appearance:none}.mat-input-element::-webkit-contacts-auto-fill-button,.mat-input-element::-webkit-caps-lock-indicator,.mat-input-element::-webkit-credentials-auto-fill-button{visibility:hidden}.mat-input-element[type=date],.mat-input-element[type=datetime],.mat-input-element[type=datetime-local],.mat-input-element[type=month],.mat-input-element[type=week],.mat-input-element[type=time]{line-height:1}.mat-input-element[type=date]::after,.mat-input-element[type=datetime]::after,.mat-input-element[type=datetime-local]::after,.mat-input-element[type=month]::after,.mat-input-element[type=week]::after,.mat-input-element[type=time]::after{content:" ";white-space:pre;width:1px}.mat-input-element::-webkit-inner-spin-button,.mat-input-element::-webkit-calendar-picker-indicator,.mat-input-element::-webkit-clear-button{font-size:.75em}.mat-input-element::placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-moz-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-moz-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element::-webkit-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element::-webkit-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-input-element:-ms-input-placeholder{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-input-element:-ms-input-placeholder:-ms-input-placeholder{-ms-user-select:text}.mat-form-field-hide-placeholder .mat-input-element::placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-moz-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element::-webkit-input-placeholder{opacity:0}.mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{color:transparent !important;-webkit-text-fill-color:transparent;transition:none}.cdk-high-contrast-active .mat-form-field-hide-placeholder .mat-input-element:-ms-input-placeholder{opacity:0}textarea.mat-input-element{resize:vertical;overflow:auto}textarea.mat-input-element.cdk-textarea-autosize{resize:none}textarea.mat-input-element{padding:2px 0;margin:-2px 0}select.mat-input-element{-moz-appearance:none;-webkit-appearance:none;position:relative;background-color:transparent;display:inline-flex;box-sizing:border-box;padding-top:1em;top:-1em;margin-bottom:-1em}select.mat-input-element::-ms-expand{display:none}select.mat-input-element::-moz-focus-inner{border:0}select.mat-input-element:not(:disabled){cursor:pointer}select.mat-input-element::-ms-value{color:inherit;background:none}.mat-focused .cdk-high-contrast-active select.mat-input-element::-ms-value{color:inherit}.mat-form-field-type-mat-native-select .mat-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid transparent;border-right:5px solid transparent;border-top:5px solid;position:absolute;top:50%;right:0;margin-top:-2.5px;pointer-events:none}[dir=rtl] .mat-form-field-type-mat-native-select .mat-form-field-infix::after{right:auto;left:0}.mat-form-field-type-mat-native-select .mat-input-element{padding-right:15px}[dir=rtl] .mat-form-field-type-mat-native-select .mat-input-element{padding-right:0;padding-left:15px}.mat-form-field-type-mat-native-select .mat-form-field-label-wrapper{max-width:calc(100% - 10px)}.mat-form-field-type-mat-native-select.mat-form-field-appearance-outline .mat-form-field-infix::after{margin-top:-5px}.mat-form-field-type-mat-native-select.mat-form-field-appearance-fill .mat-form-field-infix::after{margin-top:-10px}\n',".mat-form-field-appearance-legacy .mat-form-field-label{transform:perspective(100px);-ms-transform:none}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon{width:1em}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button{font:inherit;vertical-align:baseline}.mat-form-field-appearance-legacy .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field-appearance-legacy .mat-form-field-suffix .mat-icon-button .mat-icon{font-size:inherit}.mat-form-field-appearance-legacy .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-legacy .mat-form-field-ripple{top:0;height:2px;overflow:hidden}.cdk-high-contrast-active .mat-form-field-appearance-legacy .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-legacy.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-legacy.mat-form-field-invalid:not(.mat-focused) .mat-form-field-ripple{height:1px}\n",".mat-form-field-appearance-outline .mat-form-field-wrapper{margin:.25em 0}.mat-form-field-appearance-outline .mat-form-field-flex{padding:0 .75em 0 .75em;margin-top:-0.25em;position:relative}.mat-form-field-appearance-outline .mat-form-field-prefix,.mat-form-field-appearance-outline .mat-form-field-suffix{top:.25em}.mat-form-field-appearance-outline .mat-form-field-outline{display:flex;position:absolute;top:.25em;left:0;right:0;bottom:0;pointer-events:none}.mat-form-field-appearance-outline .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-end{border:1px solid currentColor;min-width:5px}.mat-form-field-appearance-outline .mat-form-field-outline-start{border-radius:5px 0 0 5px;border-right-style:none}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-start{border-right-style:solid;border-left-style:none;border-radius:0 5px 5px 0}.mat-form-field-appearance-outline .mat-form-field-outline-end{border-radius:0 5px 5px 0;border-left-style:none;flex-grow:1}[dir=rtl] .mat-form-field-appearance-outline .mat-form-field-outline-end{border-left-style:solid;border-right-style:none;border-radius:5px 0 0 5px}.mat-form-field-appearance-outline .mat-form-field-outline-gap{border-radius:.000001px;border:1px solid currentColor;border-left-style:none;border-right-style:none}.mat-form-field-appearance-outline.mat-form-field-can-float.mat-form-field-should-float .mat-form-field-outline-gap{border-top-color:transparent}.mat-form-field-appearance-outline .mat-form-field-outline-thick{opacity:0}.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-start,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-end,.mat-form-field-appearance-outline .mat-form-field-outline-thick .mat-form-field-outline-gap{border-width:2px}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline{opacity:0;transition:opacity 100ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick,.mat-form-field-appearance-outline.mat-form-field-invalid .mat-form-field-outline-thick{opacity:1}.cdk-high-contrast-active .mat-form-field-appearance-outline.mat-focused .mat-form-field-outline-thick{border:3px dashed}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline{opacity:0;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-outline:not(.mat-form-field-disabled) .mat-form-field-flex:hover .mat-form-field-outline-thick{opacity:1}.mat-form-field-appearance-outline .mat-form-field-subscript-wrapper{padding:0 1em}.mat-form-field-appearance-outline._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-start,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-end,.mat-form-field-appearance-outline._mat-animation-noopable .mat-form-field-outline-gap{transition:none}\n",".mat-form-field-appearance-standard .mat-form-field-flex{padding-top:.75em}.mat-form-field-appearance-standard .mat-form-field-underline{height:1px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-underline{height:0;border-top:solid 1px}.mat-form-field-appearance-standard .mat-form-field-ripple{bottom:0;height:2px}.cdk-high-contrast-active .mat-form-field-appearance-standard .mat-form-field-ripple{height:0;border-top:solid 2px}.mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{background-position:0;background-color:transparent}.cdk-high-contrast-active .mat-form-field-appearance-standard.mat-form-field-disabled .mat-form-field-underline{border-top-style:dotted;border-top-width:2px}.mat-form-field-appearance-standard:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{opacity:1;transform:none;transition:opacity 600ms cubic-bezier(0.25, 0.8, 0.25, 1)}.mat-form-field-appearance-standard._mat-animation-noopable:not(.mat-form-field-disabled) .mat-form-field-flex:hover~.mat-form-field-underline .mat-form-field-ripple{transition:none}\n"],encapsulation:2,data:{animation:[bE.transitionMessages]},changeDetection:0}),t})(),IE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[eh,AC,v_],AC]}),t})();const DE=o_({passive:!0});let RE=(()=>{class t{constructor(t,e){this._platform=t,this._ngZone=e,this._monitoredElements=new Map}monitor(t){if(!this._platform.isBrowser)return Wh;const e=Ky(t),n=this._monitoredElements.get(e);if(n)return n.subject;const i=new x,r="cdk-text-field-autofilled",s=t=>{"cdk-text-field-autofill-start"!==t.animationName||e.classList.contains(r)?"cdk-text-field-autofill-end"===t.animationName&&e.classList.contains(r)&&(e.classList.remove(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!1}))):(e.classList.add(r),this._ngZone.run(()=>i.next({target:t.target,isAutofilled:!0})))};return this._ngZone.runOutsideAngular(()=>{e.addEventListener("animationstart",s,DE),e.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(e,{subject:i,unlisten:()=>{e.removeEventListener("animationstart",s,DE)}}),i}stopMonitoring(t){const e=Ky(t),n=this._monitoredElements.get(e);n&&(n.unlisten(),n.subject.complete(),e.classList.remove("cdk-text-field-autofill-monitored"),e.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(e))}ngOnDestroy(){this._monitoredElements.forEach((t,e)=>this.stopMonitoring(e))}}return t.\u0275fac=function(e){return new(e||t)(hi(Qy),hi(Hl))},t.\u0275prov=ut({factory:function(){return new t(hi(Qy),hi(Hl))},token:t,providedIn:"root"}),t})(),LE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[Jy]]}),t})();const FE=new Wn("MAT_INPUT_VALUE_ACCESSOR"),jE=["button","checkbox","file","hidden","image","radio","range","reset","submit"];let NE=0;const BE=LC(class{constructor(t,e,n,i){this._defaultErrorStateMatcher=t,this._parentForm=e,this._parentFormGroup=n,this.ngControl=i}});let $E=(()=>{class t extends BE{constructor(t,e,n,i,r,s,o,a,l,c){super(s,i,r,n),this._elementRef=t,this._platform=e,this._autofillMonitor=a,this._formField=c,this._uid="mat-input-"+NE++,this.focused=!1,this.stateChanges=new x,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._required=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(t=>e_().has(t));const h=this._elementRef.nativeElement,u=h.nodeName.toLowerCase();this._inputValueAccessor=o||h,this._previousNativeValue=this.value,this.id=this.id,e.IOS&&l.runOutsideAngular(()=>{t.nativeElement.addEventListener("keyup",t=>{const e=t.target;e.value||0!==e.selectionStart||0!==e.selectionEnd||(e.setSelectionRange(1,1),e.setSelectionRange(0,0))})}),this._isServer=!this._platform.isBrowser,this._isNativeSelect="select"===u,this._isTextarea="textarea"===u,this._isInFormField=!!c,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}get disabled(){return this.ngControl&&null!==this.ngControl.disabled?this.ngControl.disabled:this._disabled}set disabled(t){this._disabled=qy(t),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(t){this._id=t||this._uid}get required(){return this._required}set required(t){this._required=qy(t)}get type(){return this._type}set type(t){this._type=t||"text",this._validateType(),!this._isTextarea&&e_().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get value(){return this._inputValueAccessor.value}set value(t){t!==this.value&&(this._inputValueAccessor.value=t,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(t){this._readonly=qy(t)}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(t=>{this.autofilled=t.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement)}ngDoCheck(){this.ngControl&&this.updateErrorState(),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(t){this._elementRef.nativeElement.focus(t)}_focusChanged(t){t!==this.focused&&(this.focused=t,this.stateChanges.next())}_onInput(){}_dirtyCheckPlaceholder(){var t,e;const n=(null===(e=null===(t=this._formField)||void 0===t?void 0:t._hideControlPlaceholder)||void 0===e?void 0:e.call(t))?null:this.placeholder;if(n!==this._previousPlaceholder){const t=this._elementRef.nativeElement;this._previousPlaceholder=n,n?t.setAttribute("placeholder",n):t.removeAttribute("placeholder")}}_dirtyCheckNativeValue(){const t=this._elementRef.nativeElement.value;this._previousNativeValue!==t&&(this._previousNativeValue=t,this.stateChanges.next())}_validateType(){jE.indexOf(this._type)}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let t=this._elementRef.nativeElement.validity;return t&&t.badInput}get empty(){return!(this._isNeverEmpty()||this._elementRef.nativeElement.value||this._isBadInput()||this.autofilled)}get shouldLabelFloat(){if(this._isNativeSelect){const t=this._elementRef.nativeElement,e=t.options[0];return this.focused||t.multiple||!this.empty||!!(t.selectedIndex>-1&&e&&e.label)}return this.focused||!this.empty}setDescribedByIds(t){t.length?this._elementRef.nativeElement.setAttribute("aria-describedby",t.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(Qy),Hs(sg,10),Hs(Dg,8),Hs(zg,8),Hs(FC),Hs(FE,10),Hs(RE),Hs(Hl),Hs(AE,8))},t.\u0275dir=qt({type:t,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-input-element","mat-form-field-autofill-control"],hostVars:9,hostBindings:function(t,e){1&t&&no("focus",function(){return e._focusChanged(!0)})("blur",function(){return e._focusChanged(!1)})("input",function(){return e._onInput()}),2&t&&(Lo("disabled",e.disabled)("required",e.required),zs("id",e.id)("data-placeholder",e.placeholder)("readonly",e.readonly&&!e._isNativeSelect||null)("aria-invalid",e.empty&&e.required?null:e.errorState)("aria-required",e.required),wo("mat-input-server",e._isServer))},inputs:{id:"id",disabled:"disabled",required:"required",type:"type",value:"value",readonly:"readonly",placeholder:"placeholder",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:["aria-describedby","userAriaDescribedBy"]},exportAs:["matInput"],features:[Qo([{provide:wE,useExisting:t}]),Ms,ae]}),t})(),zE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[FC],imports:[[LE,IE,AC],LE,IE]}),t})();const VE=["input"],GE=function(t){return{enterDuration:t}},UE=["*"],HE=new Wn("mat-checkbox-default-options",{providedIn:"root",factory:WE});function WE(){return{color:"accent",clickAction:"check-indeterminate"}}let XE=0;const qE=WE(),YE={provide:Rp,useExisting:rt(()=>QE),multi:!0};class KE{}const ZE=RC(IC(DC(MC(class{constructor(t){this._elementRef=t}}))));let QE=(()=>{class t extends ZE{constructor(t,e,n,i,r,s,o){super(t),this._changeDetectorRef=e,this._focusMonitor=n,this._ngZone=i,this._animationMode=s,this._options=o,this.ariaLabel="",this.ariaLabelledby=null,this._uniqueId="mat-checkbox-"+ ++XE,this.id=this._uniqueId,this.labelPosition="after",this.name=null,this.change=new sl,this.indeterminateChange=new sl,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=0,this._controlValueAccessorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||qE,this.color=this.defaultColor=this._options.color||qE.color,this.tabIndex=parseInt(r)||0}get inputId(){return`${this.id||this._uniqueId}-input`}get required(){return this._required}set required(t){this._required=qy(t)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{t||Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}),this._syncIndeterminate(this._indeterminate)}ngAfterViewChecked(){}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}get checked(){return this._checked}set checked(t){t!=this.checked&&(this._checked=t,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(t){const e=qy(t);e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(t){const e=t!=this._indeterminate;this._indeterminate=qy(t),e&&(this._transitionCheckState(this._indeterminate?3:this.checked?1:2),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(t){this.checked=!!t}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this._onTouched=t}setDisabledState(t){this.disabled=t}_getAriaChecked(){return this.checked?"true":this.indeterminate?"mixed":"false"}_transitionCheckState(t){let e=this._currentCheckState,n=this._elementRef.nativeElement;if(e!==t&&(this._currentAnimationClass.length>0&&n.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(e,t),this._currentCheckState=t,this._currentAnimationClass.length>0)){n.classList.add(this._currentAnimationClass);const t=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{n.classList.remove(t)},1e3)})}}_emitChangeEvent(){const t=new KE;t.source=this,t.checked=this.checked,this._controlValueAccessorChangeFn(this.checked),this.change.emit(t),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked}_onInputClick(t){var e;const n=null===(e=this._options)||void 0===e?void 0:e.clickAction;t.stopPropagation(),this.disabled||"noop"===n?this.disabled||"noop"!==n||(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate):(this.indeterminate&&"check"!==n&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this.toggle(),this._transitionCheckState(this._checked?1:2),this._emitChangeEvent())}focus(t,e){t?this._focusMonitor.focusVia(this._inputElement,t,e):this._inputElement.nativeElement.focus(e)}_onInteractionEvent(t){t.stopPropagation()}_getAnimationClassForCheckStateTransition(t,e){if("NoopAnimations"===this._animationMode)return"";let n="";switch(t){case 0:if(1===e)n="unchecked-checked";else{if(3!=e)return"";n="unchecked-indeterminate"}break;case 2:n=1===e?"unchecked-checked":"unchecked-indeterminate";break;case 1:n=2===e?"checked-unchecked":"checked-indeterminate";break;case 3:n=1===e?"indeterminate-checked":"indeterminate-unchecked"}return`mat-checkbox-anim-${n}`}_syncIndeterminate(t){const e=this._inputElement;e&&(e.nativeElement.indeterminate=t)}}return t.\u0275fac=function(e){return new(e||t)(Hs(sa),Hs(Ma),Hs(M_),Hs(Hl),Vn("tabindex"),Hs(CC,8),Hs(HE,8))},t.\u0275cmp=Vt({type:t,selectors:[["mat-checkbox"]],viewQuery:function(t,e){if(1&t&&(yl(VE,5),yl(UC,5)),2&t){let t;vl(t=bl())&&(e._inputElement=t.first),vl(t=bl())&&(e.ripple=t.first)}},hostAttrs:[1,"mat-checkbox"],hostVars:12,hostBindings:function(t,e){2&t&&(Lo("id",e.id),zs("tabindex",null),wo("mat-checkbox-indeterminate",e.indeterminate)("mat-checkbox-checked",e.checked)("mat-checkbox-disabled",e.disabled)("mat-checkbox-label-before","before"==e.labelPosition)("_mat-animation-noopable","NoopAnimations"===e._animationMode))},inputs:{disableRipple:"disableRipple",color:"color",tabIndex:"tabIndex",ariaLabel:["aria-label","ariaLabel"],ariaLabelledby:["aria-labelledby","ariaLabelledby"],id:"id",labelPosition:"labelPosition",name:"name",required:"required",checked:"checked",disabled:"disabled",indeterminate:"indeterminate",ariaDescribedby:["aria-describedby","ariaDescribedby"],value:"value"},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],features:[Qo([YE]),Ms],ngContentSelectors:UE,decls:17,vars:21,consts:[[1,"mat-checkbox-layout"],["label",""],[1,"mat-checkbox-inner-container"],["type","checkbox",1,"mat-checkbox-input","cdk-visually-hidden",3,"id","required","checked","disabled","tabIndex","change","click"],["input",""],["matRipple","",1,"mat-checkbox-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleRadius","matRippleCentered","matRippleAnimation"],[1,"mat-ripple-element","mat-checkbox-persistent-ripple"],[1,"mat-checkbox-frame"],[1,"mat-checkbox-background"],["version","1.1","focusable","false","viewBox","0 0 24 24",0,"xml","space","preserve",1,"mat-checkbox-checkmark"],["fill","none","stroke","white","d","M4.1,12.7 9,17.6 20.3,6.3",1,"mat-checkbox-checkmark-path"],[1,"mat-checkbox-mixedmark"],[1,"mat-checkbox-label",3,"cdkObserveContent"],["checkboxLabel",""],[2,"display","none"]],template:function(t,e){if(1&t&&(co(),qs(0,"label",0,1),qs(2,"span",2),qs(3,"input",3,4),no("change",function(t){return e._onInteractionEvent(t)})("click",function(t){return e._onInputClick(t)}),Ys(),qs(5,"span",5),Ks(6,"span",6),Ys(),Ks(7,"span",7),qs(8,"span",8),nn(),qs(9,"svg",9),Ks(10,"path",10),Ys(),rn(),Ks(11,"span",11),Ys(),Ys(),qs(12,"span",12,13),no("cdkObserveContent",function(){return e._onLabelTextChange()}),qs(14,"span",14),Io(15,"\xa0"),Ys(),ho(16),Ys(),Ys()),2&t){const t=Us(1),o=Us(13);zs("for",e.inputId),yr(2),wo("mat-checkbox-inner-container-no-side-margin",!o.textContent||!o.textContent.trim()),yr(1),Ws("id",e.inputId)("required",e.required)("checked",e.checked)("disabled",e.disabled)("tabIndex",e.tabIndex),zs("value",e.value)("name",e.name)("aria-label",e.ariaLabel||null)("aria-labelledby",e.ariaLabelledby)("aria-checked",e._getAriaChecked())("aria-describedby",e.ariaDescribedby),yr(2),Ws("matRippleTrigger",t)("matRippleDisabled",e._isRippleDisabled())("matRippleRadius",20)("matRippleCentered",!0)("matRippleAnimation",(n=19,i=GE,r="NoopAnimations"===e._animationMode?0:150,function(t,e,n,i,r,s){const o=e+n;return $s(t,o,r)?function(t,e,n){return t[e]=n}(t,o+1,s?i.call(s,r):i(r)):function(t,e){const n=t[e];return n===vr?void 0:n}(t,o+1)}(Oe(),function(){const t=Te.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}(),n,i,r,s)))}var n,i,r,s},directives:[UC,m_],styles:["@keyframes mat-checkbox-fade-in-background{0%{opacity:0}50%{opacity:1}}@keyframes mat-checkbox-fade-out-background{0%,50%{opacity:1}100%{opacity:0}}@keyframes mat-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:22.910259}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1)}100%{stroke-dashoffset:0}}@keyframes mat-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mat-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);stroke-dashoffset:0}to{stroke-dashoffset:-22.910259}}@keyframes mat-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(45deg)}}@keyframes mat-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:0;transform:rotate(45deg)}to{opacity:1;transform:rotate(360deg)}}@keyframes mat-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 0.1);opacity:0;transform:rotate(-45deg)}to{opacity:1;transform:rotate(0deg)}}@keyframes mat-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);opacity:1;transform:rotate(0deg)}to{opacity:0;transform:rotate(315deg)}}@keyframes mat-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;opacity:1;transform:scaleX(1)}32.8%,100%{opacity:0;transform:scaleX(0)}}.mat-checkbox-background,.mat-checkbox-frame{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:2px;box-sizing:border-box;pointer-events:none}.mat-checkbox{display:inline-block;transition:background 400ms cubic-bezier(0.25, 0.8, 0.25, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);cursor:pointer;-webkit-tap-highlight-color:transparent}._mat-animation-noopable.mat-checkbox{transition:none;animation:none}.mat-checkbox .mat-ripple-element:not(.mat-checkbox-persistent-ripple){opacity:.16}.mat-checkbox .mat-checkbox-ripple{position:absolute;left:calc(50% - 20px);top:calc(50% - 20px);height:40px;width:40px;z-index:1;pointer-events:none}.cdk-high-contrast-active .mat-checkbox.cdk-keyboard-focused .mat-checkbox-ripple{outline:solid 3px}.mat-checkbox-layout{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:inherit;align-items:baseline;vertical-align:middle;display:inline-flex;white-space:nowrap}.mat-checkbox-label{-webkit-user-select:auto;-moz-user-select:auto;-ms-user-select:auto;user-select:auto}.mat-checkbox-inner-container{display:inline-block;height:16px;line-height:0;margin:auto;margin-right:8px;order:0;position:relative;vertical-align:middle;white-space:nowrap;width:16px;flex-shrink:0}[dir=rtl] .mat-checkbox-inner-container{margin-left:8px;margin-right:auto}.mat-checkbox-inner-container-no-side-margin{margin-left:0;margin-right:0}.mat-checkbox-frame{background-color:transparent;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1);border-width:2px;border-style:solid}._mat-animation-noopable .mat-checkbox-frame{transition:none}.mat-checkbox-background{align-items:center;display:inline-flex;justify-content:center;transition:background-color 90ms cubic-bezier(0, 0, 0.2, 0.1),opacity 90ms cubic-bezier(0, 0, 0.2, 0.1);-webkit-print-color-adjust:exact;color-adjust:exact}._mat-animation-noopable .mat-checkbox-background{transition:none}.cdk-high-contrast-active .mat-checkbox .mat-checkbox-background{background:none}.mat-checkbox-persistent-ripple{display:block;width:100%;height:100%;transform:none}.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:.04}.mat-checkbox.cdk-keyboard-focused .mat-checkbox-persistent-ripple{opacity:.12}.mat-checkbox-persistent-ripple,.mat-checkbox.mat-checkbox-disabled .mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{opacity:0}@media(hover: none){.mat-checkbox-inner-container:hover .mat-checkbox-persistent-ripple{display:none}}.mat-checkbox-checkmark{top:0;left:0;right:0;bottom:0;position:absolute;width:100%}.mat-checkbox-checkmark-path{stroke-dashoffset:22.910259;stroke-dasharray:22.910259;stroke-width:2.1333333333px}.cdk-high-contrast-black-on-white .mat-checkbox-checkmark-path{stroke:#000 !important}.mat-checkbox-mixedmark{width:calc(100% - 6px);height:2px;opacity:0;transform:scaleX(0) rotate(0deg);border-radius:2px}.cdk-high-contrast-active .mat-checkbox-mixedmark{height:0;border-top:solid 2px;margin-top:2px}.mat-checkbox-label-before .mat-checkbox-inner-container{order:1;margin-left:8px;margin-right:auto}[dir=rtl] .mat-checkbox-label-before .mat-checkbox-inner-container{margin-left:auto;margin-right:8px}.mat-checkbox-checked .mat-checkbox-checkmark{opacity:1}.mat-checkbox-checked .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-checked .mat-checkbox-mixedmark{transform:scaleX(1) rotate(-45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark{opacity:0;transform:rotate(45deg)}.mat-checkbox-indeterminate .mat-checkbox-checkmark-path{stroke-dashoffset:0}.mat-checkbox-indeterminate .mat-checkbox-mixedmark{opacity:1;transform:scaleX(1) rotate(0deg)}.mat-checkbox-unchecked .mat-checkbox-background{background-color:transparent}.mat-checkbox-disabled{cursor:default}.cdk-high-contrast-active .mat-checkbox-disabled{opacity:.5}.mat-checkbox-anim-unchecked-checked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-checked .mat-checkbox-checkmark-path{animation:180ms linear 0ms mat-checkbox-unchecked-checked-checkmark-path}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-in-background}.mat-checkbox-anim-unchecked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-unchecked-indeterminate-mixedmark}.mat-checkbox-anim-checked-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-checked-unchecked .mat-checkbox-checkmark-path{animation:90ms linear 0ms mat-checkbox-checked-unchecked-checkmark-path}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-checkmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-checkmark}.mat-checkbox-anim-checked-indeterminate .mat-checkbox-mixedmark{animation:90ms linear 0ms mat-checkbox-checked-indeterminate-mixedmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-checkmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-checkmark}.mat-checkbox-anim-indeterminate-checked .mat-checkbox-mixedmark{animation:500ms linear 0ms mat-checkbox-indeterminate-checked-mixedmark}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-background{animation:180ms linear 0ms mat-checkbox-fade-out-background}.mat-checkbox-anim-indeterminate-unchecked .mat-checkbox-mixedmark{animation:300ms linear 0ms mat-checkbox-indeterminate-unchecked-mixedmark}.mat-checkbox-input{bottom:0;left:50%}\n"],encapsulation:2,changeDetection:0}),t})(),JE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({}),t})(),tO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[HC,AC,v_,JE],AC,JE]}),t})(),eO=(()=>{class t{constructor(){this.theContainer=document.querySelectorAll("#can")}ngOnInit(){this.stage1=new xT.Stage({container:"container",width:100,height:100}),this.layer2=new xT.Layer;let t=new xT.Circle({x:this.stage1.width()/2,y:this.stage1.height()/2,radius:10,fill:"red",stroke:"black",strokeWidth:4}),e=new xT.Circle({x:this.stage1.width()/2,y:this.stage1.height()/2,radius:20,fill:"red",stroke:"black",strokeWidth:1});t.draggable(!0),e.draggable(!0),this.layer2.add(t),this.layer2.add(e);var n=new xT.Transformer;this.layer2.add(n),n.nodes([t]);var i=new xT.Transformer;this.layer2.add(i),i.nodes([e]);let r=new xT.Layer;for(var s=0;s<this.theContainer.length;s++)this.stage=new xT.Stage({container:"can",width:600,height:600}),r=this.layer2.clone(),this.stage.add(r);r=this.layer2.clone(),this.stage1.add(this.layer2)}addGrid(t){const e=document.getElementById("myCanvas"),n=e.getContext("2d");if(t.checked){for(var i=.5;i<e.width;i+=10)n.moveTo(i,0),n.lineTo(i,381);for(var r=.5;r<e.height;r+=10)n.moveTo(0,r),n.lineTo(500,r);n.strokeStyle="rgba(0,0,0,0.1)",n.stroke()}else n.clearRect(0,0,e.width,e.height)}generate(){this.layer1=null,this.layerr=null,this.stage=new xT.Stage({container:"can",width:600,height:600}),this.layerr=this.layer2.clone();var t=this.layerr.children[0].clone(),e=this.layerr.children[1].clone(),n=0,i=0,r=0;t.attrs.x>80&&(n=t.attrs.x-100),t.attrs.y>80&&(i=t.attrs.y-100),e.attrs.x>80&&(r=e.attrs.x-100),e.attrs.y>80&&(r=e.attrs.y-100);let s=0;for(var o=0;o<10;o++){s=0;for(var a=0;a<10;a++){var l=this.layerr.children[0].clone();l.attrs.x=l.attrs.x+100*o+n-100,l.attrs.y=l.attrs.y+100*s+i-100,this.layerr.add(l);var c=this.layerr.children[1].clone();c.attrs.x=c.attrs.x+100*o+r-100,c.attrs.y=c.attrs.y+100*s+0-100,this.layerr.add(c);var h=this.layerr.children[2].clone();h.attrs.x=h.attrs.x+100*o+r-100,h.attrs.y=h.attrs.y+100*s+0-100,this.layerr.add(h),s++}}this.stage.add(this.layerr)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-preview"]],decls:30,vars:0,consts:[["opened","","mode","side","disableClose","true","position","end"],["id","preview-heading"],[1,"preview-inputs"],[1,"inp-label"],["appearance","outline",2,"text-align","center"],["matInput","","default","1",1,"inp-box"],["labelPosition","before",3,"change"],[1,"export-btn"],[1,"preview"],["id","container"],[3,"click"],["id","main",1,"main"],["id","can"],["width","600px","height","600px"]],template:function(t,e){1&t&&(qs(0,"mat-sidenav-container"),qs(1,"mat-sidenav",0),qs(2,"div",1),Io(3," Preview Options "),Ys(),qs(4,"div",2),qs(5,"form"),qs(6,"mat-label"),qs(7,"div",3),Io(8,"Repeat X-Axis"),Ys(),Ys(),qs(9,"mat-form-field",4),Ks(10,"input",5),Ys(),qs(11,"mat-label"),qs(12,"div",3),Io(13,"Repeat Y-Axis"),Ys(),Ys(),qs(14,"mat-form-field",4),Ks(15,"input",5),Ys(),Ks(16,"br"),qs(17,"mat-checkbox",6),no("change",function(t){return e.addGrid(t)}),Io(18,"Show Gridlines"),Ys(),qs(19,"div",7),qs(20,"button"),Io(21," Export "),Ys(),Ys(),Ys(),Ys(),Ys(),qs(22,"mat-sidenav-content"),qs(23,"div",8),Ks(24,"div",9),qs(25,"button",10),no("click",function(){return e.generate()}),Io(26,"Generate"),Ys(),qs(27,"div",11),qs(28,"div",12),Ks(29,"canvas",13),Ys(),Ys(),Ys(),Ys(),Ys())},directives:[tE,JT,jg,lg,Dg,xE,ME,$E,QE,QT],styles:["mat-sidenav-container[_ngcontent-%COMP%]{height:100%;background-color:#fff}mat-sidenav[_ngcontent-%COMP%], mat-sidenav-content[_ngcontent-%COMP%]{padding:16px;align-items:center}mat-sidenav[_ngcontent-%COMP%]{background-color:rgba(205,205,214,.349);width:25%}mat-form-field[_ngcontent-%COMP%], mat-sidenav[_ngcontent-%COMP%]{align-content:center;text-align:center}mat-form-field[_ngcontent-%COMP%]{align-items:center}#preview-heading[_ngcontent-%COMP%], .inp-label[_ngcontent-%COMP%]{text-align:center}#preview-heading[_ngcontent-%COMP%]{font-style:italic;margin-bottom:5%}form[_ngcontent-%COMP%]{overflow:hidden}input[_ngcontent-%COMP%]{height:2em}canvas[_ngcontent-%COMP%]{border:1px solid #000;width:60%;height:50%}.preview[_ngcontent-%COMP%]{margin-left:20px}"]}),t})(),nO=(()=>{class t{constructor(t,e){this.gLoginService=t,this.ref=e}ngOnInit(){this.gLoginService.observable().subscribe(t=>{this.user=t,console.log(t),this.ref.detectChanges()})}signIn(){console.log("Test"),this.gLoginService.signIn()}signOut(){this.gLoginService.signOut()}printFile(){this.gLoginService.printFile("1uBUHbTjn1NuTIV6M9DhLHmT9dY1hs6Wm")}}return t.\u0275fac=function(e){return new(e||t)(Hs($y),Hs(Ma))},t.\u0275cmp=Vt({type:t,selectors:[["app-login"]],decls:9,vars:0,consts:[[1,"wrapper"],[1,"container"],[1,"form"],[3,"click"],["src","./assets/icon/GoogleLogo.png","alt","Sign in With Google",2,"width","10%","height","10%"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),qs(2,"h1"),Io(3,"Surface Pattern Accelerator"),Ys(),qs(4,"h2"),Io(5,"Sign in with:"),Ys(),qs(6,"form",2),qs(7,"button",3),no("click",function(){return e.signIn()}),Ks(8,"img",4),Ys(),Ys(),Ys(),Ys())},directives:[jg,lg,Dg],styles:["@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300);*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}*[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-weight:300}body[_ngcontent-%COMP%]{font-family:Source Sans Pro,sans-serif;color:#fff}.wrapper[_ngcontent-%COMP%]{background:#50a3a2;background:linear-gradient(30deg,#000,blue,green);background-size:300% 300%;animation:anima 20s ease-in-out infinite;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.wrapper.form-success[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{transform:translateY(85px)}@keyframes anima{0%{background-position:0 100%}50%{background-position:100% 0}to{background-position:0 100%}}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:80px 0;height:400px;text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:30%;font-size:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{transition-duration:1s;font-weight:200;color:#fff}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px}form[_ngcontent-%COMP%]{padding:20px 0;position:relative;z-index:2}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{display:block;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:0;border:1px solid #000;width:400px;border-radius:3px;padding:10px 15px;margin:0 auto 10px;text-align:center;font-size:18px;color:#fff;transition-duration:.25s;font-weight:300}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-color:#fff}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:300px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{display:block;-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:0;border:1px solid #000;background-color:#fff;width:400px;border-radius:3px;padding:10px 15px;margin:0 auto 10px;text-align:center;font-size:18px;color:#fff;cursor:pointer;transition-duration:.25s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f5f7f9}"]}),t})(),iO=(()=>{class t{constructor(t,e,n,i,r){this.route=t,this.router=e,this.http=n,this.loadingController=i,this.serverLink=r,this.route.queryParams.subscribe(t=>{this.accessCode=t.code})}ngOnInit(){console.log(this.accessCode),this.loadingController.create({message:"Connecting to server..."}).then(t=>{t.present().then(e=>{this.setAuthCodeOnServer(this.accessCode).subscribe(e=>{console.log(e),t.dismiss().then(t=>{this.router.navigate(["collections"]).then()})})})})}setAuthCodeOnServer(t){return console.log("set auth code on server fired"),this.http.post(this.serverLink.getServerLink()+"/api/consumeAccessCode",{accessCode:t},{withCredentials:!0})}}return t.\u0275fac=function(e){return new(e||t)(Hs(jd),Hs(ap),Hs(ey),Hs(Pv),Hs(gy))},t.\u0275cmp=Vt({type:t,selectors:[["app-login-response"]],decls:0,vars:0,template:function(t,e){},styles:[""]}),t})(),rO=(()=>{class t{constructor(t){this.stageColorService=t,this.colourList=[]}ngOnInit(){this.colorGenerator(),this.stageColorService.stage$.subscribe(t=>{console.log("image subscription"+t),this.imgSrc=t}),document.getElementById("onlyImage").onload=()=>{this.draw(),document.getElementById("onlyImage").onclick=()=>{this.canvasColour()}}}fileGetContents(t,e){return Sy(this,void 0,void 0,function*(){const n=yield fetch(t),i=yield n.text();return document.getElementById("divOutput").innerHTML=i,e?e(i):i})}loadToExpandedView(){const t=document.getElementById("output"),e=this.fileGetContents(t.src,console.log),n=document.getElementById("divOutput").children;return null==n[0]?(console.log("Error in changeColor(): SVG was not inserted into div container."),null):(n[0].setAttribute("id","test"),e)}changeFill(){const t=document.getElementById("divOutput").children[0],e=document.getElementById("fav_color");return this.recursiveNodeSearch(t,e.value),!0}changeFillText(){const t=document.getElementById("divOutput").children[0],e=document.getElementById("textColor");return this.recursiveNodeSearch(t,e.value),!0}recursiveNodeSearch(t,e){if(null!=t)if(0!==t.childElementCount){if(t.childElementCount>0){const n=t.children;for(let t=0;t<n.length;t++)void 0!==n[t]&&this.recursiveNodeSearch(n[t],e)}}else void 0!==t&&(console.log("Changing the node color, through recursive node search: ",t.tagName),t.hasAttribute("style")?t.style.fill=e:(t.hasAttribute("fill"),t.setAttribute("fill",e)))}saveSvg(){const t=document.getElementById("divOutput"),e=new Blob(['<?xml version="1.0" standalone="no"?>\r\n','<svg xmlns="http://www.w3.org/2000/svg">',t.children[0].outerHTML,"</svg>"],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(e),i=document.createElement("a");i.href=n,i.download="SVG_element",document.body.appendChild(i),i.click(),document.body.removeChild(i)}importSVG(){const t=document.getElementById("c-upload-file"),e=document.getElementById("output");return t.click(),t.addEventListener("change",()=>{const n=t.files[0];if(n)try{return e.src=URL.createObjectURL(n),this.svgName=" : "+n.name,this.loadToExpandedView()}catch(i){console.log(i.message)}}),null}getRandomIntInclusion(t,e){const n=new Uint32Array(1);window.crypto.getRandomValues(n);let i=n[0]/4294967296;return t=Math.ceil(t),e=Math.floor(e),Math.floor(i*(e-t+1))+t}colorGenerator(){const t=document.querySelectorAll(".codes"),e=document.querySelectorAll(".colors"),n="0123456789abcdef",i=["#","#","#","#","#","#"];for(let r=0;r<6;r++)i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,100)%16)],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))],i[r]+=n[Math.floor(this.getRandomIntInclusion(0,16))];for(let r=0;r<t.length;r++)t[r].innerHTML=i[r],e[r].style.backgroundColor=i[r]}lockColor(t){const e=document.getElementById(t);let n,i;e&&(n=e.previousElementSibling,console.log("color div class: "+n.className),i=e.nextElementSibling,console.log("p class: "+i.className)),"colors"===n.className?(n.classList.remove("colors"),n.classList.add("stay-colors"),n.style.backgroundColor=i.innerHTML,console.log("prev.style.backgroundColor: "+n.style.backgroundColor),i.classList.remove("codes"),i.classList.add("new-codes"),e.innerHTML="Unlock"):"stay-colors"===n.className&&(n.classList.remove("stay-colors"),n.classList.add("colors"),n.style.backgroundColor=i.innerHTML,i.classList.remove("new-codes"),i.classList.add("codes"),e.innerHTML="Lock")}draw(){console.log("draw executing");const t=document.getElementById("canvas").getContext("2d"),e=new Image;e.src=this.imgSrc,e.onload=()=>{t.drawImage(e,0,0),console.log("image drawn")},console.log("draw called")}canvasColour(){const t=document.getElementById("canvas"),e=t.getContext("2d").getImageData(0,0,t.width,t.height).data;let n,i,r="";for(n=0,i=e.length;n<i;n+=4){const t=this.rgbToHex("rgb("+e[n]+","+e[n+1]+","+e[n+2]+")");t in this.colourList?this.colourList[t]++:this.colourList[t]=1}const s=Object.keys(this.colourList);s.sort();const o=[];let a="";console.log("before loop");let l=0;for(n=1;n<s.length;n++)if(console.log("in loop"),!o.includes(this.colourList[s[n]])&&a!=s[n].charAt(1)){o.push(this.colourList[s[n]]);const t=document.querySelector("#item"+l),e=document.querySelector("#hx"+l);console.log(s[n]),t.style.backgroundColor=s[n],e.innerHTML=s[n],a=s[n].charAt(1),l++,r+=s[n]+","}return r}rgbToHex(t){const e=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);function n(t){return("0"+parseInt(t,10).toString(16)).slice(-2)}return"#"+n(e[1])+n(e[2])+n(e[3])}}return t.\u0275fac=function(e){return new(e||t)(Hs(ox))},t.\u0275cmp=Vt({type:t,selectors:[["app-color"]],decls:118,vars:3,consts:[["id","colorComponentWrapper"],["size","8"],["alt","Image","id","onlyImage",3,"src"],["id","canvas","width","400","height","200","hidden",""],["size","4"],["id","output","alt","SVG Image","width","100","src","",2,"display","none"],["id","divOutput"],["for","fav_color"],["type","color","id","fav_color","name","fav_color","value","#ff0000"],["id","changeColorBtn","color","medium",3,"click"],["for","textColor",2,"color","#000000"],["type","text","id","textColor","name","textColor","value","#ff0000",2,"background-color","#FFFFFF","border","1px solid #000000","padding-left","2%","color","#000000"],["id","changeTextBtn","color","medium",3,"click"],["type","file","id","c-upload-file","accept","image/svg+xml/*"],["id","importBtn","color","medium",3,"click"],["id","saveBtn","color","medium",3,"click"],[1,"grid-container"],["id","item0",1,"grid-item"],["id","hx0",1,"par"],["id","item1",1,"grid-item"],["id","hx1",1,"par"],["id","item2",1,"grid-item"],["id","hx2",1,"par"],["id","item3",1,"grid-item"],["id","hx3",1,"par"],["id","item4",1,"grid-item"],["id","hx4",1,"par"],["id","item5",1,"grid-item"],["id","hx5",1,"par"],["id","item6",1,"grid-item"],["id","hx6",1,"par"],["id","item7",1,"grid-item"],["id","hx7",1,"par"],["id","item8",1,"grid-item"],["id","hx8",1,"par"],["id","item9",1,"grid-item"],["id","hx9",1,"par"],["id","item10",1,"grid-item"],["id","hx10",1,"par"],["id","item11",1,"grid-item"],["id","hx11",1,"par"],["id","item12",1,"grid-item"],["id","hx12",1,"par"],["id","item13",1,"grid-item"],["id","hx13",1,"par"],["id","item14",1,"grid-item"],["id","hx14",1,"par"],["id","item15",1,"grid-item"],["id","hx15",1,"par"],["id","item16",1,"grid-item"],["id","hx16",1,"par"],["id","item17",1,"grid-item"],["id","hx17",1,"par"],["id","item18",1,"grid-item"],["id","hx18",1,"par"],["id","item19",1,"grid-item"],["id","hx19",1,"par"],["id","genBtn","color","medium",3,"click"],[1,"colorBox"],[1,"colors",2,"width","100%","height","90%","border-radius","25px"],["id","locks1","color","medium",3,"click"],[1,"codes"],["id","locks2","color","medium",3,"click"],["id","locks3","color","medium",3,"click"],["id","locks4","color","medium",3,"click"]],template:function(t,e){1&t&&(qs(0,"ion-content",0),qs(1,"ion-grid"),qs(2,"ion-row"),qs(3,"ion-col",1),qs(4,"ion-card"),qs(5,"ion-card-header"),qs(6,"ion-card-title"),Io(7),Ys(),Ys(),qs(8,"ion-card-content"),Ks(9,"img",2),Ks(10,"canvas",3),Ys(),Ys(),Ys(),qs(11,"ion-col",4),qs(12,"ion-card"),qs(13,"ion-card-header"),qs(14,"ion-card-title"),Io(15),Ys(),Ys(),qs(16,"ion-card-content"),Ks(17,"img",5),Ks(18,"div",6),qs(19,"form"),qs(20,"ion-item"),qs(21,"ion-label",7),Io(22,"Select a color: "),Ys(),Ks(23,"input",8),Ys(),Ks(24,"br"),qs(25,"ion-button",9),no("click",function(){return e.changeFill()}),Io(26,"Change Color"),Ys(),Ks(27,"br"),qs(28,"ion-item"),qs(29,"ion-label",10),Io(30,"Enter a color: "),Ys(),Ks(31,"input",11),Ys(),qs(32,"ion-button",12),no("click",function(){return e.changeFillText()}),Io(33,"Change Color"),Ys(),Ks(34,"input",13),qs(35,"ion-button",14),no("click",function(){return e.importSVG()}),Io(36,"Import SVG"),Ys(),qs(37,"ion-button",15),no("click",function(){return e.saveSvg()}),Io(38,"Save SVG"),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),qs(39,"ion-row"),qs(40,"ion-col",1),qs(41,"ion-card"),qs(42,"ion-card-header"),Io(43," Tap on pattern to extract colours "),Ys(),qs(44,"ion-card-content"),qs(45,"ion-grid",16),qs(46,"ion-row",17),Ks(47,"p",18),Ys(),qs(48,"ion-row",19),Ks(49,"p",20),Ys(),qs(50,"ion-row",21),Ks(51,"p",22),Ys(),qs(52,"ion-row",23),Ks(53,"p",24),Ys(),qs(54,"ion-row",25),Ks(55,"p",26),Ys(),qs(56,"ion-row",27),Ks(57,"p",28),Ys(),qs(58,"ion-row",29),Ks(59,"p",30),Ys(),qs(60,"ion-row",31),Ks(61,"p",32),Ys(),qs(62,"ion-row",33),Ks(63,"p",34),Ys(),qs(64,"ion-row",35),Ks(65,"p",36),Ys(),qs(66,"ion-row",37),Ks(67,"p",38),Ys(),qs(68,"ion-row",39),Ks(69,"p",40),Ys(),qs(70,"ion-row",41),Ks(71,"p",42),Ys(),qs(72,"ion-row",43),Ks(73,"p",44),Ys(),qs(74,"ion-row",45),Ks(75,"p",46),Ys(),qs(76,"ion-row",47),Ks(77,"p",48),Ys(),qs(78,"ion-row",49),Ks(79,"p",50),Ys(),qs(80,"ion-row",51),Ks(81,"p",52),Ys(),qs(82,"ion-row",53),Ks(83,"p",54),Ys(),qs(84,"ion-row",55),Ks(85,"p",56),Ys(),Ys(),Ys(),Ys(),Ys(),qs(86,"ion-col",4),qs(87,"ion-card"),qs(88,"ion-card-header"),qs(89,"ion-card-title"),Io(90," Your Color Palette "),qs(91,"ion-button",57),no("click",function(){return e.colorGenerator()}),Io(92,"Generate"),Ys(),Ys(),Ys(),qs(93,"ion-card-content"),qs(94,"ion-item",58),Ks(95,"div",59),qs(96,"ion-button",60),no("click",function(){return e.lockColor("locks1")}),Io(97,"Lock"),Ys(),qs(98,"p",61),Io(99,"#4cae3a"),Ys(),Ys(),qs(100,"ion-item",58),Ks(101,"div",59),qs(102,"ion-button",62),no("click",function(){return e.lockColor("locks2")}),Io(103,"Lock"),Ys(),qs(104,"p",61),Io(105,"#4cae3a"),Ys(),Ys(),qs(106,"ion-item",58),Ks(107,"div",59),qs(108,"ion-button",63),no("click",function(){return e.lockColor("locks3")}),Io(109,"Lock"),Ys(),qs(110,"p",61),Io(111,"#4cae3a"),Ys(),Ys(),qs(112,"ion-item",58),Ks(113,"div",59),qs(114,"ion-button",64),no("click",function(){return e.lockColor("locks4")}),Io(115,"Lock"),Ys(),qs(116,"p",61),Io(117,"#4cae3a"),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys()),2&t&&(yr(7),Ro("Pattern ",e.patternName,""),yr(2),Ws("src",e.imgSrc,Ci),yr(6),Ro("Expanded View ",e.svgName,""))},directives:[zm,Vm,Km,$m,Lm,jm,Nm,Fm,jg,lg,Dg,Hm,Wm,Rm],styles:[".par[_ngcontent-%COMP%]{background-color:#fff}#colorComponentWrapper[_ngcontent-%COMP%]{overflow:auto}#c-upload-file[_ngcontent-%COMP%]{opacity:0}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto auto auto}.grid-item[_ngcontent-%COMP%]{padding:5%;text-align:center}ion-card[_ngcontent-%COMP%], ion-content[_ngcontent-%COMP%]{height:100%}"]}),t})(),sO=(()=>{class t{constructor(t,e,n,i,r){this.collectionsService=t,this.motifService=e,this.patternService=n,this.router=i,this.loadingController=r}ngOnInit(){console.log("new collection component created"),this.motifService.purgeContent(),this.patternService.purgeContent()}newCollection(t){this.loadingController.create({message:"Creating Collection..."}).then(e=>{e.present().then(n=>{this.collectionsService.createNewCollection(t).subscribe(t=>{let n=t;console.log("Temp Collection storage is:"),console.log(n),e.dismiss().then(t=>{this.collectionsService.currentCollectionID=n.collectionID,this.router.navigate(["pattern"]).then()})})})})}getColorCodes(){const t=document.getElementById("color");this.colorCodeHex="Color code: "+t.value,console.log(this.colorCodeHex)}}return t.\u0275fac=function(e){return new(e||t)(Hs(_y),Hs(zy),Hs(Vy),Hs(ap),Hs(Pv))},t.\u0275cmp=Vt({type:t,selectors:[["app-new-collection"]],decls:43,vars:1,consts:[["id","menu"],["for","new-collection"],["type","text","id","new-collection",1,"inputField"],["collectionName",""],["for","story"],["id","story"],["collectionStory",""],["for","themes"],["id","themes","placeholder","Enter comma separated color codes"],["collectionThemes",""],["id","colorPicker"],["for","color"],["type","color","id","color","name","color","value","#73b504"],["id","newCol","color","medium",3,"click"],["id","colorCode"],["expand","block","color","medium","type","button",1,"button",3,"click"]],template:function(t,e){if(1&t){const t=Js();qs(0,"ion-content"),Ks(1,"br"),qs(2,"ion-card",0),qs(3,"ion-card-header"),Io(4,"New Collection"),Ys(),qs(5,"ion-card-content"),qs(6,"label",1),Io(7,"Collection name: "),Ys(),Ks(8,"br"),Ks(9,"input",2,3),Ks(11,"br"),qs(12,"label",4),Io(13,"Collection Story: "),Ys(),Ks(14,"br"),Ks(15,"input",5,6),Ks(17,"br"),qs(18,"label",7),Io(19,"Collection Themes: "),Ys(),Ks(20,"br"),Ks(21,"input",8,9),Ks(23,"br"),Ks(24,"br"),Ks(25,"br"),qs(26,"ion-card",10),qs(27,"ion-card-header"),Io(28," Use the color picker to get color codes"),Ys(),qs(29,"ion-card-content"),qs(30,"label",11),Io(31,"Pick a color :"),Ys(),Ks(32,"input",12),Ks(33,"br"),Ks(34,"br"),qs(35,"ion-button",13),no("click",function(){return e.getColorCodes()}),Io(36," get color code "),Ys(),Ks(37,"br"),Ks(38,"br"),qs(39,"p",14),Io(40),Ys(),Ys(),Ys(),qs(41,"ion-button",15),no("click",function(){Ae(t);const n=Us(10);return e.newCollection(n.value),n.value=""}),Io(42," Add Collection "),Ys(),Ys(),Ys(),Ys()}2&t&&(yr(40),Do(e.colorCodeHex))},directives:[zm,Lm,jm,Fm,Rm],styles:["#colorCode[_ngcontent-%COMP%], #hexVal[_ngcontent-%COMP%], label[_ngcontent-%COMP%]{font-size:large}#new-collection[_ngcontent-%COMP%], #story[_ngcontent-%COMP%], #themes[_ngcontent-%COMP%]{width:100%;padding:12px 20px;margin:8px 0;display:inline-block;border:1px solid grey;border-radius:4px;box-sizing:border-box}ion-card-header[_ngcontent-%COMP%]{font-size:xx-large}#menu[_ngcontent-%COMP%]{width:50%;margin:auto}#button-card[_ngcontent-%COMP%]{width:100%;height:20%;display:flex;justify-content:center;align-items:center}"]}),t})(),oO=(()=>{class t{constructor(t,e,n){this.router=t,this.gLoginService=e,this.ref=n}ngOnInit(){}navigateTo(t){this.router.navigate([t])}signIn(){this.gLoginService.signIn()}}return t.\u0275fac=function(e){return new(e||t)(Hs(ap),Hs($y),Hs(Ma))},t.\u0275cmp=Vt({type:t,selectors:[["app-body"]],decls:64,vars:0,consts:[[1,"mainBody",2,"overflow-x","hidden"],[1,"header"],[1,"logo"],[1,"launchPage_1"],["id","wave","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#007DDB","fill-opacity","0.29","d","M0,224L40,213.3C80,203,160,181,240,176C320,171,400,181,480,192C560,203,640,213,720,192C800,171,880,117,960,106.7C1040,96,1120,128,1200,122.7C1280,117,1360,75,1400,53.3L1440,32L1440,320L1400,320C1360,320,1280,320,1200,320C1120,320,1040,320,960,320C880,320,800,320,720,320C640,320,560,320,480,320C400,320,320,320,240,320C160,320,80,320,40,320L0,320Z"],[1,"heading"],[2,"cursor","pointer",3,"click"],["src","assets/Building.svg","alt",""],["id","wave2","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#007DDB","fill-opacity","0.29","d","M0,64L24,90.7C48,117,96,171,144,213.3C192,256,240,288,288,272C336,256,384,192,432,154.7C480,117,528,107,576,133.3C624,160,672,224,720,224C768,224,816,160,864,122.7C912,85,960,75,1008,69.3C1056,64,1104,64,1152,74.7C1200,85,1248,107,1296,112C1344,117,1392,107,1416,101.3L1440,96L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"],[1,"heading2"],[1,"right"],[2,"color","#007DDB"],[1,"left"],["src","assets/Paint.svg","alt",""],["id","wave3","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1440 320"],["fill","#007DDB","fill-opacity","0.29","d","M0,32L24,32C48,32,96,32,144,58.7C192,85,240,139,288,133.3C336,128,384,64,432,64C480,64,528,128,576,154.7C624,181,672,171,720,149.3C768,128,816,96,864,74.7C912,53,960,43,1008,48C1056,53,1104,75,1152,80C1200,85,1248,75,1296,112C1344,149,1392,235,1416,277.3L1440,320L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"],["id","saveDesigns",1,"heading2"],["src","assets/Save.svg","alt",""],["fill","#007DDB","fill-opacity","0.39","d","M0,64L24,90.7C48,117,96,171,144,213.3C192,256,240,288,288,272C336,256,384,192,432,154.7C480,117,528,107,576,133.3C624,160,672,224,720,224C768,224,816,160,864,122.7C912,85,960,75,1008,69.3C1056,64,1104,64,1152,74.7C1200,85,1248,107,1296,112C1344,117,1392,107,1416,101.3L1440,96L1440,0L1416,0C1392,0,1344,0,1296,0C1248,0,1200,0,1152,0C1104,0,1056,0,1008,0C960,0,912,0,864,0C816,0,768,0,720,0C672,0,624,0,576,0C528,0,480,0,432,0C384,0,336,0,288,0C240,0,192,0,144,0C96,0,48,0,24,0L0,0Z"],["id","extractText"],["src","assets/ColorExtractor.svg","alt","","id","colorExtractor"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),qs(2,"div",2),qs(3,"p"),Io(4,"Simply Patterns"),Ys(),Ys(),Ys(),qs(5,"div",3),nn(),qs(6,"svg",4),Ks(7,"path",5),Ys(),rn(),qs(8,"div",6),qs(9,"h1"),Io(10,"SVG Pattern Builder"),Ys(),qs(11,"p"),Io(12,"Pattern building software for designers who want to arrange their icons into patterns and sell them."),Ys(),qs(13,"button",7),no("click",function(){return e.signIn()}),Io(14,"Sign-Up"),Ys(),Ks(15,"img",8),Ys(),Ys(),qs(16,"div",3),nn(),qs(17,"svg",9),Ks(18,"path",10),Ys(),rn(),qs(19,"div",11),qs(20,"div",12),qs(21,"h1"),Io(22,"Generate Stunning "),Ks(23,"br"),Io(24," Color Palettes"),Ys(),qs(25,"p"),Io(26,"Try our FREE "),qs(27,"span",13),Io(28,"Palette Generator"),Ys(),Io(29," to find inspiration for your new designs."),Ys(),qs(30,"button"),Io(31,"Try Now"),Ys(),Ys(),qs(32,"div",14),Ks(33,"img",15),Ys(),Ys(),Ys(),qs(34,"div",3),nn(),qs(35,"svg",16),Ks(36,"path",17),Ys(),rn(),qs(37,"div",18),qs(38,"h1"),Io(39,"Save Your Designs"),Ys(),qs(40,"p"),Io(41,"Don't have time to finish creating your design? "),Ks(42,"br"),Io(43," Simply "),qs(44,"span",13),Io(45,"save your design"),Ys(),Io(46," to Google Drive & resume working on it whenever you want to!"),Ys(),Ks(47,"img",19),Ys(),Ys(),qs(48,"div",3),nn(),qs(49,"svg",9),Ks(50,"path",20),Ys(),rn(),qs(51,"div",11),qs(52,"div",12),qs(53,"h1"),Io(54,"Extract Colors From Images"),Ys(),qs(55,"p",21),Io(56,"Have you ever liked the colors of an image so much that you wanted to use it in a design? "),Ks(57,"br"),Io(58," Our "),qs(59,"span",13),Io(60,"Color Extractor"),Ys(),Io(61," allows you to do so with ease."),Ys(),Ys(),qs(62,"div",14),Ks(63,"img",22),Ys(),Ys(),Ys(),Ys())},styles:['@import url("https://fonts.googleapis.com/css2?family=Courgette&family=Merriweather+Sans&family=Oswald:wght@300&display=swap");*[_ngcontent-%COMP%]{color:#000}.mainBody[_ngcontent-%COMP%]{background-color:#fff}.header[_ngcontent-%COMP%]   .links[_ngcontent-%COMP%]{margin-top:-2vw;float:right;margin-right:2cm}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{font-size:2vw;padding-left:2cm;font-family:Courgette,cursive}.header[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#007ddb}#wave[_ngcontent-%COMP%]{position:absolute;bottom:100px}#wave2[_ngcontent-%COMP%]{margin-top:-100px}.launchPage_1[_ngcontent-%COMP%]{position:relative;height:100vh;width:100%}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:2cm;line-height:100%;color:#000;font-size:5vw}.heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{max-width:50%;padding-left:2cm}.heading[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5vw;width:15cm;line-height:2vw}.heading2[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{float:right;text-align:right;padding-right:2cm}.heading2[_ngcontent-%COMP%]   .left[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;float:left}.heading2[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{line-height:3vw;color:#000;font-size:3vw}#saveDesigns[_ngcontent-%COMP%]{padding-left:2cm}#saveDesigns[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{width:15cm;max-width:50%}#saveDesigns[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:35%;float:right;margin-top:-20%}.heading2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.5vw;max-width:10cm;min-width:10cm;line-height:2vw}.heading2[_ngcontent-%COMP%]   button[_ngcontent-%COMP%], .heading[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:2cm;font-size:1vw;padding:.4cm .6cm;background-color:#007ddb;color:#fff;border-radius:.6cm;z-index:100}.heading[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:50%;float:right;margin-top:-10%}.header[_ngcontent-%COMP%]{padding-top:1cm}.headerText[_ngcontent-%COMP%]{height:2cm;font-size:3vh;color:#007ddb}.headerIcon[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-left:2cm;font-size:1.7vw;color:#007ddb}#colorExtractor[_ngcontent-%COMP%]{margin-top:-4cm;padding-left:2cm;width:40%}#extractText[_ngcontent-%COMP%]{float:right;max-width:15cm}']}),t})(),aO=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-main"]],decls:1,vars:0,template:function(t,e){1&t&&Ks(0,"app-body")},directives:[oO],styles:["*[_ngcontent-%COMP%]{background-color:#011638;color:#53ff45;width:100%;height:100%;overflow:scroll}"]}),t})(),lO=(()=>{class t{constructor(){}ngOnInit(){}upload(){const t=document.getElementById("readImg");if(t.files[0]){const e=new FileReader;this.contentImage=new Image,e.readAsDataURL(t.files[0]),e.addEventListener("load",t=>{this.contentImage.src=t.target.result,document.getElementById("uploadedImage").setAttribute("src",this.contentImage.src),document.getElementById("contentContainer").style.display="block",document.getElementById("uploadedImage").style.display="block"})}}selectStyle(t,e){this.styleImage=new Image,this.styleImage.setAttribute("src","../../../assets/style-transfer/images/"+t),document.getElementById("stylesHeader").innerText=e+" selected"}processGeneratedImage(){this.styleImage&&this.contentImage||!this.styleImage&&this.contentImage&&window.alert("Please pick a style")}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=Vt({type:t,selectors:[["app-style-transfer"]],decls:38,vars:0,consts:[[2,"height","100%"],["size","9",2,"height","100%"],["type","file","id","readImg","accept","image/jpeg, image/png",3,"change"],["id","contentContainer",2,"height","100%","display","none"],["id","uploadedImage","alt","Content image","src","",2,"max-height","512px"],["color","medium",2,"display","block","margin","auto",3,"click"],["id","resultContainer",2,"height","100%","display","none"],[2,"height","50%"],["id","generatedImg","alt","generated image","src","",2,"max-height","512px"],["size","3",2,"height","100%"],["id","stylesHeader"],["size","12",2,"height","100%"],[3,"click"],["alt","Claude Monet style 1","src","../../../assets/style-transfer/images/style1.jpg"],["alt","Leonif Afremov style 2","src","../../../assets/style-transfer/images/style2.jpg"]],template:function(t,e){1&t&&(qs(0,"ion-content",0),qs(1,"ion-grid",0),qs(2,"ion-row",0),qs(3,"ion-col",1),qs(4,"ion-card",0),qs(5,"ion-card-header"),Io(6," Upload an image "),qs(7,"ion-item"),qs(8,"input",2),no("change",function(){return e.upload()}),Ys(),Ys(),Ys(),qs(9,"ion-card-content",0),qs(10,"ion-grid",0),qs(11,"ion-row",0),qs(12,"ion-col",3),qs(13,"ion-card"),Ks(14,"img",4),Ys(),qs(15,"ion-button",5),no("click",function(){return e.processGeneratedImage()}),Io(16,"Process"),Ys(),Ys(),qs(17,"ion-col",6),qs(18,"ion-card",7),Ks(19,"img",8),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),qs(20,"ion-col",9),qs(21,"ion-card",0),qs(22,"ion-card-header"),qs(23,"ion-item"),qs(24,"p",10),Io(25,"Select a style"),Ys(),Ys(),Ys(),qs(26,"ion-card-content",0),qs(27,"ion-grid",0),qs(28,"ion-row",7),qs(29,"ion-col",11),qs(30,"ion-card",12),no("click",function(){return e.selectStyle("style1.jpg","Claude Monet")}),Io(31," Claude Monet "),Ks(32,"img",13),Ys(),Ys(),Ys(),qs(33,"ion-row",7),qs(34,"ion-col",11),qs(35,"ion-card",12),no("click",function(){return e.selectStyle("style2.jpg","Leonid Afremov")}),Io(36," Leonid Afremov "),Ks(37,"img",14),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys(),Ys())},directives:[zm,Vm,Km,$m,Lm,jm,Hm,Fm,Rm],styles:[""]}),t})(),cO=(()=>{class t{constructor(t,e,n){this.gLoginService=t,this.ref=e,this.http=n}ngOnInit(){this.gLoginService.observable().subscribe(t=>{this.user=t,console.log(t),this.ref.detectChanges()})}signIn(){console.log("Test"),this.gLoginService.signIn()}signOut(){this.gLoginService.signOut()}printFile(){this.gLoginService.printFile("1uBUHbTjn1NuTIV6M9DhLHmT9dY1hs6Wm")}}return t.\u0275fac=function(e){return new(e||t)(Hs($y),Hs(Ma),Hs(ey))},t.\u0275cmp=Vt({type:t,selectors:[["app-g-login"]],decls:9,vars:0,consts:[[1,"wrapper"],[1,"container"],[1,"form"],[3,"click"],["src","./assets/icon/GoogleLogo.png","alt","Sign in With Google",2,"width","10%","height","10%"]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),qs(2,"h1"),Io(3,"Surface Pattern Accelerator"),Ys(),qs(4,"h2"),Io(5,"Sign in with:"),Ys(),qs(6,"form",2),qs(7,"button",3),no("click",function(){return e.signIn()}),Ks(8,"img",4),Ys(),Ys(),Ys(),Ys())},directives:[jg,lg,Dg],styles:["@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,300);*[_ngcontent-%COMP%]{box-sizing:border-box;margin:0;padding:0}*[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{font-weight:300}body[_ngcontent-%COMP%]{font-family:Source Sans Pro,sans-serif;color:#fff}.wrapper[_ngcontent-%COMP%]{background:#50a3a2;background:linear-gradient(30deg,#000,blue,green);background-size:300% 300%;animation:anima 20s ease-in-out infinite;position:absolute;top:0;left:0;width:100%;height:100%;overflow:hidden}.wrapper.form-success[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{transform:translateY(85px)}@keyframes anima{0%{background-position:0 100%}50%{background-position:100% 0}to{background-position:0 100%}}.container[_ngcontent-%COMP%]{max-width:600px;margin:0 auto;padding:80px 0;height:400px;text-align:center}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{padding-top:30%;font-size:40px}.container[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{transition-duration:1s;font-weight:200;color:#fff}.container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:30px}form[_ngcontent-%COMP%]{padding:20px 0;position:relative;z-index:2}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;appearance:none;outline:0;border:1px solid #000;width:400px;border-radius:3px;padding:10px 15px;margin:0 auto 10px;display:block;text-align:center;font-size:18px;color:#fff;transition-duration:.25s;font-weight:300}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-color:#fff}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:300px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{-webkit-appearance:none;-moz-appearance:none;margin:0 auto 10px;display:block;text-align:center;color:#fff;appearance:none;outline:0;background-color:#fff;border:0;padding:10px 15px;border-radius:3px;width:400px;cursor:pointer;font-size:18px;transition-duration:.25s}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#f5f7f9}"]}),t})();function hO(t,e){if(1&t&&(qs(0,"ion-select-option",12),Io(1),Ys()),2&t){const t=e.$implicit;uo("value",t.patternID),yr(1),Do(t.patternName)}}function uO(t,e){if(1&t){const t=Js();qs(0,"ion-item",9),qs(1,"ion-select",10),no("ngModelChange",function(e){return Ae(t),ao().patternService.selectedPatternID=e})("ionChange",function(){Ae(t);const e=ao();return e.patternService.getAndLoadSavedPattern(e.patternService.selectedPatternID,e.canvas)}),Gs(2,hO,2,2,"ion-select-option",11),Ys(),Ys()}if(2&t){const t=ao();yr(1),Ws("ngModel",t.patternService.selectedPatternID),yr(1),Ws("ngForOf",t.patternService.currentCollection.childPatterns)}}let dO=(()=>{class t{constructor(t,e,n,i,r){this.motifService=t,this.route=e,this.patternService=n,this.popoverController=i,this.http=r}ngOnInit(){this.canvas=new ky.fabric.Canvas("patternFrame_MotifEditor",{preserveObjectStacking:!0}),this.patternService.getAndLoadSavedPattern(this.patternService.selectedPatternID,this.canvas)}newPatternPopover(){}}return t.\u0275fac=function(e){return new(e||t)(Hs(zy),Hs(jd),Hs(Vy),Hs(Iv),Hs(ey))},t.\u0275cmp=Vt({type:t,selectors:[["app-motif-editor"]],decls:20,vars:1,consts:[[1,"maxHeight"],["size","7"],["size","1"],[2,"width","100%"],["size","10"],["class","patternSelect","style","height: 45px",4,"ngIf"],["id","patternFrame_MotifEditor","width","500px","height","500px",2,"border","#0d0d0d"],[1,"row"],["size","5","id","Modifiers",1,"tab-content"],[1,"patternSelect",2,"height","45px"],["interface","popover",3,"ngModel","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(t,e){1&t&&(qs(0,"ion-grid"),qs(1,"ion-row",0),qs(2,"ion-col",1),qs(3,"ion-row",2),qs(4,"ion-card",3),qs(5,"ion-card-content",3),qs(6,"ion-row"),qs(7,"ion-col",4),Gs(8,uO,3,2,"ion-item",5),Ys(),qs(9,"ion-col"),Ks(10,"div"),Ys(),Ys(),Ys(),Ys(),Ys(),qs(11,"ion-card"),qs(12,"ion-card-content",3),Ks(13,"canvas",6),Ks(14,"ion-row",7),Ys(),Ys(),Ys(),qs(15,"ion-col",8),qs(16,"ion-card"),qs(17,"ion-card-header"),Io(18," Editor "),Ys(),Ks(19,"ion-card-content"),Ys(),Ys(),Ys(),Ys()),2&t&&(yr(8),Ws("ngIf",e.patternService.checkIfPatternsExistAndSetDefault()))},directives:[Vm,Km,$m,Lm,Fm,Yc,jm,Hm,Qm,_m,ag,Fg,Xc,Jm],styles:["ion-card[_ngcontent-%COMP%]{height:100%;overflow:auto}[_ngcontent-%COMP%]::-webkit-scrollbar{width:1px}[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#000;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:grey;border-radius:5px}[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#000}ion-content[_ngcontent-%COMP%]{height:100%}.layerMotif[_ngcontent-%COMP%]{height:2cm}ion-grid[_ngcontent-%COMP%]{height:100%;width:100%}.customContext[_ngcontent-%COMP%]{position:fixed;background:#111;width:150px;z-index:100000;display:none}.customContext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;margin:0}.customContext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style-type:none;padding:10px 14px;border-bottom:1px solid red;color:gray;width:100%;cursor:pointer;transition:all .2s}.customContext[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background:#111;color:red}.maxHeight[_ngcontent-%COMP%], ion-col[_ngcontent-%COMP%]{height:100%}ion-col[_ngcontent-%COMP%]{--ion-grid-column-padding:0px}ion-card-content[_ngcontent-%COMP%]{padding:1px}ion-card-header[_ngcontent-%COMP%]{font-size:large;text-align:center;border-bottom:1px solid #708090;height:50px}ion-item[_ngcontent-%COMP%]{height:40px}.motifBtn[_ngcontent-%COMP%]{height:100%}.motifImg[_ngcontent-%COMP%]{width:100%;vertical-align:middle}.MotifImage[_ngcontent-%COMP%]{width:43%;height:4cm;text-align:center;margin-top:5px;margin-bottom:10px;margin-left:10px;border:1px solid #000;display:flex;align-items:center;float:left}.row[_ngcontent-%COMP%]{background:linear-gradient(90deg,#e6e5e5 13.5px,#0000 1%) 50%,linear-gradient(#e6e5e5 13.5px,#0000 1%) 50%,#381994;background-size:15px 15px;width:100%}#can[_ngcontent-%COMP%]{width:600px;height:600px;margin:15px}#can[_ngcontent-%COMP%], #container[_ngcontent-%COMP%]{border:3px solid #000;background-color:#fff}#container[_ngcontent-%COMP%]{text-align:center}.view[_ngcontent-%COMP%], .workArea[_ngcontent-%COMP%]{text-align:center;margin:15px}#preview[_ngcontent-%COMP%], .view[_ngcontent-%COMP%], .workArea[_ngcontent-%COMP%]{width:600px;height:600px;border:1px solid grey}#preview[_ngcontent-%COMP%]{position:relative;top:2px;right:2px;background-color:#d3d3d3;display:none;margin:5px}.layerNumbers[_ngcontent-%COMP%]{border:1px solid grey}.layerBorder[_ngcontent-%COMP%]{padding:5px;text-align:center}@media screen and (max-width:1500px){.button-text[_ngcontent-%COMP%]{display:none}}"]}),t})(),fO=(()=>{class t{constructor(t,e,n,i,r){this.gLoginService=t,this.collectionsService=e,this.http=n,this.router=i,this.serverLink=r,this.paymentHandler=null}ngOnInit(){this.invokeStripe()}makePayment(t){window.StripeCheckout.configure({key:"pk_test_51JWIZsHgVOPspuvRuKmrbhqQPeDeAwXgEhDYztocJWUJEYGI5b5Ciy2w5S7sXTgJ5qb1bLV0nOiTzYee6tscNPyS00hb8s0dAg",locale:"auto",token:t=>{this.stripe=t,console.log(this.stripe),this.http.post(this.serverLink.getServerLink()+"/api/makePayment",{userID:this.gLoginService.getUserDetails().getId(),card_id:0,stripeID:t.created,userEmail:this.gLoginService.getUserDetails().getBasicProfile().getEmail(),dateLastPayed:"0000-00-00",freeTrial:0}).subscribe(t=>{console.log("payment success"),this.gLoginService.hasPaid=!0,console.log(t),this.router.navigate(["collections"])},t=>{console.log(t),console.log("failed")})}}).open({name:"Surface Pattern Accelerator",description:"Yearly subscription",amount:100*t})}invokeStripe(){if(!window.document.getElementById("stripe-script")){const t=window.document.createElement("script");t.id="stripe-script",t.type="text/javascript",t.src="https://checkout.stripe.com/checkout.js",t.onload=()=>{this.paymentHandler=window.StripeCheckout.configure({key:"pk_test_51JWIZsHgVOPspuvRuKmrbhqQPeDeAwXgEhDYztocJWUJEYGI5b5Ciy2w5S7sXTgJ5qb1bLV0nOiTzYee6tscNPyS00hb8s0dAg",locale:"auto",token:function(t){console.log(t),console.log("invokeStripe"),alert("Payment has been successfull!")}})},window.document.body.appendChild(t)}}}return t.\u0275fac=function(e){return new(e||t)(Hs($y),Hs(_y),Hs(ey),Hs(ap),Hs(gy))},t.\u0275cmp=Vt({type:t,selectors:[["app-payment"]],decls:14,vars:0,consts:[[1,"parent"],[1,"left"],[1,"words"],[1,"button"],[1,"dropbtn",3,"click"],[1,"right"],["src","../../../assets/payment.svg","alt",""]],template:function(t,e){1&t&&(qs(0,"div",0),qs(1,"div",1),qs(2,"div",2),qs(3,"h2"),Io(4,"Get access to all 'Simply patterns' features"),Ys(),qs(5,"p"),Io(6,"Enjoy your creations ad-free!"),Ys(),qs(7,"p"),Io(8,"Make a once-off payment"),Ys(),Ys(),qs(9,"div",3),qs(10,"button",4),no("click",function(){return e.makePayment(5)}),Io(11,"Pay $5.00 "),Ys(),Ys(),Ys(),qs(12,"div",5),Ks(13,"img",6),Ys(),Ys())},styles:["#checkout-button[_ngcontent-%COMP%]{color:#000}.left[_ngcontent-%COMP%]{float:left;width:45%;margin-left:20px;background:#6772e5;padding:20px;border:2px solid #fff}.right[_ngcontent-%COMP%]{position:absolute;right:0;width:45%}.parent[_ngcontent-%COMP%]{position:relative;padding-top:10%;background-image:linear-gradient(45deg,#fff 50%,#6772e5 0);border:3px solid #011638;width:100%;height:100%}.dropbtn[_ngcontent-%COMP%]{background:#343866;color:#fff;padding:12px 20px;font-size:16px;border:none}h2[_ngcontent-%COMP%]{font-size:25px}p[_ngcontent-%COMP%]{font-size:16px}.button[_ngcontent-%COMP%]{align-items:center;justify-content:center;display:flex;flex-direction:column;padding:20px 0}.words[_ngcontent-%COMP%]{font-family:Arial,sans-serif;color:#fff;text-align:center}#wave[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0}.words[_ngcontent-%COMP%]{width:auto}"]}),t})(),pO=(()=>{class t{constructor(t,e,n,i){this.router=t,this.gLoginService=e,this.http=n,this.serverLink=i,this.hasPayed=!1}canActivate(){if(this.gLoginService.getUserDetails()&&this.gLoginService.getUserDetails().isSignedIn()){if(0!=this.gLoginService.hasPaid)return!0;alert("Please make a payment to access these features"),this.router.navigate(["payment"])}else alert("Please sign in with Google to access these features"),this.router.navigate(["/"]);return!1}}return t.\u0275fac=function(e){return new(e||t)(hi(ap),hi($y),hi(ey),hi(gy))},t.\u0275prov=ut({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const gO=[{path:"",component:aO},{path:"login",component:nO},{path:"collections",component:Cy},{path:"collectionCreator",component:xy},{path:"color-palette",component:bx,canActivate:[pO]},{path:"pattern",component:_x},{path:"loginResponse",component:iO},{path:"canvasColours",component:wx,canActivate:[pO]},{path:"preview",component:eO},{path:"color",component:rO,canActivate:[pO]},{path:"newCollection",component:sO},{path:"style-transfer",component:lO,canActivate:[pO]},{path:"newCollection",component:sO},{path:"glogin",component:cO},{path:"motifEditor",component:dO},{path:"payment",component:fO}];let mO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({imports:[[_p.forRoot(gO,{preloadingStrategy:up})],_p]}),t})(),vO=(()=>{class t{constructor(t){this.router=t}ngOnInit(){console.log("this.router.url",this.router.url)}}return t.\u0275fac=function(e){return new(e||t)(Hs(ap))},t.\u0275cmp=Vt({type:t,selectors:[["app-root"]],decls:23,vars:0,consts:[["slot","top",1,"top-nav"],["tab","pattern","layout","icon-end"],["name","apps-outline"],["tab","color","layout","icon-end"],["name","color-palette-outline"],["tab","canvasColours","layout","icon-end"],["name","brush-outline"],["tab","color-palette","layout","icon-end"],["name","color-filter-outline"],["tab","style-transfer","layout","icon-end"],["name","color-wand-outline"]],template:function(t,e){1&t&&(qs(0,"ion-tabs"),qs(1,"ion-tab-bar",0),qs(2,"ion-tab-button",1),Ks(3,"ion-icon",2),qs(4,"ion-label"),Io(5,"Pattern"),Ys(),Ys(),qs(6,"ion-tab-button",3),Ks(7,"ion-icon",4),qs(8,"ion-label"),Io(9,"Color Editor"),Ys(),Ys(),qs(10,"ion-tab-button",5),Ks(11,"ion-icon",6),qs(12,"ion-label"),Io(13,"Colour Extractor"),Ys(),Ys(),qs(14,"ion-tab-button",7),Ks(15,"ion-icon",8),qs(16,"ion-label"),Io(17,"Colour Palette"),Ys(),Ys(),qs(18,"ion-tab-button",9),Ks(19,"ion-icon",10),qs(20,"ion-label"),Io(21," Image style transfer"),Ys(),Ys(),Ys(),Ys(),Ks(22,"router-outlet"))},directives:[Ev,tv,ev,Gm,Wm,lp],styles:[".top-nav[_ngcontent-%COMP%]{height:40px;top:40px!important}"]}),t})();class yO extends x{constructor(){super(...arguments),this.value=null,this.hasNext=!1,this.hasCompleted=!1}_subscribe(t){return this.hasError?(t.error(this.thrownError),u.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),u.EMPTY):super._subscribe(t)}next(t){this.hasCompleted||(this.value=t,this.hasNext=!0)}error(t){this.hasCompleted||super.error(t)}complete(){this.hasCompleted=!0,this.hasNext&&super.next(this.value),super.complete()}}class _O{}let bO=(()=>{class t extends class{constructor(){}loadScript(t,e,n,i=null){if("undefined"!=typeof document&&!document.getElementById(t)){let t=document.createElement("script");t.async=!0,t.src=e,t.onload=n,i||(i=document.head),i.appendChild(t)}}}{constructor(t,e={scope:"email"}){super(),this.clientId=t,this.initOptions=e}initialize(){return new Promise((e,n)=>{try{this.loadScript(t.PROVIDER_ID,"https://apis.google.com/js/platform.js",()=>{gapi.load("auth2",()=>{this.auth2=gapi.auth2.init(Object.assign(Object.assign({},this.initOptions),{client_id:this.clientId})),this.auth2.then(()=>{e()}).catch(t=>{n(t)})})})}catch(i){n(i)}})}getLoginStatus(e){const n=Object.assign(Object.assign({},this.initOptions),e);return new Promise((e,i)=>{if(this.auth2.isSignedIn.get()){let t=new _O;const i=this.auth2.currentUser.get().getBasicProfile(),r=this.auth2.currentUser.get().getAuthResponse(!0);t.id=i.getId(),t.name=i.getName(),t.email=i.getEmail(),t.photoUrl=i.getImageUrl(),t.firstName=i.getGivenName(),t.lastName=i.getFamilyName(),t.response=r;const s=n=>{t.authToken=n.access_token,t.idToken=n.id_token,e(t)};n.refreshToken?this.auth2.currentUser.get().reloadAuthResponse().then(s):s(this.auth2.currentUser.get().getAuthResponse(!0))}else i(`No user is currently logged in with ${t.PROVIDER_ID}`)})}signIn(t){const e=Object.assign(Object.assign({},this.initOptions),t);return new Promise((n,i)=>{(e&&e.offline_access?this.auth2.grantOfflineAccess(t):this.auth2.signIn(t)).then(t=>{let e=new _O;if(t&&t.code)e.authorizationCode=t.code;else{let t=this.auth2.currentUser.get().getBasicProfile(),n=this.auth2.currentUser.get().getAuthResponse(!0),i=n.access_token,r=n.id_token;e.id=t.getId(),e.name=t.getName(),e.email=t.getEmail(),e.photoUrl=t.getImageUrl(),e.firstName=t.getGivenName(),e.lastName=t.getFamilyName(),e.authToken=i,e.idToken=r,e.response=n}n(e)},t=>{i(t)}).catch(t=>{i(t)})})}signOut(t){return new Promise((e,n)=>{let i;i=t?this.auth2.disconnect():this.auth2.signOut(),i.then(t=>{t?n(t):e()}).catch(t=>{n(t)})})}}return t.PROVIDER_ID="GOOGLE",t})(),wO=(()=>{class t{constructor(t){this.providers=new Map,this.autoLogin=!1,this._user=null,this._authState=new jy(1),this.initialized=!1,this._initState=new yO,t instanceof Promise?t.then(t=>{this.initialize(t)}):this.initialize(t)}get authState(){return this._authState.asObservable()}get initState(){return this._initState.asObservable()}initialize(t){this.autoLogin=void 0!==t.autoLogin&&t.autoLogin;const{onError:e=console.error}=t;t.providers.forEach(t=>{this.providers.set(t.id,t.provider)}),Promise.all(Array.from(this.providers.values()).map(t=>t.initialize())).then(()=>{if(this.autoLogin){const t=[];let e=!1;this.providers.forEach((n,i)=>{let r=n.getLoginStatus();t.push(r),r.then(t=>{t.provider=i,this._user=t,this._authState.next(t),e=!0}).catch(console.debug)}),Promise.all(t).catch(()=>{e||(this._user=null,this._authState.next(null))})}}).catch(t=>{e(t)}).finally(()=>{this.initialized=!0,this._initState.next(this.initialized),this._initState.complete()})}refreshAuthToken(e){return new Promise((n,i)=>{if(this.initialized)if(e!==bO.PROVIDER_ID)i(t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN);else{const r=this.providers.get(e);r?r.getLoginStatus({refreshToken:!0}).then(t=>{t.provider=e,this._user=t,this._authState.next(t),n()}).catch(t=>{i(t)}):i(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(t.ERR_NOT_INITIALIZED)})}signIn(e,n){return new Promise((i,r)=>{if(this.initialized){let s=this.providers.get(e);s?s.signIn(n).then(t=>{t.provider=e,i(t),this._user=t,this._authState.next(t)}).catch(t=>{r(t)}):r(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else r(t.ERR_NOT_INITIALIZED)})}signOut(e=!1){return new Promise((n,i)=>{if(this.initialized)if(this._user){let r=this.providers.get(this._user.provider);r?r.signOut(e).then(()=>{n(),this._user=null,this._authState.next(null)}).catch(t=>{i(t)}):i(t.ERR_LOGIN_PROVIDER_NOT_FOUND)}else i(t.ERR_NOT_LOGGED_IN);else i(t.ERR_NOT_INITIALIZED)})}}return t.\u0275fac=function(e){return new(e||t)(hi("SocialAuthServiceConfig"))},t.\u0275prov=ut({token:t,factory:t.\u0275fac}),t.ERR_LOGIN_PROVIDER_NOT_FOUND="Login provider not found",t.ERR_NOT_LOGGED_IN="Not logged in",t.ERR_NOT_INITIALIZED="Login providers not ready yet. Are there errors on your console?",t.ERR_NOT_SUPPORTED_FOR_REFRESH_TOKEN="Chosen login provider is not supported for refreshing a token",t})(),CO=(()=>{class t{constructor(t){if(t)throw new Error("SocialLoginModule is already loaded. Import it in the AppModule only")}static initialize(e){return{ngModule:t,providers:[wO,{provide:"SocialAuthServiceConfig",useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)(hi(t,12))},t.\u0275mod=Wt({type:t}),t.\u0275inj=dt({providers:[wO],imports:[[eh]]}),t})(),xO=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=Wt({type:t,bootstrap:[vO]}),t.\u0275inj=dt({providers:[{provide:Yf,useClass:Dv},{provide:"SocialAuthServiceConfig",useValue:{autoLogin:!1,providers:[{id:bO.PROVIDER_ID,provider:new bO("838530253471-o3arioj6ta566o6eg8140npcvb7a59tv.apps.googleusercontent.com")}]}}],imports:[[Lh,mO,py,Gg,Ug,TC,eE,zE,tO,ZC,CO,Fv.forRoot(),mO,TC]]}),t})();(function(){if(rc)throw new Error("Cannot enable prod mode after platform setup.");ic=!1})(),Dh().bootstrapModule(xO).catch(t=>console.log(t))},863:(t,e,n)=>{var i={"./ion-action-sheet.entry.js":[2756,8592,2756],"./ion-alert.entry.js":[4558,8592,4558],"./ion-app_8.entry.js":[6503,8592,6503],"./ion-avatar_3.entry.js":[608,8592,608],"./ion-back-button.entry.js":[1229,8592,1229],"./ion-backdrop.entry.js":[9561,9561],"./ion-button_2.entry.js":[8013,8592,8013],"./ion-card_5.entry.js":[7355,8592,7355],"./ion-checkbox.entry.js":[8377,8592,8377],"./ion-chip.entry.js":[2899,8592,2899],"./ion-col_3.entry.js":[9690,9690],"./ion-datetime_3.entry.js":[648,8592,648],"./ion-fab_3.entry.js":[5102,8592,5102],"./ion-img.entry.js":[4054,4054],"./ion-infinite-scroll_2.entry.js":[5269,8592,5269],"./ion-input.entry.js":[845,8592,845],"./ion-item-option_3.entry.js":[7438,8592,7438],"./ion-item_8.entry.js":[497,8592,497],"./ion-loading.entry.js":[7701,8592,7701],"./ion-menu_3.entry.js":[2441,8592,2441],"./ion-modal.entry.js":[9238,8592,9238],"./ion-nav_2.entry.js":[5798,8592,5798],"./ion-popover.entry.js":[8082,8592,8082],"./ion-progress-bar.entry.js":[1864,8592,1864],"./ion-radio_2.entry.js":[202,8592,202],"./ion-range.entry.js":[1988,8592,1988],"./ion-refresher_2.entry.js":[5643,8592,5643],"./ion-reorder_2.entry.js":[4473,8592,4473],"./ion-ripple-effect.entry.js":[8588,8588],"./ion-route_4.entry.js":[2981,8592,2981],"./ion-searchbar.entry.js":[6726,8592,6726],"./ion-segment_2.entry.js":[134,8592,134],"./ion-select_3.entry.js":[8955,8592,8955],"./ion-slide_2.entry.js":[966,966],"./ion-spinner.entry.js":[5737,8592,5737],"./ion-split-pane.entry.js":[1761,1761],"./ion-tab-bar_2.entry.js":[2099,8592,2099],"./ion-tab_2.entry.js":[5670,8592,5670],"./ion-text.entry.js":[9605,8592,9605],"./ion-textarea.entry.js":[7809,8592,7809],"./ion-toast.entry.js":[7132,8592,7132],"./ion-toggle.entry.js":[4468,8592,4468],"./ion-virtual-scroll.entry.js":[172,172]};function r(t){if(!n.o(i,t))return Promise.resolve().then(()=>{var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e});var e=i[t],r=e[0];return Promise.all(e.slice(1).map(n.e)).then(()=>n(r))}r.keys=()=>Object.keys(i),r.id=863,t.exports=r},4960:()=>{},6759:()=>{},6272:()=>{}},t=>{"use strict";t(t.s=6809)}]);